var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("app",["require","exports","./framework"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.$scope={bindingContext:t},t}return __extends(t,e),t.prototype.hydrate=function(e){this.$host=e,e.innerHTML=t.$html;var n=r.getTargets(e);this.$b1=new r.OneWay(this.$scope,"message",n[0],"textContent"),this.$b2=new r.TwoWay(this.$scope,"message",n[1],"value")},t.prototype.bind=function(){this.$b1.bind(),this.$b2.bind()},t.$html='\n    <div>\n      <span class="au"></span><br>\n      <input type="text" class="au">\n    </div>\n  ',t}(function(){function e(){this.$observers={message:new r.Observer("Hello World!")}}return Object.defineProperty(e.prototype,"message",{get:function(){return this.$observers.message.getValue()},set:function(e){this.$observers.message.setValue(e)},enumerable:!0,configurable:!0}),e}());t.App=n}),define("environment",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={debug:!1,testing:!1}});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.subscribers=[],this.currentValue=e}return e.prototype.getValue=function(){return this.currentValue},e.prototype.setValue=function(e){var t=this.currentValue;this.currentValue=e,this.subscribers.forEach(function(r){return r.callable.call(r.context,e,t)})},e.prototype.subscribe=function(e,t){this.subscribers.push({callable:e,context:t})},e}();function n(e,t,r){var n=t.overrideContext;if(r){for(;r&&n;)r--,n=n.parentOverrideContext;if(r||!n)return;return e in n?n:n.bindingContext}for(;n&&!(e in n)&&!(n.bindingContext&&e in n.bindingContext);)n=n.parentOverrideContext;return n?e in n?n:n.bindingContext:t.bindingContext||t.overrideContext}t.Observer=r,t.getTargets=function(e){return e.getElementsByClassName("au")},t.getContextFor=n;var o=function(){function e(e,t){void 0===t&&(t=0),this.name=e,this.ancestor=t,this.name=e}return e.prototype.evaluate=function(e,t){return n(this.name,e,this.ancestor)[this.name]},e.prototype.assign=function(e,t){var r=n(this.name,e,this.ancestor);return r?r[this.name]=t:void 0},e.prototype.connect=function(e,t){var r=n(this.name,t,this.ancestor);e.observeProperty(r,this.name)},e}(),i={message:new o("message"),textContent:new o("textContent"),value:new o("value")},s=function(){function e(e,t,r,n){this.source=e,this.sourceExpression=t,this.target=r,this.targetProperty=n,this.sourceAst=i[t]}return e.prototype.bind=function(){this.target[this.targetProperty]=this.sourceAst.evaluate(this.source,null),this.sourceAst.connect(this,this.source)},e.prototype.observeProperty=function(e,t){e.$observers[t].subscribe(this,"source")},e.prototype.call=function(e,t,r){"source"==e&&(this.target[this.targetProperty]=this.sourceAst.evaluate(this.source,null))},e}();t.OneWay=s;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.bind=function(){var t=this;e.prototype.bind.call(this),this.target.addEventListener("input",function(){return t.sourceAst.assign(t.source,t.target[t.targetProperty])})},t}(s);t.TwoWay=u}),define("main",["require","exports","./app"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new r.App;n.hydrate(document.body),n.bind()}),define("framework/array-change-records",["require","exports"],function(e,t){"use strict";function r(e,t,r){return{index:e,removed:t,addedCount:r}}Object.defineProperty(t,"__esModule",{value:!0});function n(){}n.prototype={calcEditDistances:function(e,t,r,n,o,i){for(var s,u,a=i-o+1,c=r-t+1,l=new Array(a),h=0;h<a;++h)l[h]=new Array(c),l[h][0]=h;for(var p=0;p<c;++p)l[0][p]=p;for(h=1;h<a;++h)for(p=1;p<c;++p)this.equals(e[t+p-1],n[o+h-1])?l[h][p]=l[h-1][p-1]:(s=l[h-1][p]+1,u=l[h][p-1]+1,l[h][p]=s<u?s:u);return l},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,r=e[0].length-1,n=e[t][r],o=[];t>0||r>0;)if(0!==t)if(0!==r){var i=e[t-1][r-1],s=e[t-1][r],u=e[t][r-1],a=void 0;(a=s<u?s<i?s:i:u<i?u:i)===i?(i===n?o.push(0):(o.push(1),n=i),t--,r--):a===s?(o.push(3),t--,n=s):(o.push(2),r--,n=u)}else o.push(3),t--;else o.push(2),r--;return o.reverse(),o},calcSplices:function(e,t,n,o,i,s){var u=0,a=0,c=Math.min(n-t,s-i);if(0===t&&0===i&&(u=this.sharedPrefix(e,o,c)),n===e.length&&s===o.length&&(a=this.sharedSuffix(e,o,c-u)),i+=u,s-=a,(n-=a)-(t+=u)==0&&s-i==0)return[];if(t===n){for(var l=r(t,[],0);i<s;)l.removed.push(o[i++]);return[l]}if(i===s)return[r(t,[],n-t)];for(var h=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,o,i,s)),p=void 0,f=[],d=t,v=i,y=0;y<h.length;++y)switch(h[y]){case 0:p&&(f.push(p),p=void 0),d++,v++;break;case 1:p||(p=r(d,[],0)),p.addedCount++,d++,p.removed.push(o[v]),v++;break;case 2:p||(p=r(d,[],0)),p.addedCount++,d++;break;case 3:p||(p=r(d,[],0)),p.removed.push(o[v]),v++}return p&&f.push(p),f},sharedPrefix:function(e,t,r){for(var n=0;n<r;++n)if(!this.equals(e[n],t[n]))return n;return r},sharedSuffix:function(e,t,r){for(var n=e.length,o=t.length,i=0;i<r&&this.equals(e[--n],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var o=new n;function i(e,t,r,n,i,s){return o.calcSplices(e,t,r,n,i,s)}function s(e,t,n,o){for(var i,s,u,a,c=r(t,n,o),l=!1,h=0,p=0;p<e.length;p++){var f=e[p];if(f.index+=h,!l){var d=(i=c.index,s=c.index+c.removed.length,u=f.index,a=f.index+f.addedCount,s<u||a<i?-1:s===u||a===i?0:i<u?s<a?s-u:a-u:a<s?a-i:s-i);if(d>=0){e.splice(p,1),p--,h-=f.addedCount-f.removed.length,c.addedCount+=f.addedCount-d;var v=c.removed.length+f.removed.length-d;if(c.addedCount||v){var y=f.removed;if(c.index<f.index){var b=c.removed.slice(0,f.index-c.index);Array.prototype.push.apply(b,y),y=b}if(c.index+c.removed.length>f.index+f.addedCount){var m=c.removed.slice(f.index+f.addedCount-c.index);Array.prototype.push.apply(y,m)}c.removed=y,f.index<c.index&&(c.index=f.index)}else l=!0}else if(c.index<f.index){l=!0,e.splice(p,0,c),p++;var g=c.addedCount-c.removed.length;f.index+=g,h+=g}}}l||e.push(c)}t.calcSplices=i,t.mergeSplice=s,t.projectArraySplices=function(e,t){var r=[];return function(e,t){for(var r,n=[],o=0;o<t.length;o++){var i=t[o];switch(i.type){case"splice":s(n,i.index,i.removed.slice(),i.addedCount);break;case"add":case"update":case"delete":if(+(r=i.name)!=r>>>0)continue;var u=+i.name;if(u<0)continue;s(n,u,[i.oldValue],"delete"===i.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(i))}}return n}(0,t).forEach(function(t){1!==t.addedCount||1!==t.removed.length?r=r.concat(i(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)):t.removed[0]!==e[t.index]&&r.push(t)}),r}}),define("framework/ast",["require","exports","./scope","./signals"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.expressions=e}return e.prototype.evaluate=function(e,t){for(var r,n,o=this.expressions,i=0,s=o.length;i<s;++i)null!==(n=o[i].evaluate(e,t))&&(r=n);return r},e}();t.Chain=o;var i=function(){function e(e,t,r){this.expression=e,this.name=t,this.args=r}return e.prototype.evaluate=function(e,t){return this.expression.evaluate(e,t)},e.prototype.assign=function(e,t,r){return this.expression.assign(e,t,r)},e.prototype.connect=function(e,t){this.expression.connect(e,t)},e.prototype.bind=function(e,t,r){this.expression.expression&&this.expression.bind&&this.expression.bind(e,t,r);var n=r.bindingBehaviors(this.name);if(!n)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var o="behavior-"+this.name;if(e[o])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');e[o]=n,n.bind.apply(n,[e,t].concat(O(t,this.args,e.lookupFunctions)))},e.prototype.unbind=function(e,t){var r="behavior-"+this.name;e[r].unbind(e,t),e[r]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(e,t)},e}();t.BindingBehavior=i;var s=function(){function e(e,t,r,n){this.expression=e,this.name=t,this.args=r,this.allArgs=n}return e.prototype.evaluate=function(e,t){var r=t.valueConverters(this.name);if(!r)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in r?r.toView.apply(r,O(e,this.allArgs,t)):this.allArgs[0].evaluate(e,t)},e.prototype.assign=function(e,t,r){var n=r.valueConverters(this.name);if(!n)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in n&&(t=n.fromView.apply(n,[t].concat(O(e,this.args,r)))),this.allArgs[0].assign(e,t,r)},e.prototype.connect=function(e,t){for(var r=this.allArgs,o=r.length;o--;)r[o].connect(e,t);var i=e.lookupFunctions.valueConverters(this.name);if(!i)throw new Error('No ValueConverter named "'+this.name+'" was found!');var s=i.signals;if(void 0!==s)for(o=s.length;o--;)n.connectBindingToSignal(e,s[o])},e}();t.ValueConverter=s;var u=function(){function e(e,t){this.target=e,this.value=t}return e.prototype.evaluate=function(e,t){return this.target.assign(e,this.value.evaluate(e,t))},e.prototype.connect=function(e,t){},e.prototype.assign=function(e,t){this.value.assign(e,t),this.target.assign(e,t)},e}();t.Assign=u;var a=function(){function e(e,t,r){this.condition=e,this.yes=t,this.no=r}return e.prototype.evaluate=function(e,t){return this.condition.evaluate(e,t)?this.yes.evaluate(e,t):this.no.evaluate(e,t)},e.prototype.connect=function(e,t){this.condition.connect(e,t),this.condition.evaluate(t)?this.yes.connect(e,t):this.no.connect(e,t)},e}();t.Conditional=a;var c=function(){function e(e){this.ancestor=e}return e.prototype.evaluate=function(e,t){for(var r=e.overrideContext,n=this.ancestor;n--&&r;)r=r.parentOverrideContext;return n<1&&r?r.bindingContext:void 0},e.prototype.connect=function(e,t){},e}();t.AccessThis=c;var l=function(){function e(e,t){this.name=e,this.ancestor=t}return e.prototype.evaluate=function(e,t){return r.getContextFor(this.name,e,this.ancestor)[this.name]},e.prototype.assign=function(e,t){var n=r.getContextFor(this.name,e,this.ancestor);return n?n[this.name]=t:void 0},e.prototype.connect=function(e,t){var n=r.getContextFor(this.name,t,this.ancestor);e.observeProperty(n,this.name)},e}();t.AccessScope=l;var h=function(){function e(e,t){this.object=e,this.name=t}return e.prototype.evaluate=function(e,t){var r=this.object.evaluate(e,t);return null===r||void 0===r?r:r[this.name]},e.prototype.assign=function(e,t){var r=this.object.evaluate(e);return null!==r&&void 0!==r||(r={},this.object.assign(e,r)),r[this.name]=t,t},e.prototype.connect=function(e,t){this.object.connect(e,t);var r=this.object.evaluate(t);r&&e.observeProperty(r,this.name)},e}();t.AccessMember=h;var p=function(){function e(e,t){this.object=e,this.key=t}return e.prototype.evaluate=function(e,t){return function(e,t){{if(Array.isArray(e))return e[parseInt(t,10)];if(e)return e[t];if(null===e||void 0===e)return}return e[t]}(this.object.evaluate(e,t),this.key.evaluate(e,t))},e.prototype.assign=function(e,t){return function(e,t,r){if(Array.isArray(e)){var n=parseInt(t,10);e.length<=n&&(e.length=n+1),e[n]=r}else e[t]=r;return r}(this.object.evaluate(e),this.key.evaluate(e),t)},e.prototype.connect=function(e,t){this.object.connect(e,t);var r=this.object.evaluate(t);if(r instanceof Object){this.key.connect(e,t);var n=this.key.evaluate(t);null===n||void 0===n||Array.isArray(r)&&"number"==typeof n||e.observeProperty(r,n)}},e}();t.AccessKeyed=p;var f=function(){function e(e,t,r){this.name=e,this.args=t,this.ancestor=r}return e.prototype.evaluate=function(e,t,n){var o=O(e,this.args,t),i=r.getContextFor(this.name,e,this.ancestor),s=k(i,this.name,n);if(s)return s.apply(i,o)},e.prototype.connect=function(e,t){for(var r=this.args,n=r.length;n--;)r[n].connect(e,t)},e}();t.CallScope=f;var d=function(){function e(e,t,r){this.object=e,this.name=t,this.args=r}return e.prototype.evaluate=function(e,t,r){var n=this.object.evaluate(e,t),o=O(e,this.args,t),i=k(n,this.name,r);if(i)return i.apply(n,o)},e.prototype.connect=function(e,t){if(this.object.connect(e,t),k(this.object.evaluate(t),this.name,!1))for(var r=this.args,n=r.length;n--;)r[n].connect(e,t)},e}();t.CallMember=d;var v=function(){function e(e,t){this.func=e,this.args=t}return e.prototype.evaluate=function(e,t,r){var n=this.func.evaluate(e,t);if("function"==typeof n)return n.apply(null,O(e,this.args,t));if(r||null!==n&&void 0!==n)throw new Error(this.func+" is not a function")},e.prototype.connect=function(e,t){if(this.func.connect(e,t),"function"==typeof this.func.evaluate(t))for(var r=this.args,n=r.length;n--;)r[n].connect(e,t)},e}();t.CallFunction=v;var y=function(){function e(e,t,r){this.operation=e,this.left=t,this.right=r}return e.prototype.evaluate=function(e,t){var r=this.left.evaluate(e,t);switch(this.operation){case"&&":return r&&this.right.evaluate(e,t);case"||":return r||this.right.evaluate(e,t)}var n=this.right.evaluate(e,t);switch(this.operation){case"==":return r==n;case"===":return r===n;case"!=":return r!=n;case"!==":return r!==n}if(null===r||null===n||void 0===r||void 0===n){switch(this.operation){case"+":return null!==r&&void 0!==r?r:null!==n&&void 0!==n?n:0;case"-":return null!==r&&void 0!==r?r:null!==n&&void 0!==n?0-n:0}return null}switch(this.operation){case"+":return function(e,t){if(null!==e&&null!==t)return"string"==typeof e&&"string"!=typeof t?e+t.toString():"string"!=typeof e&&"string"==typeof t?e.toString()+t:e+t;if(null!==e)return e;if(null!==t)return t;return 0}(r,n);case"-":return r-n;case"*":return r*n;case"/":return r/n;case"%":return r%n;case"<":return r<n;case">":return r>n;case"<=":return r<=n;case">=":return r>=n;case"^":return r^n}throw new Error("Internal error ["+this.operation+"] not handled")},e.prototype.connect=function(e,t){this.left.connect(e,t);var r=this.left.evaluate(t);"&&"===this.operation&&!r||"||"===this.operation&&r||this.right.connect(e,t)},e}();t.Binary=y;var b=function(){function e(e,t){this.operation=e,this.expression=t}return e.prototype.evaluate=function(e,t){return!this.expression.evaluate(e,t)},e.prototype.connect=function(e,t){this.expression.connect(e,t)},e}();t.PrefixNot=b;var m=function(){function e(e){this.value=e}return e.prototype.evaluate=function(e,t){return this.value},e.prototype.connect=function(e,t){},e}();t.LiteralPrimitive=m;var g=function(){function e(e){this.value=e}return e.prototype.evaluate=function(e,t){return this.value},e.prototype.connect=function(e,t){},e}();t.LiteralString=g;var _=function(){function e(e){this.elements=e}return e.prototype.evaluate=function(e,t){for(var r=this.elements,n=[],o=0,i=r.length;o<i;++o)n[o]=r[o].evaluate(e,t);return n},e.prototype.connect=function(e,t){for(var r=this.elements.length,n=0;n<r;n++)this.elements[n].connect(e,t)},e}();t.LiteralArray=_;var x=function(){function e(e,t){this.keys=e,this.values=t}return e.prototype.evaluate=function(e,t){for(var r={},n=this.keys,o=this.values,i=0,s=n.length;i<s;++i)r[n[i]]=o[i].evaluate(e,t);return r},e.prototype.connect=function(e,t){for(var r=this.keys.length,n=0;n<r;n++)this.values[n].connect(e,t)},e}();function O(e,t,r){for(var n=t.length,o=[],i=0;i<n;i++)o[i]=t[i].evaluate(e,r);return o}function k(e,t,r){var n=null===e||void 0===e?null:e[t];if("function"==typeof n)return n;if(!r&&(null===n||void 0===n))return null;throw new Error(t+" is not a function")}t.LiteralObject=x}),define("framework/binding-mode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindingMode={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3}}),define("framework/call-context",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.targetContext="Binding:target",t.sourceContext="Binding:source"});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/checked-observer",["require","exports","./subscriber-collection"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="CheckedObserver:array",o="CheckedObserver:value",i=function(e){function t(t,r,n){var o=e.call(this)||this;return o.element=t,o.handler=r,o.observerLocator=n,o}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){this.initialSync&&this.value===e||(this.arrayObserver&&(this.arrayObserver.unsubscribe(n,this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe(n,this)),this.oldValue=this.value,this.value=e,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},t.prototype.call=function(e,t){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe(o,this))},t.prototype.synchronizeElement=function(){var e=this.value,t=this.element,r=t.hasOwnProperty("model")?t.model:t.value,n="radio"===t.type,o=t.matcher||function(e,t){return e===t};t.checked=n&&!!o(e,r)||!n&&!0===e||!n&&Array.isArray(e)&&-1!==e.findIndex(function(e){return!!o(e,r)})},t.prototype.synchronizeValue=function(){var e,t=this.value,r=this.element,n=r.hasOwnProperty("model")?r.model:r.value,o=r.matcher||function(e,t){return e===t};if("checkbox"===r.type){if(Array.isArray(t))return e=t.findIndex(function(e){return!!o(e,n)}),void(r.checked&&-1===e?t.push(n):r.checked||-1===e||t.splice(e,1));t=r.checked}else{if(!r.checked)return;t=n}this.oldValue=this.value,this.value=t,this.notify()},t.prototype.notify=function(){var e=this.oldValue,t=this.value;t!==e&&this.callSubscribers(t,e)},t.prototype.handleEvent=function(){this.synchronizeValue()},t.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},t.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe(n,this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe(o,this)},t}(r.SubscriberCollection);t.CheckedObserver=i}),define("framework/class-observer",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.element=e,this.doNotCache=!0,this.value="",this.version=0}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){var t,r,n=this.nameIndex||{},o=this.version;if(null!==e&&void 0!==e&&e.length)for(var i=0,s=(t=e.split(/\s+/)).length;i<s;i++)""!==(r=t[i])&&(n[r]=o,this.element.classList.add(r));if(this.value=e,this.nameIndex=n,this.version+=1,0!==o)for(r in o-=1,n)n.hasOwnProperty(r)&&n[r]===o&&this.element.classList.remove(r)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},e}();t.ClassObserver=r});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/collection-observation",["require","exports","./array-change-records","./map-change-records","./subscriber-collection"],function(e,t,r,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){var n=e.call(this)||this;return n.queued=!1,n.changeRecords=null,n.oldCollection=null,n.lengthObserver=null,n.taskQueue=t,n.collection=r,n.lengthPropertyName=r instanceof Map||r instanceof Set?"size":"length",n}return __extends(t,e),t.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},t.prototype.addChangeRecord=function(e){if(this.hasSubscribers()||this.lengthObserver){if("splice"===e.type){var t=e.index,r=e.object.length;t>r?t=r-e.addedCount:t<0&&(t=r+e.removed.length+t-e.addedCount),t<0&&(t=0),e.index=t}null===this.changeRecords?this.changeRecords=[e]:this.changeRecords.push(e),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},t.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},t.prototype.reset=function(e){this.oldCollection=e,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},t.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new s(this.collection))},t.prototype.call=function(){var e,t=this.changeRecords,o=this.oldCollection;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(e=o?this.collection instanceof Map||this.collection instanceof Set?n.getChangeRecords(o):r.calcSplices(this.collection,0,this.collection.length,o,0,o.length):this.collection instanceof Map||this.collection instanceof Set?t:r.projectArraySplices(this.collection,t),this.callSubscribers(e)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},t}(o.SubscriberCollection);t.ModifyCollectionObserver=i;var s=function(e){function t(t){var r=e.call(this)||this;return r.collection=t,r.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length",r.currentValue=t[r.lengthPropertyName],r}return __extends(t,e),t.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},t.prototype.setValue=function(e){this.collection[this.lengthPropertyName]=e},t.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},t.prototype.call=function(e){var t=this.currentValue;this.callSubscribers(e,t),this.currentValue=e},t}(o.SubscriberCollection);t.CollectionLengthObserver=s});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/dirty-checking",["require","exports","./subscriber-collection"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.tracked=[],this.checkDelay=120}return e.prototype.addProperty=function(e){var t=this.tracked;t.push(e),1===t.length&&this.scheduleDirtyCheck()},e.prototype.removeProperty=function(e){var t=this.tracked;t.splice(t.indexOf(e),1)},e.prototype.scheduleDirtyCheck=function(){var e=this;setTimeout(function(){return e.check()},this.checkDelay)},e.prototype.check=function(){for(var e=this.tracked,t=e.length;t--;){var r=e[t];r.isDirty()&&r.call()}e.length&&this.scheduleDirtyCheck()},e}();t.DirtyChecker=n;var o=function(e){function t(t,r,n){var o=e.call(this)||this;return o.dirtyChecker=t,o.obj=r,o.propertyName=n,o}return __extends(t,e),t.prototype.getValue=function(){return this.obj[this.propertyName]},t.prototype.setValue=function(e){this.obj[this.propertyName]=e},t.prototype.call=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},t.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},t.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},t}(r.SubscriberCollection);t.DirtyCheckProperty=o}),define("framework/dom",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOM={Element:Element,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(e,t,r){document.addEventListener(e,t,r)},removeEventListener:function(e,t,r){document.removeEventListener(e,t,r)},adoptNode:function(e){return document.adoptNode(e)},createAttribute:function(e){return document.createAttribute(e)},createElement:function(e){return document.createElement(e)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},createDocumentFragment:function(){return document.createDocumentFragment()},createTemplateElement:function(){return document.createElement("template")},createMutationObserver:function(e){return new MutationObserver(e)},createCustomEvent:function(e,t){return new CustomEvent(e,t)},dispatchEvent:function(e){document.dispatchEvent(e)},getComputedStyle:function(e){return window.getComputedStyle(e)},getElementById:function(e){return document.getElementById(e)},querySelectorAll:function(e){return document.querySelectorAll(e)},nextElementSibling:function(e){if("nextElementSibling"in e)return e.nextElementSibling;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e},createTemplateFromMarkup:function(e){var t=document.createElement("div");t.innerHTML=e;var r=t.firstElementChild;if(!r||"TEMPLATE"!==r.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return r},appendNode:function(e,t){(t||document.body).appendChild(e)},replaceNode:function(e,t,r){t.parentNode?t.parentNode.replaceChild(e,t):r.replaceChild(e,t)},removeNode:function(e,t){e.parentNode?e.parentNode.removeChild(e):t&&t.removeChild(e)},injectStyles:function(e,t,r,n){if(n){var o=document.getElementById(n);if(o){if("style"===o.tagName.toLowerCase())return void(o.innerHTML=e);throw new Error("The provided id does not indicate a style tag.")}}var i=document.createElement("style");return i.innerHTML=e,i.type="text/css",n&&(i.id=n),t=t||document.head,r&&t.childNodes.length>0?t.insertBefore(i,t.childNodes[0]):t.appendChild(i),i}}});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/element-observation",["require","exports","./subscriber-collection"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this.element=e,this.propertyName=t,this.attributeName=r}return e.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},e.prototype.setValue=function(e){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}();t.XLinkAttributeObserver=n,t.dataAttributeAccessor={getValue:function(e,t){return e.getAttribute(t)},setValue:function(e,t,r){null===e||void 0===e?t.removeAttribute(r):t.setAttribute(r,e)}};var o=function(){function e(e,t){this.element=e,this.propertyName=t}return e.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},e.prototype.setValue=function(e){return null===e||void 0===e?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}();t.DataAttributeObserver=o;var i=function(){function e(e,t){this.element=e,this.propertyName=t,this.styles=null,this.version=0}return e.prototype.getValue=function(){return this.element.style.cssText},e.prototype._setProperty=function(e,t){var r="";null!==t&&void 0!==t&&"function"==typeof t.indexOf&&-1!==t.indexOf("!important")&&(r="important",t=t.replace("!important","")),this.element.style.setProperty(e,t,r)},e.prototype.setValue=function(e){var t,r=this.styles||{},n=this.version;if(null!==e&&void 0!==e)if(e instanceof Object){var o=void 0;for(t in e)e.hasOwnProperty(t)&&(o=e[t],r[t=t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})]=n,this._setProperty(t,o))}else if(e.length)for(var i=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,s=void 0;null!==(s=i.exec(e));)(t=s[1])&&(r[t]=n,this._setProperty(t,s[2]));if(this.styles=r,this.version+=1,0!==n)for(t in n-=1,r)r.hasOwnProperty(t)&&r[t]===n&&this.element.style.removeProperty(t)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}();t.StyleObserver=i;var s=function(e){function t(t,r,n){var o=e.call(this)||this;return o.element=t,o.propertyName=r,o.handler=n,"files"===r&&(o.setValue=function(){}),o}return __extends(t,e),t.prototype.getValue=function(){return this.element[this.propertyName]},t.prototype.setValue=function(e){e=void 0===e||null===e?"":e,this.element[this.propertyName]!==e&&(this.element[this.propertyName]=e,this.notify())},t.prototype.notify=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},t.prototype.handleEvent=function(){this.notify()},t.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},t}(r.SubscriberCollection);t.ValueAttributeObserver=s}),define("framework/event-manager",["require","exports","./dom"],function(e,t,r){"use strict";function n(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function o(){this.standardStopPropagation(),this.propagationStopped=!0}function i(e){e.propagationStopped=!1;for(var t=n(e),r=[];t;){if(t.capturedCallbacks){var i=t.capturedCallbacks[e.type];i&&(e.stopPropagation!==o&&(e.standardStopPropagation=e.stopPropagation,e.stopPropagation=o),r.push(i))}t=t.parentNode}for(var s=r.length-1;s>=0&&!e.propagationStopped;s--){var u=r[s];"handleEvent"in u?u.handleEvent(e):u(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e){this.eventName=e,this.count=0,this.eventName=e}return e.prototype.increment=function(){this.count++,1===this.count&&r.DOM.addEventListener(this.eventName,i,!0)},e.prototype.decrement=function(){this.count--,0===this.count&&r.DOM.removeEventListener(this.eventName,i,!0)},e}();function u(e){e.propagationStopped=!1;for(var t=n(e);t&&!e.propagationStopped;){if(t.delegatedCallbacks){var r=t.delegatedCallbacks[e.type];r&&(e.stopPropagation!==o&&(e.standardStopPropagation=e.stopPropagation,e.stopPropagation=o),"handleEvent"in r?r.handleEvent(e):r(e))}t=t.parentNode}}var a=function(){function e(e){this.eventName=e,this.count=0,this.eventName=e}return e.prototype.increment=function(){this.count++,1===this.count&&r.DOM.addEventListener(this.eventName,u,!1)},e.prototype.decrement=function(){this.count--,0===this.count&&r.DOM.removeEventListener(this.eventName,u)},e}(),c=function(){function e(){this.delegatedHandlers={},this.capturedHandlers={}}return e.prototype.subscribe=function(e,r,n,o){var i,u,c;if(o===t.delegationStrategy.bubbling){i=this.delegatedHandlers,c=i[r]||(i[r]=new a(r));var l=e.delegatedCallbacks||(e.delegatedCallbacks={});return c.increment(),l[r]=n,function(){c.decrement(),l[r]=null}}if(o===t.delegationStrategy.capturing){u=this.capturedHandlers,c=u[r]||(u[r]=new s(r));var h=e.capturedCallbacks||(e.capturedCallbacks={});return c.increment(),h[r]=n,function(){c.decrement(),h[r]=null}}return e.addEventListener(r,n,!1),function(){e.removeEventListener(r,n)}},e}();t.delegationStrategy={none:0,capturing:1,bubbling:2};var l=function(){function e(){this.elementHandlerLookup={},this.eventStrategyLookup={},this.defaultEventStrategy=new c,this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}})}return e.prototype.registerElementConfig=function(e){var t,r=e.tagName.toLowerCase(),n=e.properties;for(t in this.elementHandlerLookup[r]={},n)n.hasOwnProperty(t)&&this.registerElementPropertyConfig(r,t,n[t])},e.prototype.registerElementPropertyConfig=function(e,t,r){this.elementHandlerLookup[e][t]=this.createElementHandler(r)},e.prototype.createElementHandler=function(e){return{subscribe:function(t,r){return e.forEach(function(e){t.addEventListener(e,r,!1)}),function(){e.forEach(function(e){t.removeEventListener(e,r,!1)})}}}},e.prototype.registerElementHandler=function(e,t){this.elementHandlerLookup[e.toLowerCase()]=t},e.prototype.registerEventStrategy=function(e,t){this.eventStrategyLookup[e]=t},e.prototype.getElementHandler=function(e,t){var r,n=this.elementHandlerLookup;if(e.tagName){if(n[r=e.tagName.toLowerCase()]&&n[r][t])return n[r][t];if("textContent"===t||"innerHTML"===t)return n["content editable"].value;if("scrollTop"===t||"scrollLeft"===t)return n["scrollable element"][t]}return null},e.prototype.addEventListener=function(e,t,r,n){return(this.eventStrategyLookup[t]||this.defaultEventStrategy).subscribe(e,t,r,n)},e}();t.EventManager=l}),define("framework/logging",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevel={none:0,error:10,warn:20,info:30,debug:40};var r={},n=[],o=t.logLevel.none,i=Array.prototype.slice,s=["none","error","warn","info","debug"];function u(e){return s.filter(function(t){return t===e}).length>0}function a(){return[this].concat(i.call(arguments))}function c(e){var r=t.logLevel[e];return function(){if(!(this.level<r))for(var t,o=a.apply(this,arguments),i=n.length;i--;)(t=n[i])[e].apply(t,o)}}function l(e){var r=t.logLevel[e];return function(){if(!(this.level<r))for(var t=a.apply(this,arguments),o=n.length;o--;){var i=n[o];void 0!==i[e]&&i[e].apply(i,t)}}}function h(){var e=p.prototype;for(var r in t.logLevel)u(r)?"none"!==r&&(e[r]=c(r)):e[r]=l(r)}t.getLogger=function(e){return r[e]||new p(e)},t.addAppender=function(e){1===n.push(e)&&h()},t.removeAppender=function(e){n=n.filter(function(t){return t!==e})},t.getAppenders=function(){return n.slice()},t.clearAppenders=function(){n=[],function(){var e=p.prototype;for(var r in t.logLevel)"none"!==r&&(e[r]=function(){})}()},t.addCustomLevel=function(e,r){if(void 0!==t.logLevel[e])throw Error('Log level "'+e+'" already exists.');if(isNaN(r))throw Error("Value must be a number.");t.logLevel[e]=r,n.length>0?h():p.prototype[e]=function(){}},t.removeCustomLevel=function(e){if(void 0!==t.logLevel[e]){if(u(e))throw Error('Built-in log level "'+e+'" cannot be removed.');delete t.logLevel[e],delete p.prototype[e]}},t.setLevel=function(e){for(var t in o=e,r)r[t].setLevel(e)},t.getLevel=function(){return o};var p=function(){function e(e){var t=r[e];if(t)return t;r[e]=this,this.id=e,this.level=o}return e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},e.prototype.setLevel=function(e){this.level=e},e}();t.Logger=p}),define("framework/map-change-records",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChangeRecords=function(e){for(var t,r,n,o,i=new Array(e.size),s=e.keys(),u=0;(t=s.next())&&!t.done;)i[u]=(r="added",n=e,o=t.value,{type:r,object:n,key:o,oldValue:void 0}),u++;return i}});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/map-observation",["require","exports","./collection-observation"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Map.prototype;t.getMapObserver=function(e,t){return o.for(e,t)};var o=function(e){function t(t,r){return e.call(this,t,r)||this}return __extends(t,e),t.for=function(e,r){return"__map_observer__"in r||Reflect.defineProperty(r,"__map_observer__",{value:t.create(e,r),enumerable:!1,configurable:!1}),r.__map_observer__},t.create=function(e,r){var o=new t(e,r),i=n;return i.set===r.set&&i.delete===r.delete&&i.clear===r.clear||(i={set:r.set,delete:r.delete,clear:r.clear}),r.set=function(){var e=r.has(arguments[0]),t=e?"update":"add",n=r.get(arguments[0]),s=i.set.apply(r,arguments);return e&&n===r.get(arguments[0])||o.addChangeRecord({type:t,object:r,key:arguments[0],oldValue:n}),s},r.delete=function(){var e=r.has(arguments[0]),t=r.get(arguments[0]),n=i.delete.apply(r,arguments);return e&&o.addChangeRecord({type:"delete",object:r,key:arguments[0],oldValue:t}),n},r.clear=function(){var e=i.clear.apply(r,arguments);return o.addChangeRecord({type:"clear",object:r}),e},o},t}(r.ModifyCollectionObserver)});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/property-observation",["require","exports","./logging","./subscriber-collection"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r.getLogger("property-observation");t.propertyAccessor={getValue:function(e,t){return e[t]},setValue:function(e,t,r){t[r]=e}};var i=function(){function e(e,t){this.primitive=e,this.propertyName=t,this.doNotCache=!0,this.primitive=e,this.propertyName=t}return e.prototype.getValue=function(){return this.primitive[this.propertyName]},e.prototype.setValue=function(){var e=typeof this.primitive;throw new Error("The "+this.propertyName+" property of a "+e+" ("+this.primitive+") cannot be assigned.")},e.prototype.subscribe=function(){},e.prototype.unsubscribe=function(){},e}();t.PrimitiveObserver=i;var s=function(e){function t(t,r,n){var o=e.call(this)||this;return o.taskQueue=t,o.obj=r,o.propertyName=n,o.queued=!1,o.observing=!1,o}return __extends(t,e),t.prototype.getValue=function(){return this.obj[this.propertyName]},t.prototype.setValue=function(e){this.obj[this.propertyName]=e},t.prototype.getterValue=function(){return this.currentValue},t.prototype.setterValue=function(e){var t=this.currentValue;t!==e&&(this.queued||(this.oldValue=t,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=e)},t.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.queued=!1,this.callSubscribers(t,e)},t.prototype.subscribe=function(e,t){this.observing||this.convertProperty(),this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},t.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||o.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},t}(n.SubscriberCollection);t.SetterObserver=s;var u=function(e){function t(t,r){var n=e.call(this)||this;return n.taskQueue=t,n.currentValue=r,n.queued=!1,n}return __extends(t,e),t.prototype.getValue=function(){return this.currentValue},t.prototype.setValue=function(e){var t=this.currentValue;t!==e&&(this.queued||(this.oldValue=t,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=e)},t.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.queued=!1,this.callSubscribers(t,e)},t.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},t}(n.SubscriberCollection);t.Observer=u}),define("framework/scope",["require","exports"],function(e,t){"use strict";function r(e,t){return{bindingContext:e,parentOverrideContext:t||null}}Object.defineProperty(t,"__esModule",{value:!0}),t.createOverrideContext=r,t.getContextFor=function(e,t,r){var n=t.overrideContext;if(r){for(;r&&n;)r--,n=n.parentOverrideContext;if(r||!n)return;return e in n?n:n.bindingContext}for(;n&&!(e in n)&&!(n.bindingContext&&e in n.bindingContext);)n=n.parentOverrideContext;return n?e in n?n:n.bindingContext:t.bindingContext||t.overrideContext},t.createScopeForTest=function(e,t){return t?{bindingContext:e,overrideContext:r(e,r(t))}:{bindingContext:e,overrideContext:r(e)}}});__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();define("framework/select-value-observer",["require","exports","./subscriber-collection","./dom"],function(e,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o="SelectValueObserver:array",i=function(e){function t(t,r,n){var o=e.call(this)||this;return o.element=t,o.handler=r,o.observerLocator=n,o.initialSync=!1,o.element=t,o.handler=r,o.observerLocator=n,o}return __extends(t,e),t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(e){if(null!==e&&void 0!==e&&this.element.multiple&&!Array.isArray(e))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==e&&(this.arrayObserver&&(this.arrayObserver.unsubscribe(o,this),this.arrayObserver=null),Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe(o,this)),this.oldValue=this.value,this.value=e,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},t.prototype.call=function(e,t){this.synchronizeOptions()},t.prototype.synchronizeOptions=function(){var e,t=this.value;Array.isArray(t)&&(e=!0);for(var r=this.element.options,n=r.length,o=this.element.matcher||function(e,t){return e===t},i=function(){var i=r.item(n),s=i.hasOwnProperty("model")?i.model:i.value;if(e)return i.selected=-1!==t.findIndex(function(e){return!!o(s,e)}),"continue";i.selected=!!o(s,t)};n--;)i()},t.prototype.synchronizeValue=function(){for(var e=this.element.options,t=0,r=[],n=0,o=e.length;n<o;n++){var i=e.item(n);i.selected&&(r.push(i.hasOwnProperty("model")?i.model:i.value),t++)}if(this.element.multiple){if(Array.isArray(this.value)){for(var s=this.element.matcher||function(e,t){return e===t},u=(n=0,function(){var e=a.value[n];-1===r.findIndex(function(t){return s(e,t)})?a.value.splice(n,1):n++}),a=this;n<this.value.length;)u();n=0;for(var c=function(){var e=r[n];-1===l.value.findIndex(function(t){return s(e,t)})&&l.value.push(e),n++},l=this;n<r.length;)c();return}}else r=0===t?null:r[0];r!==this.value&&(this.oldValue=this.value,this.value=r,this.notify())},t.prototype.notify=function(){var e=this.oldValue,t=this.value;this.callSubscribers(t,e)},t.prototype.handleEvent=function(){this.synchronizeValue()},t.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.disposeHandler=this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},t.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.disposeHandler(),this.disposeHandler=null)},t.prototype.bind=function(){var e=this;this.domObserver=n.DOM.createMutationObserver(function(){e.synchronizeOptions(),e.synchronizeValue()}),this.domObserver.observe(this.element,{childList:!0,subtree:!0})},t.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe(o,this),this.arrayObserver=null)},t}(r.SubscriberCollection);t.SelectValueObserver=i}),define("framework/signals",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={};t.connectBindingToSignal=function(e,t){r.hasOwnProperty(t)||(r[t]=0),e.observeProperty(r,t)},t.signalBindings=function(e){r.hasOwnProperty(e)&&r[e]++}}),define("framework/subscriber-collection",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[],n=[],o=[],i=function(){function e(){this._context0=null,this._callable0=null,this._context1=null,this._callable1=null,this._context2=null,this._callable2=null,this._contextsRest=null,this._callablesRest=null}return e.prototype.addSubscriber=function(e,t){return!this.hasSubscriber(e,t)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(e),this._callablesRest.push(t),!0):(this._contextsRest=[e],this._callablesRest=[t],!0):(this._context2=e,this._callable2=t,!0):(this._context1=e,this._callable1=t,!0):(this._context0=e,this._callable0=t,!0))},e.prototype.removeSubscriber=function(e,t){if(this._context0===e&&this._callable0===t)return this._context0=null,this._callable0=null,!0;if(this._context1===e&&this._callable1===t)return this._context1=null,this._callable1=null,!0;if(this._context2===e&&this._callable2===t)return this._context2=null,this._callable2=null,!0;var r=this._callablesRest;if(void 0===r||0===r.length)return!1;for(var n=this._contextsRest,o=0;(r[o]!==t||n[o]!==e)&&r.length>o;)o++;return!(o>=r.length)&&(n.splice(o,1),r.splice(o,1),!0)},e.prototype.callSubscribers=function(e,t){var i,s,u,a,c=this._context0,l=this._callable0,h=this._context1,p=this._callable1,f=this._context2,d=this._callable2,v=this._contextsRest?this._contextsRest.length:0;if(v){for(u=o.length;u--&&o[u];);for(u<0?(u=o.length,i=[],s=[],o.push(!0),r.push(i),n.push(s)):(o[u]=!0,i=r[u],s=n[u]),a=v;a--;)i[a]=this._contextsRest[a],s[a]=this._callablesRest[a]}if(c&&(l?l.call(c,e,t):c(e,t)),h&&(p?p.call(h,e,t):h(e,t)),f&&(d?d.call(f,e,t):f(e,t)),v){for(a=0;a<v;a++){var y=s[a],b=i[a];y?y.call(b,e,t):b(e,t),i[a]=null,s[a]=null}o[u]=!1}},e.prototype.hasSubscribers=function(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)},e.prototype.hasSubscriber=function(e,t){var r;if(this._context0===e&&this._callable0===t||this._context1===e&&this._callable1===t||this._context2===e&&this._callable2===t)return!0;var n=this._contextsRest;if(!n||0===(r=n.length))return!1;for(var o=this._callablesRest;r--;)if(n[r]===e&&o[r]===t)return!0;return!1},e}();t.SubscriberCollection=i}),define("framework/task-queue",["require","exports","./dom"],function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof setImmediate;var o=function(){function e(){var e,t,n,o,i,s=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.taskQueue=[],this.microTaskQueueCapacity=1024,this.requestFlushMicroTaskQueue=(e=function(){return s.flushMicroTaskQueue()},t=1,n=r.DOM.createMutationObserver(e),o=r.DOM.createTextNode(""),n.observe(o,{characterData:!0}),function(){t=-t,o.data=t.toString()}),this.requestFlushTaskQueue=(i=function(){return s.flushTaskQueue()},function(){var e=setTimeout(r,0),t=setInterval(r,50);function r(){clearTimeout(e),clearInterval(t),i()}})}return e.prototype.flushQueue=function(e,t){var r,o,s,u=0;try{for(this.flushing=!0;u<e.length;)if(r=e[u],this.longStacks&&(this.stack="string"==typeof r.stack?r.stack:void 0),r.call(),++u>t){for(var a=0,c=e.length-u;a<c;a++)e[a]=e[a+u];e.length-=u,u=0}}catch(e){o=e,s=r,this.longStacks&&s.stack&&"object"==typeof o&&null!==o&&(o.stack=i(o.stack)+s.stack),"onError"in s?s.onError(o):n?setImmediate(function(){throw o}):setTimeout(function(){throw o},0)}finally{this.flushing=!1}},e.prototype.queueMicroTask=function(e){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(e)},e.prototype.queueTask=function(e){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(e)},e.prototype.flushTaskQueue=function(){var e=this.taskQueue;this.taskQueue=[],this.flushQueue(e,Number.MAX_VALUE)},e.prototype.flushMicroTaskQueue=function(){var e=this.microTaskQueue;this.flushQueue(e,this.microTaskQueueCapacity),e.length=0},e.prototype.prepareQueueStack=function(e){var t=e+function(){var e=new Error;if(e.stack)return e.stack;try{throw e}catch(e){return e.stack}}().replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"");return"string"==typeof this.stack&&(t=i(t)+this.stack),t},e}();function i(e){var t=e.lastIndexOf("flushMicroTaskQueue");return t<0&&(t=e.lastIndexOf("flushTaskQueue"))<0?e:(t=e.lastIndexOf("\n",t))<0?e:e.substr(0,t)}t.TaskQueue=o});