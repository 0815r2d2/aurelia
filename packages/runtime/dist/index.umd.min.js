(function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@aurelia/kernel")):"function"==typeof define&&define.amd?define(["exports","@aurelia/kernel"],s):s((t=t||self).runtime={},t.kernel)})(this,function(t,kernel){"use strict";function s(t,s,i,n){var h,e,r=arguments.length,o=3>r?s:null===n?n=Object.getOwnPropertyDescriptor(s,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,i,n);else for(e=t.length-1;e>=0;e--)(h=t[e])&&(o=(3>r?h(o):r>3?h(s,i,o):h(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(s){return function(l){const u=l.prototype;switch(u.t=0,u.s=null,u.i=null,u.h=null,u.o=null,u.l=i,u.u=n,u.p=c,u.v=o,s){case t.MutationKind.g:u.m=h;break;case t.MutationKind.C:u.m=e;break;case t.MutationKind.O:u.m=r}}}function i(t){if(this.p(t))return 0;const s=this.t;return 1&s?2&s?4&s?8&s?(this.o.push(t),1):(this.o=[t],this.t|=8,1):(this.h=t,this.t|=4,1):(this.i=t,this.t|=2,1):(this.s=t,this.t|=1,1)}function n(t){const s=this.t;if(1&s&&this.s===t)return this.s=null,this.t&=-2,1;if(2&s&&this.i===t)return this.i=null,this.t&=-3,1;if(4&s&&this.h===t)return this.h=null,this.t&=-5,1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.t&=-9),1}return 0}function h(t,s,i){const n=this.s,h=this.i,e=this.h;let r=this.o;null!==r&&(r=r.slice()),null!==n&&n.j(t,s,i),null!==h&&h.j(t,s,i),null!==e&&e.j(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.j(t,s,i)}}function e(t,s,i){const n=this.s,h=this.i,e=this.h;let r=this.o;null!==r&&(r=r.slice()),null!==n&&n.j(t,s,i),null!==h&&h.j(t,s,i),null!==e&&e.j(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.j(t,s,i)}this.A.T(this).catch(t=>{throw t})}function r(t,s,i,n){const h=this.s,e=this.i,r=this.h;let o=this.o;null!==o&&(o=o.slice()),null!==h&&h.j(t,s,i,n),null!==e&&e.j(t,s,i,n),null!==r&&r.j(t,s,i,n);const c=o&&o.length;if(void 0!==c&&c>0)for(let h=0;c>h;++h){const e=o[h];null!==e&&e.j(t,s,i,n)}}function o(){return 0!==this.t}function c(t){const s=this.t;if(1&s&&this.s===t)return 1;if(2&s&&this.i===t)return 1;if(4&s&&this.h===t)return 1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.S=0,s.I=null,s.P=null,s.k=null,s.R=null,s.V=l,s.D=u,s.$=d,s.B=f,s.M=a}}function l(t){if(this.$(t))return 0;const s=this.S;return 1&s?2&s?4&s?8&s?(this.R.push(t),1):(this.R=[t],this.S|=8,1):(this.k=t,this.S|=4,1):(this.P=t,this.S|=2,1):(this.I=t,this.S|=1,1)}function u(t){const s=this.S;if(1&s&&this.I===t)return this.I=null,this.S&=-2,1;if(2&s&&this.P===t)return this.P=null,this.S&=-3,1;if(4&s&&this.k===t)return this.k=null,this.S&=-5,1;if(8&s){const s=this.R;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.S&=-9),1}return 0}function a(t,s){const i=this.I,n=this.P,h=this.k;let e=this.R;null!==e&&(e=e.slice()),null!==i&&i.F(t,s),null!==n&&n.F(t,s),null!==h&&h.F(t,s);const r=e&&e.length;if(void 0!==r&&r>0)for(let i=0;r>i;++i){const n=e[i];null!==n&&n.F(t,s)}}function f(){return 0!==this.S}function d(t){const s=this.S;if(1&s&&this.I===t)return 1;if(2&s&&this.P===t)return 1;if(4&s&&this.k===t)return 1;if(8&s){const s=this.R;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function b(s){if(0==this.L){this.L=1;const{N:s,U:i}=this;this.q=s[i],Pt.get=(()=>this.H()),Pt.set=(value=>{this.W(value,t.LifecycleFlags._)}),It(s,i,Pt)||kernel.Reporter.write(1,i,s)}this.l(s)}function p(){delete this.N[this.U],this.N=null,this.U=null,this.q=null}function propertyObserver(){return function(s){subscriberCollection(t.MutationKind.g)(s);const i=s.prototype;i.L=0,i.N=null,i.U=null,i.q=Symbol(),i.subscribe=i.subscribe||b,i.unsubscribe=i.unsubscribe||i.u,i.K=i.K||p}}function v(t){const s=BindingBehaviorResource.G(this.description.name);t.register(kernel.Registration.singleton(s,this))}function w(t){const s=this.kind.G(this.description.name);t.register(kernel.Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.J)}function hasUnbind(t){return 4096==(4096&t.J)}function isLiteral(t){return 16384==(16384&t.J)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.J){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.X);case 17925:return 1}return 0}function g(t,s,i,n){const h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}function m(s,i,name){const n=null==i?null:i[name];if("function"==typeof n)return n;if(!(s&t.LifecycleFlags.Y)&&null==n)return null;throw kernel.Reporter.error(207,i,name,n)}function y(t){if(t===Nt){const s=xt.length=Lt.length=(Nt+=5)+1;for(let i=t+1;s>i;++i)xt[i]=`_observer${i}`,Lt[i]=`_observerVersion${i}`}}function C(t){const s=void 0===this.Z?0:this.Z;let i=s;for(;i--&&this[xt[i]]!==t;);if(-1===i){for(i=0;this[xt[i]];)i++;this[xt[i]]=t,t.subscribe(this),i===s&&(this.Z=i+1)}void 0===this.version&&(this.version=0),this[Lt[i]]=this.version,y(i)}function O(t,s,i){const n=this.st.tt(t,s,i);this.it(n)}function j(all){const t=this.Z;let s,i;if(1==all)for(let n=0;t>n;++n)null!=(i=this[s=xt[n]])&&(this[s]=null,i.unsubscribe(this));else{const n=this.version;for(let h=0;t>h;++h)this[Lt[h]]!==n&&null!=(i=this[s=xt[h]])&&(this[s]=null,i.unsubscribe(this))}}function T(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.nt=O),s.hasOwnProperty("unobserve")||(s.unobserve=j),s.hasOwnProperty("addObserver")||(s.it=C),t}function connectable(t){return void 0===t?T:T(t)}function A(s,i){if(this.q!==(s=null==s?this.defaultValue:s)){if(this.q=s,!(i&(t.LifecycleFlags.ht|t.LifecycleFlags.et))||this.rt&&i&t.LifecycleFlags.ot)return this.ct=i,this.A.T(this);this.lt(s,i)}return Promise.resolve()}function S(s){if(this.rt&&s&t.LifecycleFlags.ot)return void this.A.T(this).catch(t=>{throw t});const i=this.q;this.oldValue!==i&&(this.lt(i,this.ct|s|t.LifecycleFlags._),this.oldValue=this.q)}function I(){this.q=null,this.oldValue=null,this.defaultValue=null,this.N=null,this.U=""}function targetObserver(s=null){return function(i){subscriberCollection(t.MutationKind.g)(i);const n=i.prototype;n.ut=null,n.q=s,n.oldValue=s,n.defaultValue=s,n.N=null,n.U="",n.W=n.W||A,n.flush=n.flush||S,n.K=n.K||I}}function P(s){this.M(this.at,s|this.ft),this.dt&&this.dt.bt(t.LifecycleFlags.ht|t.LifecycleFlags._|this.ft),this.pt()}function k(){this.C.vt=void 0,this.C=null,this.at=null}function R(){const t=this.C.length,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.wt=[]}function V(){const t=this.C.size,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.wt=[]}function D(){return void 0===this.dt?this.dt=new t.CollectionLengthObserver(this,this.gt):this.dt}function collectionObserver(s){return function(i){subscriberCollection(t.MutationKind.C)(i),batchedSubscriberCollection()(i);const n=i.prototype;n.ut=null,n.C=null,n.at=null,n.yt=0,n.gt=8&s?"length":"size",n.Ct=s,n.pt=8&s?R:V,n.flush=P,n.K=k,n.Ot=D,n.subscribe=n.subscribe||n.l,n.unsubscribe=n.unsubscribe||n.u,n.jt=n.jt||n.V,n.Tt=n.Tt||n.D}}function $(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function B(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function M(t,s,from,to,i){let n,h,e,r,o,c,l;for(c=from+1;to>c;c++){for(n=t[c],h=s[c],l=c-1;l>=from&&(r=s[l],(o=i(e=t[l],n))>0);l--)t[l+1]=e,s[l+1]=r;t[l+1]=n,s[l+1]=h}}function F(t,s,from,to,i){let n,h,e,r,o,c,l,u,a,f,d,b,p,v,w,g,m,y,C,O=0,j=0;for(;;){if(10>=to-from)return void M(t,s,from,to,i);r=s[from],o=s[to-1],e=t[O=from+(to-from>>1)],c=s[O],(l=i(n=t[from],h=t[to-1]))>0&&(f=n,d=r,n=h,r=o,h=f,o=d),0>(u=i(n,e))?(a=i(h,e))>0&&(f=h,d=o,h=e,o=c,e=f,c=d):(f=n,d=r,n=e,r=c,e=h,c=o,h=f,o=d),t[from]=n,s[from]=r,t[to-1]=e,s[to-1]=c,b=h,p=o,w=to-1,t[O]=t[v=from+1],s[O]=s[v],t[v]=b,s[v]=p;t:for(j=v+1;w>j;j++)if(m=s[j],0>(y=i(g=t[j],b)))t[j]=t[v],s[j]=s[v],t[v]=g,s[v]=m,v++;else if(y>0){do{if(--w==j)break t;y=i(C=t[w],b)}while(y>0);t[j]=t[w],s[j]=s[w],t[w]=g,s[w]=m,0>y&&(g=t[j],m=s[j],t[j]=t[v],s[j]=s[v],t[v]=g,s[v]=m,v++)}v-from>to-w?(F(t,s,w,to,i),to=v):(F(t,s,from,v,i),from=w)}}function enableArrayObservation(){for(const t of ss)1!=Wt[t].L&&def(Wt,t,Object.assign({},ns,{value:is[t]}))}function x(s,i,n){return n.vt||new t.ArrayObserver(s,i,n)}function enableMapObservation(){for(const t of ls)1!=hs[t].L&&fs(hs,t,Object.assign({},as,{value:us[t]}))}function L(s,i,n){return n.vt||new t.MapObserver(s,i,n)}function enableSetObservation(){for(const t of gs)1!=ds[t].L&&Cs(ds,t,Object.assign({},ys,{value:ms[t]}))}function N(s,i,n){return n.vt||new t.SetObserver(s,i,n)}function getCollectionObserver(t,s,i){switch(Ss.call(i)){case"[object Array]":return x(t,s,i);case"[object Map]":return L(t,s,i);case"[object Set]":return N(t,s,i)}return null}function U(t,s,i){const n=this.At;kernel.PLATFORM.global.clearTimeout(n.St),n.St=kernel.PLATFORM.global.setTimeout(()=>{this.It(t,s,i)},n.Pt)}function q(t,s,i){const n=this.At;if(kernel.PLATFORM.global.clearTimeout(n.St),!(i&n.kt))return n.oldValue=$s,void this.It(t,s,i);n.oldValue===$s&&(n.oldValue=s);const h=kernel.PLATFORM.global.setTimeout(()=>{const s=n.oldValue;n.oldValue=$s,this.It(t,s,i)},n.Pt);n.St=h}function E(t){const s=this.Rt,i=+new Date-s.Vt;if(i>=s.Pt)return kernel.PLATFORM.global.clearTimeout(s.St),s.St=-1,s.Vt=+new Date,void this.Dt(t);if(s.newValue=t,-1===s.St){const t=kernel.PLATFORM.global.setTimeout(()=>{s.St=-1,s.Vt=+new Date,this.Dt(s.newValue)},s.Pt-i);s.St=t}}function z(name){return`${Ms}:${name}`}function Q(t){return void 0===t.$customElement?null:t.$customElement}function H(name){return`${Fs}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,i){const def=new Ns,n=arguments.length;switch(n){case 13:null!==i&&(def.$t=i);case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=kernel.PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=kernel.PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=kernel.PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?xs:0==build?Ls:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(Us.forEach(t=>{s[t]&&(def[t]=s[t])}),qs.forEach(t=>{s[t]&&(def[t]=kernel.PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===kernel.PLATFORM.Bt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==n||null===t||"string"!=typeof s&&"build"in s||(def.build=xs),def}function W(s){if(8&this.$state)return;const i=this.$lifecycle;i.Mt(),this.$state|=4,s|=t.LifecycleFlags.Ft;const n=this.$hooks;16&n&&this.xt(s),this.$state|=8,this.$state&=-5,32&n&&i.Lt(this),i.Nt(s)}function _(s){if(8&this.$state)return;const i=this.$lifecycle;i.Mt(),this.$state|=4,s|=t.LifecycleFlags.Ft;const n=this.$hooks;16&n&&this.xt(s);let h=this.Ut;for(;null!==h;)h.qt(s),h=h.Et;i.zt(this),this.$state|=8,this.$state&=-5,32&n&&i.Lt(this),i.Nt(s)}function K(s){if(8&this.$state)return;this.$state|=4,s|=t.LifecycleFlags.Ft;let i=this.Ut;for(;null!==i;)i.qt(s),i=i.Et;this.$lifecycle.zt(this),this.$state|=8,this.$state&=-5}function G(s){if(8&this.$state){const i=this.$lifecycle;i.Qt(),this.$state|=32,s|=t.LifecycleFlags.Ht;const n=this.$hooks;64&n&&this.Wt(s),this.$state&=-41,128&n&&i._t(this),i.Kt(s)}}function J(s){if(8&this.$state){const i=this.$lifecycle;i.Qt(),this.$state|=32,(s|=t.LifecycleFlags.Ht)&t.LifecycleFlags.Gt^t.LifecycleFlags.Gt|s&t.LifecycleFlags.Jt&&(i.Xt(this),s|=t.LifecycleFlags.Gt);const n=this.$hooks;64&n&&this.Wt(s);let h=this.Yt;for(;null!==h;)h.Zt(s),h=h.ts;this.$state&=-41,128&n&&i._t(this),i.Kt(s)}}function X(s){if(8&this.$state){this.$state|=32,(s|=t.LifecycleFlags.Ht)&t.LifecycleFlags.Gt^t.LifecycleFlags.Gt|s&t.LifecycleFlags.Jt&&(this.$lifecycle.Xt(this),s|=t.LifecycleFlags.Gt);let i=this.Yt;for(;null!==i;)i.Zt(s),i=i.ts;this.$state&=-41}}function Y(s){2048&this.$hooks&&this.ss(s|=t.LifecycleFlags.ns)}function Z(s){s|=t.LifecycleFlags.ns,2048&this.$hooks&&this.ss(s);let i=this.Yt;for(;null!==i;)i.hs(s),i=i.ts}function tt(s){s|=t.LifecycleFlags.ns;let i=this.Yt;for(;null!==i;)i.hs(s),i=i.ts}function st(){16&this.$state||(this.$state|=16,this.rs.es(this.$nodes))}function it(){16&this.$state&&(this.$state&=-17,this.rs.os(this.$nodes))}function nt(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ht(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.cs&&(this.cs=0,this.cache.ls(this))?(this.$state|=128,1):0):0}function et(s,i){if(s|=t.LifecycleFlags.et,2&this.$state){if(this.$scope===i)return;this.us(s)}const n=this.$lifecycle;n.as(),this.$state|=1;const h=this.$hooks;8&h&&n.fs(this),this.$scope=i,4&h&&this.ds(s),this.$state|=2,this.$state&=-2,n.bs(s)}function rt(s,i){if(2&this.$state)return;const n=this.$scope;n.ps=i;const h=this.$lifecycle;h.as(),this.$state|=1;const e=this.$hooks;s|=t.LifecycleFlags.et,8&e&&h.fs(this),4&e&&this.ds(s);let r=this.vs;for(;null!==r;)r.ws(s,n),r=r.gs;this.$state|=2,this.$state&=-2,h.bs(s)}function ot(s,i){if(s|=t.LifecycleFlags.et,2&this.$state){if(this.$scope===i)return;this.us(s)}this.$state|=1,this.$scope=i;let n=this.vs;for(;null!==n;)n.ws(s,i),n=n.gs;this.$state|=2,this.$state&=-2}function ct(s){if(2&this.$state){const i=this.$lifecycle;i.ms(),this.$state|=64;const n=this.$hooks;s|=t.LifecycleFlags.ys,512&n&&i.Cs(this),256&n&&this.Os(s),this.$state&=-67,i.js(s)}}function lt(s){if(2&this.$state){const i=this.$lifecycle;i.ms(),this.$state|=64;const n=this.$hooks;s|=t.LifecycleFlags.ys,512&n&&i.Cs(this),256&n&&this.Os(s);let h=this.Ts;for(;null!==h;)h.us(s),h=h.As;this.$scope.ps=null,this.$state&=-67,i.js(s)}}function ut(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.ys;let i=this.Ts;for(;null!==i;)i.us(s),i=i.As;this.$state&=-67,this.$scope=null}}function at(t,s){s.Ss(t,this.constructor,this),2&this.$hooks&&this.Is(t)}function ft(s,dom,i,n,host,h,e=kernel.PLATFORM.Bt){const r=this.constructor,o=r.description;let c;if(c=s&t.LifecycleFlags.$t?t.ProxyObserver.Ps(this).O:this,this.$scope=Scope.create(s,c,null),this.ks=host,this.rs=i.Rs(dom,this,host,o),n.Ss(s,r,this),1024&this.$hooks){const t=this.Vs(s,host,e.parts,h);t&&"getElementTemplate"in t&&t.Ds(n,r,h).Vs(this,host,e.parts)}else n.Ds(dom,o,h,r).Vs(this,host,e.parts);2&this.$hooks&&this.Is(s)}function dt(t){const s=this.description,i=this.kind.G(s.name),aliases=s.aliases;t.register(kernel.Registration.transient(i,this));for(let s=0,n=aliases.length;n>s;++s){const n=this.kind.G(aliases[s]);t.register(kernel.Registration.$s(i,n))}}function bt(t){return t.Bs=1,t}function bindable(s,i){let n;const h=function(s,i){const h=s.constructor;let bindables=h.bindables;void 0===bindables&&(bindables=h.bindables={}),n.Ms||(n.Ms=kernel.PLATFORM.Fs(i)),n.xs||(n.xs=`${i}Changed`),void 0===n.mode&&(n.mode=t.BindingMode.Ls),void 0===n.$t&&(n.$t=0),arguments.length>1&&(n.Ns=i),bindables[n.Ns]=n};return arguments.length>1?(n={},void h(s,i)):"string"==typeof s?(n={},h):(n=s||{},h)}function pt(t){const s=this.kind.G(this.description.name);t.register(kernel.Registration.transient(s,this))}function vt(t){return t.containerless=1,t}function wt(s){if(2&this.$state)return;s|=t.LifecycleFlags.et;const i=this.$scope;let n=this.vs;for(;null!==n;)n.ws(s,i),n=n.gs;this.$state|=2}function gt(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.ys;let i=this.Ts;for(;null!==i;)i.us(s),i=i.As;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.Us(),n=new Ks,h=new Ks,e=new Ks,r=new Gs,o=new Ks,c=i.get(IRenderer);return dom.qs(i,h),i.Es(IViewFactory,r),i.Es(IRenderable,n),i.Es(ITargetedInstruction,e),i.Es(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.Vs=function(t,s,targets,i,host,parts){c.Vs(t,dom,this,s,targets,i,host,parts)},i.zs=function(t,s,c,l,parts,u){return n.Qs(t),h.Qs(s),e.Qs(c),l&&r.Qs(l,parts),u&&o.Qs(u),i},i.K=function(){r.K(),n.K(),e.K(),h.K(),o.K()},i}function mt(t){const s=[];for(let i=0,n=t.length;n>i;++i){const component=Q(t[i]);null!==component&&s.push(component)}return s}function yt(s,i,name){Reflect.defineProperty(i,name,{Hs:1,get(){return this.Ws[name].H()},set(value){this.Ws[name].W(value,s&t.LifecycleFlags._s|t.LifecycleFlags._)}})}function instructionRenderer(t){return function(s){const i=function(...i){const n=new s(...i);return n.Ks=t,n};i.register=function(t){return kernel.Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const n=Object.getOwnPropertyDescriptors(s);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,n[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addBindable(t,bindable){bindable.As=t.Ts,bindable.gs=null,null===t.Ts?t.vs=bindable:t.Ts.gs=bindable,t.Ts=bindable}function addAttachable(t,s){s.ts=t.Yt,s.Et=null,null===t.Yt?t.Ut=s:t.Yt.Et=s,t.Yt=s}var Ct,Ot,jt,Tt,LifecycleFlags,DelegationStrategy,MutationKind,CollectionKind,ExpressionKind,BindingMode,State,Hooks,BindingType,TargetedInstructionType,ViewCompileFlags;(LifecycleFlags=t.LifecycleFlags||(t.LifecycleFlags={}))[LifecycleFlags.Gs=0]="none",LifecycleFlags[LifecycleFlags.Y=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.Js=3]="mutation",LifecycleFlags[LifecycleFlags.Xs=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Ys=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.Zs=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags._=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.ti=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.ht=224]="fromFlush",LifecycleFlags[LifecycleFlags.si=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.ii=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.ni=128]="fromTick",LifecycleFlags[LifecycleFlags.hi=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Jt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.et=1024]="fromBind",LifecycleFlags[LifecycleFlags.ys=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.Ft=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Ht=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ns=16384]="fromCache",LifecycleFlags[LifecycleFlags.ei=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.ri=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.oi=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.ci=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Gt=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ot=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.li=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags._s=25165824]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.ui=8388608]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.$t=16777216]="useProxies",(function(t){t[t.ai=0]="None",t[t.fi=1]="Subscriber0",t[t.di=2]="Subscriber1",t[t.bi=4]="Subscriber2",t[t.pi=8]="SubscribersRest",t[t.vi=15]="Any"})(Ct||(Ct={})),(DelegationStrategy=t.DelegationStrategy||(t.DelegationStrategy={}))[DelegationStrategy.Gs=0]="none",DelegationStrategy[DelegationStrategy.wi=1]="capturing",DelegationStrategy[DelegationStrategy.gi=2]="bubbling",(MutationKind=t.MutationKind||(t.MutationKind={}))[MutationKind.g=1]="instance",MutationKind[MutationKind.C=2]="collection",MutationKind[MutationKind.O=4]="proxy",(CollectionKind=t.CollectionKind||(t.CollectionKind={}))[CollectionKind.mi=8]="indexed",CollectionKind[CollectionKind.yi=4]="keyed",CollectionKind[CollectionKind.Ci=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set";const At=new WeakMap;let St=class{constructor(t,s,i){this.raw=s,this.key=i,this.O=t,this.subscribe=this.l,this.unsubscribe=this.u}W(value,s){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.m(value,i,s|t.LifecycleFlags.$t|t.LifecycleFlags._))}H(){return this.raw[this.key]}};St=s([subscriberCollection(t.MutationKind.g)],St),t.ProxyObserver=Ot=class{constructor(t){this.raw=t,this.O=new Proxy(t,this),At.set(t,this.O),this.Oi={}}static ji(t){if(void 0===t.Ti){const s=At.get(t);return void 0===s?t:s}return t}static Ai(t){const s=t.Ti;return void 0===s?t:s}static Ps(t,s){let i;if(void 0===t.Ti){const s=At.get(t);i=void 0===s?new Ot(t):s.vt}else i=t.vt;if(1===arguments.length)return i;let n=i.Oi[s];if(void 0===n){const h=this.Ai(t);n=i.Oi[s]=new St(i.O,h,s)}return n}static Si(t){return void 0!==t.Ti}get(t,s,i){return"$observer"===s?this:"$raw"===s?t:t[s]}set(s,i,value,n){const h=s[i];return h!==value&&(Reflect.set(s,i,value,s),this.Ii(value,h,i),this.m(i,value,h,t.LifecycleFlags.$t|t.LifecycleFlags._)),1}deleteProperty(s,i){const n=s[i];return Reflect.deleteProperty(s,i)?(void 0!==n&&(this.Ii(void 0,n,i),this.m(i,void 0,n,t.LifecycleFlags.$t|t.LifecycleFlags._)),1):0}defineProperty(s,i,n){const h=s[i];return Reflect.defineProperty(s,i,n)?(n.value!==h&&(this.Ii(n.value,h,i),this.m(i,n.value,h,t.LifecycleFlags.$t|t.LifecycleFlags._)),1):0}apply(t,s,i){return Reflect.apply(t,t,i)}subscribe(t,s){if(1===arguments.length)this.l(t);else{let i=this.Oi[s];void 0===i&&(i=this.Oi[s]=new St(this.O,this.raw,s)),i.l(t)}}unsubscribe(t,s){if(1===arguments.length)this.u(t);else{const i=this.Oi[s];void 0!==i&&i.u(t)}}Ii(s,i,n){const h=this.Oi[n];void 0!==h&&h.m(s,i,t.LifecycleFlags.$t|t.LifecycleFlags._)}},t.ProxyObserver=Ot=s([subscriberCollection(t.MutationKind.O)],t.ProxyObserver);const It=Reflect.defineProperty,Pt={get:void 0,set:void 0,Hs:1,Pi:1};t.SetterObserver=class{constructor(s,i,n){this.ft=s&t.LifecycleFlags._s,this.N=i,this.U=n}H(){return this.q}W(s,i){const n=this.q;n!==s&&(this.q=s,i&t.LifecycleFlags.et||this.m(s,n,this.ft|i),this.L||(this.N[this.U]=s))}},t.SetterObserver=s([propertyObserver()],t.SetterObserver),(function(t){t[t.ki=250]="UndefinedScope",t[t.Ri=251]="NullScope",t[t.Vi=252]="NilOverrideContext",t[t.Di=253]="NilParentScope"})(jt||(jt={}));class kt{Ps(s,i,n){let h=this[n];return void 0===h&&(h=this[n]=new t.SetterObserver(s,i,n)),h}}class BindingContext{constructor(t,value){if(this.$i=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(s,i,value){const n=new BindingContext(i,value);return s&t.LifecycleFlags.$t?t.ProxyObserver.Ps(n).O:n}static get(s,name,i,n){if(void 0===s)throw kernel.Reporter.error(250);if(null===s)throw kernel.Reporter.error(251);let h=s.Bi;if(i>0){for(;i>0;){if(null===h.Mi)return;i--,h=h.Mi}return name in h?h:h.Fi}for(;h&&!(name in h)&&!(h.Fi&&name in h.Fi);)h=h.Mi;if(h)return name in h?h:h.Fi;if(n&t.LifecycleFlags.ui&&null!==s.ps){const h=this.get(s.ps,name,i,n&~t.LifecycleFlags.ui|t.LifecycleFlags.li);if(null!==h)return h}return n&t.LifecycleFlags.li?null:s.Fi||s.Bi}xi(t){let s=this.Ws;return void 0===s&&(this.Ws=s=new kt),s}}class Scope{constructor(t,s){this.Fi=t,this.Bi=s,this.ps=null}static create(t,s,i){return new Scope(s,null==i?OverrideContext.create(t,s,i):i)}static Li(t,s){if(null==s)throw kernel.Reporter.error(252);return new Scope(s.Fi,s)}static Ni(t,s,i){if(null==s)throw kernel.Reporter.error(253);return new Scope(i,OverrideContext.create(t,i,s.Bi))}}class OverrideContext{constructor(t,s){this.$i=1,this.Fi=t,this.Mi=s}static create(t,s,i){return new OverrideContext(s,void 0===i?null:i)}xi(){let t=this.Ws;return void 0===t&&(this.Ws=t=new kt),t}}const ISignaler=kernel.DI.qi("ISignaler").Ui(t=>t.singleton(Rt));class Rt{constructor(){this.Ei=Object.create(null)}zi(name,s){const i=this.Ei[name];if(void 0!==i)for(const n of i.keys())n.j(void 0,void 0,s|t.LifecycleFlags._)}Qi(name,t){const s=this.Ei,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}Hi(name,t){const s=this.Ei[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",G(name){return`${this.name}:${name}`},Wi(t){return t.kind===this},_i(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=n,i.register=v,i}},ValueConverterResource={name:"value-converter",G(name){return`${this.name}:${name}`},Wi(t){return t.kind===this},_i(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=n,i.register=w,i}};(ExpressionKind=t.ExpressionKind||(t.ExpressionKind={}))[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Ki=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Gi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation",(function(t){t[t.Ji=202]="NoLocator",t[t.Xi=203]="NoBehaviorFound",t[t.Yi=204]="BehaviorAlreadyApplied",t[t.Zi=205]="NoConverterFound",t[t.tn=206]="NoBinding",t[t.sn=207]="NotAFunction",t[t.in=208]="UnknownOperator",t[t.ki=250]="UndefinedScope",t[t.Ri=251]="NullScope"})(Tt||(Tt={}));class BindingBehavior{constructor(t,name,s){this.J=38962,this.nn=t,this.name=name,this.hn=s,this.en=BindingBehaviorResource.G(this.name),this.rn=hasBind(t),this.on=hasUnbind(t)}evaluate(t,s,i){return this.nn.evaluate(t,s,i)}assign(t,s,i,value){return this.nn.assign(t,s,i,value)}connect(t,s,i){this.nn.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.cn;if(!n)throw kernel.Reporter.error(202,this);this.rn&&this.nn.bind(t,s,i);const h=this.en,e=n.get(h);if(!e)throw kernel.Reporter.error(203,this);if(null!=i[h])throw kernel.Reporter.error(204,this);i[h]=e,e.bind.apply(e,[t,s,i].concat(g(t,s,n,this.hn)))}ln(t,s,i){const n=this.en;i[n].ln(t,s,i),i[n]=null,this.on&&this.nn.ln(t,s,i)}accept(t){return t.un(this)}}class ValueConverter{constructor(t,name,s){this.J=36913,this.nn=t,this.name=name,this.hn=s,this.an=ValueConverterResource.G(this.name)}evaluate(t,s,i){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.an);if(!n)throw kernel.Reporter.error(205,this);if("toView"in n){const h=this.hn,e=h.length,r=Array(e+1);r[0]=this.nn.evaluate(t,s,i);for(let n=0;e>n;++n)r[n+1]=h[n].evaluate(t,s,i);return n.Ls.apply(n,r)}return this.nn.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.an);if(!n)throw kernel.Reporter.error(205,this);return"fromView"in n&&(value=n.fn.apply(n,[value].concat(g(t,s,i,this.hn)))),this.nn.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.cn;if(!n)throw kernel.Reporter.error(202,this);this.nn.connect(t,s,i);const h=this.hn;for(let n=0,e=h.length;e>n;++n)h[n].connect(t,s,i);const e=n.get(this.an);if(!e)throw kernel.Reporter.error(205,this);const r=e.Ei;if(void 0===r)return;const o=n.get(ISignaler);for(let t=0,s=r.length;s>t;++t)o.Qi(r[t],i)}ln(t,s,i){const n=i.cn,h=n.get(this.an).Ei;if(void 0===h)return;const e=n.get(ISignaler);for(let t=0,s=h.length;s>t;++t)e.Hi(h[t],i)}accept(t){return t.dn(this)}}class Assign{constructor(t,value){this.J=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.bn(this)}}class Conditional{constructor(t,s,i){this.J=63,this.assign=kernel.PLATFORM.pn,this.vn=t,this.wn=s,this.gn=i}evaluate(t,s,i){return this.vn.evaluate(t,s,i)?this.wn.evaluate(t,s,i):this.gn.evaluate(t,s,i)}connect(t,s,i){this.vn.evaluate(t,s,null)?(this.vn.connect(t,s,i),this.wn.connect(t,s,i)):(this.vn.connect(t,s,i),this.gn.connect(t,s,i))}accept(t){return t.mn(this)}}class AccessThis{constructor(t=0){this.J=1793,this.assign=kernel.PLATFORM.pn,this.connect=kernel.PLATFORM.pn,this.yn=t}evaluate(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);let n=s.Bi,h=this.yn;for(;h--&&n;)n=n.Mi;return 1>h&&n?n.Fi:void 0}accept(t){return t.Cn(this)}}AccessThis.On=new AccessThis(0),AccessThis.jn=new AccessThis(1);class AccessScope{constructor(name,t=0){this.J=10082,this.name=name,this.yn=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.yn,t)[name]}assign(t,s,i,value){const name=this.name,n=BindingContext.get(s,name,this.yn,t);return n?n[name]=value:void 0}connect(t,s,i){const name=this.name,n=BindingContext.get(s,name,this.yn,t);i.nt(t,n,name)}accept(t){return t.Tn(this)}}class AccessMember{constructor(t,name){this.J=9323,this.object=t,this.name=name}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);return null==n?n:n[this.name]}assign(t,s,i,value){let n=this.object.evaluate(t,s,i);return null!==n&&"object"==typeof n||this.object.assign(t,s,i,n={}),n[this.name]=value,value}connect(t,s,i){const n=this.object.evaluate(t,s,null);this.object.connect(t,s,i),n&&i.nt(t,n,this.name)}accept(t){return t.An(this)}}class AccessKeyed{constructor(t,s){this.J=9324,this.object=t,this.key=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);if(null!=n)return n[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof n&&null!==n){this.key.connect(t,s,i);const h=this.key.evaluate(t,s,null);Array.isArray(n)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(h)||i.nt(t,n,h)}}accept(t){return t.Sn(this)}}class CallScope{constructor(name,t,s=0){this.J=1448,this.assign=kernel.PLATFORM.pn,this.name=name,this.hn=t,this.yn=s}evaluate(t,s,i){const n=g(t,s,i,this.hn),h=BindingContext.get(s,this.name,this.yn,t),e=m(t,h,this.name);if(e)return e.apply(h,n)}connect(t,s,i){const n=this.hn;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.In(this)}}class CallMember{constructor(t,name,s){this.J=1161,this.assign=kernel.PLATFORM.pn,this.object=t,this.name=name,this.hn=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i),h=g(t,s,i,this.hn),e=m(t,n,this.name);if(e)return e.apply(n,h)}connect(s,i,n){const h=this.object.evaluate(s,i,null);if(this.object.connect(s,i,n),m(s&~t.LifecycleFlags.Y,h,this.name)){const t=this.hn;for(let h=0,e=t.length;e>h;++h)t[h].connect(s,i,n)}}accept(t){return t.Pn(this)}}class CallFunction{constructor(t,s){this.J=1162,this.assign=kernel.PLATFORM.pn,this.kn=t,this.hn=s}evaluate(s,i,n){const h=this.kn.evaluate(s,i,n);if("function"==typeof h)return h.apply(null,g(s,i,n,this.hn));if(s&t.LifecycleFlags.Y||null!=h)throw kernel.Reporter.error(207,this)}connect(t,s,i){const n=this.kn.evaluate(t,s,null);if(this.kn.connect(t,s,i),"function"==typeof n){const n=this.hn;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.Rn(this)}}class Binary{constructor(t,s,i){this.J=46,this.assign=kernel.PLATFORM.pn,this.Vn=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){const n=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.Vn&&!n||"||"===this.Vn&&n||this.right.connect(t,s,i)}Dn(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}$n(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}Bn(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}Mn(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}Fn(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}xn(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}Ln(t,s,i){const n=this.right.evaluate(t,s,i);return"function"==typeof n?this.left.evaluate(t,s,i)instanceof n:0}Nn(t,s,i){const n=this.right.evaluate(t,s,i);return null!==n&&"object"==typeof n?this.left.evaluate(t,s,i)in n:0}Un(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}qn(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}En(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}zn(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Qn(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}Hn(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}Wn(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}_n(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}Kn(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.Gn(this)}}class Unary{constructor(t,s){this.J=39,this.assign=kernel.PLATFORM.pn,this.Vn=t,this.nn=s,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){this.nn.connect(t,s,i)}Jn(t,s,i){this.nn.evaluate(t,s,i)}Xn(t,s,i){return typeof this.nn.evaluate(t,s,i)}Yn(t,s,i){return!this.nn.evaluate(t,s,i)}qn(t,s,i){return-this.nn.evaluate(t,s,i)}Un(t,s,i){return+this.nn.evaluate(t,s,i)}accept(t){return t.Zn(this)}}class PrimitiveLiteral{constructor(value){this.J=17925,this.assign=kernel.PLATFORM.pn,this.connect=kernel.PLATFORM.pn,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.th(this)}}PrimitiveLiteral.sh=new PrimitiveLiteral(void 0),PrimitiveLiteral.ih=new PrimitiveLiteral(null),PrimitiveLiteral.nh=new PrimitiveLiteral(1),PrimitiveLiteral.hh=new PrimitiveLiteral(0),PrimitiveLiteral.eh=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this.J=51,this.assign=kernel.PLATFORM.pn,this.parts=parts}evaluate(t,s,i){const n=this.parts;let h="";for(let e=0,r=n.length;r>e;++e){const value=n[e].evaluate(t,s,i);null!=value&&(h+=value)}return h}connect(t,s,i){for(let n=0,h=this.parts.length;h>n;++n)this.parts[n].connect(t,s,i)}accept(t){return t.rh(this)}}class ArrayLiteral{constructor(t){this.J=17955,this.assign=kernel.PLATFORM.pn,this.elements=t}evaluate(t,s,i){const n=this.elements,h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}connect(t,s,i){const n=this.elements;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.oh(this)}}ArrayLiteral.eh=new ArrayLiteral(kernel.PLATFORM.lh);class ObjectLiteral{constructor(t,s){this.J=17956,this.assign=kernel.PLATFORM.pn,this.keys=t,this.values=s}evaluate(t,s,i){const n={},h=this.keys,e=this.values;for(let r=0,o=h.length;o>r;++r)n[h[r]]=e[r].evaluate(t,s,i);return n}connect(t,s,i){const n=this.values;for(let h=0,e=this.keys.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.uh(this)}}ObjectLiteral.eh=new ObjectLiteral(kernel.PLATFORM.lh,kernel.PLATFORM.lh);class Template{constructor(t,s){this.J=17958,this.assign=kernel.PLATFORM.pn,this.ah=t,this.X=void 0===s?kernel.PLATFORM.lh:s}evaluate(t,s,i){const n=this.X,h=this.ah;let e=h[0];for(let r=0,o=n.length;o>r;++r)e+=n[r].evaluate(t,s,i),e+=h[r+1];return e}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i),h++}accept(t){return t.fh(this)}}Template.eh=new Template([""]);class TaggedTemplate{constructor(t,s,i,n){this.J=1197,this.assign=kernel.PLATFORM.pn,this.ah=t,this.ah.raw=s,this.kn=i,this.X=void 0===n?kernel.PLATFORM.lh:n}evaluate(t,s,i){const n=this.X,h=n.length,e=Array(h);for(let r=0,o=h;o>r;++r)e[r]=n[r].evaluate(t,s,i);const r=this.kn.evaluate(t,s,i);if("function"!=typeof r)throw kernel.Reporter.error(207,this);return r.apply(null,[this.ah].concat(e))}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i);this.kn.connect(t,s,i)}accept(t){return t.dh(this)}}class ArrayBindingPattern{constructor(t){this.J=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.bh(this)}}class ObjectBindingPattern{constructor(t,s){this.J=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.ph(this)}}class BindingIdentifier{constructor(name){this.J=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.vh(this)}}const Vt={}.toString;class ForOfStatement{constructor(t,s){this.J=55,this.assign=kernel.PLATFORM.pn,this.wh=t,this.gh=s}evaluate(t,s,i){return this.gh.evaluate(t,s,i)}count(t){return $t[Vt.call(t)](t)}mh(t,s){Dt[Vt.call(t)](t,s)}connect(t,s,i){this.wh.connect(t,s,i),this.gh.connect(t,s,i)}accept(t){return t.yh(this)}}class Interpolation{constructor(parts,t){this.J=24,this.assign=kernel.PLATFORM.pn,this.parts=parts,this.X=void 0===t?kernel.PLATFORM.lh:t,this.Ch=this.X.length>1,this.Oh=this.X[0]}evaluate(t,s,i){if(this.Ch){const n=this.X,parts=this.parts;let h=parts[0];for(let e=0,r=n.length;r>e;++e)h+=n[e].evaluate(t,s,i),h+=parts[e+1];return h}{const parts=this.parts;return parts[0]+this.Oh.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.jh(this)}}BindingBehavior.prototype.J=38962,ValueConverter.prototype.J=36913,Assign.prototype.J=8208,Conditional.prototype.J=63,AccessThis.prototype.J=1793,AccessScope.prototype.J=10082,AccessMember.prototype.J=9323,AccessKeyed.prototype.J=9324,CallScope.prototype.J=1448,CallMember.prototype.J=1161,CallFunction.prototype.J=1162,Binary.prototype.J=46,Unary.prototype.J=39,PrimitiveLiteral.prototype.J=17925,HtmlLiteral.prototype.J=51,ArrayLiteral.prototype.J=17955,ObjectLiteral.prototype.J=17956,Template.prototype.J=17958,TaggedTemplate.prototype.J=1197,ArrayBindingPattern.prototype.J=65556,ObjectBindingPattern.prototype.J=65557,BindingIdentifier.prototype.J=65558,ForOfStatement.prototype.J=55,Interpolation.prototype.J=24;const Dt={Th(t,s){for(let i=0,n=t.length;n>i;++i)s(t,i,t[i])},Ah(t,s){const i=Array(t.size);let n=-1;for(const s of t.entries())i[++n]=s;Dt["Th"](i,s)},Sh(t,s){const i=Array(t.size);let n=-1;for(const s of t.keys())i[++n]=s;Dt["Th"](i,s)},Ih(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Dt["Th"](i,s)},Ph(t,s){},kh(t,s){}},$t={Th:t=>t.length,Ah:t=>t.size,Sh:t=>t.size,Ih:t=>t,Ph:()=>0,kh:()=>0};(BindingMode=t.BindingMode||(t.BindingMode={}))[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Ls=2]="toView",BindingMode[BindingMode.fn=4]="fromView",BindingMode[BindingMode.Rh=6]="twoWay",BindingMode[BindingMode.default=8]="default",(State=t.State||(t.State={}))[State.Gs=0]="none",State[State.Vh=1]="isBinding",State[State.Dh=2]="isBound",State[State.$h=4]="isAttaching",State[State.Bh=8]="isAttached",State[State.Mh=16]="isMounted",State[State.Fh=32]="isDetaching",State[State.xh=64]="isUnbinding",State[State.Lh=128]="isCached",State[State.Nh=256]="isContainerless",(Hooks=t.Hooks||(t.Hooks={}))[Hooks.Gs=1]="none",Hooks[Hooks.Uh=2]="hasCreated",Hooks[Hooks.qh=4]="hasBinding",Hooks[Hooks.Eh=8]="hasBound",Hooks[Hooks.zh=16]="hasAttaching",Hooks[Hooks.Qh=32]="hasAttached",Hooks[Hooks.Hh=64]="hasDetaching",Hooks[Hooks.Wh=128]="hasDetached",Hooks[Hooks._h=256]="hasUnbinding",Hooks[Hooks.Kh=512]="hasUnbound",Hooks[Hooks.Gh=1024]="hasRender",Hooks[Hooks.Jh=2048]="hasCaching";const IRenderable=kernel.DI.qi("IRenderable").Xh(),IViewFactory=kernel.DI.qi("IViewFactory").Xh(),Bt=Object.freeze(Object.create(null)),ILifecycle=kernel.DI.qi("ILifecycle").Ui(t=>t.singleton(Mt));class Mt{constructor(){this.Yh=0,this.Zh=0,this.te=0,this.se=0,this.ie=this,this.ne=this,this.he=this,this.ee=this,this.re=this,this.oe=this,this.ce=this,this.le=this,this.ue=this,this.ae=this,this.fe=this,this.de=this,this.be=this,this.pe=this,this.ve=this,this.we=this,this.ge=this,this.me=this,this.ye=this,this.Ce=this,this.Oe=null,this.je=Promise.resolve(),this.Te=0,this.Ae=0,this.Se=0,this.Ie=0,this.Pe=0,this.ke=0,this.Re=0,this.Ve=0,this.De=0,this.$e=0,this.ut=Bt,this.flush=kernel.PLATFORM.pn,this.Be=Bt,this.connect=kernel.PLATFORM.pn,this.Me=Bt,this.bt=kernel.PLATFORM.pn,this.Fe=Bt,this.bound=kernel.PLATFORM.pn,this.xe=Bt,this.Le=kernel.PLATFORM.pn,this.Ne=Bt,this.Ue=kernel.PLATFORM.pn,this.qe=Bt,this.Ee=kernel.PLATFORM.pn,this.ze=Bt,this.Qe=kernel.PLATFORM.pn,this.He=Bt,this.us=kernel.PLATFORM.pn,this.We=Bt,this._e=kernel.PLATFORM.pn,this.Ke=null}static register(t){return kernel.Registration.singleton(ILifecycle,this).register(t)}Ge(t){null===this.Ke&&(this.Ke=new AggregateLifecycleTask),this.Ke.Je(t)}Xe(t){null!==this.Ke&&(this.Ke===t?this.Ke=null:this.Ke.Ye(t))}T(s){return this.ie===this&&(this.Oe=this.je.then(()=>{this.Ze(t.LifecycleFlags.si)})),null===s.ut&&(s.ut=Bt,this.ne.ut=s,this.ne=s,++this.Te),this.Oe}Ze(s){for(s|=t.LifecycleFlags.ii;this.Te>0;){let i,n=this.ie.ut;this.ie=this.ne=this,this.Te=0;do{i=n.ut,n.ut=null,n.flush(s),n=i}while(n!==Bt);if(s&t.LifecycleFlags.ot)break}}as(){++this.Yh}fs(t){null===t.Fe&&(t.Fe=Bt,this.le.Fe=t,this.le=t,++this.Ie)}tr(t){null===t.Be&&(t.Be=Bt,this.ee.Be=t,this.ee=t,++this.Ae),null===t.Me&&(t.Me=Bt,this.oe.Me=t,this.oe=t,++this.Se)}sr(t){if(this.Ae>0){this.Ae=0;let s,i=this.he.Be;this.he=this.ee=this;do{i.connect(t),s=i.Be,i.Be=null,i=s}while(i!==Bt)}}ir(s){for(s&t.LifecycleFlags.hi&&this.Ze(s|t.LifecycleFlags.ii);this.Se>0;){this.Se=0;let t,i=this.re.Me;this.re=this.oe=this;do{i.bt(s),t=i.Me,i.Me=null,i=t}while(i!==Bt)}}bs(t){if(0==--this.Yh)return null===this.Ke||this.Ke.done?(this.nr(t),LifecycleTask.done):(this.Ke.hr=this,this.Ke)}nr(s){for(s&t.LifecycleFlags.hi&&this.Ze(s|t.LifecycleFlags.ii);this.Ie>0;){this.Ie=0;let t,i=this.ce.Fe;this.ce=this.le=this;do{i.bound(s),t=i.Fe,i.Fe=null,i=t}while(i!==Bt)}}ms(){++this.se}Cs(t){null===t.We&&(t.We=Bt,this.Ce.We=t,this.Ce=t,++this.$e)}js(t){if(0==--this.se)return null===this.Ke||this.Ke.done?(this.er(t),LifecycleTask.done):(this.Ke.hr=this,this.Ke)}er(t){for(;this.$e>0;){this.$e=0;let s,i=this.ye.We;this.ye=this.Ce=this;do{i._e(t),s=i.We,i.We=null,i=s}while(i!==Bt)}}Mt(){++this.Zh}zt(t){null===t.xe&&(t.xe=Bt,this.ae.xe=t,this.ae=t,++this.Pe)}Lt(t){null===t.Ne&&(t.Ne=Bt,this.de.Ne=t,this.de=t,++this.ke)}Nt(t){if(0==--this.Zh)return null===this.Ke||this.Ke.done?(this.rr(t),LifecycleTask.done):(this.Ke.hr=this,this.Ke)}rr(s){if(this.Ze(s|t.LifecycleFlags.ii),this.Pe>0){this.Pe=0;let t,i=this.ue.xe;this.ue=this.ae=this;do{i.Le(s),t=i.xe,i.xe=null,i=t}while(i!==Bt)}if(this.sr(t.LifecycleFlags.Y),this.ke>0){this.ke=0;let t,i=this.fe.Ne;this.fe=this.de=this;do{i.Ue(s),t=i.Ne,i.Ne=null,i=t}while(i!==Bt)}}Qt(){++this.te}Xt(t){if(null===t.qe&&(t.qe=Bt,this.pe.qe=t,this.pe=t,++this.Re),null!==t.xe){let s=this.ue,i=s.xe;for(;i!==t;)i=(s=i).xe;s.xe=i.xe,i.xe=null,this.ae===i&&(this.ae=this),--this.Pe}}_t(t){null===t.ze&&(t.ze=Bt,this.we.ze=t,this.we=t,++this.Ve)}or(t){null===t.He&&(t.He=Bt,this.me.He=t,this.me=t,++this.De)}Kt(t){if(0==--this.te)return null===this.Ke||this.Ke.done?(this.cr(t),LifecycleTask.done):(this.Ke.hr=this,this.Ke)}cr(s){if(this.Ze(s|t.LifecycleFlags.ht|t.LifecycleFlags.ot),this.Re>0){this.Re=0;let t,i=this.be.qe;this.be=this.pe=this;do{i.Ee(s),t=i.qe,i.qe=null,i=t}while(i!==Bt)}if(this.Ve>0){this.Ve=0;let t,i=this.ve.ze;this.ve=this.we=this;do{i.Qe(s),t=i.ze,i.ze=null,i=t}while(i!==Bt)}if(this.De>0){this.ms(),this.De=0;let t,i=this.ge.He;this.ge=this.me=this;do{i.us(s),t=i.He,i.He=null,i=t}while(i!==Bt);this.js(s)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.lr=kernel.PLATFORM.pn,this.currentView=null,this.Bh=0,this.Dh=0,this.ur=null,this.ar=LifecycleTask.done}static register(t){return kernel.Registration.transient(this,this).register(t,this)}dr(value,t){this.ar.done?value instanceof Promise?(this.br(new Ft(this,value)),this.pr()):this.vr(value,t):(value instanceof Promise?this.br(new Ft(this,value)):this.br(value),this.ar.wr()&&this.ar.cancel())}ds(t,s){this.scope=s,this.Dh=1,null!==this.currentView&&this.currentView.ws(t,s)}xt(t){this.Bh=1,null!==this.currentView&&this.currentView.qt(t)}Wt(t){this.Bh=0,null!==this.currentView&&this.currentView.Zt(t)}Os(t){this.Dh=0,null!==this.currentView&&this.currentView.us(t)}ss(t){this.currentView=null}br(t){null===this.ur&&(this.ur=[]),this.ur.push(t)}vr(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let n,h=this.currentView;null===h?n=LifecycleTask.done:($lifecycle.or(h),$lifecycle.Qt(),h.Zt(s),n=$lifecycle.Kt(s)),i.Je(n),null===(h=this.currentView=t)?n=LifecycleTask.done:(this.Dh&&($lifecycle.as(),h.ws(s,this.scope),$lifecycle.bs(s)),this.Bh?($lifecycle.Mt(),h.qt(s),n=$lifecycle.Nt(s)):n=LifecycleTask.done),i.Je(n),i.done?(this.ar=LifecycleTask.done,this.lr()):(this.ar=i,this.ar.gr().then(()=>{this.lr(),this.pr()}).catch(t=>{throw t}))}pr(){if(null!==this.ur&&this.ur.length>0){const s=this.ur.pop();this.ur.length=0,Ft.is(s)?this.ar=s.start():this.vr(s,t.LifecycleFlags.ci)}else this.ar=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,wr:()=>0,cancel(){},gr:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.hr=null,this.resolve=null,this.mr=[],this.yr=null}Je(t){t.done||(this.done=0,this.mr.push(t),t.gr().then(()=>{this.Cr()}).catch(t=>{throw t}))}Ye(t){if(t.done){const s=this.mr.indexOf(t);-1!==s&&this.mr.splice(s,1)}0===this.mr.length&&null!==this.hr&&(this.hr.Xe(this),this.hr=null)}wr(){return this.done?0:this.mr.every(t=>t.wr())}cancel(){this.wr()&&(this.mr.forEach(t=>{t.cancel()}),this.done=0)}gr(){return null===this.yr&&(this.yr=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.yr}Cr(){this.done||this.mr.every(t=>t.done)&&this.complete(1)}complete(s){this.done=1,s&&null!==this.hr&&(this.hr.cr(t.LifecycleFlags.ci),this.hr.er(t.LifecycleFlags.ci),this.hr.nr(t.LifecycleFlags.ci),this.hr.rr(t.LifecycleFlags.ci)),this.hr.Xe(this),null!==this.resolve&&this.resolve()}}class Ft{constructor(t,s){this.Or=t,this.done=0,this.jr=0,this.je=s}static is(t){return"start"in t}start(){return this.jr?LifecycleTask.done:(this.je=this.je.then(t=>(this.Tr(t),t)),this)}wr(){return!this.done}cancel(){this.wr()&&(this.jr=1)}gr(){return this.je}Tr(value){this.jr||(this.done=1,this.Or.dr(value,t.LifecycleFlags.ci))}}const xt=[],Lt=[];let Nt=-1;y(-1);const{oneTime,Ls:Ut,fn:qt}=t.BindingMode,Et=Ut|oneTime;t.Binding=class{constructor(s,i,n,mode,h,e){this.gs=null,this.As=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.Be=null,this.Me=null,this.$scope=null,this.cn=e,this.mode=mode,this.st=h,this.Ar=s,this.target=i,this.Sr=n,this.ft=t.LifecycleFlags.Gs}Ir(value,s){this.targetObserver.W(value,(s|=this.ft)|t.LifecycleFlags._)}Pr(value,s){this.Ar.assign((s|=this.ft)|t.LifecycleFlags.ti,this.$scope,this.cn,value)}j(s,i,n){if(!(2&this.$state))return;const h=this.Ar,$scope=this.$scope,e=this.cn;if(n|=this.ft,this.mode===t.BindingMode.fn&&(n&=~t.LifecycleFlags._,n|=t.LifecycleFlags.ti),n&t.LifecycleFlags._){const mode=this.mode,t=this.targetObserver.H();return(10082!==h.J||this.Z>1)&&(s=h.evaluate(n,$scope,e)),s!==t&&this.Ir(s,n),void(0==(mode&oneTime)&&(this.version++,h.connect(n,$scope,this),this.unobserve(0)))}if(!(n&t.LifecycleFlags.ti))throw kernel.Reporter.error(15,t.LifecycleFlags[n]);s!==h.evaluate(n,$scope,e)&&this.Pr(s,n)}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.ft=s&t.LifecycleFlags._s,this.$scope=i;let n=this.Ar;hasBind(n)&&n.bind(s,i,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&qt?this.st.tt(s,this.target,this.Sr):this.st.kr(s,this.target,this.Sr)),targetObserver.bind&&targetObserver.bind(s),n=this.Ar,mode&Et&&this.Ir(n.evaluate(s,i,this.cn),s),mode&Ut&&n.connect(s,i,this),mode&qt&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}us(s){if(!(2&this.$state))return;this.$state|=64,this.ft=t.LifecycleFlags.Gs;const i=this.Ar;hasUnbind(i)&&i.ln(s,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.ln&&targetObserver.ln(s),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(s){2&this.$state&&this.Ar.connect((s|=this.ft)|t.LifecycleFlags.Y,this.$scope,this)}bt(s){2&this.$state&&this.Ir(this.Ar.evaluate((s|=this.ft)|t.LifecycleFlags.Y,this.$scope,this.cn),s)}},t.Binding=s([connectable()],t.Binding);class Call{constructor(s,i,n,h,e){this.gs=null,this.As=null,this.$state=0,this.cn=e,this.Ar=s,this.targetObserver=h.tt(t.LifecycleFlags.Gs,i,n)}Rr(s){const i=this.$scope.Bi;Object.assign(i,s);const n=this.Ar.evaluate(t.LifecycleFlags.Y,this.$scope,this.cn);for(const t in s)delete i[t];return n}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i;const n=this.Ar;hasBind(n)&&n.bind(s,i,this),this.targetObserver.W(t=>this.Rr(t),s),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Ar;hasUnbind(s)&&s.ln(t,this.$scope,this),this.$scope=null,this.targetObserver.W(null,t),this.$state&=-67}nt(t,s,i){}j(t,s,i){}}const IExpressionParser=kernel.DI.qi("IExpressionParser").Ui(t=>t.singleton(zt));class zt{constructor(){this.Vr=Object.create(null),this.Dr=Object.create(null),this.$r=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.$r[t];return void 0===i&&(i=this.$r[t]=this.Br(t,s)),i}case 539:{let i=this.Dr[t];return void 0===i&&(i=this.Dr[t]=this.Br(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.eh;let i=this.Vr[t];return void 0===i&&(i=this.Vr[t]=this.Br(t,s)),i}}}cache(t){const{Dr:s,Vr:i,$r:n}=this;for(const h in t){const e=t[h];switch(e.J){case 24:n[h]=e;break;case 55:s[h]=e;break;default:i[h]=e}}}Br(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),kernel.PLATFORM.lh):new AccessScope(parts[0]);let n=1;for(;parts.length>n;){const t=parts[n];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),kernel.PLATFORM.lh):new AccessMember(i,parts[n]),n++}return i}catch(t){throw kernel.Reporter.error(3,t)}}}(BindingType=t.BindingType||(t.BindingType={}))[BindingType.ai=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Mr=1280]="IsRef",BindingType[BindingType.Fr=512]="IsIterator",BindingType[BindingType.xr=256]="IsCustom",BindingType[BindingType.Lr=128]="IsFunction",BindingType[BindingType.Nr=64]="IsEvent",BindingType[BindingType.Ur=32]="IsProperty",BindingType[BindingType.qr=16]="IsCommand",BindingType[BindingType.Er=48]="IsPropertyCommand",BindingType[BindingType.zr=80]="IsEventCommand",BindingType[BindingType.Qr=6]="DelegationStrategyDelta",BindingType[BindingType.Hr=15]="Command",BindingType[BindingType.Wr=49]="OneTimeCommand",BindingType[BindingType._r=50]="ToViewCommand",BindingType[BindingType.Kr=51]="FromViewCommand",BindingType[BindingType.Gr=52]="TwoWayCommand",BindingType[BindingType.Jr=53]="BindCommand",BindingType[BindingType.Xr=86]="TriggerCommand",BindingType[BindingType.Yr=87]="CaptureCommand",BindingType[BindingType.Zr=88]="DelegateCommand",BindingType[BindingType.so=153]="CallCommand",BindingType[BindingType.io=26]="OptionsCommand",BindingType[BindingType.no=539]="ForCommand",BindingType[BindingType.ho=284]="CustomCommand";const{Ls:Qt,oneTime:Ht}=t.BindingMode;class MultiInterpolationBinding{constructor(s,i,n,h,mode,e){this.gs=null,this.As=null,this.$state=0,this.$scope=null,this.eo=i,this.cn=e,this.mode=mode,this.st=s,this.target=n,this.Sr=h;const r=i.X,parts=this.parts=Array(r.length);for(let o=0,c=r.length;c>o;++o)parts[o]=new t.InterpolationBinding(r[o],i,n,h,mode,s,e,0===o)}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.us(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,n=parts.length;n>i;++i)parts[i].ws(t,s)}us(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].us(t)}}t.InterpolationBinding=class{constructor(s,i,n,h,mode,e,r,o){this.$state=0,this.eo=i,this.ro=o,this.mode=mode,this.cn=r,this.st=e,this.Ar=s,this.target=n,this.Sr=h,this.targetObserver=e.kr(t.LifecycleFlags.Gs,n,h)}Ir(value,s){this.targetObserver.W(value,s|t.LifecycleFlags._)}j(t,s,i){if(!(2&this.$state))return;const n=this.targetObserver.H(),h=this.eo.evaluate(i,this.$scope,this.cn);h!==n&&this.Ir(h,i),0==(this.mode&Ht)&&(this.version++,this.Ar.connect(i,this.$scope,this),this.unobserve(0))}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.us(t)}this.$state|=2,this.$scope=s;const i=this.Ar;i.bind&&i.bind(t,s,this),this.ro&&this.Ir(this.eo.evaluate(t,s,this.cn),t),this.mode&Qt&&i.connect(t,s,this)}us(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.Ar;s.ln&&s.ln(t,this.$scope,this),this.$scope=null,this.unobserve(1)}},t.InterpolationBinding=s([connectable()],t.InterpolationBinding),t.LetBinding=class{constructor(t,s,i,n,toViewModel=0){this.gs=null,this.As=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=null,this.cn=n,this.st=i,this.Ar=t,this.target=null,this.Sr=s,this.toViewModel=toViewModel}j(s,i,n){if(2&this.$state){if(!(n&t.LifecycleFlags._))throw kernel.Reporter.error(15,n);{const{target:t,Sr:s}=this,i=t[s],h=this.Ar.evaluate(n,this.$scope,this.cn);h!==i&&(t[s]=h)}}}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.Fi:i.Bi;const n=this.Ar;n.bind&&n.bind(s,i,this),this.target[this.Sr]=this.Ar.evaluate(t.LifecycleFlags.et,i,this.cn),this.Ar.connect(s,i,this),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Ar;s.ln&&s.ln(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}},t.LetBinding=s([connectable()],t.LetBinding);class Ref{constructor(t,s,i){this.gs=null,this.As=null,this.$state=0,this.cn=i,this.Ar=t,this.target=s}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i;const n=this.Ar;hasBind(n)&&n.bind(s,i,this),this.Ar.assign(s,this.$scope,this.cn,this.target),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64,this.Ar.evaluate(t,this.$scope,this.cn)===this.target&&this.Ar.assign(t,this.$scope,this.cn,null);const s=this.Ar;hasUnbind(s)&&s.ln(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,s,i){}j(t,s,i){}}t.CollectionLengthObserver=class{constructor(t,s){this.N=t,this.U=s,this.q=t[s]}H(){return this.N[this.U]}lt(t){this.N[this.U]=t}bt(t){this.m(this.N[this.U],this.q,t),this.q=this.N[this.U]}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}},t.CollectionLengthObserver=s([targetObserver()],t.CollectionLengthObserver);const Wt=Array.prototype,_t=Wt.push,Kt=Wt.unshift,Gt=Wt.pop,Jt=Wt.shift,Xt=Wt.splice,Yt=Wt.reverse,Zt=Wt.sort,ts={push:_t,unshift:Kt,pop:Gt,shift:Jt,splice:Xt,reverse:Yt,sort:Zt},ss=["push","unshift","pop","shift","splice","reverse","sort"],is={push(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return _t.apply(s,arguments);const n=s.length,h=arguments.length;if(0===h)return n;s.length=i.at.length=n+h;let e=n;for(;s.length>e;)s[e]=arguments[e-n],i.at[e]=-2,e++;return i.m("push",arguments,i.ft|t.LifecycleFlags.Xs),s.length},unshift(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return Kt.apply(s,arguments);const n=arguments.length,h=Array(n);let e=0;for(;n>e;)h[e++]=-2;Kt.apply(i.at,h);const r=Kt.apply(s,arguments);return i.m("unshift",arguments,i.ft|t.LifecycleFlags.Xs),r},pop(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return Gt.call(s);const n=i.at,h=Gt.call(s);return n[n.length-1]>-1&&Gt.call(n.wt,h),Gt.call(n),i.m("pop",arguments,i.ft|t.LifecycleFlags.Xs),h},shift(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return Jt.call(s);const n=i.at,h=Jt.call(s);return n[0]>-1&&Jt.call(n.wt,h),Jt.call(n),i.m("shift",arguments,i.ft|t.LifecycleFlags.Xs),h},splice(s,i){let n=this;void 0!==n.Ti&&(n=n.Ti);const h=n.vt;if(void 0===h)return Xt.apply(n,arguments);const e=h.at;if(i>0){let t=isNaN(s)?0:s;const to=t+i;for(;to>t;)e[t]>-1&&Xt.call(e.wt,n[t]),t++}const r=arguments.length;if(r>2){const t=r-2,n=Array(t);let h=0;for(;t>h;)n[h++]=-2;Xt.call(e,s,i,...n)}else 2===r&&Xt.call(e,s,i);const o=Xt.apply(n,arguments);return h.m("splice",arguments,h.ft|t.LifecycleFlags.Xs),o},reverse(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return Yt.call(s),this;const n=s.length,h=n/2|0;let e=0;for(;e!==h;){const t=n-e-1,h=s[e],r=i.at[e],o=i.at[t];s[e]=s[t],i.at[e]=o,s[t]=h,i.at[t]=r,e++}return i.m("reverse",arguments,i.ft|t.LifecycleFlags.Xs),this},sort(s){let i=this;void 0!==i.Ti&&(i=i.Ti);const n=i.vt;if(void 0===n)return Zt.call(i,s),this;const h=i.length;if(2>h)return this;F(i,n.at,0,h,B);let e=0;for(;h>e&&void 0!==i[e];)e++;return void 0!==s&&"function"==typeof s||(s=$),F(i,n.at,0,e,s),n.m("sort",arguments,n.ft|t.LifecycleFlags.Xs),this}},ns={oo:1,Hs:0,Pi:1},def=Object.defineProperty;for(const t of ss)def(is[t],"observing",{value:1,oo:0,Pi:0,Hs:0});enableArrayObservation(),t.ArrayObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags._s,this.pt()}},t.ArrayObserver=s([collectionObserver(9)],t.ArrayObserver);const hs=Map.prototype,es=hs.set,rs=hs.clear,os=hs.delete,cs={set:es,clear:rs,delete:os},ls=["set","clear","delete"],us={set(s,value){let i=this;void 0!==i.Ti&&(i=i.Ti);const n=i.vt;if(void 0===n)return es.call(i,s,value),this;const h=i.size;if(es.call(i,s,value),i.size===h){let t=0;for(const h of i.entries()){if(h[0]===s)return h[1]!==value&&(n.at[t]=-2),this;t++}return this}return n.at[h]=-2,n.m("set",arguments,n.ft|t.LifecycleFlags.Xs),this},clear(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return rs.call(s);if(s.size>0){const n=i.at;let h=0;for(const t of s.keys())n[h]>-1&&n.wt.push(t),h++;rs.call(s),n.length=0,i.m("clear",arguments,i.ft|t.LifecycleFlags.Xs)}},delete(value){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return os.call(s,value);if(0===s.size)return 0;let n=0;const h=i.at;for(const t of s.keys()){if(t===value)return h[n]>-1&&h.wt.push(t),h.splice(n,1),os.call(s,value);n++}return i.m("delete",arguments,i.ft|t.LifecycleFlags.Xs),0}},as={oo:1,Hs:0,Pi:1},fs=Object.defineProperty;for(const t of ls)fs(us[t],"observing",{value:1,oo:0,Pi:0,Hs:0});enableMapObservation(),t.MapObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags._s,this.pt()}},t.MapObserver=s([collectionObserver(6)],t.MapObserver);const ds=Set.prototype,bs=ds.add,ps=ds.clear,vs=ds.delete,ws={add:bs,clear:ps,delete:vs},gs=["add","clear","delete"],ms={add(value){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return bs.call(s,value),this;const n=s.size;return bs.call(s,value),s.size===n?this:(i.at[n]=-2,i.m("add",arguments,i.ft|t.LifecycleFlags.Xs),this)},clear(){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return ps.call(s);if(s.size>0){const n=i.at;let h=0;for(const t of s.keys())n[h]>-1&&n.wt.push(t),h++;ps.call(s),n.length=0,i.m("clear",arguments,i.ft|t.LifecycleFlags.Xs)}},delete(value){let s=this;void 0!==s.Ti&&(s=s.Ti);const i=s.vt;if(void 0===i)return vs.call(s,value);if(0===s.size)return 0;let n=0;const h=i.at;for(const t of s.keys()){if(t===value)return h[n]>-1&&h.wt.push(t),h.splice(n,1),vs.call(s,value);n++}return i.m("delete",arguments,i.ft|t.LifecycleFlags.Xs),0}},ys={oo:1,Hs:0,Pi:1},Cs=Object.defineProperty;for(const t of gs)Cs(ms[t],"observing",{value:1,oo:0,Pi:0,Hs:0});enableSetObservation(),t.SetObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags._s,this.pt()}},t.SetObserver=s([collectionObserver(7)],t.SetObserver);const Os={co:0,lo:0};t.CustomSetterObserver=class{constructor(t,s,i){this.N=t,this.U=s,this.q=this.oldValue=void 0,this.uo=i,this.L=0}W(s){this.uo.set.call(this.N,s),this.q!==s&&(this.oldValue=this.q,this.q=s,this.m(s,this.oldValue,t.LifecycleFlags._))}subscribe(t){this.L||this.ao(),this.l(t)}unsubscribe(t){this.u(t)}ao(){this.L=1,this.q=this.N[this.U],Reflect.defineProperty(this.N,this.U,{set:t=>{this.W(t)}})}},t.CustomSetterObserver=s([subscriberCollection(t.MutationKind.g)],t.CustomSetterObserver),t.GetterObserver=class{constructor(t,s,i,n,h,e,r){this.N=i,this.U=n,this.fo=0,this.q=this.oldValue=void 0,this.do=[],this.bo=[],this.po=s,this.vo=0,this.uo=h,this.O=new Proxy(i,(function t(s,i,n){return{get(h,e,r){if(n.wo(e))return Reflect.get(h,e,r);switch(js.call(h)){case"[object Array]":if(n.mo(i.yo(s,h)),"length"===e)return Reflect.get(h,e,h);case"[object Map]":if(n.mo(i.Co(s,h)),"size"===e)return Reflect.get(h,e,h);case"[object Set]":if(n.mo(i.Oo(s,h)),"size"===e)return Reflect.get(h,e,h);default:n.jo(i.tt(s,h,e))}return(function(s,i,n,h,e){const value=Reflect.get(i,n,i);return"function"==typeof value?i[n].bind(i):"object"!=typeof value||null===value?value:new Proxy(value,t(s,h,e))})(s,h,e,i,n)}}})(t,e,this)),Reflect.defineProperty(i,n,{get:()=>this.H()})}jo(t){-1===this.do.indexOf(t)&&this.do.push(t)}mo(t){-1===this.bo.indexOf(t)&&this.bo.push(t)}H(){return this.q=0===this.vo||this.fo?Reflect.apply(this.uo.get,this.O,kernel.PLATFORM.lh):Reflect.apply(this.uo.get,this.N,kernel.PLATFORM.lh),this.q}subscribe(t){this.l(t),1==++this.vo&&this.To(1)}unsubscribe(t){this.u(t),0==--this.vo&&this.Ao()}j(){const s=this.q,i=this.To(0);s!==i&&this.m(i,s,t.LifecycleFlags._)}F(){const s=this.q,i=this.To(0);s!==i&&this.m(i,s,t.LifecycleFlags.ht|t.LifecycleFlags._)}To(t){const s=!this.po.co||t;return s&&(this.Ao(),this.fo=1),this.q=this.H(),s&&(this.do.forEach(t=>{t.subscribe(this)}),this.bo.forEach(t=>{t.jt(this)}),this.fo=0),this.q}wo(t){return!this.fo||"$observers"===t}Ao(){this.do.forEach(t=>{t.unsubscribe(this)}),this.do.length=0,this.bo.forEach(t=>{t.Tt(this)}),this.bo.length=0}},t.GetterObserver=s([subscriberCollection(t.MutationKind.g)],t.GetterObserver);const js={}.toString,IDirtyChecker=kernel.DI.qi("IDirtyChecker").Ui(t=>t.singleton(Ts)),DirtyCheckSettings={So:6,disabled:0,warn:1,Io:0,Po(){this.So=6,this.disabled=0,this.warn=1,this.Io=0}};class Ts{constructor(){this.ko=0,this.Ro=[]}Vo(s,i){if(DirtyCheckSettings.Io)throw kernel.Reporter.error(800);return DirtyCheckSettings.warn&&kernel.Reporter.write(801),new t.DirtyCheckProperty(this,s,i)}Do(t){this.Ro.push(t),1===this.Ro.length&&kernel.PLATFORM.$o.add(this.Bo,this)}removeProperty(t){this.Ro.splice(this.Ro.indexOf(t),1),0===this.Ro.length&&kernel.PLATFORM.$o.remove(this.Bo,this)}Bo(s){if(DirtyCheckSettings.disabled)return;if(++this.ko<DirtyCheckSettings.So)return;this.ko=0;const i=this.Ro,n=i.length;let h,e=0;for(;n>e;++e)(h=i[e]).Mo()&&h.flush(t.LifecycleFlags.ni)}}t.DirtyCheckProperty=class{constructor(t,s,i){this.N=s,this.U=i,this.Fo=t}Mo(){return this.oldValue!==this.N[this.U]}flush(s){const i=this.N[this.U];this.m(i,this.oldValue,s|t.LifecycleFlags._),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.N[this.U],this.Fo.Do(this)),this.l(t)}unsubscribe(t){this.u(t)&&!this.v()&&this.Fo.removeProperty(this)}},t.DirtyCheckProperty=s([propertyObserver()],t.DirtyCheckProperty);const As=kernel.PLATFORM.pn;class PrimitiveObserver{constructor(t,s){this.xo=1,"length"===s?(this.N=t,this.H=this.Lo):this.H=this.No}Lo(){return this.N.length}No(){}}PrimitiveObserver.prototype.W=As,PrimitiveObserver.prototype.subscribe=As,PrimitiveObserver.prototype.unsubscribe=As,PrimitiveObserver.prototype.K=As;class PropertyAccessor{constructor(t,s){this.N=t,this.U=s}H(){return this.N[this.U]}W(value){this.N[this.U]=value}}const Ss={}.toString,IObserverLocator=kernel.DI.qi("IObserverLocator").Xh(),ITargetObserverLocator=kernel.DI.qi("ITargetObserverLocator").Xh(),ITargetAccessorLocator=kernel.DI.qi("ITargetAccessorLocator").Xh();class Is{constructor(t,s,i,n){this.Uo=[],this.Fo=s,this.A=t,this.qo=i,this.Eo=n}static register(t){return kernel.Registration.singleton(IObserverLocator,this).register(t)}tt(s,i,n){if(s&t.LifecycleFlags.$t&&"object"==typeof i)return t.ProxyObserver.Ps(i,n);if((function(t){return 1==t.$i})(i))return i.xi(s).Ps(s,i,n);let h,e=i.Ws;return e&&n in e?e[n]:((h=this.zo(s,i,n)).xo||(void 0===e&&(e=this.Qo(i)),e[n]=h),h)}Ho(t){this.Uo.push(t)}kr(s,i,n){return this.Eo.Wo(s,i)?this.qo._o(s,i,n)?this.tt(s,i,n):this.Eo.kr(s,this.A,i,n):s&t.LifecycleFlags.$t?t.ProxyObserver.Ps(i,n):new PropertyAccessor(i,n)}yo(t,s){return x(t,this.A,s)}Co(t,s){return L(t,this.A,s)}Oo(t,s){return N(t,this.A,s)}Qo(t){return t.Ws||this.Ko(t)}Ko(t){const value={};return Reflect.defineProperty(t,"$observers",{Hs:0,Pi:0,oo:0,value})||kernel.Reporter.write(0,t),value}Go(t,s,i,n){for(let h=0,e=this.Uo.length;e>h;h++){const e=this.Uo[h].tt(t,s,i,n);if(e)return e}return null}zo(s,i,n){if(!(i instanceof Object))return new PrimitiveObserver(i,n);let h=0;if(this.qo.Wo(s,i)){const t=this.qo.tt(s,this.A,this,i,n);if(null!==t)return t;if(null!==t)return t;h=1}switch(Ss.call(i)){case"[object Array]":return"length"===n?this.yo(s,i).Ot(s):this.Fo.Vo(i,n);case"[object Map]":return"size"===n?this.Co(s,i).Ot(s):this.Fo.Vo(i,n);case"[object Set]":return"size"===n?this.Oo(s,i).Ot(s):this.Fo.Vo(i,n)}const e=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(i,n);if(e&&(e.get||e.set)){if(e.get&&e.get.tt)return e.get.tt(i);return this.Go(s,i,n,e)||(h?this.Fo.Vo(i,n):(function(s,i,n,h,e,r,o){if(0==o.Pi)return n.Vo(e,r);if(o.get){const n=e.constructor.computed&&e.constructor.computed[r]||Os;return o.set?n.lo?new t.GetterObserver(s,n,e,r,o,i,h):new t.CustomSetterObserver(e,r,o):new t.GetterObserver(s,n,e,r,o,i,h)}throw kernel.Reporter.error(18,r)})(s,this,this.Fo,this.A,i,n,e))}return new t.SetterObserver(s,i,n)}}Is.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Ps=kernel.PLATFORM.pn;t.SelfObserver=class{constructor(s,i,n,h){this.ft=s&t.LifecycleFlags._s,t.ProxyObserver.Si(i)?(i.vt.subscribe(this,n),this.N=i.Ti,this.U=n,this.q=i.Ti[n],this.xs=h in i.Ti?i[h].bind(i):Ps):(this.N=i,this.U=n,this.q=i[n],this.xs=h in i?i[h].bind(i):Ps)}j(t,s,i){this.W(t,i)}H(){return this.q}W(s,i){const n=this.q;if(n!==s&&(this.q=s,!(i&t.LifecycleFlags.et))){const t=this.xs(s,n,i);void 0!==t&&(this.q=s=t),this.m(s,n,i)}}},t.SelfObserver=s([propertyObserver()],t.SelfObserver);const{oneTime:ks,Ls:Rs,fn:Vs,Rh:Ds}=t.BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.Jo=i.mode,i.mode=this.mode}ln(t,s,i){i.mode=i.Jo,i.Jo=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(ks)}}BindingBehaviorResource._i("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Rs)}}BindingBehaviorResource._i("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Vs)}}BindingBehaviorResource._i("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ds)}}BindingBehaviorResource._i("twoWay",TwoWayBindingBehavior);const $s={},Bs=t.BindingMode.fn;class DebounceBindingBehavior{bind(s,i,n,h=200){let e,r,o;n instanceof t.Binding?(e="handleChange",o=q,r=n.mode&Bs?t.LifecycleFlags.ti:t.LifecycleFlags._):(e="callSource",o=U,r=t.LifecycleFlags._),n.It=n[e],n.It.Xo=e,n[e]=o,n.At={kt:r,Pt:h,St:0,oldValue:$s}}ln(t,s,i){i[i.It.Xo]=i.It,i.It=null,kernel.PLATFORM.global.clearTimeout(i.At.St),i.At=null}}BindingBehaviorResource._i("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.Yo=t}bind(t,s,i,...n){if(!i.Ir)throw kernel.Reporter.error(11);if(4===arguments.length){const name=n[0];this.Yo.Qi(name,i),i.Zo=name}else{if(4>=arguments.length)throw kernel.Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.Yo.Qi(t[s],i);i.Zo=t}}}ln(t,s,i){const name=i.Zo;if(i.Zo=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.Yo.Hi(t[s],i)}else this.Yo.Hi(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource._i("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(s,i,n,h=200){let e;n.Dt=n[e=n instanceof t.Binding?n.mode===t.BindingMode.Rh?"updateSource":"updateTarget":"callSource"],n.Dt.Xo=e,n[e]=E,n.Rt={Pt:h,Vt:0,St:-1}}ln(t,s,i){i[i.Dt.Xo]=i.Dt,i.Dt=null,kernel.PLATFORM.global.clearTimeout(i.Rt.St),i.Rt=null}}BindingBehaviorResource._i("throttle",ThrottleBindingBehavior);const Ms="custom-element",Fs="custom-attribute";(TargetedInstructionType=t.TargetedInstructionType||(t.TargetedInstructionType={})).tc="ra",TargetedInstructionType.sc="rb",TargetedInstructionType.ic="rc",TargetedInstructionType.nc="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.eo="rf",TargetedInstructionType.hc="rg",TargetedInstructionType.ec="rh",TargetedInstructionType.rc="ri",TargetedInstructionType.oc="rj",TargetedInstructionType.cc="rk";const ITargetedInstruction=kernel.DI.qi("createInterface").Xh(),xs=Object.freeze({required:1,compiler:"default"}),Ls=Object.freeze({required:0,compiler:"default"});class Ns{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Ls,this.bindables=kernel.PLATFORM.Bt,this.instructions=kernel.PLATFORM.lh,this.dependencies=kernel.PLATFORM.lh,this.surrogates=kernel.PLATFORM.lh,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.$t=0}}const Us=["name","template","cache","build","containerless","shadowOptions","hasSlots","useProxies"],qs=["instructions","dependencies","surrogates"],CustomAttributeResource=(kernel.Profiler.lc("AttachLifecycle"),kernel.Profiler.lc("BindLifecycle"),kernel.Profiler.lc("RenderLifecycle"),{name:Fs,G:H,Wi(t){return t.kind===this},_i(s,i){const n=i,h=(function(def,s){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?kernel.PLATFORM.lh:aliases,defaultBindingMode:null==defaultBindingMode?t.BindingMode.Ls:defaultBindingMode,Bs:void 0===def.Bs?0:def.Bs,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},s.bindables,def.bindables),$t:void 0===def.$t?0:def.$t}})("string"==typeof s?{name:s}:s,n),e=n.prototype;return n.kind=CustomAttributeResource,n.description=h,n.register=dt,e.uc=at,e.ws=et,e.qt=W,e.Zt=G,e.us=ct,e.hs=Y,e.As=null,e.gs=null,e.ts=null,e.Et=null,e.He=null,e.$scope=null,e.$hooks=0,e.$state=0,"flush"in e&&(e.ut=null),"binding"in e&&(e.$hooks|=4),"bound"in e&&(e.$hooks|=8,e.Fe=null),"unbinding"in e&&(e.$hooks|=256),"unbound"in e&&(e.$hooks|=512,e.We=null),"created"in e&&(e.$hooks|=2),"attaching"in e&&(e.$hooks|=16),"attached"in e&&(e.$hooks|=32,e.Ne=null),"detaching"in e&&(e.$hooks|=64),"caching"in e&&(e.$hooks|=2048),"detached"in e&&(e.$hooks|=128,e.ze=null),n}}),INode=kernel.DI.qi("INode").Xh(),IRenderLocation=kernel.DI.qi("IRenderLocation").Xh(),IDOM=kernel.DI.qi("IDOM").Xh(),NodeSequence={empty:{childNodes:kernel.PLATFORM.lh,firstChild:null,lastChild:null,ac:()=>kernel.PLATFORM.lh,insertBefore(t){},fc(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.Or=i,this.dc=null,this.bc=null,this.pc=t,this.vc=null,this.location=s}ds(t){const s=this.wc(t);this.Or.dr(s,t),this.Or.ds(t,this.$scope)}xt(t){this.Or.xt(t)}Wt(t){this.Or.Wt(t)}Os(t){this.Or.Os(t)}ss(t){null!==this.vc&&this.vc.release(t)&&(this.vc=null),null!==this.bc&&this.bc.release(t)&&(this.bc=null),this.Or.ss(t)}gc(s,i,n){if(t.ProxyObserver.Si(this)&&(n|=t.LifecycleFlags.$t),n&t.LifecycleFlags.ht){const t=this.wc(n);this.Or.dr(t,n)}else this.$lifecycle.T(this).catch(t=>{throw t})}flush(s){t.ProxyObserver.Si(this)&&(s|=t.LifecycleFlags.$t);const i=this.wc(s);this.Or.dr(i,s)}wc(t){return this.value?this.vc=this.mc(this.vc,this.pc,t):null!==this.dc?this.bc=this.mc(this.bc,this.dc,t):null}mc(t,s,i){return null===t&&(t=s.create(i)),t.yc(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],s([bindable],If.prototype,"value",void 0),CustomAttributeResource._i({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Cc=t}link(t){t.dc=this.Cc}}Else.inject=[IViewFactory],CustomAttributeResource._i({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.Cc=i,this.Oc=0,this.location=t,this.jc=null,this.Tc=s,this.Ac=[]}ds(t){this.Sc(t)}bound(s){let i=this.Tc.vs;for(;null!==i;){if(t.ProxyObserver.Ai(i.target)===t.ProxyObserver.Ai(this)&&"items"===i.Sr){this.Ic=i.Ar;break}i=i.gs}this.Pc=this.Ic.wh.evaluate(s,this.$scope,null),this.kc(null,s)}xt(t){const{Ac:s,location:i}=this;for(let n=0,h=s.length;h>n;++n){const h=s[n];h.yc(i),h.qt(t)}}Wt(t){const{Ac:s}=this;for(let i=0,n=s.length;n>i;++i){const n=s[i];n.Zt(t),n.release(t)}}_e(t){this.Sc(t);const{Ac:s}=this;for(let i=0,n=s.length;n>i;++i)s[i].us(t)}Rc(s,i,n){this.Sc(n),this.kc(null,n|t.LifecycleFlags._)}F(s,i){this.kc(s,i|t.LifecycleFlags.ht|t.LifecycleFlags._)}kc(s,i){t.ProxyObserver.Si(this)&&(i|=t.LifecycleFlags.$t);const{Ac:n,$lifecycle}=this;if(2&this.$state){const{Pc:t,$scope,Cc:h,Ic:e,Vc:r}=this,o=n.length,c=e.count(r);if(c>o){n.length=c;for(let t=o;c>t;++t)n[t]=h.create(i)}else if(o>c){$lifecycle.Qt();for(let t=c,s=n[t];o>t;s=n[++t])s.release(i),s.Zt(i);$lifecycle.Kt(i),$lifecycle.ms();for(let t=c,s=n[t];o>t;s=n[++t])s.us(i);if($lifecycle.js(i),n.length=c,0===c)return}else if(0===c)return;$lifecycle.as(),e.mh(r,null===s?(s,h,e)=>{const r=n[h];r.ws(i,Scope.Ni(i,$scope,r.$scope&&r.$scope.Fi[t]===e?r.$scope.Fi:BindingContext.create(i,t,e)))}:(h,e,r)=>{const o=n[e];o.ws(i,Scope.Ni(i,$scope,!o.$scope||s[e]!==e&&o.$scope.Fi[t]!==r?BindingContext.create(i,t,r):o.$scope.Fi))}),$lifecycle.bs(i)}if(8&this.$state){const{location:t}=this;if($lifecycle.Mt(),null===s)for(let s=0,h=n.length;h>s;++s){const h=n[s];h.yc(t),h.qt(i)}else for(let h=0,e=n.length;e>h;++h)if(s[h]!==h){const s=n[h];s.yc(t),s.qt(i)}$lifecycle.Nt(i)}}Sc(t){const s=this.jc;if(3&this.$state){const i=this.jc=getCollectionObserver(t,this.$lifecycle,this.Vc);s!==i&&s&&s.Tt(this),i&&i.jt(this)}else s&&s.Tt(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],s([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource._i({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.Cc=t,this.currentView=this.Cc.create(),this.currentView.yc(s)}ds(s){this.currentView.ws(s|t.LifecycleFlags.ui,this.$scope)}xt(t){this.currentView.qt(t)}Wt(t){this.currentView.Zt(t)}Os(t){this.currentView.us(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource._i({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.Cc=t,this.currentView=this.Cc.create(),this.currentView.yc(s)}gc(){2&this.$state&&this.Dc(t.LifecycleFlags.oi)}ds(t){this.Dc(t)}xt(t){this.currentView.qt(t)}Wt(t){this.currentView.Zt(t)}Os(t){this.currentView.us(t)}Dc(t){const s=Scope.Ni(t,this.$scope,this.value);this.currentView.ws(t,s)}}With.inject=[IViewFactory,IRenderLocation],s([bindable],With.prototype,"value",void 0),CustomAttributeResource._i({name:"with",isTemplateController:1},With);const IProjectorLocator=kernel.DI.qi("IProjectorLocator").Xh(),CustomElementResource={name:Ms,G:z,Wi(t){return t.kind===this},$c:Q,_i(t,s=null){if(!t)throw kernel.Reporter.error(70);const i=null===s?class{}:s,n=buildTemplateDefinition(i,t),h=i.prototype;return i.kind=CustomElementResource,i.description=n,i.register=pt,h.uc=ft,h.ws=rt,h.qt=_,h.Zt=J,h.us=lt,h.hs=Z,h.As=null,h.gs=null,h.ts=null,h.Et=null,h.He=null,h.$scope=null,h.$hooks=0,h.vs=null,h.Ts=null,h.Ut=null,h.Yt=null,h.Le=st,h.Ee=it,h.xe=null,h.qe=null,h.rs=null,"flush"in h&&(h.ut=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.Fe=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.We=null),"render"in h&&(h.$hooks|=1024),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.Ne=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.ze=null),i}},Es={mode:"open"},ISanitizer=kernel.DI.qi("ISanitizer").Ui(t=>t.singleton(class{Bc(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.Mc=t}Ls(t){return null==t?null:this.Mc.Bc(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource._i("sanitize",SanitizeValueConverter);class zs{constructor($lifecycle,cache){this.vs=null,this.Ts=null,this.gs=null,this.As=null,this.Ut=null,this.Yt=null,this.Et=null,this.ts=null,this.xe=null,this.qe=null,this.He=null,this.$state=0,this.$scope=null,this.cs=0,this.$lifecycle=$lifecycle,this.cache=cache}yc(t){this.cs=0,this.location=t}release(t){return this.cs=1,8&this.$state?this.cache.Fc(this):!!this.Ee(t)}xc(t){this.$scope=t,this.ws=wt,this.us=gt}}class Qs{constructor(name,template,t){this.Lc=0,this.Nc=-1,this.cache=null,this.A=t,this.name=name,this.template=template}Uc(t,s){t&&("*"===t?t=Qs.qc:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Nc&&s||(this.Nc=t)),this.cache=this.Nc>0?[]:null,this.Lc=this.Nc>0}Fc(t){return null!==this.cache&&this.Nc>this.cache.length}ls(s){return this.Fc(s)?(s.hs(t.LifecycleFlags.Gs),this.cache.push(s),1):0}create(t){const cache=this.cache;let s;if(null!==cache&&cache.length>0)return(s=cache.pop()).$state&=-129,s;if(s=new zs(this.A,this),this.template.Vs(s,null,null,t),!s.$nodes)throw kernel.Reporter.error(90);return s}}Qs.qc=65535,(t=>{t.ws=ot,t.us=ut,t.qt=K,t.Zt=X,t.hs=tt,t.Le=nt,t.Ee=ht})(zs.prototype);const ITemplateCompiler=kernel.DI.qi("ITemplateCompiler").Xh();(ViewCompileFlags=t.ViewCompileFlags||(t.ViewCompileFlags={}))[ViewCompileFlags.Gs=1]="none",ViewCompileFlags[ViewCompileFlags.Ec=2]="surrogate",ViewCompileFlags[ViewCompileFlags.zc=4]="shadowDOM";const ITemplateFactory=kernel.DI.qi("ITemplateFactory").Xh(),Hs={Qc:null,dom:null,Vs(t){t.$nodes=NodeSequence.empty,t.$context=null}},Ws="default",IInstructionRenderer=kernel.DI.qi("IInstructionRenderer").Xh(),IRenderer=kernel.DI.qi("IRenderer").Xh(),IRenderingEngine=kernel.DI.qi("IRenderingEngine").Ui(t=>t.singleton(_s));class _s{constructor(t,s,i,n){this.Hc=new Map,this.Wc=t,this._c=s,this.Kc=new Map,this.A=i,this.Gc=new Map,this.Jc=n.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Ds(dom,t,s,i){if(!t)return null;let n=this.Gc.get(t);return n||(n=this.Xc(dom,t,s,i),this.Gc.set(t,n)),n}Yc(dom,t,s){if(!t)return null;let i=this.Kc.get(t);if(!i){const n=buildTemplateDefinition(null,t),template=this.Xc(dom,n,s,null);(i=new Qs(n.name,template,this.A)).Uc(n.cache,1),this.Kc.set(t,i)}return i}Ss(t,s,i){let n=this.Hc.get(s);n||(n=Xs.create(s),this.Hc.set(s,n)),n.Zc(t,i,this.A)}Xc(dom,s,i,n){if(null===i&&(i=this.Wc),null!==s.template){const h=createRenderContext(dom,i,s.dependencies,n);if(s.build.required){const i=s.build.compiler||Ws,compiler=this.Jc[i];if(void 0===compiler)throw kernel.Reporter.error(20,i);s=compiler.compile(dom,s,new kernel.RuntimeCompilationResources(h),t.ViewCompileFlags.Ec)}return this._c.create(h,s)}return Hs}}_s.inject=[kernel.IContainer,ITemplateFactory,ILifecycle,kernel.all(ITemplateCompiler)];class Ks{constructor(){this.g=null}Qs(t){this.g=t}resolve(t,s){if(void 0===this.g)throw kernel.Reporter.error(50);return this.g}K(){this.g=null}}class Gs{Qs(t,parts){this.Cc=t,this.tl=parts||kernel.PLATFORM.Bt}resolve(t,s){const i=this.Cc;if(null==i)throw kernel.Reporter.error(50);if(!i.name||!i.name.length)throw kernel.Reporter.error(51);const n=this.tl[i.name];if(n){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.Yc(dom,n,s)}return i}K(){this.Cc=null,this.tl=kernel.PLATFORM.Bt}}let Js=class{constructor(t,customElement){this.yt=0,this.children=null,this.customElement=customElement,this.A=t,this.L=0}H(){return this.L||(this.L=1,this.customElement.rs.sl(()=>{this.il()}),this.children=mt(this.customElement.rs.children)),this.children}W(t){}flush(s){this.m(this.children,void 0,s|t.LifecycleFlags._),this.yt=0}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}il(){this.children=mt(this.customElement.rs.children),"$childrenChanged"in this.customElement&&this.customElement.nl(),this.A.T(this).catch(t=>{throw t}),this.yt=1}};Js=s([subscriberCollection(t.MutationKind.g)],Js);class Xs{constructor(){}static create(t){const s=new Xs;return s.bindables=t.description.bindables,s}Zc(t,s,i){s.$lifecycle=i,"$projector"in s?this.hl(t,i,s):this.el(t,s)}hl(t,s,i){this.el(t,i).rl=new Js(s,i),Reflect.defineProperty(i,"$children",{Hs:0,get(){return this.Ws.rl.H()}})}el(s,i){const n={},bindables=this.bindables,h=Object.getOwnPropertyNames(bindables);if(s&t.LifecycleFlags.$t)for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,t.ProxyObserver.Ps(i).O,name,bindables[name].xs)}else{for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,i,name,bindables[name].xs),yt(s,i,name)}Reflect.defineProperty(i,"$observers",{Hs:0,value:n})}return n}}kernel.Profiler.lc("Aurelia.start"),kernel.Profiler.lc("Aurelia.stop");class Aurelia{constructor(t=kernel.DI.ol()){this.Wc=t,this.cl=[],this.ll=[],this.ul=[],this.al=0,this.fl=null,kernel.Registration.g(Aurelia,this).register(t,Aurelia)}register(...t){return this.Wc.register(...t),this}app(s){const host=s.host;let dom;if(this.Wc.has(IDOM,0))dom=this.Wc.get(IDOM);else{const t=this.Wc.get(IDOMInitializer);dom=t.initialize(s)}let component,i=t.LifecycleFlags.hi,n=t.LifecycleFlags.Jt;s.$t&&(i|=t.LifecycleFlags.$t,n|=t.LifecycleFlags.$t);const h=s.component;CustomElementResource.Wi(h)?(this.Wc.register(h),component=this.Wc.get(CustomElementResource.G(h.description.name))):component=h,component=t.ProxyObserver.Ai(component);const e=()=>{if(host.$au=this,!this.cl.includes(component)){this.fl=component,this.cl.push(component);const t=this.Wc.get(IRenderingEngine),s=this.Wc.get(IProjectorLocator);component.uc(i,dom,s,t,host,this.Wc)}component.ws(i|t.LifecycleFlags.et,null),component.qt(i|t.LifecycleFlags.Ft)};return this.ll.push(e),this.ul.push(()=>{component.Zt(n|t.LifecycleFlags.Ht),component.us(n|t.LifecycleFlags.ys),host.$au=null}),this.al&&e(),this}root(){return t.ProxyObserver.ji(this.fl)}start(){for(const t of this.ll)t();return this.al=1,this}stop(){this.al=0;for(const t of this.ul)t();return this}}kernel.PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=kernel.DI.qi("IDOMInitializer").Xh();class Ys{constructor(t){const s=this.dl={};t.forEach(t=>{s[t.Ks]=t})}static register(t){return kernel.Registration.singleton(IRenderer,this).register(t)}Vs(t,dom,s,i,targets,n,host,parts){const h=n.instructions,e=this.dl;if(targets.length!==h.length)throw kernel.Reporter.error(targets.length>h.length?30:31);for(let n=0,r=targets.length;r>n;++n){const instructions=h[n],r=targets[n];for(let n=0,h=instructions.length;h>n;++n){const h=instructions[n];e[h.type].Vs(t,dom,s,i,r,h,parts)}}if(host){const h=n.surrogates;for(let n=0,r=h.length;r>n;++n){const r=h[n];e[r.type].Vs(t,dom,s,i,host,r,parts)}}}}Ys.inject=[kernel.all(IInstructionRenderer)];let Zs=class{Vs(t,dom,s,i,n,h){n[h.to]=h.value}};Zs=s([instructionRenderer("re")],Zs);let ti=class{constructor(t){this.bl=t}Vs(t,dom,s,i,n,h){const e=s.zs(i,n,h,null,null,n,1),component=s.get(z(h.res)),r=s.get(IRenderer).dl,o=s.get(IProjectorLocator),c=h.instructions;component.uc(t,dom,o,this.bl,n,s,h);for(let n=0,h=c.length;h>n;++n){const h=c[n];r[h.type].Vs(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),e.K()}};ti.inject=[IRenderingEngine],ti=s([instructionRenderer("ra")],ti);let si=class{constructor(t){this.bl=t}Vs(t,dom,s,i,n,h){const e=s.zs(i,n,h),component=s.get(H(h.res)),r=s.get(IRenderer).dl,o=h.instructions;component.uc(t,this.bl);for(let n=0,h=o.length;h>n;++n){const h=o[n];r[h.type].Vs(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),e.K()}};si.inject=[IRenderingEngine],si=s([instructionRenderer("rb")],si);let ii=class{constructor(t){this.bl=t}Vs(t,dom,s,i,n,h,parts){const e=this.bl.Yc(dom,h.def,s),r=s.zs(i,n,h,e,parts,dom.pl(n),0),component=s.get(H(h.res)),o=s.get(IRenderer).dl,c=h.instructions;component.uc(t,this.bl),h.link&&component.link(i.Yt);for(let n=0,h=c.length;h>n;++n){const h=c[n];o[h.type].Vs(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),r.K()}};ii.inject=[IRenderingEngine],ii=s([instructionRenderer("rc")],ii);let ni=class{constructor(t,s){this.vl=t,this.st=s}Vs(s,dom,i,n,h,e){dom.remove(h);const r=e.instructions,toViewModel=e.toViewModel;for(let s=0,h=r.length;h>s;++s){const h=r[s],e=ensureExpression(this.vl,h.from,48);addBindable(n,new t.LetBinding(e,h.to,this.st,i,toViewModel))}}};ni.inject=[IExpressionParser,IObserverLocator],ni=s([instructionRenderer("rd")],ni);let hi=class{constructor(t,s){this.vl=t,this.st=s}Vs(t,dom,s,i,n,h){const e=ensureExpression(this.vl,h.from,153);addBindable(i,new Call(e,n,h.to,this.st,s))}};hi.inject=[IExpressionParser,IObserverLocator],hi=s([instructionRenderer("rh")],hi);let ei=class{constructor(t){this.vl=t}Vs(t,dom,s,i,n,h){const e=ensureExpression(this.vl,h.from,1280);addBindable(i,new Ref(e,n,s))}};ei.inject=[IExpressionParser],ei=s([instructionRenderer("rj")],ei);let ri=class{constructor(t,s){this.vl=t,this.st=s}Vs(s,dom,i,n,h,e){let bindable;const r=ensureExpression(this.vl,e.from,2048);addBindable(n,bindable=r.Ch?new MultiInterpolationBinding(this.st,r,h,e.to,t.BindingMode.Ls,i):new t.InterpolationBinding(r.Oh,r,h,e.to,t.BindingMode.Ls,this.st,i,1))}};ri.inject=[IExpressionParser,IObserverLocator],ri=s([instructionRenderer("rf")],ri);let oi=class{constructor(t,s){this.vl=t,this.st=s}Vs(s,dom,i,n,h,e){const r=ensureExpression(this.vl,e.from,48|e.mode);addBindable(n,new t.Binding(r,h,e.to,e.mode,this.st,i))}};oi.inject=[IExpressionParser,IObserverLocator],oi=s([instructionRenderer("rg")],oi);let ci=class{constructor(t,s){this.vl=t,this.st=s}Vs(s,dom,i,n,h,e){const r=ensureExpression(this.vl,e.from,539);addBindable(n,new t.Binding(r,h,e.to,t.BindingMode.Ls,this.st,i))}};ci.inject=[IExpressionParser,IObserverLocator],ci=s([instructionRenderer("rk")],ci);const li=Is,ui=Mt,ai=Ys,DefaultComponents=[li,ui,ai],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,DefaultResources=[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration],DefaultRenderers=[oi,ci,hi,ei,ri,Zs,ti,si,ii,ni],fi={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),ol(){return this.register(kernel.DI.ol())}};t.CallFunction=CallFunction,t.connects=function(t){return 32==(32&t.J)},t.observes=function(t){return 64==(64&t.J)},t.callsFunction=function(t){return 128==(128&t.J)},t.hasAncestor=function(t){return 256==(256&t.J)},t.isAssignable=function(t){return 8192==(8192&t.J)},t.isLeftHandSide=function(t){return 1024==(1024&t.J)},t.isPrimary=function(t){return 512==(512&t.J)},t.isResource=function(t){return 32768==(32768&t.J)},t.hasBind=hasBind,t.hasUnbind=hasUnbind,t.isLiteral=isLiteral,t.arePureLiterals=arePureLiterals,t.isPureLiteral=isPureLiteral,t.BindingBehavior=BindingBehavior,t.ValueConverter=ValueConverter,t.Assign=Assign,t.Conditional=Conditional,t.AccessThis=AccessThis,t.AccessScope=AccessScope,t.AccessMember=AccessMember,t.AccessKeyed=AccessKeyed,t.CallScope=CallScope,t.CallMember=CallMember,t.Binary=Binary,t.Unary=Unary,t.PrimitiveLiteral=PrimitiveLiteral,t.HtmlLiteral=HtmlLiteral,t.ArrayLiteral=ArrayLiteral,t.ObjectLiteral=ObjectLiteral,t.Template=Template,t.TaggedTemplate=TaggedTemplate,t.ArrayBindingPattern=ArrayBindingPattern,t.ObjectBindingPattern=ObjectBindingPattern,t.BindingIdentifier=BindingIdentifier,t.ForOfStatement=ForOfStatement,t.Interpolation=Interpolation,t.Call=Call,t.connectable=connectable,t.IExpressionParser=IExpressionParser,t.MultiInterpolationBinding=MultiInterpolationBinding,t.Ref=Ref,t.enableArrayObservation=enableArrayObservation,t.disableArrayObservation=function(){for(const t of ss)1==Wt[t].L&&def(Wt,t,Object.assign({},ns,{value:ts[t]}))},t.enableMapObservation=enableMapObservation,t.disableMapObservation=function(){for(const t of ls)1==hs[t].L&&fs(hs,t,Object.assign({},as,{value:cs[t]}))},t.enableSetObservation=enableSetObservation,t.disableSetObservation=function(){for(const t of gs)1==ds[t].L&&Cs(ds,t,Object.assign({},ys,{value:ws[t]}))},t.BindingContext=BindingContext,t.Scope=Scope,t.OverrideContext=OverrideContext,t.collectionObserver=collectionObserver,t.computed=function(t){return function(s,i){(s.computed||(s.computed={}))[i]=t}},t.IDirtyChecker=IDirtyChecker,t.DirtyCheckSettings=DirtyCheckSettings,t.IObserverLocator=IObserverLocator,t.ITargetObserverLocator=ITargetObserverLocator,t.ITargetAccessorLocator=ITargetAccessorLocator,t.getCollectionObserver=getCollectionObserver,t.PrimitiveObserver=PrimitiveObserver,t.PropertyAccessor=PropertyAccessor,t.propertyObserver=propertyObserver,t.ISignaler=ISignaler,t.subscriberCollection=subscriberCollection,t.batchedSubscriberCollection=batchedSubscriberCollection,t.targetObserver=targetObserver,t.bindingBehavior=function(t){return s=>BindingBehaviorResource._i(t,s)},t.BindingBehaviorResource=BindingBehaviorResource,t.BindingModeBehavior=BindingModeBehavior,t.OneTimeBindingBehavior=OneTimeBindingBehavior,t.ToViewBindingBehavior=ToViewBindingBehavior,t.FromViewBindingBehavior=FromViewBindingBehavior,t.TwoWayBindingBehavior=TwoWayBindingBehavior,t.DebounceBindingBehavior=DebounceBindingBehavior,t.SignalBindingBehavior=SignalBindingBehavior,t.ThrottleBindingBehavior=ThrottleBindingBehavior,t.customAttribute=function(t){return s=>CustomAttributeResource._i(t,s)},t.CustomAttributeResource=CustomAttributeResource,t.dynamicOptions=function(t){return void 0===t?bt:bt(t)},t.templateController=function(t){return s=>CustomAttributeResource._i("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s)},t.If=If,t.Else=Else,t.Repeat=Repeat,t.Replaceable=Replaceable,t.With=With,t.containerless=function(t){return void 0===t?vt:vt(t)},t.customElement=function(t){return s=>CustomElementResource._i(t,s)},t.CustomElementResource=CustomElementResource,t.IProjectorLocator=IProjectorLocator,t.useShadowDOM=function(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:Es;return"function"==typeof t?s(t):s},t.valueConverter=function(t){return s=>ValueConverterResource._i(t,s)},t.ValueConverterResource=ValueConverterResource,t.ISanitizer=ISanitizer,t.SanitizeValueConverter=SanitizeValueConverter,t.bindable=bindable,t.Aurelia=Aurelia,t.IDOMInitializer=IDOMInitializer,t.IfRegistration=IfRegistration,t.ElseRegistration=ElseRegistration,t.RepeatRegistration=RepeatRegistration,t.ReplaceableRegistration=ReplaceableRegistration,t.WithRegistration=WithRegistration,t.SanitizeValueConverterRegistration=SanitizeValueConverterRegistration,t.DebounceBindingBehaviorRegistration=DebounceBindingBehaviorRegistration,t.OneTimeBindingBehaviorRegistration=OneTimeBindingBehaviorRegistration,t.ToViewBindingBehaviorRegistration=ToViewBindingBehaviorRegistration,t.FromViewBindingBehaviorRegistration=FromViewBindingBehaviorRegistration,t.SignalBindingBehaviorRegistration=SignalBindingBehaviorRegistration,t.ThrottleBindingBehaviorRegistration=ThrottleBindingBehaviorRegistration,t.TwoWayBindingBehaviorRegistration=TwoWayBindingBehaviorRegistration,t.BasicResources=DefaultResources,t.ObserverLocatorRegistration=li,t.LifecycleRegistration=ui,t.RendererRegistration=ai,t.BasicConfiguration=fi,t.buildTemplateDefinition=buildTemplateDefinition,t.isTargetedInstruction=function(value){const type=value.type;return"string"==typeof type&&2===type.length},t.ITargetedInstruction=ITargetedInstruction,t.INode=INode,t.IRenderLocation=IRenderLocation,t.IDOM=IDOM,t.NodeSequence=NodeSequence,t.CallBindingInstruction=class{constructor(from,to){this.type="rh",this.from=from,this.to=to}},t.FromViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.fn,this.oneTime=0,this.to=to}},t.HydrateAttributeInstruction=class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}},t.HydrateElementInstruction=class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}},t.HydrateTemplateController=class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}},t.InterpolationInstruction=class{constructor(from,to){this.type="rf",this.from=from,this.to=to}},t.IteratorBindingInstruction=class{constructor(from,to){this.type="rk",this.from=from,this.to=to}},t.LetBindingInstruction=class{constructor(from,to){this.type="ri",this.from=from,this.to=to}},t.LetElementInstruction=class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}},t.OneTimeBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.oneTime,this.oneTime=1,this.to=to}},t.RefBindingInstruction=class{constructor(from){this.type="rj",this.from=from}},t.SetPropertyInstruction=class{constructor(value,to){this.type="re",this.to=to,this.value=value}},t.ToViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Ls,this.oneTime=0,this.to=to}},t.TwoWayBindingInstruction=class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=t.BindingMode.Rh,this.oneTime=0,this.to=to}},t.AggregateLifecycleTask=AggregateLifecycleTask,t.CompositionCoordinator=CompositionCoordinator,t.ILifecycle=ILifecycle,t.IRenderable=IRenderable,t.IViewFactory=IViewFactory,t.LifecycleTask=LifecycleTask,t.PromiseTask=class{constructor(t,s){this.done=0,this.jr=0,this.xs=s,this.je=t.then(value=>{if(1!=this.jr)return this.done=1,this.xs(value),value})}wr(){return!this.done}cancel(){this.wr()&&(this.jr=1)}gr(){return this.je}},t.stringifyLifecycleFlags=function(s){const i=[];return s&t.LifecycleFlags.Y&&i.push("mustEvaluate"),s&t.LifecycleFlags.Xs&&i.push("isCollectionMutation"),s&t.LifecycleFlags.Ys&&i.push("isInstanceMutation"),s&t.LifecycleFlags.Zs&&i.push("updateTargetObserver"),s&t.LifecycleFlags._&&i.push("updateTargetInstance"),s&t.LifecycleFlags.ti&&i.push("updateSourceExpression"),s&t.LifecycleFlags.si&&i.push("fromAsyncFlush"),s&t.LifecycleFlags.ii&&i.push("fromSyncFlush"),s&t.LifecycleFlags.hi&&i.push("fromStartTask"),s&t.LifecycleFlags.Jt&&i.push("fromStopTask"),s&t.LifecycleFlags.et&&i.push("fromBind"),s&t.LifecycleFlags.ys&&i.push("fromUnbind"),s&t.LifecycleFlags.Ft&&i.push("fromAttach"),s&t.LifecycleFlags.Ht&&i.push("fromDetach"),s&t.LifecycleFlags.ns&&i.push("fromCache"),s&t.LifecycleFlags.ei&&i.push("fromDOMEvent"),s&t.LifecycleFlags.ri&&i.push("fromObserverSetter"),s&t.LifecycleFlags.oi&&i.push("fromBindableHandler"),s&t.LifecycleFlags.ci&&i.push("fromLifecycleTask"),s&t.LifecycleFlags.Gt&&i.push("parentUnmountQueued"),s&t.LifecycleFlags.ot&&i.push("doNotUpdateDOM"),s&t.LifecycleFlags.li&&i.push("isTraversingParentScope"),s&t.LifecycleFlags.ui&&i.push("allowParentScopeTraversal"),i.join("|")},t.instructionRenderer=instructionRenderer,t.ensureExpression=ensureExpression,t.addAttachable=addAttachable,t.addBindable=addBindable,t.CompiledTemplate=class{constructor(dom,t,s,i){this.dom=dom,this.wl=t,this.Cc=s,this.Qc=i}Vs(s,host,parts,i=t.LifecycleFlags.Gs){const n=s.$nodes=this.Cc.gl();s.$context=this.Qc,this.wl.$t&&(i|=t.LifecycleFlags.$t),this.Qc.Vs(i,s,n.ac(),this.wl,host,parts)}},t.createRenderContext=createRenderContext,t.IInstructionRenderer=IInstructionRenderer,t.IRenderer=IRenderer,t.IRenderingEngine=IRenderingEngine,t.ITemplateCompiler=ITemplateCompiler,t.ITemplateFactory=ITemplateFactory,Object.defineProperty(t,"ml",{value:1})});
