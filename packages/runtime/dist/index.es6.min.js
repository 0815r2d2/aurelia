function ensureValidStrategy(strategy){return 0==(strategy&mandatoryStrategy)||8===strategy?1|strategy:strategy}function __decorate(t,e,i,s){var r,n,o=arguments.length,h=3>o?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,e,i,s);else for(n=t.length-1;n>=0;n--)(r=t[n])&&(h=(3>o?r(h):o>3?r(e,i,h):r(e,i))||h);return o>3&&h&&Object.defineProperty(e,i,h),h}function subscriberCollection(t){return function(e){const i=e.prototype;switch(i.t=0,i.i=null,i.s=null,i.o=null,i.h=null,i.l=addSubscriber,i.u=removeSubscriber,i.g=hasSubscriber,i.p=hasSubscribers,t){case MutationKind.v:i.m=callPropertySubscribers;break;case MutationKind.R:i.m=callCollectionSubscribers;break;case MutationKind.L:i.m=callProxySubscribers}}}function addSubscriber(t){if(this.g(t))return 0;const e=this.t;return 1&e?2&e?4&e?8&e?(this.h.push(t),1):(this.h=[t],this.t|=8,1):(this.o=t,this.t|=4,1):(this.s=t,this.t|=2,1):(this.i=t,this.t|=1,1)}function removeSubscriber(t){const e=this.t;if(1&e&&this.i===t)return this.i=null,this.t&=-2,1;if(2&e&&this.s===t)return this.s=null,this.t&=-3,1;if(4&e&&this.o===t)return this.o=null,this.t&=-5,1;if(8&e){const e=this.h;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,1),1===s&&(this.t&=-9),1}return 0}function callPropertySubscribers(t,e,i){const s=this.i,r=this.s,n=this.o;let o=this.h;null!==o&&(o=o.slice()),null!==s&&s.O(t,e,i),null!==r&&r.O(t,e,i),null!==n&&n.O(t,e,i);const h=o&&o.length;if(void 0!==h&&h>0)for(let s=0;h>s;++s){const r=o[s];null!==r&&r.O(t,e,i)}}function callCollectionSubscribers(t,e,i){const s=this.i,r=this.s,n=this.o;let o=this.h;null!==o&&(o=o.slice()),null!==s&&s.O(t,e,i),null!==r&&r.O(t,e,i),null!==n&&n.O(t,e,i);const h=o&&o.length;if(void 0!==h&&h>0)for(let s=0;h>s;++s){const r=o[s];null!==r&&r.O(t,e,i)}this.F.B(this).catch(t=>{throw t})}function callProxySubscribers(t,e,i,s){const r=this.i,n=this.s,o=this.o;let h=this.h;null!==h&&(h=h.slice()),null!==r&&r.O(t,e,i,s),null!==n&&n.O(t,e,i,s),null!==o&&o.O(t,e,i,s);const l=h&&h.length;if(void 0!==l&&l>0)for(let r=0;l>r;++r){const n=h[r];null!==n&&n.O(t,e,i,s)}}function hasSubscribers(){return 0!==this.t}function hasSubscriber(t){const e=this.t;if(1&e&&this.i===t)return 1;if(2&e&&this.s===t)return 1;if(4&e&&this.o===t)return 1;if(8&e){const e=this.h;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const e=t.prototype;e.I=0,e.C=null,e.T=null,e.P=null,e.$=null,e.S=addBatchedSubscriber,e.A=removeBatchedSubscriber,e.M=hasBatchedSubscriber,e.D=hasBatchedSubscribers,e.V=callBatchedCollectionSubscribers}}function addBatchedSubscriber(t){if(this.M(t))return 0;const e=this.I;return 1&e?2&e?4&e?8&e?(this.$.push(t),1):(this.$=[t],this.I|=8,1):(this.P=t,this.I|=4,1):(this.T=t,this.I|=2,1):(this.C=t,this.I|=1,1)}function removeBatchedSubscriber(t){const e=this.I;if(1&e&&this.C===t)return this.C=null,this.I&=-2,1;if(2&e&&this.T===t)return this.T=null,this.I&=-3,1;if(4&e&&this.P===t)return this.P=null,this.I&=-5,1;if(8&e){const e=this.$;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return e.splice(i,1),1===s&&(this.I&=-9),1}return 0}function callBatchedCollectionSubscribers(t,e){const i=this.C,s=this.T,r=this.P;let n=this.$;null!==n&&(n=n.slice()),null!==i&&i.k(t,e),null!==s&&s.k(t,e),null!==r&&r.k(t,e);const o=n&&n.length;if(void 0!==o&&o>0)for(let i=0;o>i;++i){const s=n[i];null!==s&&s.k(t,e)}}function hasBatchedSubscribers(){return 0!==this.I}function hasBatchedSubscriber(t){const e=this.I;if(1&e&&this.C===t)return 1;if(2&e&&this.T===t)return 1;if(4&e&&this.P===t)return 1;if(8&e){const e=this.$;for(let i=0,s=e.length;s>i;++i)if(e[i]===t)return 1}return 0}function mayHaveObservers(value){return null!==value&&"object"==typeof value}function patchProperties(value,t){if(mayHaveObservers(value))if(void 0!==value.j){const e=value.j;let i,s;for(i in e)void 0!==(s=e[i])._&&s._(t|LifecycleFlags.N|LifecycleFlags.K|LifecycleFlags.U)}else void 0!==value.q&&void 0!==value.q._&&value.q._(t|LifecycleFlags.N|LifecycleFlags.K|LifecycleFlags.U)}function patchProperty(value,t,e){if(mayHaveObservers(value)&&void 0!==value.j){const i=value.j[t];i&&void 0!==i._&&i._(e|LifecycleFlags.N|LifecycleFlags.K|LifecycleFlags.U)}}function subscribe(t){0==this.W&&(this.W=1,this.H=this.G[this.X],0==(this.J&LifecycleFlags.N)&&(observedPropertyDescriptor.get=(()=>this.Y()),observedPropertyDescriptor.set=(value=>{this.Z(value,LifecycleFlags.K)}),defineProperty(this.G,this.X,observedPropertyDescriptor)||Reporter.write(1,this.X,this.G))),this.l(t)}function dispose(){Reflect.deleteProperty(this.G,this.X),this.G=null,this.X=null,this.H=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.v)(t);const e=t.prototype;e.W=0,e.G=null,e.X=null,e.H=Symbol(),e.subscribe=e.subscribe||subscribe,e.unsubscribe=e.unsubscribe||e.u,e.tt=e.tt||dispose}}function register(t){const e=BindingBehaviorResource.et(this.description.name);t.register(Registration.singleton(e,this))}function bindingBehavior(t){return e=>BindingBehaviorResource.it(t,e)}function keyFrom(name){return`${this.name}:${name}`}function isType(t){return t.kind===this}function define(t,e){const i=e,s="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=s,i.register=register,i}function register$1(t){const e=this.kind.et(this.description.name);t.register(Registration.singleton(e,this))}function valueConverter(t){return e=>ValueConverterResource.it(t,e)}function keyFrom$1(name){return`${this.name}:${name}`}function isType$1(t){return t.kind===this}function define$1(t,e){const i=e,s="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=s,i.register=register$1,i}function connects(t){return 32==(32&t.st)}function observes(t){return 64==(64&t.st)}function callsFunction(t){return 128==(128&t.st)}function hasAncestor(t){return 256==(256&t.st)}function isAssignable(t){return 8192==(8192&t.st)}function isLeftHandSide(t){return 1024==(1024&t.st)}function isPrimary(t){return 512==(512&t.st)}function isResource(t){return 32768==(32768&t.st)}function hasBind(t){return 2048==(2048&t.st)}function hasUnbind(t){return 4096==(4096&t.st)}function isLiteral(t){return 16384==(16384&t.st)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let e=0;t.length>e;++e)if(!isPureLiteral(t[e]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.st){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.rt);case 17925:return 1}return 0}function evalList(t,e,i,s){const r=s.length,n=Array(r);for(let o=0;r>o;++o)n[o]=s[o].evaluate(t,e,i);return n}function getFunction(t,e,name){const i=null==e?null:e[name];if("function"==typeof i)return i;if(!(t&LifecycleFlags.nt)&&null==i)return null;throw Reporter.error(207,e,name,i)}function isNumeric(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const e=value.length;if(0===e)return 0;let i;for(let t=0;e>t;++t)if(48>(i=value.charCodeAt(t))||i>57)return 0;return 1}function ensureEnoughSlotNames(t){if(t===lastSlot){const e=slotNames.length=versionSlotNames.length=(lastSlot+=5)+1;for(let i=t+1;e>i;++i)slotNames[i]=`_observer${i}`,versionSlotNames[i]=`_observerVersion${i}`}}function addObserver(t){const e=void 0===this.ot?0:this.ot;let i=e;for(;i--&&this[slotNames[i]]!==t;);if(-1===i){for(i=0;this[slotNames[i]];)i++;this[slotNames[i]]=t,t.subscribe(this),i===e&&(this.ot=i+1)}void 0===this.version&&(this.version=0),this[versionSlotNames[i]]=this.version,ensureEnoughSlotNames(i)}function observeProperty(t,e,i){const s=this.lt.ht(t,e,i);this.ct(s)}function unobserve(t){const e=this.ot;let i,s;if(1==t)for(let t=0;e>t;++t)null!=(s=this[i=slotNames[t]])&&(this[i]=null,s.unsubscribe(this));else{const t=this.version;for(let r=0;e>r;++r)this[versionSlotNames[r]]!==t&&null!=(s=this[i=slotNames[r]])&&(this[i]=null,s.unsubscribe(this))}}function connectableDecorator(t){const e=t.prototype;return e.hasOwnProperty("observeProperty")||(e.at=observeProperty),e.hasOwnProperty("unobserve")||(e.unobserve=unobserve),e.hasOwnProperty("addObserver")||(e.ct=addObserver),t}function connectable(t){return void 0===t?connectableDecorator:connectableDecorator(t)}function setValue(t,e){if(this.H!==(t=null==t?this.defaultValue:t)){if(this.H=t,!(e&(LifecycleFlags.U|LifecycleFlags.ut))||this.dt&&e&LifecycleFlags.ft)return this.gt=e,this.F.B(this);this.bt(t,e)}return Promise.resolve()}function flush(t){if(this.dt&&t&LifecycleFlags.ft)return void this.F.B(this).catch(t=>{throw t});const e=this.H;this.oldValue!==e&&(this.bt(e,this.gt|t|LifecycleFlags.K),this.oldValue=this.H)}function patch(t){const e=this.Y();this.H!==e&&(this.bt(e,this.gt|t|LifecycleFlags.K),this.H=e),patchProperties(e,t)}function dispose$1(){this.H=null,this.oldValue=null,this.defaultValue=null,this.G=null,this.X=""}function targetObserver(t=null){return function(e){subscriberCollection(MutationKind.v)(e);const i=e.prototype;i.pt=null,i.H=t,i.oldValue=t,i.defaultValue=t,i.G=null,i.X="",i._=i._||patch,i.Z=i.Z||setValue,i.flush=i.flush||flush,i.tt=i.tt||dispose$1}}function flush$1(t){this.V(this.yt,t|this.J),this.vt&&this.vt._(LifecycleFlags.U|LifecycleFlags.K|this.J),this.Rt()}function dispose$2(){this.R.q=void 0,this.R=null,this.yt=null}function resetIndexMapIndexed(){const t=this.R.length,e=this.yt=Array(t);let i=0;for(;t>i;)e[i]=i++;e.Lt=[]}function resetIndexMapKeyed(){const t=this.R.size,e=this.yt=Array(t);let i=0;for(;t>i;)e[i]=i++;e.Lt=[]}function getLengthObserver(){return void 0===this.vt?this.vt=new CollectionLengthObserver(this,this.Ot):this.vt}function collectionObserver(t){return function(e){subscriberCollection(MutationKind.R)(e),batchedSubscriberCollection()(e);const i=e.prototype;i.pt=null,i.R=null,i.yt=null,i.Bt=0,i.Ot=8&t?"length":"size",i.Ft=t,i.Rt=8&t?resetIndexMapIndexed:resetIndexMapKeyed,i.flush=flush$1,i.tt=dispose$2,i.It=getLengthObserver,i.subscribe=i.subscribe||i.l,i.unsubscribe=i.unsubscribe||i.u,i.Ct=i.Ct||i.S,i.wt=i.wt||i.A}}function sortCompare(t,e){return t===e?0:(e=null===e?"null":""+e)>(t=null===t?"null":""+t)?-1:1}function preSortCompare(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function insertionSort(t,e,from,to,i){let s,r,n,o,h,l,c;for(l=from+1;to>l;l++){for(s=t[l],r=e[l],c=l-1;c>=from&&(o=e[c],(h=i(n=t[c],s))>0);c--)t[c+1]=n,e[c+1]=o;t[c+1]=s,e[c+1]=r}}function quickSort(t,e,from,to,i){let s,r,n,o,h,l,c,a,u,d,f,g,b,p,y,v,m,R,L,O=0,B=0;for(;;){if(10>=to-from)return void insertionSort(t,e,from,to,i);o=e[from],h=e[to-1],n=t[O=from+(to-from>>1)],l=e[O],(c=i(s=t[from],r=t[to-1]))>0&&(d=s,f=o,s=r,o=h,r=d,h=f),0>(a=i(s,n))?(u=i(r,n))>0&&(d=r,f=h,r=n,h=l,n=d,l=f):(d=s,f=o,s=n,o=l,n=r,l=h,r=d,h=f),t[from]=s,e[from]=o,t[to-1]=n,e[to-1]=l,g=r,b=h,y=to-1,t[O]=t[p=from+1],e[O]=e[p],t[p]=g,e[p]=b;t:for(B=p+1;y>B;B++)if(m=e[B],0>(R=i(v=t[B],g)))t[B]=t[p],e[B]=e[p],t[p]=v,e[p]=m,p++;else if(R>0){do{if(--y==B)break t;R=i(L=t[y],g)}while(R>0);t[B]=t[y],e[B]=e[y],t[y]=v,e[y]=m,0>R&&(v=t[B],m=e[B],t[B]=t[p],e[B]=e[p],t[p]=v,e[p]=m,p++)}p-from>to-y?(quickSort(t,e,y,to,i),to=p):(quickSort(t,e,from,p,i),from=y)}}function enableArrayObservation(){for(const t of methods)1!=proto[t].W&&def(proto,t,Object.assign({},descriptorProps,{value:observe[t]}))}function disableArrayObservation(){for(const t of methods)1==proto[t].W&&def(proto,t,Object.assign({},descriptorProps,{value:native[t]}))}function getArrayObserver(t,e,i){return i.q||new ArrayObserver(t,e,i)}function enableMapObservation(){for(const t of methods$1)1!=proto$1[t].W&&def$1(proto$1,t,Object.assign({},descriptorProps$1,{value:observe$1[t]}))}function disableMapObservation(){for(const t of methods$1)1==proto$1[t].W&&def$1(proto$1,t,Object.assign({},descriptorProps$1,{value:native$1[t]}))}function getMapObserver(t,e,i){return i.q||new MapObserver(t,e,i)}function enableSetObservation(){for(const t of methods$2)1!=proto$2[t].W&&def$2(proto$2,t,Object.assign({},descriptorProps$2,{value:observe$2[t]}))}function disableSetObservation(){for(const t of methods$2)1==proto$2[t].W&&def$2(proto$2,t,Object.assign({},descriptorProps$2,{value:native$2[t]}))}function getSetObserver(t,e,i){return i.q||new SetObserver(t,e,i)}function computed(t){return function(e,i){(e.computed||(e.computed={}))[i]=t}}function createComputedObserver(t,e,i,s,r,n,o){if(0==o.Tt)return i.Pt(r,n);if(o.get){const i=r.constructor.computed&&r.constructor.computed[n]||computedOverrideDefaults;return o.set?i.$t?new GetterObserver(t,i,r,n,o,e,s):new CustomSetterObserver(r,n,o):new GetterObserver(t,i,r,n,o,e,s)}throw Reporter.error(18,n)}function createGetterTraps(t,e,i){return{get(s,r,n){if(i.St(r))return Reflect.get(s,r,n);switch(toStringTag$1.call(s)){case"[object Array]":if(i.At(e.Mt(t,s)),"length"===r)return Reflect.get(s,r,s);case"[object Map]":if(i.At(e.Dt(t,s)),"size"===r)return Reflect.get(s,r,s);case"[object Set]":if(i.At(e.Vt(t,s)),"size"===r)return Reflect.get(s,r,s);default:i.kt(e.ht(t,s,r))}return proxyOrValue(t,s,r,e,i)}}}function proxyOrValue(t,e,i,s,r){const value=Reflect.get(e,i,e);return"function"==typeof value?e[i].bind(e):"object"!=typeof value||null===value?value:new Proxy(value,createGetterTraps(t,s,r))}function getPropertyDescriptor(t,name){let e=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===e&&null!==i;)e=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return e}function getCollectionObserver(t,e,i){const s=i instanceof Object?ProxyObserver.Et(i):i;switch(toStringTag$2.call(i)){case"[object Array]":return getArrayObserver(t,e,s);case"[object Map]":return getMapObserver(t,e,s);case"[object Set]":return getSetObserver(t,e,s)}return null}function isBindingContext(t){return 1==t.xt}function debounceCallSource(t,e,i){const s=this.jt;PLATFORM.global.clearTimeout(s._t),s._t=PLATFORM.global.setTimeout(()=>{this.Nt(t,e,i)},s.Kt)}function debounceCall(t,e,i){const s=this.jt;if(PLATFORM.global.clearTimeout(s._t),!(i&s.Ut))return s.oldValue=unset,void this.Nt(t,e,i);s.oldValue===unset&&(s.oldValue=e);const r=PLATFORM.global.setTimeout(()=>{const e=s.oldValue;s.oldValue=unset,this.Nt(t,e,i)},s.Kt);s._t=r}function throttle(t){const e=this.qt,i=+new Date-e.zt;if(i>=e.Kt)return PLATFORM.global.clearTimeout(e._t),e._t=-1,e.zt=+new Date,void this.Wt(t);if(e.newValue=t,-1===e._t){const t=PLATFORM.global.setTimeout(()=>{e._t=-1,e.zt=+new Date,this.Wt(e.newValue)},e.Kt-i);e._t=t}}function bindable(t,e){let i;const s=function(t,e){arguments.length>1&&(i.Ht=e),Bindable.for(t.constructor).add(i)};return arguments.length>1?(i={},void s(t,e)):"string"==typeof t?(i={},s):(i=t||{},s)}function customElementKey(name){return`${customElementName}:${name}`}function customElementBehavior(t){return void 0===t.$customElement?null:t.$customElement}function customAttributeKey(name){return`${customAttributeName}:${name}`}function isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function buildTemplateDefinition(t,e,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new DefaultTemplateDefinition,i=arguments.length;switch(i){case 13:null!==strategy&&(def.strategy=ensureValidStrategy(strategy));case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?buildRequired:0==build?buildNotRequired:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Bindable.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof e?e.length>0&&(def.name=e):null!==e&&(def.strategy=ensureValidStrategy(e.strategy),templateDefinitionAssignables.forEach(t=>{e[t]&&(def[t]=e[t])}),templateDefinitionArrays.forEach(t=>{e[t]&&(def[t]=PLATFORM.toArray(e[t]))}),e.bindables&&(def.bindables===PLATFORM.Gt?def.bindables=Bindable.for(e).get():Object.assign(def.bindables,e.bindables)))}return 2!==i||null===t||"string"!=typeof e&&"build"in e||(def.build=buildRequired),def}function $attachAttribute(t){if(8&this.$state)return;const e=this.$lifecycle;e.Qt(),this.$state|=4,t|=LifecycleFlags.Xt;const i=this.$hooks;16&i&&this.Jt(t),this.$state|=8,this.$state&=-5,32&i&&e.Yt(this),e.Zt(t)}function $attachElement(t){if(8&this.$state)return;const e=this.$lifecycle;e.Qt(),this.$state|=4,t|=LifecycleFlags.Xt;const i=this.$hooks;16&i&&this.Jt(t);let s=this.te;for(;null!==s;)s.ee(t),s=s.ie;e.se(this),this.$state|=8,this.$state&=-5,32&i&&e.Yt(this),e.Zt(t)}function $attachView(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.Xt;let e=this.te;for(;null!==e;)e.ee(t),e=e.ie;this.$lifecycle.se(this),this.$state|=8,this.$state&=-5}function $detachAttribute(t){if(8&this.$state){const e=this.$lifecycle;e.re(),this.$state|=32,t|=LifecycleFlags.ne;const i=this.$hooks;64&i&&this.oe(t),this.$state&=-41,128&i&&e.he(this),e.le(t)}}function $detachElement(t){if(8&this.$state){const e=this.$lifecycle;e.re(),this.$state|=32,(t|=LifecycleFlags.ne)&LifecycleFlags.ce^LifecycleFlags.ce|t&LifecycleFlags.ae&&(e.ue(this),t|=LifecycleFlags.ce);const i=this.$hooks;64&i&&this.oe(t);let s=this.de;for(;null!==s;)s.fe(t),s=s.ge;this.$state&=-41,128&i&&e.he(this),e.le(t)}}function $detachView(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.ne)&LifecycleFlags.ce^LifecycleFlags.ce|t&LifecycleFlags.ae&&(this.$lifecycle.ue(this),t|=LifecycleFlags.ce);let e=this.de;for(;null!==e;)e.fe(t),e=e.ge;this.$state&=-41}}function $cacheAttribute(t){2048&this.$hooks&&this.be(t|=LifecycleFlags.pe)}function $cacheElement(t){t|=LifecycleFlags.pe,2048&this.$hooks&&this.be(t);let e=this.de;for(;null!==e;)e.ye(t),e=e.ge}function $cacheView(t){t|=LifecycleFlags.pe;let e=this.de;for(;null!==e;)e.ye(t),e=e.ge}function $mountElement(){16&this.$state||(this.$state|=16,this.me.ve(this.$nodes))}function $unmountElement(){16&this.$state&&(this.$state&=-17,this.me.Re(this.$nodes))}function $mountView(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function $unmountView(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.Le&&(this.Le=0,this.cache.Oe(this))?(this.$state|=128,1):0):0}function $bindAttribute(t,e){if(t|=LifecycleFlags.ut,2&this.$state){if(this.$scope===e)return;this.Be(t)}const i=this.$lifecycle;i.Fe(),this.$state|=1;const s=this.$hooks;8&s&&i.Ie(this),this.$scope=e,4&s&&this.Ce(t),this.$state|=2,this.$state&=-2,i.we(t)}function $bindElement(t,e){if(2&this.$state)return;const i=this.$scope;i.Te=e;const s=this.$lifecycle;s.Fe(),this.$state|=1;const r=this.$hooks;t|=LifecycleFlags.ut,8&r&&s.Ie(this);let n=this.Pe;for(;null!==n;)n.$e(t,i),n=n.Se;4&r&&this.Ce(t);let component=this.te;for(;null!==component;)component.$e(t,i),component=component.ie;this.$state|=2,this.$state&=-2,s.we(t)}function $bindView(t,e){if(t|=LifecycleFlags.ut,2&this.$state){if(this.$scope===e)return;this.Be(t)}this.$state|=1,this.$scope=e;let i=this.Pe;for(;null!==i;)i.$e(t,e),i=i.Se;let component=this.te;for(;null!==component;)component.$e(t,e),component=component.ie;this.$state|=2,this.$state&=-2}function $lockedBind(t){if(t|=LifecycleFlags.ut,2&this.$state)return;this.$state|=1;const e=this.$scope;let i=this.Pe;for(;null!==i;)i.$e(t,e),i=i.Se;let component=this.te;for(;null!==component;)component.$e(t,e),component=component.ie;this.$state|=2,this.$state&=-2}function $unbindAttribute(t){if(2&this.$state){const e=this.$lifecycle;e.Ae(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.Me,512&i&&e.De(this),256&i&&this.Ve(t),this.$state&=-67,e.ke(t)}}function $unbindElement(t){if(2&this.$state){const e=this.$lifecycle;e.Ae(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.Me,512&i&&e.De(this),256&i&&this.Ve(t);let component=this.de;for(;null!==component;)component.Be(t),component=component.ge;let s=this.Ee;for(;null!==s;)s.Be(t),s=s.xe;this.$scope.Te=null,this.$state&=-67,e.ke(t)}}function $unbindView(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Me;let component=this.de;for(;null!==component;)component.Be(t),component=component.ge;let e=this.Ee;for(;null!==e;)e.Be(t),e=e.xe;this.$state&=-67,this.$scope=null}}function $lockedUnbind(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Me;let component=this.de;for(;null!==component;)component.Be(t),component=component.ge;let e=this.Ee;for(;null!==e;)e.Be(t),e=e.xe;this.$state&=-67}}function $patch(t){patchProperties(this,t);let component=this.te;for(;component;)component._(t),component=component.ie;let e=this.Pe;for(;e;)void 0!==e._&&e._(t),e=e.Se}function createRenderContext(dom,t,dependencies,e){const i=t.je(),s=new InstanceProvider,r=new InstanceProvider,n=new InstanceProvider,o=new ViewFactoryProvider,h=new InstanceProvider,l=i.get(IRenderer);return dom._e(i,r),i.Ne(IViewFactory,o),i.Ne(IRenderable,s),i.Ne(ITargetedInstruction,n),i.Ne(IRenderLocation,h),dependencies&&i.register(...dependencies),e&&e.register(i),i.Ke=function(t,e,targets,i,host,parts){l.Ke(t,dom,this,e,targets,i,host,parts)},i.Ue=function(t,e,l,c,parts,a){return s.qe(t),r.qe(e),n.qe(l),c&&o.qe(c,parts),a&&h.qe(a),i},i.tt=function(){o.tt(),s.tt(),n.tt(),r.tt(),h.tt()},i}function findElements(t){const e=[];for(let i=0,s=t.length;s>i;++i){const component=customElementBehavior(t[i]);null!==component&&e.push(component)}return e}function createGetterSetter(t,e,name){Reflect.defineProperty(e,name,{ze:1,get(){return this.j[name].Y()},set(value){this.j[name].Z(value,t&LifecycleFlags.We|LifecycleFlags.K)}})}function registerElement(t){const e=this.kind.et(this.description.name);t.register(Registration.transient(e,this))}function customElement(t){return e=>CustomElementResource.it(t,e)}function isType$2(t){return t.kind===this}function define$2(t,e=null){if(!t)throw Reporter.error(70);const i=null===e?class{}:e,s=buildTemplateDefinition(i,t),r=i.prototype;return i.kind=CustomElementResource,i.description=s,i.register=registerElement,r.He=$hydrateElement,r.$e=$bindElement,r._=$patch,r.ee=$attachElement,r.fe=$detachElement,r.Be=$unbindElement,r.ye=$cacheElement,r.ge=null,r.ie=null,r.Ge=null,r.Qe=null,r.$scope=null,r.$hooks=0,r.Pe=null,r.Ee=null,r.te=null,r.de=null,r.Xe=$mountElement,r.Je=$unmountElement,r.Ye=null,r.Ze=null,r.me=null,"flush"in r&&(r.pt=null),"binding"in r&&(r.$hooks|=4),"bound"in r&&(r.$hooks|=8,r.ti=null),"unbinding"in r&&(r.$hooks|=256),"unbound"in r&&(r.$hooks|=512,r.ei=null),"render"in r&&(r.$hooks|=1024),"created"in r&&(r.$hooks|=2),"attaching"in r&&(r.$hooks|=16),"attached"in r&&(r.$hooks|=32,r.ii=null),"detaching"in r&&(r.$hooks|=64),"caching"in r&&(r.$hooks|=2048),"detached"in r&&(r.$hooks|=128,r.si=null),i}function useShadowDOM(t){function e(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:defaultShadowOptions;return"function"==typeof t?e(t):e}function containerlessDecorator(t){return t.containerless=1,t}function containerless(t){return void 0===t?containerlessDecorator:containerlessDecorator(t)}function $hydrateAttribute(t,e){const i=this.constructor;t|=i.description.strategy;const s=e.get(IRenderingEngine);let r;r=t&LifecycleFlags.ri?ProxyObserver.ni(this).L:this,s.oi(t,i,this),2&this.$hooks&&r.hi(t)}function $hydrateElement(t,e,host,i=PLATFORM.Gt){const s=this.constructor,r=s.description;t|=r.strategy;const n=e.get(IProjectorLocator),o=e.get(IRenderingEngine),dom=e.get(IDOM);let h;if(h=t&LifecycleFlags.ri?ProxyObserver.ni(this).L:this,this.$scope=Scope.create(t,h,null),this.li=host,this.me=n.ci(dom,this,host,r),o.oi(t,s,this),1024&this.$hooks){const r=this.Ke(t,host,i.parts,e);r&&"getElementTemplate"in r&&r.ai(o,s,e).Ke(this,host,i.parts)}else o.ai(dom,r,e,s).Ke(this,host,i.parts);2&this.$hooks&&h.hi(t)}function registerAttribute(t){const e=this.description,i=this.kind.et(e.name),aliases=e.aliases;t.register(Registration.transient(i,this));for(let e=0,s=aliases.length;s>e;++e){const s=this.kind.et(aliases[e]);t.register(Registration.ui(i,s))}}function customAttribute(t){return e=>CustomAttributeResource.it(t,e)}function templateController(t){return e=>CustomAttributeResource.it("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),e)}function dynamicOptionsDecorator(t){return t.di=1,t}function dynamicOptions(t){return void 0===t?dynamicOptionsDecorator:dynamicOptionsDecorator(t)}function isType$3(t){return t.kind===this}function define$3(t,e){const i=e,s=createCustomAttributeDescription("string"==typeof t?{name:t}:t,i),r=i.prototype;return i.kind=CustomAttributeResource,i.description=s,i.register=registerAttribute,r.He=$hydrateAttribute,r.$e=$bindAttribute,r._=$patch,r.ee=$attachAttribute,r.fe=$detachAttribute,r.Be=$unbindAttribute,r.ye=$cacheAttribute,r.ge=null,r.ie=null,r.Ge=null,r.Qe=null,r.$scope=null,r.$hooks=0,r.$state=0,"flush"in r&&(r.pt=null),"binding"in r&&(r.$hooks|=4),"bound"in r&&(r.$hooks|=8,r.ti=null),"unbinding"in r&&(r.$hooks|=256),"unbound"in r&&(r.$hooks|=512,r.ei=null),"created"in r&&(r.$hooks|=2),"attaching"in r&&(r.$hooks|=16),"attached"in r&&(r.$hooks|=32,r.ii=null),"detaching"in r&&(r.$hooks|=64),"caching"in r&&(r.$hooks|=2048),"detached"in r&&(r.$hooks|=128,r.si=null),i}function createCustomAttributeDescription(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.fi:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.gi:defaultBindingMode,di:void 0===def.di?0:def.di,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},Bindable.for(t).get(),Bindable.for(def).get()),strategy:ensureValidStrategy(def.strategy)}}function longestIncreasingSubsequence(t){const e=t.length,i=e+t.Lt.length,s=255>i?Uint8Array:65535>i?Uint16Array:Uint32Array;e>maxLen&&(maxLen=e,prevIndices=new s(e),tailIndices=new s(e));let r=0,n=0,o=0,h=0,l=0,c=0,a=0,u=0;for(;e>h;h++)if(-2!==(n=t[h])){if(-2!==(o=t[l=prevIndices[r]])&&n>o){tailIndices[h]=l,prevIndices[++r]=h;continue}for(c=0,a=r;a>c;)-2!==(o=t[prevIndices[u=c+a>>1]])&&n>o?c=u+1:a=u;((o=t[prevIndices[c]])>n||-2===o)&&(c>0&&(prevIndices[h]=prevIndices[c-1]),prevIndices[c]=h)}const d=new s(h=++r);for(n=prevIndices[r-1];r-- >0;)d[r]=n,n=tailIndices[n];for(;h-- >0;)prevIndices[h]=0;return d}function instructionRenderer(t){return function(e){const i=function(...i){const s=new e(...i);return s.bi=t,s};i.register=function(t){return Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const s=Object.getOwnPropertyDescriptors(e);return Object.keys(s).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,s[t])}),i}}function ensureExpression(t,e,i){return"string"==typeof e?t.parse(e,i):e}function addBinding(t,e){e.xe=t.Ee,e.Se=null,null===t.Ee?t.Pe=e:t.Ee.Se=e,t.Ee=e}function addComponent(t,component){component.ge=t.de,component.ie=null,null===t.de?t.te=component:t.de.ie=component,t.de=component}var BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,SubscriberFlags,DelegationStrategy,MutationKind,CollectionKind,ProxyObserver_1,RuntimeError,RuntimeError$1,BindingType,TargetedInstructionType,ViewCompileFlags;import{Reporter,DI,Registration,PLATFORM,Profiler,RuntimeCompilationResources,IContainer,all}from"@aurelia/kernel";(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.gi=2]="toView",BindingMode[BindingMode.pi=4]="fromView",BindingMode[BindingMode.yi=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(BindingStrategy){BindingStrategy[BindingStrategy.vi=1]="getterSetter",BindingStrategy[BindingStrategy.mi=2]="proxies",BindingStrategy[BindingStrategy.Ri=4]="patch",BindingStrategy[BindingStrategy.Li=8]="keyed"})(BindingStrategy||(BindingStrategy={}));const mandatoryStrategy=7;(function(State){State[State.Oi=0]="none",State[State.Bi=1]="isBinding",State[State.Fi=2]="isBound",State[State.Ii=4]="isAttaching",State[State.Ci=8]="isAttached",State[State.wi=16]="isMounted",State[State.Ti=32]="isDetaching",State[State.Pi=64]="isUnbinding",State[State.$i=128]="isCached",State[State.Si=256]="isContainerless",State[State.Ai=512]="isPatching"})(State||(State={})),(function(Hooks){Hooks[Hooks.Oi=1]="none",Hooks[Hooks.Mi=2]="hasCreated",Hooks[Hooks.Di=4]="hasBinding",Hooks[Hooks.Vi=8]="hasBound",Hooks[Hooks.ki=16]="hasAttaching",Hooks[Hooks.Ei=32]="hasAttached",Hooks[Hooks.xi=64]="hasDetaching",Hooks[Hooks.ji=128]="hasDetached",Hooks[Hooks._i=256]="hasUnbinding",Hooks[Hooks.Ni=512]="hasUnbound",Hooks[Hooks.Ki=1024]="hasRender",Hooks[Hooks.Ui=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.Oi=0]="none",LifecycleFlags[LifecycleFlags.nt=8388608]="mustEvaluate",LifecycleFlags[LifecycleFlags.qi=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.zi=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.ri=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.N=4]="patchStrategy",LifecycleFlags[LifecycleFlags.Wi=8]="keyedStrategy",LifecycleFlags[LifecycleFlags.Hi=48]="mutation",LifecycleFlags[LifecycleFlags.Gi=16]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Qi=32]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=448]="update",LifecycleFlags[LifecycleFlags.Xi=64]="updateTargetObserver",LifecycleFlags[LifecycleFlags.K=128]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Ji=256]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=8388096]="from",LifecycleFlags[LifecycleFlags.U=3584]="fromFlush",LifecycleFlags[LifecycleFlags.Yi=512]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Zi=1024]="fromSyncFlush",LifecycleFlags[LifecycleFlags.ts=2048]="fromTick",LifecycleFlags[LifecycleFlags.es=4096]="fromStartTask",LifecycleFlags[LifecycleFlags.ae=8192]="fromStopTask",LifecycleFlags[LifecycleFlags.ut=16384]="fromBind",LifecycleFlags[LifecycleFlags.Me=32768]="fromUnbind",LifecycleFlags[LifecycleFlags.Xt=65536]="fromAttach",LifecycleFlags[LifecycleFlags.ne=131072]="fromDetach",LifecycleFlags[LifecycleFlags.pe=262144]="fromCache",LifecycleFlags[LifecycleFlags.ss=524288]="fromDOMEvent",LifecycleFlags[LifecycleFlags.rs=1048576]="fromObserverSetter",LifecycleFlags[LifecycleFlags.ns=2097152]="fromBindableHandler",LifecycleFlags[LifecycleFlags.os=4194304]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.ce=16777216]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ft=33554432]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.hs=67108864]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.ls=134217728]="isOriginalArray",LifecycleFlags[LifecycleFlags.We=268435471]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.cs=268435456]="allowParentScopeTraversal"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.as=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.us=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(t){t[t.ds=0]="None",t[t.fs=1]="Subscriber0",t[t.gs=2]="Subscriber1",t[t.bs=4]="Subscriber2",t[t.ps=8]="SubscribersRest",t[t.ys=15]="Any"})(SubscriberFlags||(SubscriberFlags={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.Oi=0]="none",DelegationStrategy[DelegationStrategy.vs=1]="capturing",DelegationStrategy[DelegationStrategy.ms=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(MutationKind){MutationKind[MutationKind.v=1]="instance",MutationKind[MutationKind.R=2]="collection",MutationKind[MutationKind.L=4]="proxy"})(MutationKind||(MutationKind={})),(function(CollectionKind){CollectionKind[CollectionKind.Rs=8]="indexed",CollectionKind[CollectionKind.Li=4]="keyed",CollectionKind[CollectionKind.Ls=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));const lookup=new WeakMap;let ProxySubscriberCollection=class{constructor(t,e,i){this.raw=e,this.key=i,this.L=t,this.subscribe=this.l,this.unsubscribe=this.u,e[i]instanceof Object&&(e[i]=ProxyObserver.ni(e[i]).L)}Z(value,t){const e=this.raw[this.key];e!==value&&(this.raw[this.key]=value,this.m(value,e,t|LifecycleFlags.ri|LifecycleFlags.K))}Y(){return this.raw[this.key]}};ProxySubscriberCollection=__decorate([subscriberCollection(MutationKind.v)],ProxySubscriberCollection);let ProxyObserver=ProxyObserver_1=class{constructor(t){this.raw=t,this.L=new Proxy(t,this),lookup.set(t,this.L),this.Os={}}static Bs(t){if(void 0===t.Fs){const e=lookup.get(t);return void 0===e?t:e}return t}static Et(t){const e=t.Fs;return void 0===e?t:e}static ni(t,e){let i;if(void 0===t.Fs){const e=lookup.get(t);i=void 0===e?new ProxyObserver_1(t):e.q}else i=t.q;if(1===arguments.length)return i;let s=i.Os[e];if(void 0===s){const r=this.Et(t);s=i.Os[e]=new ProxySubscriberCollection(i.L,r,e)}return s}static Is(t){return void 0!==t.Fs}get(t,e,i){return"$observer"===e?this:"$raw"===e?t:t[e]}set(t,e,value,i){const s=t[e];return s!==value&&(Reflect.set(t,e,value,t),this.Cs(value,s,e),this.m(e,value,s,LifecycleFlags.ri|LifecycleFlags.K)),1}deleteProperty(t,e){const i=t[e];return Reflect.deleteProperty(t,e)?(void 0!==i&&(this.Cs(void 0,i,e),this.m(e,void 0,i,LifecycleFlags.ri|LifecycleFlags.K)),1):0}defineProperty(t,e,i){const s=t[e];return Reflect.defineProperty(t,e,i)?(i.value!==s&&(this.Cs(i.value,s,e),this.m(e,i.value,s,LifecycleFlags.ri|LifecycleFlags.K)),1):0}apply(t,e,i){return Reflect.apply(t,t,i)}subscribe(t,e){if(1===arguments.length)this.l(t);else{let i=this.Os[e];void 0===i&&(i=this.Os[e]=new ProxySubscriberCollection(this.L,this.raw,e)),i.l(t)}}unsubscribe(t,e){if(1===arguments.length)this.u(t);else{const i=this.Os[e];void 0!==i&&i.u(t)}}Cs(t,e,i){const s=this.Os[i];void 0!==s&&s.m(t,e,LifecycleFlags.ri|LifecycleFlags.K)}};ProxyObserver=ProxyObserver_1=__decorate([subscriberCollection(MutationKind.L)],ProxyObserver);const defineProperty=Reflect.defineProperty,observedPropertyDescriptor={get:void 0,set:void 0,ze:1,Tt:1};let SetterObserver=class{constructor(t,e,i){this.J=t&LifecycleFlags.We,this.G=e,this.X=i,t&LifecycleFlags.N&&(this.Y=this.ws)}Y(){return this.H}ws(){return this.G[this.X]}Z(t,e){const i=this.H;(i!==t||e&LifecycleFlags.N)&&(this.H=t,e&LifecycleFlags.ut||this.m(t,i,this.J|e),this.W||(this.G[this.X]=t))}_(t){this.m(this.G[this.X],this.H,this.J|t),patchProperties(this.G[this.X],t)}};SetterObserver=__decorate([propertyObserver()],SetterObserver),(function(t){t[t.Ts=250]="UndefinedScope",t[t.Ps=251]="NullScope",t[t.$s=252]="NilOverrideContext",t[t.Ss=253]="NilParentScope"})(RuntimeError||(RuntimeError={}));class InternalObserversLookup{ni(t,e,i){return void 0===this[i]&&(this[i]=new SetterObserver(t,e,i)),this[i]}}class BindingContext{constructor(t,value){if(this.xt=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}static create(t,e,value){const i=new BindingContext(e,value);return t&LifecycleFlags.ri?ProxyObserver.ni(i).L:i}static get(t,name,e,i){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let s=t.As;if(e>0){for(;e>0;){if(null===s.Ms)return;e--,s=s.Ms}return name in s?s:s.Ds}for(;s&&!(name in s)&&!(s.Ds&&name in s.Ds);)s=s.Ms;if(s)return name in s?s:s.Ds;if(i&LifecycleFlags.cs&&null!==t.Te){const s=this.get(t.Te,name,e,i&~LifecycleFlags.cs|LifecycleFlags.hs);if(null!==s)return s}return i&LifecycleFlags.hs?null:t.Ds||t.As}Vs(t){return void 0===this.j&&(this.j=new InternalObserversLookup),this.j}}class Scope{constructor(t,e){this.Ds=t,this.As=e,this.Te=null}static create(t,e,i){return new Scope(e,null==i?OverrideContext.create(t,e,i):i)}static ks(t,e){if(null==e)throw Reporter.error(252);return new Scope(e.Ds,e)}static Es(t,e,i){if(null==e)throw Reporter.error(253);return new Scope(i,OverrideContext.create(t,i,e.As))}}class OverrideContext{constructor(t,e){this.xt=1,this.Ds=t,this.Ms=e}static create(t,e,i){return new OverrideContext(e,void 0===i?null:i)}Vs(){return void 0===this.j&&(this.j=new InternalObserversLookup),this.j}}const ISignaler=DI.js("ISignaler").xs(t=>t.singleton(Signaler));class Signaler{constructor(){this._s=Object.create(null)}Ns(name,t){const e=this._s[name];if(void 0!==e)for(const i of e.keys())i.O(void 0,void 0,t|LifecycleFlags.K)}Ks(name,t){const e=this._s,i=e[name];void 0===i?e[name]=new Set([t]):i.add(t)}Us(name,t){const e=this._s[name];e&&e.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",et:keyFrom,qs:isType,it:define},ValueConverterResource={name:"value-converter",et:keyFrom$1,qs:isType$1,it:define$1};(function(t){t[t.zs=202]="NoLocator",t[t.Ws=203]="NoBehaviorFound",t[t.Hs=204]="BehaviorAlreadyApplied",t[t.Gs=205]="NoConverterFound",t[t.Qs=206]="NoBinding",t[t.Xs=207]="NotAFunction",t[t.Js=208]="UnknownOperator",t[t.Ts=250]="UndefinedScope",t[t.Ps=251]="NullScope"})(RuntimeError$1||(RuntimeError$1={}));class BindingBehavior{constructor(t,name,e){this.st=38962,this.Ys=t,this.name=name,this.Zs=e,this.tr=BindingBehaviorResource.et(this.name)}evaluate(t,e,i){return this.Ys.evaluate(t,e,i)}assign(t,e,i,value){return this.Ys.assign(t,e,i,value)}connect(t,e,i){this.Ys.connect(t,e,i)}bind(t,e,i){if(void 0===e)throw Reporter.error(250,this);if(null===e)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const s=i.er;if(!s)throw Reporter.error(202,this);hasBind(this.Ys)&&this.Ys.bind(t,e,i);const r=this.tr,n=s.get(r);if(!n)throw Reporter.error(203,this);null==i[r]?(i[r]=n,n.bind.apply(n,[t,e,i].concat(evalList(t,e,s,this.Zs)))):Reporter.write(204,this)}ir(t,e,i){const s=this.tr;null!=i[s]?(i[s].ir(t,e,i),i[s]=null):Reporter.write(204,this),hasUnbind(this.Ys)&&this.Ys.ir(t,e,i)}accept(t){return t.sr(this)}}class ValueConverter{constructor(t,name,e){this.st=36913,this.Ys=t,this.name=name,this.Zs=e,this.rr=ValueConverterResource.et(this.name)}evaluate(t,e,i){if(!i)throw Reporter.error(202,this);const s=i.get(this.rr);if(!s)throw Reporter.error(205,this);if("toView"in s){const r=this.Zs,n=r.length,o=Array(n+1);o[0]=this.Ys.evaluate(t,e,i);for(let s=0;n>s;++s)o[s+1]=r[s].evaluate(t,e,i);return s.gi.apply(s,o)}return this.Ys.evaluate(t,e,i)}assign(t,e,i,value){if(!i)throw Reporter.error(202,this);const s=i.get(this.rr);if(!s)throw Reporter.error(205,this);return"fromView"in s&&(value=s.pi.apply(s,[value].concat(evalList(t,e,i,this.Zs)))),this.Ys.assign(t,e,i,value)}connect(t,e,i){if(void 0===e)throw Reporter.error(250,this);if(null===e)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const s=i.er;if(!s)throw Reporter.error(202,this);this.Ys.connect(t,e,i);const r=this.Zs;for(let s=0,n=r.length;n>s;++s)r[s].connect(t,e,i);const n=s.get(this.rr);if(!n)throw Reporter.error(205,this);const o=n._s;if(void 0===o)return;const h=s.get(ISignaler);for(let t=0,e=o.length;e>t;++t)h.Ks(o[t],i)}ir(t,e,i){const s=i.er,r=s.get(this.rr)._s;if(void 0===r)return;const n=s.get(ISignaler);for(let t=0,e=r.length;e>t;++t)n.Us(r[t],i)}accept(t){return t.nr(this)}}class Assign{constructor(t,value){this.st=8208,this.target=t,this.value=value}evaluate(t,e,i){return this.target.assign(t,e,i,this.value.evaluate(t,e,i))}connect(t,e,i){}assign(t,e,i,value){return this.value.assign(t,e,i,value),this.target.assign(t,e,i,value)}accept(t){return t.or(this)}}class Conditional{constructor(t,e,i){this.st=63,this.assign=PLATFORM.hr,this.lr=t,this.cr=e,this.ar=i}evaluate(t,e,i){return this.lr.evaluate(t,e,i)?this.cr.evaluate(t,e,i):this.ar.evaluate(t,e,i)}connect(t,e,i){this.lr.evaluate(t,e,null)?(this.lr.connect(t,e,i),this.cr.connect(t,e,i)):(this.lr.connect(t,e,i),this.ar.connect(t,e,i))}accept(t){return t.ur(this)}}class AccessThis{constructor(t=0){this.st=1793,this.assign=PLATFORM.hr,this.connect=PLATFORM.hr,this.dr=t}evaluate(t,e,i){if(void 0===e)throw Reporter.error(250,this);if(null===e)throw Reporter.error(251,this);let s=e.As,r=this.dr;for(;r--&&s;)s=s.Ms;return 1>r&&s?s.Ds:void 0}accept(t){return t.gr(this)}}AccessThis.br=new AccessThis(0),AccessThis.pr=new AccessThis(1);class AccessScope{constructor(name,t=0){this.st=10082,this.name=name,this.dr=t}evaluate(t,e,i){return BindingContext.get(e,this.name,this.dr,t)[this.name]}assign(t,e,i,value){const s=BindingContext.get(e,this.name,this.dr,t);return s?s[this.name]=value:void 0}connect(t,e,i){const s=BindingContext.get(e,this.name,this.dr,t);i.at(t,s,this.name)}accept(t){return t.yr(this)}}class AccessMember{constructor(t,name){this.st=9323,this.object=t,this.name=name}evaluate(t,e,i){const s=this.object.evaluate(t,e,i);return null==s?s:s[this.name]}assign(t,e,i,value){let s=this.object.evaluate(t,e,i);return null!==s&&"object"==typeof s||this.object.assign(t,e,i,s={}),s[this.name]=value,value}connect(t,e,i){const s=this.object.evaluate(t,e,null);this.object.connect(t,e,i),s&&i.at(t,s,this.name)}accept(t){return t.vr(this)}}class AccessKeyed{constructor(t,e){this.st=9324,this.object=t,this.key=e}evaluate(t,e,i){const s=this.object.evaluate(t,e,i);if(null!=s)return s[this.key.evaluate(t,e,i)]}assign(t,e,i,value){return this.object.evaluate(t,e,i)[this.key.evaluate(t,e,i)]=value}connect(t,e,i){const s=this.object.evaluate(t,e,null);if(this.object.connect(t,e,i),"object"==typeof s&&null!==s){this.key.connect(t,e,i);const r=this.key.evaluate(t,e,null);Array.isArray(s)&&isNumeric(r)?t&LifecycleFlags.ri&&i.at(t,s,r):i.at(t,s,r)}}accept(t){return t.mr(this)}}class CallScope{constructor(name,t,e=0){this.st=1448,this.assign=PLATFORM.hr,this.name=name,this.Zs=t,this.dr=e}evaluate(t,e,i){const s=evalList(t,e,i,this.Zs),r=BindingContext.get(e,this.name,this.dr,t),n=getFunction(t,r,this.name);if(n)return n.apply(r,s)}connect(t,e,i){const s=this.Zs;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.Rr(this)}}class CallMember{constructor(t,name,e){this.st=1161,this.assign=PLATFORM.hr,this.object=t,this.name=name,this.Zs=e}evaluate(t,e,i){const s=this.object.evaluate(t,e,i),r=evalList(t,e,i,this.Zs),n=getFunction(t,s,this.name);if(n)return n.apply(s,r)}connect(t,e,i){const s=this.object.evaluate(t,e,null);if(this.object.connect(t,e,i),getFunction(t&~LifecycleFlags.nt,s,this.name)){const s=this.Zs;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}}accept(t){return t.Lr(this)}}class CallFunction{constructor(t,e){this.st=1162,this.assign=PLATFORM.hr,this.Or=t,this.Zs=e}evaluate(t,e,i){const s=this.Or.evaluate(t,e,i);if("function"==typeof s)return s.apply(null,evalList(t,e,i,this.Zs));if(t&LifecycleFlags.nt||null!=s)throw Reporter.error(207,this)}connect(t,e,i){const s=this.Or.evaluate(t,e,null);if(this.Or.connect(t,e,i),"function"==typeof s){const s=this.Zs;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}}accept(t){return t.Br(this)}}class Binary{constructor(t,e,i){this.st=46,this.assign=PLATFORM.hr,this.Fr=t,this.left=e,this.right=i,this.evaluate=this[t]}evaluate(t,e,i){throw Reporter.error(208,this)}connect(t,e,i){const s=this.left.evaluate(t,e,null);this.left.connect(t,e,i),"&&"===this.Fr&&!s||"||"===this.Fr&&s||this.right.connect(t,e,i)}Ir(t,e,i){return this.left.evaluate(t,e,i)&&this.right.evaluate(t,e,i)}Cr(t,e,i){return this.left.evaluate(t,e,i)||this.right.evaluate(t,e,i)}wr(t,e,i){return this.left.evaluate(t,e,i)==this.right.evaluate(t,e,i)}Tr(t,e,i){return this.left.evaluate(t,e,i)===this.right.evaluate(t,e,i)}Pr(t,e,i){return this.left.evaluate(t,e,i)!=this.right.evaluate(t,e,i)}$r(t,e,i){return this.left.evaluate(t,e,i)!==this.right.evaluate(t,e,i)}Sr(t,e,i){const s=this.right.evaluate(t,e,i);return"function"==typeof s?this.left.evaluate(t,e,i)instanceof s:0}Ar(t,e,i){const s=this.right.evaluate(t,e,i);return null!==s&&"object"==typeof s?this.left.evaluate(t,e,i)in s:0}Mr(t,e,i){return this.left.evaluate(t,e,i)+this.right.evaluate(t,e,i)}Dr(t,e,i){return this.left.evaluate(t,e,i)-this.right.evaluate(t,e,i)}Vr(t,e,i){return this.left.evaluate(t,e,i)*this.right.evaluate(t,e,i)}kr(t,e,i){return this.left.evaluate(t,e,i)/this.right.evaluate(t,e,i)}Er(t,e,i){return this.left.evaluate(t,e,i)%this.right.evaluate(t,e,i)}xr(t,e,i){return this.left.evaluate(t,e,i)<this.right.evaluate(t,e,i)}jr(t,e,i){return this.left.evaluate(t,e,i)>this.right.evaluate(t,e,i)}_r(t,e,i){return this.left.evaluate(t,e,i)<=this.right.evaluate(t,e,i)}Nr(t,e,i){return this.left.evaluate(t,e,i)>=this.right.evaluate(t,e,i)}accept(t){return t.Kr(this)}}class Unary{constructor(t,e){this.st=39,this.assign=PLATFORM.hr,this.Fr=t,this.Ys=e,this.evaluate=this[t]}evaluate(t,e,i){throw Reporter.error(208,this)}connect(t,e,i){this.Ys.connect(t,e,i)}Ur(t,e,i){this.Ys.evaluate(t,e,i)}qr(t,e,i){return typeof this.Ys.evaluate(t,e,i)}zr(t,e,i){return!this.Ys.evaluate(t,e,i)}Dr(t,e,i){return-this.Ys.evaluate(t,e,i)}Mr(t,e,i){return+this.Ys.evaluate(t,e,i)}accept(t){return t.Wr(this)}}class PrimitiveLiteral{constructor(value){this.st=17925,this.assign=PLATFORM.hr,this.connect=PLATFORM.hr,this.value=value}evaluate(t,e,i){return this.value}accept(t){return t.Hr(this)}}PrimitiveLiteral.Gr=new PrimitiveLiteral(void 0),PrimitiveLiteral.Qr=new PrimitiveLiteral(null),PrimitiveLiteral.Xr=new PrimitiveLiteral(1),PrimitiveLiteral.Jr=new PrimitiveLiteral(0),PrimitiveLiteral.Yr=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this.st=51,this.assign=PLATFORM.hr,this.parts=parts}evaluate(t,e,i){const s=this.parts;let value,r="";for(let n=0,o=s.length;o>n;++n)null!=(value=s[n].evaluate(t,e,i))&&(r+=value);return r}connect(t,e,i){for(let s=0,r=this.parts.length;r>s;++s)this.parts[s].connect(t,e,i)}accept(t){return t.Zr(this)}}class ArrayLiteral{constructor(t){this.st=17955,this.assign=PLATFORM.hr,this.elements=t}evaluate(t,e,i){const s=this.elements,r=s.length,n=Array(r);for(let o=0;r>o;++o)n[o]=s[o].evaluate(t,e,i);return n}connect(t,e,i){const s=this.elements;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.tn(this)}}ArrayLiteral.Yr=new ArrayLiteral(PLATFORM.fi);class ObjectLiteral{constructor(t,e){this.st=17956,this.assign=PLATFORM.hr,this.keys=t,this.values=e}evaluate(t,e,i){const s={},r=this.keys,n=this.values;for(let o=0,h=r.length;h>o;++o)s[r[o]]=n[o].evaluate(t,e,i);return s}connect(t,e,i){const s=this.values;for(let r=0,n=this.keys.length;n>r;++r)s[r].connect(t,e,i)}accept(t){return t.en(this)}}ObjectLiteral.Yr=new ObjectLiteral(PLATFORM.fi,PLATFORM.fi);class Template{constructor(t,e){this.st=17958,this.assign=PLATFORM.hr,this.in=t,this.rt=void 0===e?PLATFORM.fi:e}evaluate(t,e,i){const s=this.rt,r=this.in;let n=r[0];for(let o=0,h=s.length;h>o;++o)n+=s[o].evaluate(t,e,i),n+=r[o+1];return n}connect(t,e,i){const s=this.rt;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i),r++}accept(t){return t.sn(this)}}Template.Yr=new Template([""]);class TaggedTemplate{constructor(t,e,i,s){this.st=1197,this.assign=PLATFORM.hr,this.in=t,this.in.raw=e,this.Or=i,this.rt=void 0===s?PLATFORM.fi:s}evaluate(t,e,i){const s=this.rt,r=s.length,n=Array(r);for(let o=0,h=r;h>o;++o)n[o]=s[o].evaluate(t,e,i);const o=this.Or.evaluate(t,e,i);if("function"!=typeof o)throw Reporter.error(207,this);return o.apply(null,[this.in].concat(n))}connect(t,e,i){const s=this.rt;for(let r=0,n=s.length;n>r;++r)s[r].connect(t,e,i);this.Or.connect(t,e,i)}accept(t){return t.rn(this)}}class ArrayBindingPattern{constructor(t){this.st=65556,this.elements=t}evaluate(t,e,i){}assign(t,e,i,s){}connect(t,e,i){}accept(t){return t.nn(this)}}class ObjectBindingPattern{constructor(t,e){this.st=65557,this.keys=t,this.values=e}evaluate(t,e,i){}assign(t,e,i,s){}connect(t,e,i){}accept(t){return t.on(this)}}class BindingIdentifier{constructor(name){this.st=65558,this.name=name}evaluate(t,e,i){return this.name}connect(t,e,i){}accept(t){return t.hn(this)}}const toStringTag={}.toString;class ForOfStatement{constructor(t,e){this.st=6199,this.assign=PLATFORM.hr,this.ln=t,this.cn=e}evaluate(t,e,i){return this.cn.evaluate(t,e,i)}count(t,e){return CountForOfStatement[toStringTag.call(e)](e)}an(t,e,i){IterateForOfStatement[toStringTag.call(e)](t|LifecycleFlags.ls,e,i)}connect(t,e,i){this.ln.connect(t,e,i),this.cn.connect(t,e,i)}bind(t,e,i){hasBind(this.cn)&&this.cn.bind(t,e,i)}ir(t,e,i){hasUnbind(this.cn)&&this.cn.ir(t,e,i)}accept(t){return t.un(this)}}class Interpolation{constructor(parts,t){this.st=24,this.assign=PLATFORM.hr,this.parts=parts,this.rt=void 0===t?PLATFORM.fi:t,this.dn=this.rt.length>1,this.fn=this.rt[0]}evaluate(t,e,i){if(this.dn){const s=this.rt,parts=this.parts;let r=parts[0];for(let n=0,o=s.length;o>n;++n)r+=s[n].evaluate(t,e,i),r+=parts[n+1];return r}{const parts=this.parts;return parts[0]+this.fn.evaluate(t,e,i)+parts[1]}}connect(t,e,i){}accept(t){return t.gn(this)}}const proxyAndOriginalArray=LifecycleFlags.ri|LifecycleFlags.ls,IterateForOfStatement={bn(t,e,i){if((t&proxyAndOriginalArray)===proxyAndOriginalArray){const t=ProxyObserver.Et(e),s=t.length;let r,n=0;for(;s>n;++n)(r=t[n])instanceof Object&&(r=t[n]=ProxyObserver.ni(r).L),i(t,n,r)}else for(let t=0,s=e.length;s>t;++t)i(e,t,e[t])},pn(t,e,i){const s=Array(e.size);let r=-1;for(const t of e.entries())s[++r]=t;IterateForOfStatement["bn"](t&~LifecycleFlags.ls,s,i)},yn(t,e,i){const s=Array(e.size);let r=-1;for(const t of e.keys())s[++r]=t;IterateForOfStatement["bn"](t&~LifecycleFlags.ls,s,i)},vn(t,e,i){const s=Array(e);for(let t=0;e>t;++t)s[t]=t;IterateForOfStatement["bn"](t&~LifecycleFlags.ls,s,i)},mn(t,e,i){},Rn(t,e,i){}},CountForOfStatement={bn:t=>t.length,pn:t=>t.size,yn:t=>t.size,vn:t=>t,mn:()=>0,Rn:()=>0},IRenderable=DI.js("IRenderable").Ln(),IViewFactory=DI.js("IViewFactory").Ln(),marker=Object.freeze(Object.create(null)),ILifecycle=DI.js("ILifecycle").xs(t=>t.singleton(Lifecycle));class Lifecycle{constructor(){this.On=0,this.Bn=0,this.Fn=0,this.In=0,this.Cn=0,this.wn=this,this.Tn=this,this.Pn=this,this.$n=this,this.Sn=this,this.An=this,this.Mn=this,this.Dn=this,this.Vn=this,this.kn=this,this.En=this,this.xn=this,this.jn=this,this._n=this,this.Nn=this,this.Kn=this,this.Un=this,this.qn=this,this.zn=null,this.Wn=Promise.resolve(),this.Hn=0,this.Gn=0,this.Qn=0,this.Xn=0,this.Jn=0,this.Yn=0,this.Zn=0,this.eo=0,this.io=0,this.so=0,this.pt=marker,this.flush=PLATFORM.hr,this.ro=marker,this.connect=PLATFORM.hr,this.ti=marker,this.bound=PLATFORM.hr,this.Ye=marker,this.Xe=PLATFORM.hr,this.ii=marker,this.no=PLATFORM.hr,this.Ze=marker,this.Je=PLATFORM.hr,this.si=marker,this.oo=PLATFORM.hr,this.Qe=marker,this.Be=PLATFORM.hr,this.ei=marker,this.ho=PLATFORM.hr,this.lo=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}co(t){null===this.lo&&(this.lo=new AggregateLifecycleTask),this.lo.ao(t)}uo(t){null!==this.lo&&(this.lo===t?this.lo=null:this.lo.do(t))}B(t){return this.wn===this&&(this.zn=this.Wn.then(()=>{this.fo(LifecycleFlags.Yi)})),null===t.pt&&(t.pt=marker,this.Tn.pt=t,this.Tn=t,++this.Hn),this.zn}fo(t){for(t|=LifecycleFlags.Zi;this.Hn>0;){let e,i=this.wn.pt;this.wn=this.Tn=this,this.Hn=0;do{e=i.pt,i.pt=null,i.flush(t),i=e}while(i!==marker);if(t&LifecycleFlags.ft)break}}Fe(){++this.On}Ie(t){null===t.ti&&(t.ti=marker,this.An.ti=t,this.An=t,++this.Xn)}bo(t){null===t.ro&&(t.ro=marker,this.$n.ro=t,this.$n=t,++this.Gn)}po(t){if(this.Gn>0){this.Gn=0;let e,i=this.Pn.ro;this.Pn=this.$n=this;do{i.connect(t),e=i.ro,i.ro=null,i=e}while(i!==marker)}}we(t){if(0==--this.On)return null===this.lo||this.lo.done?(this.yo(t),LifecycleTask.done):(this.lo.vo=this,this.lo)}yo(t){for(t&LifecycleFlags.es&&this.fo(t|LifecycleFlags.Zi);this.Xn>0;){this.Xn=0;let e,i=this.Sn.ti;this.Sn=this.An=this;do{i.bound(t),e=i.ti,i.ti=null,i=e}while(i!==marker)}}Ae(){++this.Cn}De(t){null===t.ei&&(t.ei=marker,this.qn.ei=t,this.qn=t,++this.so)}ke(t){if(0==--this.Cn)return null===this.lo||this.lo.done?(this.mo(t),LifecycleTask.done):(this.lo.vo=this,this.lo)}mo(t){for(;this.so>0;){this.so=0;let e,i=this.Un.ei;this.Un=this.qn=this;do{i.ho(t),e=i.ei,i.ei=null,i=e}while(i!==marker)}}Qt(){++this.Fn}se(t){null===t.Ye&&(t.Ye=marker,this.Dn.Ye=t,this.Dn=t,++this.Jn)}Yt(t){null===t.ii&&(t.ii=marker,this.kn.ii=t,this.kn=t,++this.Yn)}Zt(t){if(0==--this.Fn)return null===this.lo||this.lo.done?(this.Ro(t),LifecycleTask.done):(this.lo.vo=this,this.lo)}Ro(t){if(this.fo(t|LifecycleFlags.Zi),this.Jn>0){this.Jn=0;let e,i=this.Mn.Ye;this.Mn=this.Dn=this;do{i.Xe(t),e=i.Ye,i.Ye=null,i=e}while(i!==marker)}if(this.po(LifecycleFlags.nt),this.Yn>0){this.Yn=0;let e,i=this.Vn.ii;this.Vn=this.kn=this;do{i.no(t),e=i.ii,i.ii=null,i=e}while(i!==marker)}}re(){++this.In}ue(t){if(null===t.Ze&&(t.Ze=marker,this.xn.Ze=t,this.xn=t,++this.Zn),null!==t.Ye){let e=this.Mn,i=e.Ye;for(;i!==t;)i=(e=i).Ye;e.Ye=i.Ye,i.Ye=null,this.Dn===i&&(this.Dn=this),--this.Jn}}he(t){null===t.si&&(t.si=marker,this._n.si=t,this._n=t,++this.eo)}Lo(t){null===t.Qe&&(t.Qe=marker,this.Kn.Qe=t,this.Kn=t,++this.io)}le(t){if(0==--this.In)return null===this.lo||this.lo.done?(this.Oo(t),LifecycleTask.done):(this.lo.vo=this,this.lo)}Oo(t){if(this.fo(t|LifecycleFlags.U|LifecycleFlags.ft),this.Zn>0){this.Zn=0;let e,i=this.En.Ze;this.En=this.xn=this;do{i.Je(t),e=i.Ze,i.Ze=null,i=e}while(i!==marker)}if(this.eo>0){this.eo=0;let e,i=this.jn.si;this.jn=this._n=this;do{i.oo(t),e=i.si,i.si=null,i=e}while(i!==marker)}if(this.io>0){this.Ae(),this.io=0;let e,i=this.Nn.Qe;this.Nn=this.Kn=this;do{i.Be(t),e=i.Qe,i.Qe=null,i=e}while(i!==marker);this.ke(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.Bo=PLATFORM.hr,this.currentView=null,this.Ci=0,this.Fi=0,this.Fo=null,this.Io=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}Co(value,t){this.Io.done?value instanceof Promise?(this.wo(new PromiseSwap(this,value)),this.To()):this.Po(value,t):(value instanceof Promise?this.wo(new PromiseSwap(this,value)):this.wo(value),this.Io.$o()&&this.Io.cancel())}Ce(t,e){this.scope=e,this.Fi=1,null!==this.currentView&&this.currentView.$e(t,e)}Jt(t){this.Ci=1,null!==this.currentView&&this.currentView.ee(t)}oe(t){this.Ci=0,null!==this.currentView&&this.currentView.fe(t)}Ve(t){this.Fi=0,null!==this.currentView&&this.currentView.Be(t)}be(t){this.currentView=null}wo(t){null===this.Fo&&(this.Fo=[]),this.Fo.push(t)}Po(t,e){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let s,r=this.currentView;null===r?s=LifecycleTask.done:($lifecycle.Lo(r),$lifecycle.re(),r.fe(e),s=$lifecycle.le(e)),i.ao(s),null===(r=this.currentView=t)?s=LifecycleTask.done:(this.Fi&&($lifecycle.Fe(),r.$e(e,this.scope),$lifecycle.we(e)),this.Ci?($lifecycle.Qt(),r.ee(e),s=$lifecycle.Zt(e)):s=LifecycleTask.done),i.ao(s),i.done?(this.Io=LifecycleTask.done,this.Bo()):(this.Io=i,this.Io.So().then(()=>{this.Bo(),this.To()}).catch(t=>{throw t}))}To(){if(null!==this.Fo&&this.Fo.length>0){const t=this.Fo.pop();this.Fo.length=0,PromiseSwap.is(t)?this.Io=t.start():this.Po(t,LifecycleFlags.os)}else this.Io=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,$o:()=>0,cancel(){},So:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.vo=null,this.resolve=null,this.Ao=[],this.Mo=null}ao(t){t.done||(this.done=0,this.Ao.push(t),t.So().then(()=>{this.Do()}).catch(t=>{throw t}))}do(t){if(t.done){const e=this.Ao.indexOf(t);-1!==e&&this.Ao.splice(e,1)}0===this.Ao.length&&null!==this.vo&&(this.vo.uo(this),this.vo=null)}$o(){return this.done?0:this.Ao.every(t=>t.$o())}cancel(){this.$o()&&(this.Ao.forEach(t=>{t.cancel()}),this.done=0)}So(){return null===this.Mo&&(this.Mo=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.Mo}Do(){this.done||this.Ao.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.vo&&(this.vo.Oo(LifecycleFlags.os),this.vo.mo(LifecycleFlags.os),this.vo.yo(LifecycleFlags.os),this.vo.Ro(LifecycleFlags.os)),this.vo.uo(this),null!==this.resolve&&this.resolve()}}class PromiseSwap{constructor(t,e){this.Vo=t,this.done=0,this.ko=0,this.Wn=e}static is(t){return"start"in t}start(){return this.ko?LifecycleTask.done:(this.Wn=this.Wn.then(t=>(this.Eo(t),t)),this)}$o(){return!this.done}cancel(){this.$o()&&(this.ko=1)}So(){return this.Wn}Eo(value){this.ko||(this.done=1,this.Vo.Co(value,LifecycleFlags.os))}}class PromiseTask{constructor(t,e){this.done=0,this.ko=0,this.xo=e,this.Wn=t.then(value=>{if(1!=this.ko)return this.done=1,this.xo(value),value})}$o(){return!this.done}cancel(){this.$o()&&(this.ko=1)}So(){return this.Wn}}const slotNames=[],versionSlotNames=[];let lastSlot=-1;ensureEnoughSlotNames(-1);const{oneTime,gi:toView,pi:fromView}=BindingMode,toViewOrOneTime=toView|oneTime;let Binding=class{constructor(t,e,i,mode,s,r){this.Se=null,this.xe=null,this.$state=0,this.$lifecycle=r.get(ILifecycle),this.ro=null,this.$scope=null,this.er=r,this.mode=mode,this.lt=s,this.jo=t,this.target=e,this._o=i,this.J=LifecycleFlags.Oi}No(value,t){this.targetObserver.Z(value,(t|=this.J)|LifecycleFlags.K),t&LifecycleFlags.N&&this.targetObserver._(t)}Ko(value,t){this.jo.assign((t|=this.J)|LifecycleFlags.Ji,this.$scope,this.er,value)}O(t,e,i){if(2&this.$state){if(i|=this.J,this.mode===BindingMode.pi&&(i&=~LifecycleFlags.K,i|=LifecycleFlags.Ji),i&LifecycleFlags.K){const e=this.targetObserver.Y();return(10082!==this.jo.st||this.ot>1)&&(t=this.jo.evaluate(i,this.$scope,this.er)),t!==e&&this.No(t,i),void(0==(this.mode&oneTime)&&(this.version++,this.jo.connect(i,this.$scope,this),this.unobserve(0)))}if(!(i&LifecycleFlags.Ji))throw Reporter.error(15,LifecycleFlags[i]);t!==this.jo.evaluate(i,this.$scope,this.er)&&this.Ko(t,i)}}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t|LifecycleFlags.ut)}this.$state|=1,this.J=t&LifecycleFlags.We,this.$scope=e;let i=this.jo;hasBind(i)&&i.bind(t,e,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=this.mode&fromView?this.lt.ht(t,this.target,this._o):this.lt.Uo(t,this.target,this._o)),targetObserver.bind&&targetObserver.bind(t),i=this.jo,this.mode&toViewOrOneTime&&this.No(i.evaluate(t,e,this.er),t),this.mode&toView&&i.connect(t,e,this),this.mode&fromView&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}Be(t){2&this.$state&&(this.$state|=64,this.J=LifecycleFlags.Oi,hasUnbind(this.jo)&&this.jo.ir(t,this.$scope,this),this.$scope=null,this.targetObserver.ir&&this.targetObserver.ir(t),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67)}connect(t){2&this.$state&&this.jo.connect((t|=this.J)|LifecycleFlags.nt,this.$scope,this)}_(t){2&this.$state&&this.targetObserver._(t|this.J)}};Binding=__decorate([connectable()],Binding);class Call{constructor(t,e,i,s,r){this.Se=null,this.xe=null,this.$state=0,this.er=r,this.jo=t,this.targetObserver=s.ht(LifecycleFlags.Oi,e,i)}qo(t){const e=this.$scope.As;Object.assign(e,t);const i=this.jo.evaluate(LifecycleFlags.nt,this.$scope,this.er);for(const i in t)Reflect.deleteProperty(e,i);return i}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t|LifecycleFlags.ut)}this.$state|=1,this.$scope=e,hasBind(this.jo)&&this.jo.bind(t,e,this),this.targetObserver.Z(t=>this.qo(t),t),this.$state|=2,this.$state&=-2}Be(t){2&this.$state&&(this.$state|=64,hasUnbind(this.jo)&&this.jo.ir(t,this.$scope,this),this.$scope=null,this.targetObserver.Z(null,t),this.$state&=-67)}at(t,e,i){}O(t,e,i){}}const IExpressionParser=DI.js("IExpressionParser").xs(t=>t.singleton(ExpressionParser));class ExpressionParser{constructor(){this.zo=Object.create(null),this.Wo=Object.create(null),this.Ho=Object.create(null)}parse(t,e){switch(e){case 2048:{let i=this.Ho[t];return void 0===i&&(i=this.Ho[t]=this.Go(t,e)),i}case 539:{let i=this.Wo[t];return void 0===i&&(i=this.Wo[t]=this.Go(t,e)),i}default:{if(0===t.length&&55&e)return PrimitiveLiteral.Yr;let i=this.zo[t];return void 0===i&&(i=this.zo[t]=this.Go(t,e)),i}}}cache(t){const{Wo:e,zo:i,Ho:s}=this;for(const r in t){const n=t[r];switch(n.st){case 24:s[r]=n;break;case 6199:e[r]=n;break;default:i[r]=n}}}Go(t,e){try{const parts=t.split("."),e=parts[0];let i;i=e.endsWith("()")?new CallScope(e.replace("()",""),PLATFORM.fi):new AccessScope(parts[0]);let s=1;for(;parts.length>s;){const t=parts[s];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),PLATFORM.fi):new AccessMember(i,parts[s]),s++}return i}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.ds=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Qo=1280]="IsRef",BindingType[BindingType.Xo=512]="IsIterator",BindingType[BindingType.Jo=256]="IsCustom",BindingType[BindingType.Yo=128]="IsFunction",BindingType[BindingType.Zo=64]="IsEvent",BindingType[BindingType.th=32]="IsProperty",BindingType[BindingType.eh=16]="IsCommand",BindingType[BindingType.ih=48]="IsPropertyCommand",BindingType[BindingType.sh=80]="IsEventCommand",BindingType[BindingType.rh=6]="DelegationStrategyDelta",BindingType[BindingType.nh=15]="Command",BindingType[BindingType.oh=49]="OneTimeCommand",BindingType[BindingType.hh=50]="ToViewCommand",BindingType[BindingType.lh=51]="FromViewCommand",BindingType[BindingType.ah=52]="TwoWayCommand",BindingType[BindingType.uh=53]="BindCommand",BindingType[BindingType.dh=86]="TriggerCommand",BindingType[BindingType.fh=87]="CaptureCommand",BindingType[BindingType.gh=88]="DelegateCommand",BindingType[BindingType.bh=153]="CallCommand",BindingType[BindingType.ph=26]="OptionsCommand",BindingType[BindingType.yh=539]="ForCommand",BindingType[BindingType.vh=284]="CustomCommand"})(BindingType||(BindingType={}));const{gi:toView$1,oneTime:oneTime$1}=BindingMode;class MultiInterpolationBinding{constructor(t,e,i,s,mode,r){this.Se=null,this.xe=null,this.$state=0,this.$scope=null,this.mh=e,this.er=r,this.mode=mode,this.lt=t,this.target=i,this._o=s;const n=e.rt,parts=this.parts=Array(n.length);for(let o=0,h=n.length;h>o;++o)parts[o]=new InterpolationBinding(n[o],e,i,s,mode,t,r,0===o)}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t)}this.$state|=2,this.$scope=e;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].$e(t,e)}Be(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let e=0,i=parts.length;i>e;++e)parts[e].Be(t)}}let InterpolationBinding=class{constructor(t,e,i,s,mode,r,n,o){this.$state=0,this.mh=e,this.Rh=o,this.mode=mode,this.er=n,this.lt=r,this.jo=t,this.target=i,this._o=s,this.targetObserver=r.Uo(LifecycleFlags.Oi,i,s)}No(value,t){this.targetObserver.Z(value,t|LifecycleFlags.K)}O(t,e,i){if(!(2&this.$state))return;const s=this.targetObserver.Y(),r=this.mh.evaluate(i,this.$scope,this.er);r!==s&&this.No(r,i),0==(this.mode&oneTime$1)&&(this.version++,this.jo.connect(i,this.$scope,this),this.unobserve(0))}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t)}this.$state|=2,this.$scope=e;const i=this.jo;i.bind&&i.bind(t,e,this),this.Rh&&this.No(this.mh.evaluate(t,e,this.er),t),this.mode&toView$1&&i.connect(t,e,this)}Be(t){if(!(2&this.$state))return;this.$state&=-3;const e=this.jo;e.ir&&e.ir(t,this.$scope,this),this.$scope=null,this.unobserve(1)}};InterpolationBinding=__decorate([connectable()],InterpolationBinding);let LetBinding=class{constructor(t,e,i,s,toViewModel=0){this.Se=null,this.xe=null,this.$state=0,this.$lifecycle=s.get(ILifecycle),this.$scope=null,this.er=s,this.lt=i,this.jo=t,this.target=null,this._o=e,this.toViewModel=toViewModel}O(t,e,i){if(2&this.$state){if(!(i&LifecycleFlags.K))throw Reporter.error(15,i);{const{target:t,_o:e}=this,s=t[e],r=this.jo.evaluate(i,this.$scope,this.er);r!==s&&(t[e]=r)}}}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t|LifecycleFlags.ut)}this.$state|=1,this.$scope=e,this.target=this.toViewModel?e.Ds:e.As;const i=this.jo;i.bind&&i.bind(t,e,this),this.target[this._o]=this.jo.evaluate(LifecycleFlags.ut,e,this.er),this.jo.connect(t,e,this),this.$state|=2,this.$state&=-2}Be(t){if(!(2&this.$state))return;this.$state|=64;const e=this.jo;e.ir&&e.ir(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}};LetBinding=__decorate([connectable()],LetBinding);class Ref{constructor(t,e,i){this.Se=null,this.xe=null,this.$state=0,this.er=i,this.jo=t,this.target=e}$e(t,e){if(2&this.$state){if(this.$scope===e)return;this.Be(t|LifecycleFlags.ut)}this.$state|=1,this.$scope=e,hasBind(this.jo)&&this.jo.bind(t,e,this),this.jo.assign(t,this.$scope,this.er,this.target),this.$state|=2,this.$state&=-2}Be(t){if(!(2&this.$state))return;this.$state|=64,this.jo.evaluate(t,this.$scope,this.er)===this.target&&this.jo.assign(t,this.$scope,this.er,null);const e=this.jo;hasUnbind(e)&&e.ir(t,this.$scope,this),this.$scope=null,this.$state&=-67}at(t,e,i){}O(t,e,i){}}let CollectionLengthObserver=class{constructor(t,e){this.G=t,this.X=e,this.H=t[e]}Y(){return this.G[this.X]}bt(t){this.G[this.X]=t}_(t){const e=this.G[this.X],i=this.H;i!==e&&(this.G[this.X]=e,this.H=e,this.m(e,i,t|LifecycleFlags.K))}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}};CollectionLengthObserver=__decorate([targetObserver()],CollectionLengthObserver);const proto=Array.prototype,$push=proto.push,$unshift=proto.unshift,$pop=proto.pop,$shift=proto.shift,$splice=proto.splice,$reverse=proto.reverse,$sort=proto.sort,native={push:$push,unshift:$unshift,pop:$pop,shift:$shift,splice:$splice,reverse:$reverse,sort:$sort},methods=["push","unshift","pop","shift","splice","reverse","sort"],observe={push(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $push.apply(t,arguments);const i=t.length,s=arguments.length;if(0===s)return i;t.length=e.yt.length=i+s;let r=i;for(;t.length>r;)t[r]=arguments[r-i],e.yt[r]=-2,r++;return e.m("push",arguments,e.J|LifecycleFlags.Gi),t.length},unshift(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $unshift.apply(t,arguments);const i=arguments.length,s=Array(i);let r=0;for(;i>r;)s[r++]=-2;$unshift.apply(e.yt,s);const n=$unshift.apply(t,arguments);return e.m("unshift",arguments,e.J|LifecycleFlags.Gi),n},pop(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $pop.call(t);const i=e.yt,s=$pop.call(t),r=i.length-1;return i[r]>-1&&i.Lt.push(i[r]),$pop.call(i),e.m("pop",arguments,e.J|LifecycleFlags.Gi),s},shift(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $shift.call(t);const i=e.yt,s=$shift.call(t);return i[0]>-1&&i.Lt.push(i[0]),$shift.call(i),e.m("shift",arguments,e.J|LifecycleFlags.Gi),s},splice(t,e){let i=this;void 0!==i.Fs&&(i=i.Fs);const s=i.q;if(void 0===s)return $splice.apply(i,arguments);const r=s.yt;if(e>0){let i=isNaN(t)?0:t;const to=i+e;for(;to>i;)r[i]>-1&&r.Lt.push(r[i]),i++}const n=arguments.length;if(n>2){const i=n-2,s=Array(i);let o=0;for(;i>o;)s[o++]=-2;$splice.call(r,t,e,...s)}else 2===n&&$splice.call(r,t,e);const o=$splice.apply(i,arguments);return s.m("splice",arguments,s.J|LifecycleFlags.Gi),o},reverse(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $reverse.call(t),this;const i=t.length,s=i/2|0;let r=0;for(;r!==s;){const s=i-r-1,n=t[r],o=e.yt[r],h=e.yt[s];t[r]=t[s],e.yt[r]=h,t[s]=n,e.yt[s]=o,r++}return e.m("reverse",arguments,e.J|LifecycleFlags.Gi),this},sort(t){let e=this;void 0!==e.Fs&&(e=e.Fs);const i=e.q;if(void 0===i)return $sort.call(e,t),this;const s=e.length;if(2>s)return this;quickSort(e,i.yt,0,s,preSortCompare);let r=0;for(;s>r&&void 0!==e[r];)r++;return void 0!==t&&"function"==typeof t||(t=sortCompare),quickSort(e,i.yt,0,r,t),i.m("sort",arguments,i.J|LifecycleFlags.Gi),this}},descriptorProps={Lh:1,ze:0,Tt:1},def=Reflect.defineProperty;for(const t of methods)def(observe[t],"observing",{value:1,Lh:0,Tt:0,ze:0});enableArrayObservation();let ArrayObserver=class{constructor(t,e,i){this.F=e,i.q=this,this.R=i,this.flags=t&LifecycleFlags.We,this.Rt()}_(t){const e=this.R,i=e.length;let s=0;for(;i>s;++s)patchProperties(e[s],t)}};ArrayObserver=__decorate([collectionObserver(9)],ArrayObserver);const proto$1=Map.prototype,$set=proto$1.set,$clear=proto$1.clear,$delete=proto$1.delete,native$1={set:$set,clear:$clear,delete:$delete},methods$1=["set","clear","delete"],observe$1={set(t,value){let e=this;void 0!==e.Fs&&(e=e.Fs);const i=e.q;if(void 0===i)return $set.call(e,t,value),this;const s=e.size;if($set.call(e,t,value),e.size===s){let s=0;for(const r of e.entries()){if(r[0]===t)return r[1]!==value&&(i.yt[s]=-2),this;s++}return this}return i.yt[s]=-2,i.m("set",arguments,i.J|LifecycleFlags.Gi),this},clear(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $clear.call(t);if(t.size>0){const i=e.yt;let s=0;for(const e of t.keys())i[s]>-1&&i.Lt.push(i[s]),s++;$clear.call(t),i.length=0,e.m("clear",arguments,e.J|LifecycleFlags.Gi)}},delete(value){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $delete.call(t,value);if(0===t.size)return 0;let i=0;const s=e.yt;for(const e of t.keys()){if(e===value)return s[i]>-1&&s.Lt.push(s[i]),s.splice(i,1),$delete.call(t,value);i++}return e.m("delete",arguments,e.J|LifecycleFlags.Gi),0}},descriptorProps$1={Lh:1,ze:0,Tt:1},def$1=Reflect.defineProperty;for(const t of methods$1)def$1(observe$1[t],"observing",{value:1,Lh:0,Tt:0,ze:0});enableMapObservation();let MapObserver=class{constructor(t,e,i){this.F=e,i.q=this,this.R=i,this.flags=t&LifecycleFlags.We,this.Rt()}_(t){this.R.forEach((value,e)=>{patchProperties(value,t),patchProperties(e,t)})}};MapObserver=__decorate([collectionObserver(6)],MapObserver);const proto$2=Set.prototype,$add=proto$2.add,$clear$1=proto$2.clear,$delete$1=proto$2.delete,native$2={add:$add,clear:$clear$1,delete:$delete$1},methods$2=["add","clear","delete"],observe$2={add(value){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $add.call(t,value),this;const i=t.size;return $add.call(t,value),t.size===i?this:(e.yt[i]=-2,e.m("add",arguments,e.J|LifecycleFlags.Gi),this)},clear(){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $clear$1.call(t);if(t.size>0){const i=e.yt;let s=0;for(const e of t.keys())i[s]>-1&&i.Lt.push(i[s]),s++;$clear$1.call(t),i.length=0,e.m("clear",arguments,e.J|LifecycleFlags.Gi)}},delete(value){let t=this;void 0!==t.Fs&&(t=t.Fs);const e=t.q;if(void 0===e)return $delete$1.call(t,value);if(0===t.size)return 0;let i=0;const s=e.yt;for(const e of t.keys()){if(e===value)return s[i]>-1&&s.Lt.push(s[i]),s.splice(i,1),$delete$1.call(t,value);i++}return e.m("delete",arguments,e.J|LifecycleFlags.Gi),0}},descriptorProps$2={Lh:1,ze:0,Tt:1},def$2=Reflect.defineProperty;for(const t of methods$2)def$2(observe$2[t],"observing",{value:1,Lh:0,Tt:0,ze:0});enableSetObservation();let SetObserver=class{constructor(t,e,i){this.F=e,i.q=this,this.R=i,this.flags=t&LifecycleFlags.We,this.Rt()}_(t){this.R.forEach((value,e)=>{patchProperties(e,t)})}};SetObserver=__decorate([collectionObserver(7)],SetObserver);const computedOverrideDefaults={Oh:0,$t:0};let CustomSetterObserver=class{constructor(t,e,i){this.G=t,this.X=e,this.H=this.oldValue=void 0,this.Bh=i,this.W=0}Z(t){this.Bh.set.call(this.G,t),this.H!==t&&(this.oldValue=this.H,this.H=t,this.m(t,this.oldValue,LifecycleFlags.K))}subscribe(t){this.W||this.Fh(),this.l(t)}unsubscribe(t){this.u(t)}Fh(){this.W=1,this.H=this.G[this.X],Reflect.defineProperty(this.G,this.X,{set:t=>{this.Z(t)}})}};CustomSetterObserver=__decorate([subscriberCollection(MutationKind.v)],CustomSetterObserver);let GetterObserver=class{constructor(t,e,i,s,r,n,o){this.G=i,this.X=s,this.Ih=0,this.H=this.oldValue=void 0,this.Ch=[],this.wh=[],this.Th=e,this.Ph=0,this.Bh=r,this.L=new Proxy(i,createGetterTraps(t,n,this)),Reflect.defineProperty(i,s,{get:()=>this.Y()})}kt(t){-1===this.Ch.indexOf(t)&&this.Ch.push(t)}At(t){-1===this.wh.indexOf(t)&&this.wh.push(t)}Y(){return this.H=0===this.Ph||this.Ih?Reflect.apply(this.Bh.get,this.L,PLATFORM.fi):Reflect.apply(this.Bh.get,this.G,PLATFORM.fi),this.H}subscribe(t){this.l(t),1==++this.Ph&&this.$h(1)}unsubscribe(t){this.u(t),0==--this.Ph&&this.Sh()}O(){const t=this.H,e=this.$h(0);t!==e&&this.m(e,t,LifecycleFlags.K)}k(){const t=this.H,e=this.$h(0);t!==e&&this.m(e,t,LifecycleFlags.U|LifecycleFlags.K)}$h(t){const e=!this.Th.Oh||t;return e&&(this.Sh(),this.Ih=1),this.H=this.Y(),e&&(this.Ch.forEach(t=>{t.subscribe(this)}),this.wh.forEach(t=>{t.Ct(this)}),this.Ih=0),this.H}St(t){return!this.Ih||"$observers"===t}Sh(){this.Ch.forEach(t=>{t.unsubscribe(this)}),this.Ch.length=0,this.wh.forEach(t=>{t.wt(this)}),this.wh.length=0}};GetterObserver=__decorate([subscriberCollection(MutationKind.v)],GetterObserver);const toStringTag$1={}.toString,IDirtyChecker=DI.js("IDirtyChecker").xs(t=>t.singleton(DirtyChecker)),DirtyCheckSettings={Ah:6,disabled:0,warn:1,Mh:0,Dh(){this.Ah=6,this.disabled=0,this.warn=1,this.Mh=0}};class DirtyChecker{constructor(){this.Vh=0,this.kh=[]}Pt(t,e){if(DirtyCheckSettings.Mh)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,e)}Eh(t){this.kh.push(t),1===this.kh.length&&PLATFORM.xh.add(this.jh,this)}removeProperty(t){this.kh.splice(this.kh.indexOf(t),1),0===this.kh.length&&PLATFORM.xh.remove(this.jh,this)}jh(t){if(DirtyCheckSettings.disabled)return;if(++this.Vh<DirtyCheckSettings.Ah)return;this.Vh=0;const e=this.kh,i=e.length;let s,r=0;for(;i>r;++r)(s=e[r])._h()&&s.flush(LifecycleFlags.ts)}}let DirtyCheckProperty=class{constructor(t,e,i){this.G=e,this.X=i,this.Nh=t}_h(){return this.oldValue!==this.G[this.X]}flush(t){const e=this.G[this.X];this.m(e,this.oldValue,t|LifecycleFlags.K),this.oldValue=e}subscribe(t){this.p()||(this.oldValue=this.G[this.X],this.Nh.Eh(this)),this.l(t)}unsubscribe(t){this.u(t)&&!this.p()&&this.Nh.removeProperty(this)}};DirtyCheckProperty=__decorate([propertyObserver()],DirtyCheckProperty);const noop=PLATFORM.hr;class PrimitiveObserver{constructor(t,e){this.Kh=1,"length"===e?(this.G=t,this.Y=this.Uh):this.Y=this.qh}Uh(){return this.G.length}qh(){}}PrimitiveObserver.prototype.Z=noop,PrimitiveObserver.prototype.subscribe=noop,PrimitiveObserver.prototype.unsubscribe=noop,PrimitiveObserver.prototype.tt=noop,PrimitiveObserver.prototype._=noop;class PropertyAccessor{constructor(t,e){this.G=t,this.X=e}Y(){return this.G[this.X]}Z(value){this.G[this.X]=value}_(t){patchProperty(this.G,this.X,t)}}const toStringTag$2={}.toString,IObserverLocator=DI.js("IObserverLocator").Ln(),ITargetObserverLocator=DI.js("ITargetObserverLocator").Ln(),ITargetAccessorLocator=DI.js("ITargetAccessorLocator").Ln();class ObserverLocator{constructor(t,e,i,s){this.zh=[],this.Nh=e,this.F=t,this.Wh=i,this.Hh=s}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}ht(t,e,i){if(t&LifecycleFlags.ri&&"object"==typeof e)return ProxyObserver.ni(e,i);if(isBindingContext(e))return e.Vs(t).ni(t,e,i);let s,r=e.j;return r&&i in r?r[i]:((s=this.Gh(t,e,i)).Kh||(void 0===r&&(r=this.Qh(e)),r[i]=s),s)}Xh(t){this.zh.push(t)}Uo(t,e,i){return this.Hh.Jh(t,e)?this.Wh.Yh(t,e,i)?this.ht(t,e,i):this.Hh.Uo(t,this.F,e,i):t&LifecycleFlags.ri?ProxyObserver.ni(e,i):new PropertyAccessor(e,i)}Mt(t,e){return getArrayObserver(t,this.F,e)}Dt(t,e){return getMapObserver(t,this.F,e)}Vt(t,e){return getSetObserver(t,this.F,e)}Qh(t){return t.j||this.Zh(t)}Zh(t){const value={};return Reflect.defineProperty(t,"$observers",{ze:0,Tt:0,Lh:0,value})||Reporter.write(0,t),value}tl(t,e,i,s){for(let r=0,n=this.zh.length;n>r;r++){const n=this.zh[r].ht(t,e,i,s);if(n)return n}return null}Gh(t,e,i){if(!(e instanceof Object))return new PrimitiveObserver(e,i);let s=0;if(this.Wh.Jh(t,e)){const r=this.Wh.ht(t,this.F,this,e,i);if(null!==r)return r;if(null!==r)return r;s=1}switch(toStringTag$2.call(e)){case"[object Array]":return"length"===i?this.Mt(t,e).It(t):this.Nh.Pt(e,i);case"[object Map]":return"size"===i?this.Dt(t,e).It(t):this.Nh.Pt(e,i);case"[object Set]":return"size"===i?this.Vt(t,e).It(t):this.Nh.Pt(e,i)}const r=getPropertyDescriptor(e,i);if(r&&(r.get||r.set)){if(r.get&&r.get.ht)return r.get.ht(e);return this.tl(t,e,i,r)||(s?this.Nh.Pt(e,i):createComputedObserver(t,this,this.Nh,this.F,e,i,r))}return new SetterObserver(t,e,i)}}ObserverLocator.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const noop$1=PLATFORM.hr;let SelfObserver=class{constructor(t,e,i,s){this.J=t&LifecycleFlags.We,ProxyObserver.Is(e)?(e.q.subscribe(this,i),this.G=e.Fs,this.X=i,this.H=e.Fs[i],this.xo=s in e.Fs?e[s].bind(e):noop$1):(this.G=e,this.X=i,this.H=e[i],this.xo=s in e?e[s].bind(e):noop$1),t&LifecycleFlags.N&&(this.Y=this.ws)}O(t,e,i){this.Z(t,i)}Y(){return this.H}ws(){return this.G[this.X]}Z(t,e){const i=this.H;if((i!==t||e&LifecycleFlags.N)&&(this.H=t,!(e&LifecycleFlags.ut))){const s=this.xo(t,i,e);void 0!==s&&(this.H=t=s),this.m(t,i,e)}}_(t){this.xo(this.G[this.X],this.H,this.J|t),this.m(this.G[this.X],this.H,this.J|t)}};SelfObserver=__decorate([propertyObserver()],SelfObserver);const{oneTime:oneTime$2,gi:toView$2,pi:fromView$1,yi:twoWay}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,e,i){i.el=i.mode,i.mode=this.mode}ir(t,e,i){i.mode=i.el,i.el=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(oneTime$2)}}BindingBehaviorResource.it("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(toView$2)}}BindingBehaviorResource.it("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(fromView$1)}}BindingBehaviorResource.it("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(twoWay)}}BindingBehaviorResource.it("twoWay",TwoWayBindingBehavior);const unset={},fromView$2=BindingMode.pi;class DebounceBindingBehavior{bind(t,e,i,s=200){let r,n,o;i instanceof Binding?(r="handleChange",o=debounceCall,n=i.mode&fromView$2?LifecycleFlags.Ji:LifecycleFlags.K):(r="callSource",o=debounceCallSource,n=LifecycleFlags.K),i.Nt=i[r],i.Nt.il=r,i[r]=o,i.jt={Ut:n,Kt:s,_t:0,oldValue:unset}}ir(t,e,i){i[i.Nt.il]=i.Nt,i.Nt=null,PLATFORM.global.clearTimeout(i.jt._t),i.jt=null}}BindingBehaviorResource.it("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.sl=t}bind(t,e,i,...s){if(!i.No)throw Reporter.error(11);if(4===arguments.length){const name=s[0];this.sl.Ks(name,i),i.rl=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let e=t.length;for(;e--;)this.sl.Ks(t[e],i);i.rl=t}}}ir(t,e,i){const name=i.rl;if(i.rl=null,Array.isArray(name)){const t=name;let e=t.length;for(;e--;)this.sl.Us(t[e],i)}else this.sl.Us(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.it("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,e,i,s=200){let r;i.Wt=i[r=i instanceof Binding?i.mode===BindingMode.yi?"updateSource":"updateTarget":"callSource"],i.Wt.il=r,i[r]=throttle,i.qt={Kt:s,zt:0,_t:-1}}ir(t,e,i){i[i.Wt.il]=i.Wt,i.Wt=null,PLATFORM.global.clearTimeout(i.qt._t),i.qt=null}}BindingBehaviorResource.it("throttle",ThrottleBindingBehavior);const Bindable={for(t){const e={add(e){let i;null!==e&&"object"==typeof e?i=e:"string"==typeof e&&(i={Ht:e});const s=i.Ht;if(!s)throw Reporter.error(0);return i.nl||(i.nl=PLATFORM.ol(s)),i.xo||(i.xo=`${s}Changed`),void 0===i.mode&&(i.mode=BindingMode.gi),t.bindables[s]=i,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const i=t.bindables;t.bindables={},i.forEach(e.add)}return e}},customElementName="custom-element",customAttributeName="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.hl="ra",TargetedInstructionType.ll="rb",TargetedInstructionType.cl="rc",TargetedInstructionType.al="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.mh="rf",TargetedInstructionType.ul="rg",TargetedInstructionType.dl="rh",TargetedInstructionType.fl="ri",TargetedInstructionType.gl="rj",TargetedInstructionType.bl="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.js("createInterface").Ln(),buildRequired=Object.freeze({required:1,compiler:"default"}),buildNotRequired=Object.freeze({required:0,compiler:"default"});class DefaultTemplateDefinition{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=buildNotRequired,this.bindables=PLATFORM.Gt,this.instructions=PLATFORM.fi,this.dependencies=PLATFORM.fi,this.surrogates=PLATFORM.fi,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1}}const templateDefinitionAssignables=["name","template","cache","build","containerless","shadowOptions","hasSlots"],templateDefinitionArrays=["instructions","dependencies","surrogates"],{pl:enter,yl:leave}=Profiler.vl("AttachLifecycle"),{pl:enter$1,yl:leave$1}=Profiler.vl("BindLifecycle"),INode=DI.js("INode").Ln(),IRenderLocation=DI.js("IRenderLocation").Ln(),IDOM=DI.js("IDOM").Ln(),ni=function(){throw Reporter.error(1e3)},niDOM={addEventListener:ni,appendChild:ni,cloneNode:ni,ml:ni,createDocumentFragment:ni,createElement:ni,Rl:ni,dispatchEvent:ni,Ll:ni,Ol:ni,createTextNode:ni,insertBefore:ni,Bl:ni,Fl:ni,Il:ni,Cl:ni,_e:ni,remove:ni,removeEventListener:ni,setAttribute:ni},DOM=Object.assign({},niDOM,{get wl(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.wl)throw Reporter.error(1001);const t={},e=[dom];let i=Object.getPrototypeOf(dom);for(;i&&i!==Object.prototype;)e.unshift(i),i=Object.getPrototypeOf(i);for(i of e)Object.assign(t,Object.getOwnPropertyDescriptors(i));const s=[];let r,n;for(r in t)(n=t[r]).Tt&&n.Lh&&(Reflect.defineProperty(this,r,n),s.push(r));Reflect.set(this,"$domKeys",s),Reflect.set(this,"$initialized",1)},Tl(){if(!this.wl)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,niDOM),Reflect.set(this,"$domKeys",PLATFORM.fi),Reflect.set(this,"$initialized",0)}}),emptySequence={childNodes:PLATFORM.fi,firstChild:null,lastChild:null,Pl:()=>PLATFORM.fi,insertBefore(t){},$l(t){},remove(){}},NodeSequence={empty:emptySequence};class View{constructor($lifecycle,cache){this.Pe=null,this.Ee=null,this.te=null,this.de=null,this.te=null,this.de=null,this.ie=null,this.ge=null,this.Ge=null,this.Ye=null,this.Ze=null,this.Qe=null,this.$state=0,this.$scope=null,this.Le=0,this.$lifecycle=$lifecycle,this.cache=cache}Sl(t){this.Le=0,this.location=t}release(t){return this.Le=1,8&this.$state?this.cache.Al(this):!!this.Je(t)}Ml(t){this.$scope=t,this.$e=$lockedBind,this.Be=$lockedUnbind}}class ViewFactory{constructor(name,template,t){this.Dl=0,this.Vl=-1,this.cache=null,this.F=t,this.name=name,this.template=template}kl(t,e){t&&("*"===t?t=ViewFactory.El:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Vl&&e||(this.Vl=t)),this.cache=this.Vl>0?[]:null,this.Dl=this.Vl>0}Al(t){return null!==this.cache&&this.Vl>this.cache.length}Oe(t){return this.Al(t)?(t.ye(LifecycleFlags.Oi),this.cache.push(t),1):0}create(t){const cache=this.cache;let e;if(null!==cache&&cache.length>0)return(e=cache.pop()).$state&=-129,e;if(e=new View(this.F,this),this.template.Ke(e,null,null,t),!e.$nodes)throw Reporter.error(90);return e}}ViewFactory.El=65535,(t=>{t.$e=$bindView,t._=$patch,t.Be=$unbindView,t.ee=$attachView,t.fe=$detachView,t.ye=$cacheView,t.Xe=$mountView,t.Je=$unmountView})(View.prototype);const ITemplateCompiler=DI.js("ITemplateCompiler").Ln();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.Oi=1]="none",ViewCompileFlags[ViewCompileFlags.xl=2]="surrogate",ViewCompileFlags[ViewCompileFlags.jl=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.js("ITemplateFactory").Ln();class CompiledTemplate{constructor(dom,t,e,i){this.dom=dom,this._l=t,this.Nl=e,this.Kl=i}Ke(t,host,parts,e=LifecycleFlags.Oi){const i=t.$nodes=this.Nl.Ul();t.$context=this.Kl,this.Kl.Ke(e|=this._l.strategy,t,i.Pl(),this._l,host,parts)}}const noViewTemplate={Kl:null,dom:null,Ke(t){t.$nodes=NodeSequence.empty,t.$context=null}},defaultCompilerName="default",IInstructionRenderer=DI.js("IInstructionRenderer").Ln(),IRenderer=DI.js("IRenderer").Ln(),IRenderingEngine=DI.js("IRenderingEngine").xs(t=>t.singleton(RenderingEngine));class RenderingEngine{constructor(t,e,i,s){this.ql=new Map,this.zl=t,this.Wl=e,this.Hl=new Map,this.F=i,this.Gl=new Map,this.Ql=s.reduce((t,e)=>(t[e.name]=e,t),Object.create(null))}ai(dom,t,e,i){if(!t)return null;let s=this.Gl.get(t);return s||(s=this.Xl(dom,t,e,i),this.Gl.set(t,s)),s}Jl(dom,t,e){if(!t)return null;let i=this.Hl.get(t);if(!i){const s=buildTemplateDefinition(null,t),template=this.Xl(dom,s,e,null);(i=new ViewFactory(s.name,template,this.F)).kl(s.cache,1),this.Hl.set(t,i)}return i}oi(t,e,i){let s=this.ql.get(e);s||(s=RuntimeBehavior.create(e),this.ql.set(e,s)),s.Yl(t,i,this.F)}Xl(dom,t,e,i){if(null===e&&(e=this.zl),null!==t.template){const s=createRenderContext(dom,e,t.dependencies,i);if(t.build.required){const e=t.build.compiler||defaultCompilerName,compiler=this.Ql[e];if(void 0===compiler)throw Reporter.error(20,e);t=compiler.compile(dom,t,new RuntimeCompilationResources(s),ViewCompileFlags.xl)}return this.Wl.create(s,t)}return noViewTemplate}}RenderingEngine.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class InstanceProvider{constructor(){this.v=null}qe(t){this.v=t}resolve(t,e){if(void 0===this.v)throw Reporter.error(50);return this.v}tt(){this.v=null}}class ViewFactoryProvider{qe(t,parts){this.Nl=t,this.Zl=parts||PLATFORM.Gt}resolve(t,e){const i=this.Nl;if(null==i)throw Reporter.error(50);if(!i.name||!i.name.length)throw Reporter.error(51);const s=this.Zl[i.name];if(s){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.Jl(dom,s,e)}return i}tt(){this.Nl=null,this.Zl=PLATFORM.Gt}}let ChildrenObserver=class{constructor(t,customElement){this.Bt=0,this.children=null,this.customElement=customElement,this.F=t,this.W=0}Y(){return this.W||(this.W=1,this.customElement.me.tc(()=>{this.ec()}),this.children=findElements(this.customElement.me.children)),this.children}Z(t){}flush(t){this.m(this.children,void 0,t|LifecycleFlags.K),this.Bt=0}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}ec(){this.children=findElements(this.customElement.me.children),"$childrenChanged"in this.customElement&&this.customElement.ic(),this.F.B(this).catch(t=>{throw t}),this.Bt=1}};ChildrenObserver=__decorate([subscriberCollection(MutationKind.v)],ChildrenObserver);class RuntimeBehavior{constructor(){}static create(t){const e=new RuntimeBehavior;return e.bindables=t.description.bindables,e}Yl(t,e,i){e.$lifecycle=i,"$projector"in e?this.sc(t,i,e):this.rc(t,e)}sc(t,e,i){this.rc(t,i).nc=new ChildrenObserver(e,i),Reflect.defineProperty(i,"$children",{ze:0,get(){return this.j.nc.Y()}})}rc(t,e){const i={},bindables=this.bindables,s=Object.getOwnPropertyNames(bindables);if(t&LifecycleFlags.ri)for(let r=0,n=s.length;n>r;++r){const name=s[r];i[name]=new SelfObserver(t,ProxyObserver.ni(e).L,name,bindables[name].xo)}else{for(let r=0,n=s.length;n>r;++r){const name=s[r];i[name]=new SelfObserver(t,e,name,bindables[name].xo),t&LifecycleFlags.N||createGetterSetter(t,e,name)}Reflect.defineProperty(e,"$observers",{ze:0,value:i})}return i}}const IProjectorLocator=DI.js("IProjectorLocator").Ln(),CustomElementResource={name:customElementName,et:customElementKey,qs:isType$2,oc:customElementBehavior,it:define$2},defaultShadowOptions={mode:"open"},{pl:enter$2,yl:leave$2}=Profiler.vl("RenderLifecycle"),CustomAttributeResource={name:customAttributeName,et:customAttributeKey,qs:isType$3,it:define$3};class If{constructor(t,e,i){this.value=0,this.Vo=i,this.hc=null,this.lc=null,this.cc=t,this.ac=null,this.location=e,this.J=LifecycleFlags.Oi}Ce(t){this.J=t&LifecycleFlags.We;const e=this.uc(t);this.Vo.Co(e,t),this.Vo.Ce(t,this.$scope)}Jt(t){this.Vo.Jt(t)}oe(t){this.Vo.oe(t)}Ve(t){this.Vo.Ve(t)}be(t){null!==this.ac&&this.ac.release(t)&&(this.ac=null),null!==this.lc&&this.lc.release(t)&&(this.lc=null),this.Vo.be(t)}dc(t,e,i){if(3&this.$state){i|=this.J;const t=ProxyObserver.Et(this);if(i&LifecycleFlags.U){const e=t.uc(i);t.Vo.Co(e,i)}else t.$lifecycle.B(t).catch(t=>{throw t})}}flush(t){t|=this.J;const e=ProxyObserver.Et(this),i=e.uc(t);e.Vo.Co(i,t)}uc(t){return this.value?this.ac=this.fc(this.ac,this.cc,t):null!==this.hc?this.lc=this.fc(this.lc,this.hc,t):null}fc(t,e,i){return null===t&&(t=e.create(i)),t.Sl(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],__decorate([bindable],If.prototype,"value",void 0),CustomAttributeResource.it({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Nl=t}link(t){t.hc=this.Nl}}Else.inject=[IViewFactory],CustomAttributeResource.it({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,e,i){this.Nl=i,this.gc=0,this.location=t,this.bc=null,this.pc=e,this.yc=[],this.key=null,this.Li=0}Ce(t){this.J=t&LifecycleFlags.We,this.vc(t);let e=this.pc.Pe;for(;null!==e;){if(ProxyObserver.Et(e.target)===ProxyObserver.Et(this)&&"items"===e._o){this.mc=e.jo;break}e=e.Se}this.Rc=this.mc.ln.evaluate(t,this.$scope,null),this.Li||(t&LifecycleFlags.Wi)>0?this.Lc(null,t):this.Oc(null,t)}Jt(t){const{yc:e,location:i}=this;let s;for(let r=0,n=e.length;n>r;++r)(s=e[r]).Sl(i),s.ee(t)}oe(t){const{yc:e}=this;let i;for(let s=0,r=e.length;r>s;++s)(i=e[s]).fe(t),i.release(t)}Ve(t){this.vc(t);const{yc:e}=this;let i;for(let s=0,r=e.length;r>s;++s)(i=e[s]).Be(t)}Bc(t,e,i){i|=this.J;const s=ProxyObserver.Et(this);s.vc(i),i|=LifecycleFlags.K,s.Li||(i&LifecycleFlags.Wi)>0?s.Lc(null,i):s.Oc(null,i)}k(t,e){e|=this.J;const i=ProxyObserver.Et(this);e|=LifecycleFlags.U|LifecycleFlags.K,i.Li||(e&LifecycleFlags.Wi)>0?i.Lc(t,e):i.Oc(t,e)}Oc(t,e){const{yc:i,$lifecycle}=this;let s;if(3&this.$state){const{Rc:r,$scope,Nl:n,mc:o,Fc:h}=this,l=i.length,c=o.count(e,h);if(c>l){i.length=c;for(let t=l;c>t;++t)i[t]=n.create(e)}else if(l>c){$lifecycle.re();for(let t=c;l>t;++t)(s=i[t]).release(e),s.fe(e);$lifecycle.le(e),$lifecycle.Ae();for(let t=c;l>t;++t)(s=i[t]).Be(e);if($lifecycle.ke(e),i.length=c,0===c)return}else if(0===c)return;$lifecycle.Fe(),o.an(e,h,null===t?(t,n,o)=>{(s=i[n]).$e(e,Scope.Es(e,$scope,s.$scope&&s.$scope.Ds[r]===o?s.$scope.Ds:BindingContext.create(e,r,o)))}:(n,o,h)=>{(s=i[o]).$e(e,Scope.Es(e,$scope,!s.$scope||t[o]!==o&&s.$scope.Ds[r]!==h?BindingContext.create(e,r,h):s.$scope.Ds))}),$lifecycle.we(e)}if(12&this.$state){const{location:r}=this;if($lifecycle.Qt(),null===t)for(let t=0,n=i.length;n>t;++t)(s=i[t]).Sl(r),s.ee(e);else for(let n=0,o=i.length;o>n;++n)t[n]!==n&&((s=i[n]).Sl(r),s.ee(e));$lifecycle.Zt(e)}}Lc(t,e){const{$lifecycle,Rc:i,$scope,Nl:s,mc:r,Fc:n}=this;let o=this.yc;if(null===t){if(3&this.$state){$lifecycle.re();const t=o.length;let h;for(let i=0;t>i;++i)(h=o[i]).release(e),h.fe(e);$lifecycle.le(e),$lifecycle.Ae();for(let i=0;t>i;++i)(h=o[i]).Be(e);$lifecycle.ke(e);const l=r.count(e,n);o=this.yc=Array(l),$lifecycle.Fe(),r.an(e,n,(t,r,n)=>{(h=o[r]=s.create(e)).$e(e,Scope.Es(e,$scope,BindingContext.create(e,i,n)))}),$lifecycle.we(e)}if(12&this.$state){const{location:t}=this;let i;$lifecycle.Qt();const s=o.length;for(let r=0;s>r;++r)(i=o[r]).Sl(t),i.ee(e);$lifecycle.Zt(e)}}else{const r=t.length;let h;const l=t.Lt,c=l.length;let a=0;if(3&this.$state){if(c>0){for($lifecycle.re(),a=0;c>a;++a)(h=o[l[a]]).release(e),h.fe(e);for($lifecycle.le(e),$lifecycle.Ae(),a=0;c>a;++a)(h=o[l[a]]).Be(e);$lifecycle.ke(e),a=0;let i=0,s=0;for(l.sort();c>a;++a)for(o.splice(i=l[a]-a,1),s=0;r>s;++s)i>t[s]||--t[s]}for($lifecycle.Fe(),a=0;r>a;++a)-2===t[a]&&((h=s.create(e)).$e(e,Scope.Es(e,$scope,BindingContext.create(e,i,n[a]))),o.splice(a,0,h));if($lifecycle.we(e),o.length!==r)throw Error(`viewsLen=${o.length}, mapLen=${r}`)}if(12&this.$state){const{location:i}=this,s=longestIncreasingSubsequence(t),r=s.length;$lifecycle.re(),$lifecycle.Qt(),$lifecycle.se({Xe(){let n=i,l=r-1;for(a=t.length-1;a>=0;--a)if(-2===t[a]){(h=o[a]).$state|=4;let t=h.te;for(;null!==t;)t.ee(e|LifecycleFlags.Xt),t=t.ie;h.$nodes.insertBefore(n),h.$state|=24,h.$state&=-5,n=h.$nodes.firstChild}else if(0>l||1===r||a!==s[l]){(h=o[t[a]]).$state|=32;let i=h.de;for(;null!==i;)i.fe(e|LifecycleFlags.ne),i=i.ge;for(h.$nodes.remove(),h.$state&=-57,h.$state|=4,i=h.te;null!==i;)i.ee(e|LifecycleFlags.Xt),i=i.ie;h.$nodes.insertBefore(n),h.$state|=24,h.$state&=-5,n=h.$nodes.firstChild}else n=(h=o[a]).$nodes.firstChild,--l},Ye:null}),$lifecycle.le(e),$lifecycle.Zt(e)}}}vc(t){const e=ProxyObserver.Et(this),i=e.bc;if(3&e.$state){const s=e.bc=getCollectionObserver(t,e.$lifecycle,e.Fc);i!==s&&i&&i.wt(e),s&&s.Ct(e)}else i&&i.wt(e)}}let prevIndices,tailIndices;Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],__decorate([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.it({name:"repeat",isTemplateController:1},Repeat);let maxLen=0;class Replaceable{constructor(t,e){this.Nl=t,this.currentView=this.Nl.create(),this.currentView.Sl(e)}Ce(t){this.currentView.$e(t|LifecycleFlags.cs,this.$scope)}Jt(t){this.currentView.ee(t)}oe(t){this.currentView.fe(t)}Ve(t){this.currentView.Be(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.it({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,e){this.value=null,this.Nl=t,this.currentView=this.Nl.create(),this.currentView.Sl(e)}dc(){3&this.$state&&this.Ic(LifecycleFlags.ns)}Ce(t){this.Ic(t)}Jt(t){this.currentView.ee(t)}oe(t){this.currentView.fe(t)}Ve(t){this.currentView.Be(t)}Ic(t){const e=Scope.Es(t,this.$scope,this.value);this.currentView.$e(t,e)}}With.inject=[IViewFactory,IRenderLocation],__decorate([bindable],With.prototype,"value",void 0),CustomAttributeResource.it({name:"with",isTemplateController:1},With);const SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ISanitizer=DI.js("ISanitizer").xs(t=>t.singleton(class{Cc(t){return t.replace(SCRIPT_REGEX,"")}}));class SanitizeValueConverter{constructor(t){this.wc=t}gi(t){return null==t?null:this.wc.Cc(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.it("sanitize",SanitizeValueConverter);const{pl:enterStart,yl:leaveStart}=Profiler.vl("Aurelia.start"),{pl:enterStop,yl:leaveStop}=Profiler.vl("Aurelia.stop");class Aurelia{constructor(t=DI.Tc()){this.zl=t,this.Pc=[],this.$c=[],this.Sc=[],this.Ac=0,this.Mc=null,Registration.v(Aurelia,this).register(t,Aurelia)}register(...t){return this.zl.register(...t),this}app(t){const host=t.host;this.zl.get(IDOMInitializer).initialize(t);const e=LifecycleFlags.es|t.strategy,i=LifecycleFlags.ae|t.strategy;let component;const s=t.component;CustomElementResource.qs(s)?(this.zl.register(s),component=this.zl.get(CustomElementResource.et(s.description.name))):component=s,component=ProxyObserver.Et(component);const r=()=>{host.$au=this,this.Pc.includes(component)||(this.Mc=component,this.Pc.push(component),component.He(e,this.zl,host)),component.$e(e|LifecycleFlags.ut,null),component.ee(e|LifecycleFlags.Xt)};return this.$c.push(r),this.Sc.push(()=>{component.fe(i|LifecycleFlags.ne),component.Be(i|LifecycleFlags.Me),host.$au=null}),this.Ac&&r(),this}root(){return ProxyObserver.Bs(this.Mc)}start(){for(const t of this.$c)t();return this.Ac=1,this}stop(){this.Ac=0;for(const t of this.Sc)t();return this}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.js("IDOMInitializer").Ln();class Renderer{constructor(t){const e=this.Dc={};t.forEach(t=>{e[t.bi]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Ke(t,dom,e,i,targets,s,host,parts){const r=s.instructions,n=this.Dc;if(targets.length!==r.length)throw Reporter.error(targets.length>r.length?30:31);let instructions,o,h;for(let s=0,l=targets.length;l>s;++s){o=targets[s];for(let l=0,c=(instructions=r[s]).length;c>l;++l)n[(h=instructions[l]).type].Ke(t,dom,e,i,o,h,parts)}if(host){const r=s.surrogates;for(let s=0,o=r.length;o>s;++s)n[(h=r[s]).type].Ke(t,dom,e,i,host,h,parts)}}}Renderer.inject=[all(IInstructionRenderer)];let SetPropertyRenderer=class{Ke(t,dom,e,i,s,r){s[r.to]=r.value}};SetPropertyRenderer=__decorate([instructionRenderer("re")],SetPropertyRenderer);let CustomElementRenderer=class{Ke(t,dom,e,i,s,r){const n=e.Ue(i,s,r,null,null,s,1),component=e.get(customElementKey(r.res)),o=e.get(IRenderer).Dc,h=r.instructions;let l;component.He(t,e,s,r);for(let s=0,r=h.length;r>s;++s)o[(l=h[s]).type].Ke(t,dom,e,i,component,l);addComponent(i,component),n.tt()}};CustomElementRenderer=__decorate([instructionRenderer("ra")],CustomElementRenderer);let CustomAttributeRenderer=class{Ke(t,dom,e,i,s,r){const n=e.Ue(i,s,r),component=e.get(customAttributeKey(r.res)),o=e.get(IRenderer).Dc,h=r.instructions;let l;component.He(t,e);for(let s=0,r=h.length;r>s;++s)o[(l=h[s]).type].Ke(t,dom,e,i,component,l);addComponent(i,component),n.tt()}};CustomAttributeRenderer=__decorate([instructionRenderer("rb")],CustomAttributeRenderer);let TemplateControllerRenderer=class{constructor(t){this.Vc=t}Ke(t,dom,e,i,s,r,parts){const n=this.Vc.Jl(dom,r.def,e),o=e.Ue(i,s,r,n,parts,dom.ml(s),0),component=e.get(customAttributeKey(r.res)),h=e.get(IRenderer).Dc,l=r.instructions;let c;component.He(t,e),r.link&&component.link(i.de);for(let s=0,r=l.length;r>s;++s)h[(c=l[s]).type].Ke(t,dom,e,i,component,c);addComponent(i,component),o.tt()}};TemplateControllerRenderer.inject=[IRenderingEngine],TemplateControllerRenderer=__decorate([instructionRenderer("rc")],TemplateControllerRenderer);let LetElementRenderer=class{constructor(t,e){this.kc=t,this.lt=e}Ke(t,dom,e,i,s,r){dom.remove(s);const n=r.instructions,toViewModel=r.toViewModel;let o,h,l;for(let t=0,s=n.length;s>t;++t)h=ensureExpression(this.kc,(o=n[t]).from,48),addBinding(i,l=new LetBinding(h,o.to,this.lt,e,toViewModel))}};LetElementRenderer.inject=[IExpressionParser,IObserverLocator],LetElementRenderer=__decorate([instructionRenderer("rd")],LetElementRenderer);let CallBindingRenderer=class{constructor(t,e){this.kc=t,this.lt=e}Ke(t,dom,e,i,s,r){const n=ensureExpression(this.kc,r.from,153);addBinding(i,new Call(n,s,r.to,this.lt,e))}};CallBindingRenderer.inject=[IExpressionParser,IObserverLocator],CallBindingRenderer=__decorate([instructionRenderer("rh")],CallBindingRenderer);let RefBindingRenderer=class{constructor(t){this.kc=t}Ke(t,dom,e,i,s,r){const n=ensureExpression(this.kc,r.from,1280);addBinding(i,new Ref(n,s,e))}};RefBindingRenderer.inject=[IExpressionParser],RefBindingRenderer=__decorate([instructionRenderer("rj")],RefBindingRenderer);let InterpolationBindingRenderer=class{constructor(t,e){this.kc=t,this.lt=e}Ke(t,dom,e,i,s,r){let n;const o=ensureExpression(this.kc,r.from,2048);addBinding(i,n=o.dn?new MultiInterpolationBinding(this.lt,o,s,r.to,BindingMode.gi,e):new InterpolationBinding(o.fn,o,s,r.to,BindingMode.gi,this.lt,e,1))}};InterpolationBindingRenderer.inject=[IExpressionParser,IObserverLocator],InterpolationBindingRenderer=__decorate([instructionRenderer("rf")],InterpolationBindingRenderer);let PropertyBindingRenderer=class{constructor(t,e){this.kc=t,this.lt=e}Ke(t,dom,e,i,s,r){const n=ensureExpression(this.kc,r.from,48|r.mode);addBinding(i,new Binding(n,s,r.to,r.mode,this.lt,e))}};PropertyBindingRenderer.inject=[IExpressionParser,IObserverLocator],PropertyBindingRenderer=__decorate([instructionRenderer("rg")],PropertyBindingRenderer);let IteratorBindingRenderer=class{constructor(t,e){this.kc=t,this.lt=e}Ke(t,dom,e,i,s,r){const n=ensureExpression(this.kc,r.from,539);addBinding(i,new Binding(n,s,r.to,BindingMode.gi,this.lt,e))}};IteratorBindingRenderer.inject=[IExpressionParser,IObserverLocator],IteratorBindingRenderer=__decorate([instructionRenderer("rk")],IteratorBindingRenderer);class KeyedBindingBehavior{bind(t,e,i,s){i.target.key=s,i.target.Li=1}ir(t,e,i){i.target.key=null,i.target.Li=0}}BindingBehaviorResource.it("keyed",KeyedBindingBehavior);const IObserverLocatorRegistration=ObserverLocator,ILifecycleRegistration=Lifecycle,IRendererRegistration=Renderer,DefaultComponents=[ObserverLocator,Lifecycle,Renderer],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,KeyedBindingBehaviorRegistration=KeyedBindingBehavior,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,KeyedBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],CallBindingRendererRegistration=CallBindingRenderer,CustomAttributeRendererRegistration=CustomAttributeRenderer,CustomElementRendererRegistration=CustomElementRenderer,InterpolationBindingRendererRegistration=InterpolationBindingRenderer,IteratorBindingRendererRegistration=IteratorBindingRenderer,LetElementRendererRegistration=LetElementRenderer,PropertyBindingRendererRegistration=PropertyBindingRenderer,RefBindingRendererRegistration=RefBindingRenderer,SetPropertyRendererRegistration=SetPropertyRenderer,TemplateControllerRendererRegistration=TemplateControllerRenderer,DefaultRenderers=[PropertyBindingRenderer,IteratorBindingRenderer,CallBindingRenderer,RefBindingRenderer,InterpolationBindingRenderer,SetPropertyRenderer,CustomElementRenderer,CustomAttributeRenderer,TemplateControllerRenderer,LetElementRenderer],RuntimeBasicConfiguration={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Tc(){return this.register(DI.Tc())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.gi,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.pi,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.yi,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}export{CallFunction,connects,observes,callsFunction,hasAncestor,isAssignable,isLeftHandSide,isPrimary,isResource,hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral,ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,Binding,Call,connectable,IExpressionParser,BindingType,MultiInterpolationBinding,InterpolationBinding,LetBinding,Ref,ArrayObserver,enableArrayObservation,disableArrayObservation,MapObserver,enableMapObservation,disableMapObservation,SetObserver,enableSetObservation,disableSetObservation,BindingContext,Scope,OverrideContext,collectionObserver,CollectionLengthObserver,computed,CustomSetterObserver,GetterObserver,IDirtyChecker,DirtyCheckProperty,DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,PrimitiveObserver,PropertyAccessor,propertyObserver,ProxyObserver,SelfObserver,SetterObserver,ISignaler,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior,BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute,CustomAttributeResource,dynamicOptions,templateController,If,Else,Repeat,Replaceable,With,containerless,customElement,CustomElementResource,IProjectorLocator,useShadowDOM,valueConverter,ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable,Aurelia,IDOMInitializer,IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration,KeyedBindingBehaviorRegistration,RefBindingRendererRegistration,CallBindingRendererRegistration,CustomAttributeRendererRegistration,CustomElementRendererRegistration,InterpolationBindingRendererRegistration,IteratorBindingRendererRegistration,LetElementRendererRegistration,PropertyBindingRendererRegistration,SetPropertyRendererRegistration,TemplateControllerRendererRegistration,DefaultResources,IObserverLocatorRegistration,ILifecycleRegistration,IRendererRegistration,RuntimeBasicConfiguration,buildTemplateDefinition,isTargetedInstruction,ITargetedInstruction,TargetedInstructionType,DOM,INode,IRenderLocation,IDOM,NodeSequence,BindingMode,BindingStrategy,ExpressionKind,Hooks,LifecycleFlags,State,CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,AggregateLifecycleTask,CompositionCoordinator,ILifecycle,IRenderable,IViewFactory,LifecycleTask,PromiseTask,CollectionKind,DelegationStrategy,MutationKind,instructionRenderer,ensureExpression,addComponent,addBinding,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,ViewCompileFlags};
