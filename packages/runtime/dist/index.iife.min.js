this.au=this.au||{},this.au.runtime=(function(t,kernel){"use strict";function s(t,s,i,n){var h,e,r=arguments.length,o=3>r?s:null===n?n=Object.getOwnPropertyDescriptor(s,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,i,n);else for(e=t.length-1;e>=0;e--)(h=t[e])&&(o=(3>r?h(o):r>3?h(s,i,o):h(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(s){return function(l){const u=l.prototype;switch(u.t=0,u.s=null,u.i=null,u.h=null,u.o=null,u.l=i,u.u=n,u.p=c,u.v=o,s){case t.MutationKind.g:u.m=h;break;case t.MutationKind.C:u.m=e;break;case t.MutationKind.O:u.m=r}}}function i(t){if(this.p(t))return 0;const s=this.t;return 1&s?2&s?4&s?8&s?(this.o.push(t),1):(this.o=[t],this.t|=8,1):(this.h=t,this.t|=4,1):(this.i=t,this.t|=2,1):(this.s=t,this.t|=1,1)}function n(t){const s=this.t;if(1&s&&this.s===t)return this.s=null,this.t&=-2,1;if(2&s&&this.i===t)return this.i=null,this.t&=-3,1;if(4&s&&this.h===t)return this.h=null,this.t&=-5,1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.t&=-9),1}return 0}function h(t,s,i){const n=this.s,h=this.i,e=this.h;let r=this.o;null!==r&&(r=r.slice()),null!==n&&n.j(t,s,i),null!==h&&h.j(t,s,i),null!==e&&e.j(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.j(t,s,i)}}function e(t,s,i){const n=this.s,h=this.i,e=this.h;let r=this.o;null!==r&&(r=r.slice()),null!==n&&n.j(t,s,i),null!==h&&h.j(t,s,i),null!==e&&e.j(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.j(t,s,i)}this.A.T(this).catch(t=>{throw t})}function r(t,s,i,n){const h=this.s,e=this.i,r=this.h;let o=this.o;null!==o&&(o=o.slice()),null!==h&&h.j(t,s,i,n),null!==e&&e.j(t,s,i,n),null!==r&&r.j(t,s,i,n);const c=o&&o.length;if(void 0!==c&&c>0)for(let h=0;c>h;++h){const e=o[h];null!==e&&e.j(t,s,i,n)}}function o(){return 0!==this.t}function c(t){const s=this.t;if(1&s&&this.s===t)return 1;if(2&s&&this.i===t)return 1;if(4&s&&this.h===t)return 1;if(8&s){const s=this.o;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.S=0,s.I=null,s.P=null,s.k=null,s.R=null,s.V=l,s.D=u,s.$=d,s.B=f,s.F=a}}function l(t){if(this.$(t))return 0;const s=this.S;return 1&s?2&s?4&s?8&s?(this.R.push(t),1):(this.R=[t],this.S|=8,1):(this.k=t,this.S|=4,1):(this.P=t,this.S|=2,1):(this.I=t,this.S|=1,1)}function u(t){const s=this.S;if(1&s&&this.I===t)return this.I=null,this.S&=-2,1;if(2&s&&this.P===t)return this.P=null,this.S&=-3,1;if(4&s&&this.k===t)return this.k=null,this.S&=-5,1;if(8&s){const s=this.R;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.S&=-9),1}return 0}function a(t,s){const i=this.I,n=this.P,h=this.k;let e=this.R;null!==e&&(e=e.slice()),null!==i&&i.M(t,s),null!==n&&n.M(t,s),null!==h&&h.M(t,s);const r=e&&e.length;if(void 0!==r&&r>0)for(let i=0;r>i;++i){const n=e[i];null!==n&&n.M(t,s)}}function f(){return 0!==this.S}function d(t){const s=this.S;if(1&s&&this.I===t)return 1;if(2&s&&this.P===t)return 1;if(4&s&&this.k===t)return 1;if(8&s){const s=this.R;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function b(s){if(0==this.L){this.L=1;const{N:s,U:i}=this;this.q=s[i],Pt.get=(()=>this.H()),Pt.set=(value=>{this.W(value,t.LifecycleFlags.K)}),It(s,i,Pt)||kernel.Reporter.write(1,i,s)}this.l(s)}function p(){delete this.N[this.U],this.N=null,this.U=null,this.q=null}function propertyObserver(){return function(s){subscriberCollection(t.MutationKind.g)(s);const i=s.prototype;i.L=0,i.N=null,i.U=null,i.q=Symbol(),i.subscribe=i.subscribe||b,i.unsubscribe=i.unsubscribe||i.u,i._=i._||p}}function v(t){const s=BindingBehaviorResource.G(this.description.name);t.register(kernel.Registration.singleton(s,this))}function w(t){const s=this.kind.G(this.description.name);t.register(kernel.Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.J)}function hasUnbind(t){return 4096==(4096&t.J)}function isLiteral(t){return 16384==(16384&t.J)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.J){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.X);case 17925:return 1}return 0}function g(t,s,i,n){const h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}function m(s,i,name){const n=null==i?null:i[name];if("function"==typeof n)return n;if(!(s&t.LifecycleFlags.Y)&&null==n)return null;throw kernel.Reporter.error(207,i,name,n)}function y(t){if(t===Nt){const s=Lt.length=xt.length=(Nt+=5)+1;for(let i=t+1;s>i;++i)Lt[i]=`_observer${i}`,xt[i]=`_observerVersion${i}`}}function C(t){const s=void 0===this.Z?0:this.Z;let i=s;for(;i--&&this[Lt[i]]!==t;);if(-1===i){for(i=0;this[Lt[i]];)i++;this[Lt[i]]=t,t.subscribe(this),i===s&&(this.Z=i+1)}void 0===this.version&&(this.version=0),this[xt[i]]=this.version,y(i)}function O(t,s,i){const n=this.st.tt(t,s,i);this.it(n)}function j(all){const t=this.Z;let s,i;if(1==all)for(let n=0;t>n;++n)null!=(i=this[s=Lt[n]])&&(this[s]=null,i.unsubscribe(this));else{const n=this.version;for(let h=0;t>h;++h)this[xt[h]]!==n&&null!=(i=this[s=Lt[h]])&&(this[s]=null,i.unsubscribe(this))}}function T(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.nt=O),s.hasOwnProperty("unobserve")||(s.unobserve=j),s.hasOwnProperty("addObserver")||(s.it=C),t}function connectable(t){return void 0===t?T:T(t)}function A(s,i){if(this.q!==(s=null==s?this.defaultValue:s)){if(this.q=s,!(i&(t.LifecycleFlags.ht|t.LifecycleFlags.et))||this.rt&&i&t.LifecycleFlags.ot)return this.ct=i,this.A.T(this);this.lt(s,i)}return Promise.resolve()}function S(s){if(this.rt&&s&t.LifecycleFlags.ot)return void this.A.T(this).catch(t=>{throw t});const i=this.q;this.oldValue!==i&&(this.lt(i,this.ct|s|t.LifecycleFlags.K),this.oldValue=this.q)}function I(){this.q=null,this.oldValue=null,this.defaultValue=null,this.N=null,this.U=""}function targetObserver(s=null){return function(i){subscriberCollection(t.MutationKind.g)(i);const n=i.prototype;n.ut=null,n.q=s,n.oldValue=s,n.defaultValue=s,n.N=null,n.U="",n.W=n.W||A,n.flush=n.flush||S,n._=n._||I}}function P(s){this.F(this.at,s|this.ft),this.dt&&this.dt.bt(t.LifecycleFlags.ht|t.LifecycleFlags.K|this.ft),this.pt()}function k(){this.C.vt=void 0,this.C=null,this.at=null}function R(){const t=this.C.length,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.wt=[]}function V(){const t=this.C.size,s=this.at=Array(t);let i=0;for(;t>i;)s[i]=i++;s.wt=[]}function D(){return void 0===this.dt?this.dt=new t.CollectionLengthObserver(this,this.gt):this.dt}function collectionObserver(s){return function(i){subscriberCollection(t.MutationKind.C)(i),batchedSubscriberCollection()(i);const n=i.prototype;n.ut=null,n.C=null,n.at=null,n.yt=0,n.gt=8&s?"length":"size",n.Ct=s,n.pt=8&s?R:V,n.flush=P,n._=k,n.Ot=D,n.subscribe=n.subscribe||n.l,n.unsubscribe=n.unsubscribe||n.u,n.jt=n.jt||n.V,n.Tt=n.Tt||n.D}}function $(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function B(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function F(t,s,from,to,i){let n,h,e,r,o,c,l;for(c=from+1;to>c;c++){for(n=t[c],h=s[c],l=c-1;l>=from&&(r=s[l],(o=i(e=t[l],n))>0);l--)t[l+1]=e,s[l+1]=r;t[l+1]=n,s[l+1]=h}}function M(t,s,from,to,i){let n,h,e,r,o,c,l,u,a,f,d,b,p,v,w,g,m,y,C,O=0,j=0;for(;;){if(10>=to-from)return void F(t,s,from,to,i);r=s[from],o=s[to-1],e=t[O=from+(to-from>>1)],c=s[O],(l=i(n=t[from],h=t[to-1]))>0&&(f=n,d=r,n=h,r=o,h=f,o=d),0>(u=i(n,e))?(a=i(h,e))>0&&(f=h,d=o,h=e,o=c,e=f,c=d):(f=n,d=r,n=e,r=c,e=h,c=o,h=f,o=d),t[from]=n,s[from]=r,t[to-1]=e,s[to-1]=c,b=h,p=o,w=to-1,t[O]=t[v=from+1],s[O]=s[v],t[v]=b,s[v]=p;t:for(j=v+1;w>j;j++)if(m=s[j],0>(y=i(g=t[j],b)))t[j]=t[v],s[j]=s[v],t[v]=g,s[v]=m,v++;else if(y>0){do{if(--w==j)break t;y=i(C=t[w],b)}while(y>0);t[j]=t[w],s[j]=s[w],t[w]=g,s[w]=m,0>y&&(g=t[j],m=s[j],t[j]=t[v],s[j]=s[v],t[v]=g,s[v]=m,v++)}v-from>to-w?(M(t,s,w,to,i),to=v):(M(t,s,from,v,i),from=w)}}function enableArrayObservation(){for(const t of ss)1!=Wt[t].L&&def(Wt,t,Object.assign({},ns,{value:is[t]}))}function L(s,i,n){return n.vt||new t.ArrayObserver(s,i,n)}function enableMapObservation(){for(const t of ls)1!=hs[t].L&&fs(hs,t,Object.assign({},as,{value:us[t]}))}function x(s,i,n){return n.vt||new t.MapObserver(s,i,n)}function enableSetObservation(){for(const t of gs)1!=ds[t].L&&Cs(ds,t,Object.assign({},ys,{value:ms[t]}))}function N(s,i,n){return n.vt||new t.SetObserver(s,i,n)}function getCollectionObserver(t,s,i){switch(Ss.call(i)){case"[object Array]":return L(t,s,i);case"[object Map]":return x(t,s,i);case"[object Set]":return N(t,s,i)}return null}function U(t,s,i){const n=this.At;kernel.PLATFORM.global.clearTimeout(n.St),n.St=kernel.PLATFORM.global.setTimeout(()=>{this.It(t,s,i)},n.Pt)}function E(t,s,i){const n=this.At;if(kernel.PLATFORM.global.clearTimeout(n.St),!(i&n.kt))return n.oldValue=$s,void this.It(t,s,i);n.oldValue===$s&&(n.oldValue=s);const h=kernel.PLATFORM.global.setTimeout(()=>{const s=n.oldValue;n.oldValue=$s,this.It(t,s,i)},n.Pt);n.St=h}function q(t){const s=this.Rt,i=+new Date-s.Vt;if(i>=s.Pt)return kernel.PLATFORM.global.clearTimeout(s.St),s.St=-1,s.Vt=+new Date,void this.Dt(t);if(s.newValue=t,-1===s.St){const t=kernel.PLATFORM.global.setTimeout(()=>{s.St=-1,s.Vt=+new Date,this.Dt(s.newValue)},s.Pt-i);s.St=t}}function z(name){return`${Fs}:${name}`}function Q(t){return void 0===t.$customElement?null:t.$customElement}function H(name){return`${Ms}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,i){const def=new Ns,n=arguments.length;switch(n){case 13:null!==i&&(def.$t=i);case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=kernel.PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=kernel.PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=kernel.PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Ls:0==build?xs:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(Us.forEach(t=>{s[t]&&(def[t]=s[t])}),Es.forEach(t=>{s[t]&&(def[t]=kernel.PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===kernel.PLATFORM.Bt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==n||null===t||"string"!=typeof s&&"build"in s||(def.build=Ls),def}function W(s){if(8&this.$state)return;const i=this.$lifecycle;i.Ft(),this.$state|=4,s|=t.LifecycleFlags.Mt;const n=this.$hooks;16&n&&this.Lt(s),this.$state|=8,this.$state&=-5,32&n&&i.xt(this),i.Nt(s)}function K(s){if(8&this.$state)return;const i=this.$lifecycle;i.Ft(),this.$state|=4,s|=t.LifecycleFlags.Mt;const n=this.$hooks;16&n&&this.Lt(s);let h=this.Ut;for(;null!==h;)h.Et(s),h=h.qt;i.zt(this),this.$state|=8,this.$state&=-5,32&n&&i.xt(this),i.Nt(s)}function _(s){if(8&this.$state)return;this.$state|=4,s|=t.LifecycleFlags.Mt;let i=this.Ut;for(;null!==i;)i.Et(s),i=i.qt;this.$lifecycle.zt(this),this.$state|=8,this.$state&=-5}function G(s){if(8&this.$state){const i=this.$lifecycle;i.Qt(),this.$state|=32,s|=t.LifecycleFlags.Ht;const n=this.$hooks;64&n&&this.Wt(s),this.$state&=-41,128&n&&i.Kt(this),i._t(s)}}function J(s){if(8&this.$state){const i=this.$lifecycle;i.Qt(),this.$state|=32,(s|=t.LifecycleFlags.Ht)&t.LifecycleFlags.Gt^t.LifecycleFlags.Gt|s&t.LifecycleFlags.Jt&&(i.Xt(this),s|=t.LifecycleFlags.Gt);const n=this.$hooks;64&n&&this.Wt(s);let h=this.Yt;for(;null!==h;)h.Zt(s),h=h.ts;this.$state&=-41,128&n&&i.Kt(this),i._t(s)}}function X(s){if(8&this.$state){this.$state|=32,(s|=t.LifecycleFlags.Ht)&t.LifecycleFlags.Gt^t.LifecycleFlags.Gt|s&t.LifecycleFlags.Jt&&(this.$lifecycle.Xt(this),s|=t.LifecycleFlags.Gt);let i=this.Yt;for(;null!==i;)i.Zt(s),i=i.ts;this.$state&=-41}}function Y(s){2048&this.$hooks&&this.ss(s|=t.LifecycleFlags.ns)}function Z(s){s|=t.LifecycleFlags.ns,2048&this.$hooks&&this.ss(s);let i=this.Yt;for(;null!==i;)i.hs(s),i=i.ts}function tt(s){s|=t.LifecycleFlags.ns;let i=this.Yt;for(;null!==i;)i.hs(s),i=i.ts}function st(){16&this.$state||(this.$state|=16,this.rs.es(this.$nodes))}function it(){16&this.$state&&(this.$state&=-17,this.rs.os(this.$nodes))}function nt(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ht(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.cs&&(this.cs=0,this.cache.ls(this))?(this.$state|=128,1):0):0}function et(s,i){if(s|=t.LifecycleFlags.et,2&this.$state){if(this.$scope===i)return;this.us(s)}const n=this.$lifecycle;n.as(),this.$state|=1;const h=this.$hooks;8&h&&n.fs(this),this.$scope=i,4&h&&this.ds(s),this.$state|=2,this.$state&=-2,n.bs(s)}function rt(s,i){if(2&this.$state)return;const n=this.$scope;n.ps=i;const h=this.$lifecycle;h.as(),this.$state|=1;const e=this.$hooks;s|=t.LifecycleFlags.et,8&e&&h.fs(this);let r=this.vs;for(;null!==r;)r.ws(s,n),r=r.gs;for(4&e&&this.ds(s),r=this.ms;null!==r;)r.ws(s,n),r=r.gs;this.$state|=2,this.$state&=-2,h.bs(s)}function ot(s,i){if(s|=t.LifecycleFlags.et,2&this.$state){if(this.$scope===i)return;this.us(s)}this.$state|=1,this.$scope=i;let n=this.vs;for(;null!==n;)n.ws(s,i),n=n.gs;for(n=this.ms;null!==n;)n.ws(s,i),n=n.gs;this.$state|=2,this.$state&=-2}function ct(s){if(2&this.$state){const i=this.$lifecycle;i.ys(),this.$state|=64;const n=this.$hooks;s|=t.LifecycleFlags.Cs,512&n&&i.Os(this),256&n&&this.js(s),this.$state&=-67,i.Ts(s)}}function lt(s){if(2&this.$state){const i=this.$lifecycle;i.ys(),this.$state|=64;const n=this.$hooks;s|=t.LifecycleFlags.Cs,512&n&&i.Os(this);let h=this.As;for(;null!==h;)h.us(s),h=h.Ss;for(256&n&&this.js(s),h=this.Is;null!==h;)h.us(s),h=h.Ss;this.$scope.ps=null,this.$state&=-67,i.Ts(s)}}function ut(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.Cs;let i=this.As;for(;null!==i;)i.us(s),i=i.Ss;for(i=this.Is;null!==i;)i.us(s),i=i.Ss;this.$state&=-67,this.$scope=null}}function at(t,s){s.Ps(t,this.constructor,this),2&this.$hooks&&this.ks(t)}function ft(s,dom,i,n,host,h,e=kernel.PLATFORM.Bt){const r=this.constructor,o=r.description;let c;if(c=s&t.LifecycleFlags.$t?t.ProxyObserver.Rs(this).O:this,this.$scope=Scope.create(s,c,null),this.Vs=host,this.rs=i.Ds(dom,this,host,o),n.Ps(s,r,this),1024&this.$hooks){const t=this.$s(s,host,e.parts,h);t&&"getElementTemplate"in t&&t.Bs(n,r,h).$s(this,host,e.parts)}else n.Bs(dom,o,h,r).$s(this,host,e.parts);2&this.$hooks&&this.ks(s)}function dt(t){const s=this.description,i=this.kind.G(s.name),aliases=s.aliases;t.register(kernel.Registration.transient(i,this));for(let s=0,n=aliases.length;n>s;++s){const n=this.kind.G(aliases[s]);t.register(kernel.Registration.Fs(i,n))}}function bt(t){return t.Ms=1,t}function bindable(s,i){let n;const h=function(s,i){const h=s.constructor;let bindables=h.bindables;void 0===bindables&&(bindables=h.bindables={}),n.Ls||(n.Ls=kernel.PLATFORM.xs(i)),n.Ns||(n.Ns=`${i}Changed`),void 0===n.mode&&(n.mode=t.BindingMode.Us),void 0===n.$t&&(n.$t=0),arguments.length>1&&(n.Es=i),bindables[n.Es]=n};return arguments.length>1?(n={},void h(s,i)):"string"==typeof s?(n={},h):(n=s||{},h)}function pt(t){const s=this.kind.G(this.description.name);t.register(kernel.Registration.transient(s,this))}function vt(t){return t.containerless=1,t}function wt(s){if(2&this.$state)return;s|=t.LifecycleFlags.et;const i=this.$scope;let n=this.ms;for(;null!==n;)n.ws(s,i),n=n.gs;this.$state|=2}function gt(s){if(2&this.$state){this.$state|=64,s|=t.LifecycleFlags.Cs;let i=this.Is;for(;null!==i;)i.us(s),i=i.Ss;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.qs(),n=new _s,h=new _s,e=new _s,r=new Gs,o=new _s,c=i.get(IRenderer);return dom.zs(i,h),i.Qs(IViewFactory,r),i.Qs(IRenderable,n),i.Qs(ITargetedInstruction,e),i.Qs(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.$s=function(t,s,targets,i,host,parts){c.$s(t,dom,this,s,targets,i,host,parts)},i.Hs=function(t,s,c,l,parts,u){return n.Ws(t),h.Ws(s),e.Ws(c),l&&r.Ws(l,parts),u&&o.Ws(u),i},i._=function(){r._(),n._(),e._(),h._(),o._()},i}function mt(t){const s=[];for(let i=0,n=t.length;n>i;++i){const component=Q(t[i]);null!==component&&s.push(component)}return s}function yt(s,i,name){Reflect.defineProperty(i,name,{Ks:1,get(){return this._s[name].H()},set(value){this._s[name].W(value,s&t.LifecycleFlags.Gs|t.LifecycleFlags.K)}})}function instructionRenderer(t){return function(s){const i=function(...i){const n=new s(...i);return n.Js=t,n};i.register=function(t){return kernel.Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const n=Object.getOwnPropertyDescriptors(s);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,n[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addEarlyBindable(t,bindable){bindable.Ss=t.As,bindable.gs=null,null===t.As?t.vs=bindable:t.As.gs=bindable,t.As=bindable}function addBindable(t,bindable){bindable.Ss=t.Is,bindable.gs=null,null===t.Is?t.ms=bindable:t.Is.gs=bindable,t.Is=bindable}function addAttachable(t,s){s.ts=t.Yt,s.qt=null,null===t.Yt?t.Ut=s:t.Yt.qt=s,t.Yt=s}var Ct,Ot,jt,Tt,BindingMode,State,Hooks,LifecycleFlags,ExpressionKind,DelegationStrategy,MutationKind,CollectionKind,BindingType,TargetedInstructionType,ViewCompileFlags;(BindingMode=t.BindingMode||(t.BindingMode={}))[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Us=2]="toView",BindingMode[BindingMode.Xs=4]="fromView",BindingMode[BindingMode.Ys=6]="twoWay",BindingMode[BindingMode.default=8]="default",(State=t.State||(t.State={}))[State.Zs=0]="none",State[State.ti=1]="isBinding",State[State.si=2]="isBound",State[State.ii=4]="isAttaching",State[State.ni=8]="isAttached",State[State.hi=16]="isMounted",State[State.ei=32]="isDetaching",State[State.ri=64]="isUnbinding",State[State.oi=128]="isCached",State[State.ci=256]="isContainerless",(Hooks=t.Hooks||(t.Hooks={}))[Hooks.Zs=1]="none",Hooks[Hooks.li=2]="hasCreated",Hooks[Hooks.ui=4]="hasBinding",Hooks[Hooks.ai=8]="hasBound",Hooks[Hooks.fi=16]="hasAttaching",Hooks[Hooks.di=32]="hasAttached",Hooks[Hooks.bi=64]="hasDetaching",Hooks[Hooks.pi=128]="hasDetached",Hooks[Hooks.vi=256]="hasUnbinding",Hooks[Hooks.wi=512]="hasUnbound",Hooks[Hooks.gi=1024]="hasRender",Hooks[Hooks.mi=2048]="hasCaching",(LifecycleFlags=t.LifecycleFlags||(t.LifecycleFlags={}))[LifecycleFlags.Zs=0]="none",LifecycleFlags[LifecycleFlags.Y=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.yi=3]="mutation",LifecycleFlags[LifecycleFlags.Ci=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Oi=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.ji=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.K=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Ti=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.ht=224]="fromFlush",LifecycleFlags[LifecycleFlags.Ai=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Si=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Ii=128]="fromTick",LifecycleFlags[LifecycleFlags.Pi=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Jt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.et=1024]="fromBind",LifecycleFlags[LifecycleFlags.Cs=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.Mt=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Ht=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ns=16384]="fromCache",LifecycleFlags[LifecycleFlags.ki=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Ri=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Vi=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Di=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Gt=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ot=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.$i=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Gs=25165824]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Bi=8388608]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.$t=16777216]="useProxies",(ExpressionKind=t.ExpressionKind||(t.ExpressionKind={}))[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Fi=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Mi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation",(function(t){t[t.Li=0]="None",t[t.xi=1]="Subscriber0",t[t.Ni=2]="Subscriber1",t[t.Ui=4]="Subscriber2",t[t.Ei=8]="SubscribersRest",t[t.qi=15]="Any"})(Ct||(Ct={})),(DelegationStrategy=t.DelegationStrategy||(t.DelegationStrategy={}))[DelegationStrategy.Zs=0]="none",DelegationStrategy[DelegationStrategy.zi=1]="capturing",DelegationStrategy[DelegationStrategy.Qi=2]="bubbling",(MutationKind=t.MutationKind||(t.MutationKind={}))[MutationKind.g=1]="instance",MutationKind[MutationKind.C=2]="collection",MutationKind[MutationKind.O=4]="proxy",(CollectionKind=t.CollectionKind||(t.CollectionKind={}))[CollectionKind.Hi=8]="indexed",CollectionKind[CollectionKind.Wi=4]="keyed",CollectionKind[CollectionKind.Ki=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set";const At=new WeakMap;let St=class{constructor(t,s,i){this.raw=s,this.key=i,this.O=t,this.subscribe=this.l,this.unsubscribe=this.u}W(value,s){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.m(value,i,s|t.LifecycleFlags.$t|t.LifecycleFlags.K))}H(){return this.raw[this.key]}};St=s([subscriberCollection(t.MutationKind.g)],St),t.ProxyObserver=Ot=class{constructor(t){this.raw=t,this.O=new Proxy(t,this),At.set(t,this.O),this._i={}}static Gi(t){if(void 0===t.Ji){const s=At.get(t);return void 0===s?t:s}return t}static Xi(t){const s=t.Ji;return void 0===s?t:s}static Rs(t,s){let i;if(void 0===t.Ji){const s=At.get(t);i=void 0===s?new Ot(t):s.vt}else i=t.vt;if(1===arguments.length)return i;let n=i._i[s];if(void 0===n){const h=this.Xi(t);n=i._i[s]=new St(i.O,h,s)}return n}static Yi(t){return void 0!==t.Ji}get(t,s,i){return"$observer"===s?this:"$raw"===s?t:t[s]}set(s,i,value,n){const h=s[i];return h!==value&&(Reflect.set(s,i,value,s),this.Zi(value,h,i),this.m(i,value,h,t.LifecycleFlags.$t|t.LifecycleFlags.K)),1}deleteProperty(s,i){const n=s[i];return Reflect.deleteProperty(s,i)?(void 0!==n&&(this.Zi(void 0,n,i),this.m(i,void 0,n,t.LifecycleFlags.$t|t.LifecycleFlags.K)),1):0}defineProperty(s,i,n){const h=s[i];return Reflect.defineProperty(s,i,n)?(n.value!==h&&(this.Zi(n.value,h,i),this.m(i,n.value,h,t.LifecycleFlags.$t|t.LifecycleFlags.K)),1):0}apply(t,s,i){return Reflect.apply(t,t,i)}subscribe(t,s){if(1===arguments.length)this.l(t);else{let i=this._i[s];void 0===i&&(i=this._i[s]=new St(this.O,this.raw,s)),i.l(t)}}unsubscribe(t,s){if(1===arguments.length)this.u(t);else{const i=this._i[s];void 0!==i&&i.u(t)}}Zi(s,i,n){const h=this._i[n];void 0!==h&&h.m(s,i,t.LifecycleFlags.$t|t.LifecycleFlags.K)}},t.ProxyObserver=Ot=s([subscriberCollection(t.MutationKind.O)],t.ProxyObserver);const It=Reflect.defineProperty,Pt={get:void 0,set:void 0,Ks:1,tn:1};t.SetterObserver=class{constructor(s,i,n){this.ft=s&t.LifecycleFlags.Gs,this.N=i,this.U=n}H(){return this.q}W(s,i){const n=this.q;n!==s&&(this.q=s,i&t.LifecycleFlags.et||this.m(s,n,this.ft|i),this.L||(this.N[this.U]=s))}},t.SetterObserver=s([propertyObserver()],t.SetterObserver),(function(t){t[t.sn=250]="UndefinedScope",t[t.in=251]="NullScope",t[t.nn=252]="NilOverrideContext",t[t.hn=253]="NilParentScope"})(jt||(jt={}));class kt{Rs(s,i,n){let h=this[n];return void 0===h&&(h=this[n]=new t.SetterObserver(s,i,n)),h}}class BindingContext{constructor(t,value){if(this.en=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(s,i,value){const n=new BindingContext(i,value);return s&t.LifecycleFlags.$t?t.ProxyObserver.Rs(n).O:n}static get(s,name,i,n){if(void 0===s)throw kernel.Reporter.error(250);if(null===s)throw kernel.Reporter.error(251);let h=s.rn;if(i>0){for(;i>0;){if(null===h.on)return;i--,h=h.on}return name in h?h:h.cn}for(;h&&!(name in h)&&!(h.cn&&name in h.cn);)h=h.on;if(h)return name in h?h:h.cn;if(n&t.LifecycleFlags.Bi&&null!==s.ps){const h=this.get(s.ps,name,i,n&~t.LifecycleFlags.Bi|t.LifecycleFlags.$i);if(null!==h)return h}return n&t.LifecycleFlags.$i?null:s.cn||s.rn}ln(t){let s=this._s;return void 0===s&&(this._s=s=new kt),s}}class Scope{constructor(t,s){this.cn=t,this.rn=s,this.ps=null}static create(t,s,i){return new Scope(s,null==i?OverrideContext.create(t,s,i):i)}static un(t,s){if(null==s)throw kernel.Reporter.error(252);return new Scope(s.cn,s)}static an(t,s,i){if(null==s)throw kernel.Reporter.error(253);return new Scope(i,OverrideContext.create(t,i,s.rn))}}class OverrideContext{constructor(t,s){this.en=1,this.cn=t,this.on=s}static create(t,s,i){return new OverrideContext(s,void 0===i?null:i)}ln(){let t=this._s;return void 0===t&&(this._s=t=new kt),t}}const ISignaler=kernel.DI.dn("ISignaler").fn(t=>t.singleton(Rt));class Rt{constructor(){this.bn=Object.create(null)}pn(name,s){const i=this.bn[name];if(void 0!==i)for(const n of i.keys())n.j(void 0,void 0,s|t.LifecycleFlags.K)}vn(name,t){const s=this.bn,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}wn(name,t){const s=this.bn[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",G(name){return`${this.name}:${name}`},gn(t){return t.kind===this},mn(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=n,i.register=v,i}},ValueConverterResource={name:"value-converter",G(name){return`${this.name}:${name}`},gn(t){return t.kind===this},mn(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=n,i.register=w,i}};(function(t){t[t.yn=202]="NoLocator",t[t.Cn=203]="NoBehaviorFound",t[t.On=204]="BehaviorAlreadyApplied",t[t.jn=205]="NoConverterFound",t[t.Tn=206]="NoBinding",t[t.An=207]="NotAFunction",t[t.Sn=208]="UnknownOperator",t[t.sn=250]="UndefinedScope",t[t.in=251]="NullScope"})(Tt||(Tt={}));class AccessThis{constructor(t=0){this.J=1793,this.assign=kernel.PLATFORM.In,this.connect=kernel.PLATFORM.In,this.Pn=t}evaluate(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);let n=s.rn,h=this.Pn;for(;h--&&n;)n=n.on;return 1>h&&n?n.cn:void 0}accept(t){return t.kn(this)}}AccessThis.Rn=new AccessThis(0),AccessThis.Vn=new AccessThis(1);class AccessScope{constructor(name,t=0){this.J=10082,this.name=name,this.Pn=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.Pn,t)[name]}assign(t,s,i,value){const name=this.name,n=BindingContext.get(s,name,this.Pn,t);return n?n[name]=value:void 0}connect(t,s,i){const name=this.name,n=BindingContext.get(s,name,this.Pn,t);i.nt(t,n,name)}accept(t){return t.Dn(this)}}class AccessMember{constructor(t,name){this.J=9323,this.object=t,this.name=name}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);return null==n?n:n[this.name]}assign(t,s,i,value){let n=this.object.evaluate(t,s,i);return null!==n&&"object"==typeof n||this.object.assign(t,s,i,n={}),n[this.name]=value,value}connect(t,s,i){const n=this.object.evaluate(t,s,null);this.object.connect(t,s,i),n&&i.nt(t,n,this.name)}accept(t){return t.$n(this)}}class CallScope{constructor(name,t,s=0){this.J=1448,this.assign=kernel.PLATFORM.In,this.name=name,this.Bn=t,this.Pn=s}evaluate(t,s,i){const n=g(t,s,i,this.Bn),h=BindingContext.get(s,this.name,this.Pn,t),e=m(t,h,this.name);if(e)return e.apply(h,n)}connect(t,s,i){const n=this.Bn;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.Fn(this)}}class CallMember{constructor(t,name,s){this.J=1161,this.assign=kernel.PLATFORM.In,this.object=t,this.name=name,this.Bn=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i),h=g(t,s,i,this.Bn),e=m(t,n,this.name);if(e)return e.apply(n,h)}connect(s,i,n){const h=this.object.evaluate(s,i,null);if(this.object.connect(s,i,n),m(s&~t.LifecycleFlags.Y,h,this.name)){const t=this.Bn;for(let h=0,e=t.length;e>h;++h)t[h].connect(s,i,n)}}accept(t){return t.Mn(this)}}class PrimitiveLiteral{constructor(value){this.J=17925,this.assign=kernel.PLATFORM.In,this.connect=kernel.PLATFORM.In,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.Ln(this)}}PrimitiveLiteral.xn=new PrimitiveLiteral(void 0),PrimitiveLiteral.Nn=new PrimitiveLiteral(null),PrimitiveLiteral.Un=new PrimitiveLiteral(1),PrimitiveLiteral.En=new PrimitiveLiteral(0),PrimitiveLiteral.qn=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.J=17955,this.assign=kernel.PLATFORM.In,this.elements=t}evaluate(t,s,i){const n=this.elements,h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}connect(t,s,i){const n=this.elements;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.zn(this)}}ArrayLiteral.qn=new ArrayLiteral(kernel.PLATFORM.Qn);class ObjectLiteral{constructor(t,s){this.J=17956,this.assign=kernel.PLATFORM.In,this.keys=t,this.values=s}evaluate(t,s,i){const n={},h=this.keys,e=this.values;for(let r=0,o=h.length;o>r;++r)n[h[r]]=e[r].evaluate(t,s,i);return n}connect(t,s,i){const n=this.values;for(let h=0,e=this.keys.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.Hn(this)}}ObjectLiteral.qn=new ObjectLiteral(kernel.PLATFORM.Qn,kernel.PLATFORM.Qn);class Template{constructor(t,s){this.J=17958,this.assign=kernel.PLATFORM.In,this.Wn=t,this.X=void 0===s?kernel.PLATFORM.Qn:s}evaluate(t,s,i){const n=this.X,h=this.Wn;let e=h[0];for(let r=0,o=n.length;o>r;++r)e+=n[r].evaluate(t,s,i),e+=h[r+1];return e}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i),h++}accept(t){return t.Kn(this)}}Template.qn=new Template([""]);const Vt={}.toString,Dt={_n(t,s){for(let i=0,n=t.length;n>i;++i)s(t,i,t[i])},Gn(t,s){const i=Array(t.size);let n=-1;for(const s of t.entries())i[++n]=s;Dt["_n"](i,s)},Jn(t,s){const i=Array(t.size);let n=-1;for(const s of t.keys())i[++n]=s;Dt["_n"](i,s)},Xn(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Dt["_n"](i,s)},Yn(t,s){},Zn(t,s){}},$t={_n:t=>t.length,Gn:t=>t.size,Jn:t=>t.size,Xn:t=>t,Yn:()=>0,Zn:()=>0},IRenderable=kernel.DI.dn("IRenderable").th(),IViewFactory=kernel.DI.dn("IViewFactory").th(),Bt=Object.freeze(Object.create(null)),ILifecycle=kernel.DI.dn("ILifecycle").fn(t=>t.singleton(Ft));class Ft{constructor(){this.sh=0,this.ih=0,this.nh=0,this.hh=0,this.eh=this,this.rh=this,this.oh=this,this.lh=this,this.uh=this,this.ah=this,this.fh=this,this.dh=this,this.bh=this,this.ph=this,this.vh=this,this.wh=this,this.gh=this,this.mh=this,this.yh=this,this.Ch=this,this.Oh=this,this.jh=this,this.Th=this,this.Ah=this,this.Sh=null,this.Ih=Promise.resolve(),this.Ph=0,this.kh=0,this.Rh=0,this.Vh=0,this.Dh=0,this.$h=0,this.Bh=0,this.Fh=0,this.Mh=0,this.Lh=0,this.ut=Bt,this.flush=kernel.PLATFORM.In,this.xh=Bt,this.connect=kernel.PLATFORM.In,this.Nh=Bt,this.bt=kernel.PLATFORM.In,this.Uh=Bt,this.bound=kernel.PLATFORM.In,this.Eh=Bt,this.qh=kernel.PLATFORM.In,this.zh=Bt,this.Qh=kernel.PLATFORM.In,this.Hh=Bt,this.Wh=kernel.PLATFORM.In,this.Kh=Bt,this._h=kernel.PLATFORM.In,this.Gh=Bt,this.us=kernel.PLATFORM.In,this.Jh=Bt,this.Xh=kernel.PLATFORM.In,this.Yh=null}static register(t){return kernel.Registration.singleton(ILifecycle,this).register(t)}Zh(t){null===this.Yh&&(this.Yh=new AggregateLifecycleTask),this.Yh.te(t)}se(t){null!==this.Yh&&(this.Yh===t?this.Yh=null:this.Yh.ie(t))}T(s){return this.eh===this&&(this.Sh=this.Ih.then(()=>{this.ne(t.LifecycleFlags.Ai)})),null===s.ut&&(s.ut=Bt,this.rh.ut=s,this.rh=s,++this.Ph),this.Sh}ne(s){for(s|=t.LifecycleFlags.Si;this.Ph>0;){let i,n=this.eh.ut;this.eh=this.rh=this,this.Ph=0;do{i=n.ut,n.ut=null,n.flush(s),n=i}while(n!==Bt);if(s&t.LifecycleFlags.ot)break}}as(){++this.sh}fs(t){null===t.Uh&&(t.Uh=Bt,this.dh.Uh=t,this.dh=t,++this.Vh)}he(t){null===t.xh&&(t.xh=Bt,this.lh.xh=t,this.lh=t,++this.kh),null===t.Nh&&(t.Nh=Bt,this.ah.Nh=t,this.ah=t,++this.Rh)}ee(t){if(this.kh>0){this.kh=0;let s,i=this.oh.xh;this.oh=this.lh=this;do{i.connect(t),s=i.xh,i.xh=null,i=s}while(i!==Bt)}}re(s){for(s&t.LifecycleFlags.Pi&&this.ne(s|t.LifecycleFlags.Si);this.Rh>0;){this.Rh=0;let t,i=this.uh.Nh;this.uh=this.ah=this;do{i.bt(s),t=i.Nh,i.Nh=null,i=t}while(i!==Bt)}}bs(t){if(0==--this.sh)return null===this.Yh||this.Yh.done?(this.oe(t),LifecycleTask.done):(this.Yh.ce=this,this.Yh)}oe(s){for(s&t.LifecycleFlags.Pi&&this.ne(s|t.LifecycleFlags.Si);this.Vh>0;){this.Vh=0;let t,i=this.fh.Uh;this.fh=this.dh=this;do{i.bound(s),t=i.Uh,i.Uh=null,i=t}while(i!==Bt)}}ys(){++this.hh}Os(t){null===t.Jh&&(t.Jh=Bt,this.Ah.Jh=t,this.Ah=t,++this.Lh)}Ts(t){if(0==--this.hh)return null===this.Yh||this.Yh.done?(this.le(t),LifecycleTask.done):(this.Yh.ce=this,this.Yh)}le(t){for(;this.Lh>0;){this.Lh=0;let s,i=this.Th.Jh;this.Th=this.Ah=this;do{i.Xh(t),s=i.Jh,i.Jh=null,i=s}while(i!==Bt)}}Ft(){++this.ih}zt(t){null===t.Eh&&(t.Eh=Bt,this.ph.Eh=t,this.ph=t,++this.Dh)}xt(t){null===t.zh&&(t.zh=Bt,this.wh.zh=t,this.wh=t,++this.$h)}Nt(t){if(0==--this.ih)return null===this.Yh||this.Yh.done?(this.ue(t),LifecycleTask.done):(this.Yh.ce=this,this.Yh)}ue(s){if(this.ne(s|t.LifecycleFlags.Si),this.Dh>0){this.Dh=0;let t,i=this.bh.Eh;this.bh=this.ph=this;do{i.qh(s),t=i.Eh,i.Eh=null,i=t}while(i!==Bt)}if(this.ee(t.LifecycleFlags.Y),this.$h>0){this.$h=0;let t,i=this.vh.zh;this.vh=this.wh=this;do{i.Qh(s),t=i.zh,i.zh=null,i=t}while(i!==Bt)}}Qt(){++this.nh}Xt(t){if(null===t.Hh&&(t.Hh=Bt,this.mh.Hh=t,this.mh=t,++this.Bh),null!==t.Eh){let s=this.bh,i=s.Eh;for(;i!==t;)i=(s=i).Eh;s.Eh=i.Eh,i.Eh=null,this.ph===i&&(this.ph=this),--this.Dh}}Kt(t){null===t.Kh&&(t.Kh=Bt,this.Ch.Kh=t,this.Ch=t,++this.Fh)}ae(t){null===t.Gh&&(t.Gh=Bt,this.jh.Gh=t,this.jh=t,++this.Mh)}_t(t){if(0==--this.nh)return null===this.Yh||this.Yh.done?(this.fe(t),LifecycleTask.done):(this.Yh.ce=this,this.Yh)}fe(s){if(this.ne(s|t.LifecycleFlags.ht|t.LifecycleFlags.ot),this.Bh>0){this.Bh=0;let t,i=this.gh.Hh;this.gh=this.mh=this;do{i.Wh(s),t=i.Hh,i.Hh=null,i=t}while(i!==Bt)}if(this.Fh>0){this.Fh=0;let t,i=this.yh.Kh;this.yh=this.Ch=this;do{i._h(s),t=i.Kh,i.Kh=null,i=t}while(i!==Bt)}if(this.Mh>0){this.ys(),this.Mh=0;let t,i=this.Oh.Gh;this.Oh=this.jh=this;do{i.us(s),t=i.Gh,i.Gh=null,i=t}while(i!==Bt);this.Ts(s)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.de=kernel.PLATFORM.In,this.currentView=null,this.ni=0,this.si=0,this.be=null,this.pe=LifecycleTask.done}static register(t){return kernel.Registration.transient(this,this).register(t,this)}ve(value,t){this.pe.done?value instanceof Promise?(this.we(new Mt(this,value)),this.ge()):this.me(value,t):(value instanceof Promise?this.we(new Mt(this,value)):this.we(value),this.pe.ye()&&this.pe.cancel())}ds(t,s){this.scope=s,this.si=1,null!==this.currentView&&this.currentView.ws(t,s)}Lt(t){this.ni=1,null!==this.currentView&&this.currentView.Et(t)}Wt(t){this.ni=0,null!==this.currentView&&this.currentView.Zt(t)}js(t){this.si=0,null!==this.currentView&&this.currentView.us(t)}ss(t){this.currentView=null}we(t){null===this.be&&(this.be=[]),this.be.push(t)}me(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let n,h=this.currentView;null===h?n=LifecycleTask.done:($lifecycle.ae(h),$lifecycle.Qt(),h.Zt(s),n=$lifecycle._t(s)),i.te(n),null===(h=this.currentView=t)?n=LifecycleTask.done:(this.si&&($lifecycle.as(),h.ws(s,this.scope),$lifecycle.bs(s)),this.ni?($lifecycle.Ft(),h.Et(s),n=$lifecycle.Nt(s)):n=LifecycleTask.done),i.te(n),i.done?(this.pe=LifecycleTask.done,this.de()):(this.pe=i,this.pe.Ce().then(()=>{this.de(),this.ge()}).catch(t=>{throw t}))}ge(){if(null!==this.be&&this.be.length>0){const s=this.be.pop();this.be.length=0,Mt.is(s)?this.pe=s.start():this.me(s,t.LifecycleFlags.Di)}else this.pe=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,ye:()=>0,cancel(){},Ce:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.ce=null,this.resolve=null,this.Oe=[],this.je=null}te(t){t.done||(this.done=0,this.Oe.push(t),t.Ce().then(()=>{this.Te()}).catch(t=>{throw t}))}ie(t){if(t.done){const s=this.Oe.indexOf(t);-1!==s&&this.Oe.splice(s,1)}0===this.Oe.length&&null!==this.ce&&(this.ce.se(this),this.ce=null)}ye(){return this.done?0:this.Oe.every(t=>t.ye())}cancel(){this.ye()&&(this.Oe.forEach(t=>{t.cancel()}),this.done=0)}Ce(){return null===this.je&&(this.je=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.je}Te(){this.done||this.Oe.every(t=>t.done)&&this.complete(1)}complete(s){this.done=1,s&&null!==this.ce&&(this.ce.fe(t.LifecycleFlags.Di),this.ce.le(t.LifecycleFlags.Di),this.ce.oe(t.LifecycleFlags.Di),this.ce.ue(t.LifecycleFlags.Di)),this.ce.se(this),null!==this.resolve&&this.resolve()}}class Mt{constructor(t,s){this.Ae=t,this.done=0,this.Se=0,this.Ih=s}static is(t){return"start"in t}start(){return this.Se?LifecycleTask.done:(this.Ih=this.Ih.then(t=>(this.Ie(t),t)),this)}ye(){return!this.done}cancel(){this.ye()&&(this.Se=1)}Ce(){return this.Ih}Ie(value){this.Se||(this.done=1,this.Ae.ve(value,t.LifecycleFlags.Di))}}const Lt=[],xt=[];let Nt=-1;y(-1);const{oneTime,Us:Ut,Xs:Et}=t.BindingMode,qt=Ut|oneTime;t.Binding=class{constructor(s,i,n,mode,h,e){this.gs=null,this.Ss=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.xh=null,this.Nh=null,this.$scope=null,this.Pe=e,this.mode=mode,this.st=h,this.ke=s,this.target=i,this.Re=n,this.ft=t.LifecycleFlags.Zs}Ve(value,s){this.targetObserver.W(value,(s|=this.ft)|t.LifecycleFlags.K)}De(value,s){this.ke.assign((s|=this.ft)|t.LifecycleFlags.Ti,this.$scope,this.Pe,value)}j(s,i,n){if(!(2&this.$state))return;const h=this.ke,$scope=this.$scope,e=this.Pe;if(n|=this.ft,this.mode===t.BindingMode.Xs&&(n&=~t.LifecycleFlags.K,n|=t.LifecycleFlags.Ti),n&t.LifecycleFlags.K){const mode=this.mode,t=this.targetObserver.H();return(10082!==h.J||this.Z>1)&&(s=h.evaluate(n,$scope,e)),s!==t&&this.Ve(s,n),void(0==(mode&oneTime)&&(this.version++,h.connect(n,$scope,this),this.unobserve(0)))}if(!(n&t.LifecycleFlags.Ti))throw kernel.Reporter.error(15,t.LifecycleFlags[n]);s!==h.evaluate(n,$scope,e)&&this.De(s,n)}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.ft=s&t.LifecycleFlags.Gs,this.$scope=i;let n=this.ke;hasBind(n)&&n.bind(s,i,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&Et?this.st.tt(s,this.target,this.Re):this.st.$e(s,this.target,this.Re)),targetObserver.bind&&targetObserver.bind(s),n=this.ke,mode&qt&&this.Ve(n.evaluate(s,i,this.Pe),s),mode&Ut&&n.connect(s,i,this),mode&Et&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}us(s){if(!(2&this.$state))return;this.$state|=64,this.ft=t.LifecycleFlags.Zs;const i=this.ke;hasUnbind(i)&&i.Be(s,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.Be&&targetObserver.Be(s),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(s){2&this.$state&&this.ke.connect((s|=this.ft)|t.LifecycleFlags.Y,this.$scope,this)}bt(s){2&this.$state&&this.Ve(this.ke.evaluate((s|=this.ft)|t.LifecycleFlags.Y,this.$scope,this.Pe),s)}},t.Binding=s([connectable()],t.Binding);class Call{constructor(s,i,n,h,e){this.gs=null,this.Ss=null,this.$state=0,this.Pe=e,this.ke=s,this.targetObserver=h.tt(t.LifecycleFlags.Zs,i,n)}Fe(s){const i=this.$scope.rn;Object.assign(i,s);const n=this.ke.evaluate(t.LifecycleFlags.Y,this.$scope,this.Pe);for(const t in s)delete i[t];return n}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i;const n=this.ke;hasBind(n)&&n.bind(s,i,this),this.targetObserver.W(t=>this.Fe(t),s),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64;const s=this.ke;hasUnbind(s)&&s.Be(t,this.$scope,this),this.$scope=null,this.targetObserver.W(null,t),this.$state&=-67}nt(t,s,i){}j(t,s,i){}}const IExpressionParser=kernel.DI.dn("IExpressionParser").fn(t=>t.singleton(zt));class zt{constructor(){this.Me=Object.create(null),this.Le=Object.create(null),this.xe=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.xe[t];return void 0===i&&(i=this.xe[t]=this.Ne(t,s)),i}case 539:{let i=this.Le[t];return void 0===i&&(i=this.Le[t]=this.Ne(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.qn;let i=this.Me[t];return void 0===i&&(i=this.Me[t]=this.Ne(t,s)),i}}}cache(t){const{Le:s,Me:i,xe:n}=this;for(const h in t){const e=t[h];switch(e.J){case 24:n[h]=e;break;case 55:s[h]=e;break;default:i[h]=e}}}Ne(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),kernel.PLATFORM.Qn):new AccessScope(parts[0]);let n=1;for(;parts.length>n;){const t=parts[n];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),kernel.PLATFORM.Qn):new AccessMember(i,parts[n]),n++}return i}catch(t){throw kernel.Reporter.error(3,t)}}}(BindingType=t.BindingType||(t.BindingType={}))[BindingType.Li=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Ue=1280]="IsRef",BindingType[BindingType.Ee=512]="IsIterator",BindingType[BindingType.qe=256]="IsCustom",BindingType[BindingType.ze=128]="IsFunction",BindingType[BindingType.Qe=64]="IsEvent",BindingType[BindingType.He=32]="IsProperty",BindingType[BindingType.We=16]="IsCommand",BindingType[BindingType.Ke=48]="IsPropertyCommand",BindingType[BindingType._e=80]="IsEventCommand",BindingType[BindingType.Ge=6]="DelegationStrategyDelta",BindingType[BindingType.Je=15]="Command",BindingType[BindingType.Xe=49]="OneTimeCommand",BindingType[BindingType.Ye=50]="ToViewCommand",BindingType[BindingType.Ze=51]="FromViewCommand",BindingType[BindingType.tr=52]="TwoWayCommand",BindingType[BindingType.sr=53]="BindCommand",BindingType[BindingType.ir=86]="TriggerCommand",BindingType[BindingType.nr=87]="CaptureCommand",BindingType[BindingType.hr=88]="DelegateCommand",BindingType[BindingType.er=153]="CallCommand",BindingType[BindingType.rr=26]="OptionsCommand",BindingType[BindingType.or=539]="ForCommand",BindingType[BindingType.cr=284]="CustomCommand";const{Us:Qt,oneTime:Ht}=t.BindingMode;class MultiInterpolationBinding{constructor(s,i,n,h,mode,e){this.gs=null,this.Ss=null,this.$state=0,this.$scope=null,this.lr=i,this.Pe=e,this.mode=mode,this.st=s,this.target=n,this.Re=h;const r=i.X,parts=this.parts=Array(r.length);for(let o=0,c=r.length;c>o;++o)parts[o]=new t.InterpolationBinding(r[o],i,n,h,mode,s,e,0===o)}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.us(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,n=parts.length;n>i;++i)parts[i].ws(t,s)}us(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].us(t)}}t.InterpolationBinding=class{constructor(s,i,n,h,mode,e,r,o){this.$state=0,this.lr=i,this.ur=o,this.mode=mode,this.Pe=r,this.st=e,this.ke=s,this.target=n,this.Re=h,this.targetObserver=e.$e(t.LifecycleFlags.Zs,n,h)}Ve(value,s){this.targetObserver.W(value,s|t.LifecycleFlags.K)}j(t,s,i){if(!(2&this.$state))return;const n=this.targetObserver.H(),h=this.lr.evaluate(i,this.$scope,this.Pe);h!==n&&this.Ve(h,i),0==(this.mode&Ht)&&(this.version++,this.ke.connect(i,this.$scope,this),this.unobserve(0))}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.us(t)}this.$state|=2,this.$scope=s;const i=this.ke;i.bind&&i.bind(t,s,this),this.ur&&this.Ve(this.lr.evaluate(t,s,this.Pe),t),this.mode&Qt&&i.connect(t,s,this)}us(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.ke;s.Be&&s.Be(t,this.$scope,this),this.$scope=null,this.unobserve(1)}},t.InterpolationBinding=s([connectable()],t.InterpolationBinding),t.LetBinding=class{constructor(t,s,i,n,toViewModel=0){this.gs=null,this.Ss=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=null,this.Pe=n,this.st=i,this.ke=t,this.target=null,this.Re=s,this.toViewModel=toViewModel}j(s,i,n){if(2&this.$state){if(!(n&t.LifecycleFlags.K))throw kernel.Reporter.error(15,n);{const{target:t,Re:s}=this,i=t[s],h=this.ke.evaluate(n,this.$scope,this.Pe);h!==i&&(t[s]=h)}}}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.cn:i.rn;const n=this.ke;n.bind&&n.bind(s,i,this),this.target[this.Re]=this.ke.evaluate(t.LifecycleFlags.et,i,this.Pe),this.ke.connect(s,i,this),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64;const s=this.ke;s.Be&&s.Be(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}},t.LetBinding=s([connectable()],t.LetBinding);class Ref{constructor(t,s,i){this.gs=null,this.Ss=null,this.$state=0,this.Pe=i,this.ke=t,this.target=s}ws(s,i){if(2&this.$state){if(this.$scope===i)return;this.us(s|t.LifecycleFlags.et)}this.$state|=1,this.$scope=i;const n=this.ke;hasBind(n)&&n.bind(s,i,this),this.ke.assign(s,this.$scope,this.Pe,this.target),this.$state|=2,this.$state&=-2}us(t){if(!(2&this.$state))return;this.$state|=64,this.ke.evaluate(t,this.$scope,this.Pe)===this.target&&this.ke.assign(t,this.$scope,this.Pe,null);const s=this.ke;hasUnbind(s)&&s.Be(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,s,i){}j(t,s,i){}}t.CollectionLengthObserver=class{constructor(t,s){this.N=t,this.U=s,this.q=t[s]}H(){return this.N[this.U]}lt(t){this.N[this.U]=t}bt(t){this.m(this.N[this.U],this.q,t),this.q=this.N[this.U]}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}},t.CollectionLengthObserver=s([targetObserver()],t.CollectionLengthObserver);const Wt=Array.prototype,Kt=Wt.push,_t=Wt.unshift,Gt=Wt.pop,Jt=Wt.shift,Xt=Wt.splice,Yt=Wt.reverse,Zt=Wt.sort,ts={push:Kt,unshift:_t,pop:Gt,shift:Jt,splice:Xt,reverse:Yt,sort:Zt},ss=["push","unshift","pop","shift","splice","reverse","sort"],is={push(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return Kt.apply(s,arguments);const n=s.length,h=arguments.length;if(0===h)return n;s.length=i.at.length=n+h;let e=n;for(;s.length>e;)s[e]=arguments[e-n],i.at[e]=-2,e++;return i.m("push",arguments,i.ft|t.LifecycleFlags.Ci),s.length},unshift(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return _t.apply(s,arguments);const n=arguments.length,h=Array(n);let e=0;for(;n>e;)h[e++]=-2;_t.apply(i.at,h);const r=_t.apply(s,arguments);return i.m("unshift",arguments,i.ft|t.LifecycleFlags.Ci),r},pop(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return Gt.call(s);const n=i.at,h=Gt.call(s);return n[n.length-1]>-1&&Gt.call(n.wt,h),Gt.call(n),i.m("pop",arguments,i.ft|t.LifecycleFlags.Ci),h},shift(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return Jt.call(s);const n=i.at,h=Jt.call(s);return n[0]>-1&&Jt.call(n.wt,h),Jt.call(n),i.m("shift",arguments,i.ft|t.LifecycleFlags.Ci),h},splice(s,i){let n=this;void 0!==n.Ji&&(n=n.Ji);const h=n.vt;if(void 0===h)return Xt.apply(n,arguments);const e=h.at;if(i>0){let t=isNaN(s)?0:s;const to=t+i;for(;to>t;)e[t]>-1&&Xt.call(e.wt,n[t]),t++}const r=arguments.length;if(r>2){const t=r-2,n=Array(t);let h=0;for(;t>h;)n[h++]=-2;Xt.call(e,s,i,...n)}else 2===r&&Xt.call(e,s,i);const o=Xt.apply(n,arguments);return h.m("splice",arguments,h.ft|t.LifecycleFlags.Ci),o},reverse(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return Yt.call(s),this;const n=s.length,h=n/2|0;let e=0;for(;e!==h;){const t=n-e-1,h=s[e],r=i.at[e],o=i.at[t];s[e]=s[t],i.at[e]=o,s[t]=h,i.at[t]=r,e++}return i.m("reverse",arguments,i.ft|t.LifecycleFlags.Ci),this},sort(s){let i=this;void 0!==i.Ji&&(i=i.Ji);const n=i.vt;if(void 0===n)return Zt.call(i,s),this;const h=i.length;if(2>h)return this;M(i,n.at,0,h,B);let e=0;for(;h>e&&void 0!==i[e];)e++;return void 0!==s&&"function"==typeof s||(s=$),M(i,n.at,0,e,s),n.m("sort",arguments,n.ft|t.LifecycleFlags.Ci),this}},ns={ar:1,Ks:0,tn:1},def=Object.defineProperty;for(const t of ss)def(is[t],"observing",{value:1,ar:0,tn:0,Ks:0});enableArrayObservation(),t.ArrayObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags.Gs,this.pt()}},t.ArrayObserver=s([collectionObserver(9)],t.ArrayObserver);const hs=Map.prototype,es=hs.set,rs=hs.clear,os=hs.delete,cs={set:es,clear:rs,delete:os},ls=["set","clear","delete"],us={set(s,value){let i=this;void 0!==i.Ji&&(i=i.Ji);const n=i.vt;if(void 0===n)return es.call(i,s,value),this;const h=i.size;if(es.call(i,s,value),i.size===h){let t=0;for(const h of i.entries()){if(h[0]===s)return h[1]!==value&&(n.at[t]=-2),this;t++}return this}return n.at[h]=-2,n.m("set",arguments,n.ft|t.LifecycleFlags.Ci),this},clear(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return rs.call(s);if(s.size>0){const n=i.at;let h=0;for(const t of s.keys())n[h]>-1&&n.wt.push(t),h++;rs.call(s),n.length=0,i.m("clear",arguments,i.ft|t.LifecycleFlags.Ci)}},delete(value){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return os.call(s,value);if(0===s.size)return 0;let n=0;const h=i.at;for(const t of s.keys()){if(t===value)return h[n]>-1&&h.wt.push(t),h.splice(n,1),os.call(s,value);n++}return i.m("delete",arguments,i.ft|t.LifecycleFlags.Ci),0}},as={ar:1,Ks:0,tn:1},fs=Object.defineProperty;for(const t of ls)fs(us[t],"observing",{value:1,ar:0,tn:0,Ks:0});enableMapObservation(),t.MapObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags.Gs,this.pt()}},t.MapObserver=s([collectionObserver(6)],t.MapObserver);const ds=Set.prototype,bs=ds.add,ps=ds.clear,vs=ds.delete,ws={add:bs,clear:ps,delete:vs},gs=["add","clear","delete"],ms={add(value){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return bs.call(s,value),this;const n=s.size;return bs.call(s,value),s.size===n?this:(i.at[n]=-2,i.m("add",arguments,i.ft|t.LifecycleFlags.Ci),this)},clear(){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return ps.call(s);if(s.size>0){const n=i.at;let h=0;for(const t of s.keys())n[h]>-1&&n.wt.push(t),h++;ps.call(s),n.length=0,i.m("clear",arguments,i.ft|t.LifecycleFlags.Ci)}},delete(value){let s=this;void 0!==s.Ji&&(s=s.Ji);const i=s.vt;if(void 0===i)return vs.call(s,value);if(0===s.size)return 0;let n=0;const h=i.at;for(const t of s.keys()){if(t===value)return h[n]>-1&&h.wt.push(t),h.splice(n,1),vs.call(s,value);n++}return i.m("delete",arguments,i.ft|t.LifecycleFlags.Ci),0}},ys={ar:1,Ks:0,tn:1},Cs=Object.defineProperty;for(const t of gs)Cs(ms[t],"observing",{value:1,ar:0,tn:0,Ks:0});enableSetObservation(),t.SetObserver=class{constructor(s,i,n){this.A=i,n.vt=this,this.C=n,this.flags=s&t.LifecycleFlags.Gs,this.pt()}},t.SetObserver=s([collectionObserver(7)],t.SetObserver);const Os={dr:0,br:0};t.CustomSetterObserver=class{constructor(t,s,i){this.N=t,this.U=s,this.q=this.oldValue=void 0,this.pr=i,this.L=0}W(s){this.pr.set.call(this.N,s),this.q!==s&&(this.oldValue=this.q,this.q=s,this.m(s,this.oldValue,t.LifecycleFlags.K))}subscribe(t){this.L||this.vr(),this.l(t)}unsubscribe(t){this.u(t)}vr(){this.L=1,this.q=this.N[this.U],Reflect.defineProperty(this.N,this.U,{set:t=>{this.W(t)}})}},t.CustomSetterObserver=s([subscriberCollection(t.MutationKind.g)],t.CustomSetterObserver),t.GetterObserver=class{constructor(t,s,i,n,h,e,r){this.N=i,this.U=n,this.wr=0,this.q=this.oldValue=void 0,this.gr=[],this.mr=[],this.yr=s,this.Cr=0,this.pr=h,this.O=new Proxy(i,(function t(s,i,n){return{get(h,e,r){if(n.Or(e))return Reflect.get(h,e,r);switch(js.call(h)){case"[object Array]":if(n.jr(i.Tr(s,h)),"length"===e)return Reflect.get(h,e,h);case"[object Map]":if(n.jr(i.Ar(s,h)),"size"===e)return Reflect.get(h,e,h);case"[object Set]":if(n.jr(i.Sr(s,h)),"size"===e)return Reflect.get(h,e,h);default:n.Ir(i.tt(s,h,e))}return(function(s,i,n,h,e){const value=Reflect.get(i,n,i);return"function"==typeof value?i[n].bind(i):"object"!=typeof value||null===value?value:new Proxy(value,t(s,h,e))})(s,h,e,i,n)}}})(t,e,this)),Reflect.defineProperty(i,n,{get:()=>this.H()})}Ir(t){-1===this.gr.indexOf(t)&&this.gr.push(t)}jr(t){-1===this.mr.indexOf(t)&&this.mr.push(t)}H(){return this.q=0===this.Cr||this.wr?Reflect.apply(this.pr.get,this.O,kernel.PLATFORM.Qn):Reflect.apply(this.pr.get,this.N,kernel.PLATFORM.Qn),this.q}subscribe(t){this.l(t),1==++this.Cr&&this.Pr(1)}unsubscribe(t){this.u(t),0==--this.Cr&&this.kr()}j(){const s=this.q,i=this.Pr(0);s!==i&&this.m(i,s,t.LifecycleFlags.K)}M(){const s=this.q,i=this.Pr(0);s!==i&&this.m(i,s,t.LifecycleFlags.ht|t.LifecycleFlags.K)}Pr(t){const s=!this.yr.dr||t;return s&&(this.kr(),this.wr=1),this.q=this.H(),s&&(this.gr.forEach(t=>{t.subscribe(this)}),this.mr.forEach(t=>{t.jt(this)}),this.wr=0),this.q}Or(t){return!this.wr||"$observers"===t}kr(){this.gr.forEach(t=>{t.unsubscribe(this)}),this.gr.length=0,this.mr.forEach(t=>{t.Tt(this)}),this.mr.length=0}},t.GetterObserver=s([subscriberCollection(t.MutationKind.g)],t.GetterObserver);const js={}.toString,IDirtyChecker=kernel.DI.dn("IDirtyChecker").fn(t=>t.singleton(Ts)),DirtyCheckSettings={Rr:6,disabled:0,warn:1,Vr:0,Dr(){this.Rr=6,this.disabled=0,this.warn=1,this.Vr=0}};class Ts{constructor(){this.$r=0,this.Br=[]}Fr(s,i){if(DirtyCheckSettings.Vr)throw kernel.Reporter.error(800);return DirtyCheckSettings.warn&&kernel.Reporter.write(801),new t.DirtyCheckProperty(this,s,i)}Mr(t){this.Br.push(t),1===this.Br.length&&kernel.PLATFORM.Lr.add(this.xr,this)}removeProperty(t){this.Br.splice(this.Br.indexOf(t),1),0===this.Br.length&&kernel.PLATFORM.Lr.remove(this.xr,this)}xr(s){if(DirtyCheckSettings.disabled)return;if(++this.$r<DirtyCheckSettings.Rr)return;this.$r=0;const i=this.Br,n=i.length;let h,e=0;for(;n>e;++e)(h=i[e]).Nr()&&h.flush(t.LifecycleFlags.Ii)}}t.DirtyCheckProperty=class{constructor(t,s,i){this.N=s,this.U=i,this.Ur=t}Nr(){return this.oldValue!==this.N[this.U]}flush(s){const i=this.N[this.U];this.m(i,this.oldValue,s|t.LifecycleFlags.K),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.N[this.U],this.Ur.Mr(this)),this.l(t)}unsubscribe(t){this.u(t)&&!this.v()&&this.Ur.removeProperty(this)}},t.DirtyCheckProperty=s([propertyObserver()],t.DirtyCheckProperty);const As=kernel.PLATFORM.In;class PrimitiveObserver{constructor(t,s){this.Er=1,"length"===s?(this.N=t,this.H=this.qr):this.H=this.zr}qr(){return this.N.length}zr(){}}PrimitiveObserver.prototype.W=As,PrimitiveObserver.prototype.subscribe=As,PrimitiveObserver.prototype.unsubscribe=As,PrimitiveObserver.prototype._=As;class PropertyAccessor{constructor(t,s){this.N=t,this.U=s}H(){return this.N[this.U]}W(value){this.N[this.U]=value}}const Ss={}.toString,IObserverLocator=kernel.DI.dn("IObserverLocator").th(),ITargetObserverLocator=kernel.DI.dn("ITargetObserverLocator").th(),ITargetAccessorLocator=kernel.DI.dn("ITargetAccessorLocator").th();class Is{constructor(t,s,i,n){this.Qr=[],this.Ur=s,this.A=t,this.Hr=i,this.Wr=n}static register(t){return kernel.Registration.singleton(IObserverLocator,this).register(t)}tt(s,i,n){if(s&t.LifecycleFlags.$t&&"object"==typeof i)return t.ProxyObserver.Rs(i,n);if((function(t){return 1==t.en})(i))return i.ln(s).Rs(s,i,n);let h,e=i._s;return e&&n in e?e[n]:((h=this.Kr(s,i,n)).Er||(void 0===e&&(e=this._r(i)),e[n]=h),h)}Gr(t){this.Qr.push(t)}$e(s,i,n){return this.Wr.Jr(s,i)?this.Hr.Xr(s,i,n)?this.tt(s,i,n):this.Wr.$e(s,this.A,i,n):s&t.LifecycleFlags.$t?t.ProxyObserver.Rs(i,n):new PropertyAccessor(i,n)}Tr(t,s){return L(t,this.A,s)}Ar(t,s){return x(t,this.A,s)}Sr(t,s){return N(t,this.A,s)}_r(t){return t._s||this.Yr(t)}Yr(t){const value={};return Reflect.defineProperty(t,"$observers",{Ks:0,tn:0,ar:0,value})||kernel.Reporter.write(0,t),value}Zr(t,s,i,n){for(let h=0,e=this.Qr.length;e>h;h++){const e=this.Qr[h].tt(t,s,i,n);if(e)return e}return null}Kr(s,i,n){if(!(i instanceof Object))return new PrimitiveObserver(i,n);let h=0;if(this.Hr.Jr(s,i)){const t=this.Hr.tt(s,this.A,this,i,n);if(null!==t)return t;if(null!==t)return t;h=1}switch(Ss.call(i)){case"[object Array]":return"length"===n?this.Tr(s,i).Ot(s):this.Ur.Fr(i,n);case"[object Map]":return"size"===n?this.Ar(s,i).Ot(s):this.Ur.Fr(i,n);case"[object Set]":return"size"===n?this.Sr(s,i).Ot(s):this.Ur.Fr(i,n)}const e=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(i,n);if(e&&(e.get||e.set)){if(e.get&&e.get.tt)return e.get.tt(i);return this.Zr(s,i,n,e)||(h?this.Ur.Fr(i,n):(function(s,i,n,h,e,r,o){if(0==o.tn)return n.Fr(e,r);if(o.get){const n=e.constructor.computed&&e.constructor.computed[r]||Os;return o.set?n.br?new t.GetterObserver(s,n,e,r,o,i,h):new t.CustomSetterObserver(e,r,o):new t.GetterObserver(s,n,e,r,o,i,h)}throw kernel.Reporter.error(18,r)})(s,this,this.Ur,this.A,i,n,e))}return new t.SetterObserver(s,i,n)}}Is.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Ps=kernel.PLATFORM.In;t.SelfObserver=class{constructor(s,i,n,h){this.ft=s&t.LifecycleFlags.Gs,t.ProxyObserver.Yi(i)?(i.vt.subscribe(this,n),this.N=i.Ji,this.U=n,this.q=i.Ji[n],this.Ns=h in i.Ji?i[h].bind(i):Ps):(this.N=i,this.U=n,this.q=i[n],this.Ns=h in i?i[h].bind(i):Ps)}j(t,s,i){this.W(t,i)}H(){return this.q}W(s,i){const n=this.q;if(n!==s&&(this.q=s,!(i&t.LifecycleFlags.et))){const t=this.Ns(s,n,i);void 0!==t&&(this.q=s=t),this.m(s,n,i)}}},t.SelfObserver=s([propertyObserver()],t.SelfObserver);const{oneTime:ks,Us:Rs,Xs:Vs,Ys:Ds}=t.BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.so=i.mode,i.mode=this.mode}Be(t,s,i){i.mode=i.so,i.so=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(ks)}}BindingBehaviorResource.mn("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Rs)}}BindingBehaviorResource.mn("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Vs)}}BindingBehaviorResource.mn("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ds)}}BindingBehaviorResource.mn("twoWay",TwoWayBindingBehavior);const $s={},Bs=t.BindingMode.Xs;class DebounceBindingBehavior{bind(s,i,n,h=200){let e,r,o;n instanceof t.Binding?(e="handleChange",o=E,r=n.mode&Bs?t.LifecycleFlags.Ti:t.LifecycleFlags.K):(e="callSource",o=U,r=t.LifecycleFlags.K),n.It=n[e],n.It.io=e,n[e]=o,n.At={kt:r,Pt:h,St:0,oldValue:$s}}Be(t,s,i){i[i.It.io]=i.It,i.It=null,kernel.PLATFORM.global.clearTimeout(i.At.St),i.At=null}}BindingBehaviorResource.mn("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.no=t}bind(t,s,i,...n){if(!i.Ve)throw kernel.Reporter.error(11);if(4===arguments.length){const name=n[0];this.no.vn(name,i),i.ho=name}else{if(4>=arguments.length)throw kernel.Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.no.vn(t[s],i);i.ho=t}}}Be(t,s,i){const name=i.ho;if(i.ho=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.no.wn(t[s],i)}else this.no.wn(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.mn("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(s,i,n,h=200){let e;n.Dt=n[e=n instanceof t.Binding?n.mode===t.BindingMode.Ys?"updateSource":"updateTarget":"callSource"],n.Dt.io=e,n[e]=q,n.Rt={Pt:h,Vt:0,St:-1}}Be(t,s,i){i[i.Dt.io]=i.Dt,i.Dt=null,kernel.PLATFORM.global.clearTimeout(i.Rt.St),i.Rt=null}}BindingBehaviorResource.mn("throttle",ThrottleBindingBehavior);const Fs="custom-element",Ms="custom-attribute";(TargetedInstructionType=t.TargetedInstructionType||(t.TargetedInstructionType={})).eo="ra",TargetedInstructionType.ro="rb",TargetedInstructionType.oo="rc",TargetedInstructionType.co="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.lr="rf",TargetedInstructionType.lo="rg",TargetedInstructionType.uo="rh",TargetedInstructionType.ao="ri",TargetedInstructionType.fo="rj",TargetedInstructionType.do="rk";const ITargetedInstruction=kernel.DI.dn("createInterface").th(),Ls=Object.freeze({required:1,compiler:"default"}),xs=Object.freeze({required:0,compiler:"default"});class Ns{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=xs,this.bindables=kernel.PLATFORM.Bt,this.instructions=kernel.PLATFORM.Qn,this.dependencies=kernel.PLATFORM.Qn,this.surrogates=kernel.PLATFORM.Qn,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.$t=0}}const Us=["name","template","cache","build","containerless","shadowOptions","hasSlots","useProxies"],Es=["instructions","dependencies","surrogates"],CustomAttributeResource=(kernel.Profiler.bo("AttachLifecycle"),kernel.Profiler.bo("BindLifecycle"),kernel.Profiler.bo("RenderLifecycle"),{name:Ms,G:H,gn(t){return t.kind===this},mn(s,i){const n=i,h=(function(def,s){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?kernel.PLATFORM.Qn:aliases,defaultBindingMode:null==defaultBindingMode?t.BindingMode.Us:defaultBindingMode,Ms:void 0===def.Ms?0:def.Ms,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},s.bindables,def.bindables),$t:void 0===def.$t?0:def.$t}})("string"==typeof s?{name:s}:s,n),e=n.prototype;return n.kind=CustomAttributeResource,n.description=h,n.register=dt,e.po=at,e.ws=et,e.Et=W,e.Zt=G,e.us=ct,e.hs=Y,e.Ss=null,e.gs=null,e.ts=null,e.qt=null,e.Gh=null,e.$scope=null,e.$hooks=0,e.$state=0,"flush"in e&&(e.ut=null),"binding"in e&&(e.$hooks|=4),"bound"in e&&(e.$hooks|=8,e.Uh=null),"unbinding"in e&&(e.$hooks|=256),"unbound"in e&&(e.$hooks|=512,e.Jh=null),"created"in e&&(e.$hooks|=2),"attaching"in e&&(e.$hooks|=16),"attached"in e&&(e.$hooks|=32,e.zh=null),"detaching"in e&&(e.$hooks|=64),"caching"in e&&(e.$hooks|=2048),"detached"in e&&(e.$hooks|=128,e.Kh=null),n}}),INode=kernel.DI.dn("INode").th(),IRenderLocation=kernel.DI.dn("IRenderLocation").th(),IDOM=kernel.DI.dn("IDOM").th(),NodeSequence={empty:{childNodes:kernel.PLATFORM.Qn,firstChild:null,lastChild:null,vo:()=>kernel.PLATFORM.Qn,insertBefore(t){},wo(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.Ae=i,this.mo=null,this.yo=null,this.Co=t,this.Oo=null,this.location=s}ds(t){const s=this.jo(t);this.Ae.ve(s,t),this.Ae.ds(t,this.$scope)}Lt(t){this.Ae.Lt(t)}Wt(t){this.Ae.Wt(t)}js(t){this.Ae.js(t)}ss(t){null!==this.Oo&&this.Oo.release(t)&&(this.Oo=null),null!==this.yo&&this.yo.release(t)&&(this.yo=null),this.Ae.ss(t)}To(s,i,n){if(3&this.$state)if(t.ProxyObserver.Yi(this)&&(n|=t.LifecycleFlags.$t),n&t.LifecycleFlags.ht){const t=this.jo(n);this.Ae.ve(t,n)}else this.$lifecycle.T(this).catch(t=>{throw t})}flush(s){t.ProxyObserver.Yi(this)&&(s|=t.LifecycleFlags.$t);const i=this.jo(s);this.Ae.ve(i,s)}jo(t){return this.value?this.Oo=this.Ao(this.Oo,this.Co,t):null!==this.mo?this.yo=this.Ao(this.yo,this.mo,t):null}Ao(t,s,i){return null===t&&(t=s.create(i)),t.So(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],s([bindable],If.prototype,"value",void 0),CustomAttributeResource.mn({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Io=t}link(t){t.mo=this.Io}}Else.inject=[IViewFactory],CustomAttributeResource.mn({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.Io=i,this.Po=0,this.location=t,this.ko=null,this.Ro=s,this.Vo=[]}ds(s){this.Do(s);let i=this.Ro.vs;for(;null!==i;){if(t.ProxyObserver.Xi(i.target)===t.ProxyObserver.Xi(this)&&"items"===i.Re){this.$o=i.ke;break}i=i.gs}this.Bo=this.$o.Fo.evaluate(s,this.$scope,null),this.Mo(null,s)}Lt(t){const{Vo:s,location:i}=this;for(let n=0,h=s.length;h>n;++n){const h=s[n];h.So(i),h.Et(t)}}Wt(t){const{Vo:s}=this;for(let i=0,n=s.length;n>i;++i){const n=s[i];n.Zt(t),n.release(t)}}js(t){this.Do(t);const{Vo:s}=this;for(let i=0,n=s.length;n>i;++i)s[i].us(t)}Lo(s,i,n){this.Do(n),this.Mo(null,n|t.LifecycleFlags.K)}M(s,i){this.Mo(s,i|t.LifecycleFlags.ht|t.LifecycleFlags.K)}Mo(s,i){t.ProxyObserver.Yi(this)&&(i|=t.LifecycleFlags.$t);const{Vo:n,$lifecycle}=this;if(3&this.$state){const{Bo:t,$scope,Io:h,$o:e,xo:r}=this,o=n.length,c=e.count(r);if(c>o){n.length=c;for(let t=o;c>t;++t)n[t]=h.create(i)}else if(o>c){$lifecycle.Qt();for(let t=c,s=n[t];o>t;s=n[++t])s.release(i),s.Zt(i);$lifecycle._t(i),$lifecycle.ys();for(let t=c,s=n[t];o>t;s=n[++t])s.us(i);if($lifecycle.Ts(i),n.length=c,0===c)return}else if(0===c)return;$lifecycle.as(),e.No(r,null===s?(s,h,e)=>{const r=n[h];r.ws(i,Scope.an(i,$scope,r.$scope&&r.$scope.cn[t]===e?r.$scope.cn:BindingContext.create(i,t,e)))}:(h,e,r)=>{const o=n[e];o.ws(i,Scope.an(i,$scope,!o.$scope||s[e]!==e&&o.$scope.cn[t]!==r?BindingContext.create(i,t,r):o.$scope.cn))}),$lifecycle.bs(i)}if(12&this.$state){const{location:t}=this;if($lifecycle.Ft(),null===s)for(let s=0,h=n.length;h>s;++s){const h=n[s];h.So(t),h.Et(i)}else for(let h=0,e=n.length;e>h;++h)if(s[h]!==h){const s=n[h];s.So(t),s.Et(i)}$lifecycle.Nt(i)}}Do(t){const s=this.ko;if(3&this.$state){const i=this.ko=getCollectionObserver(t,this.$lifecycle,this.xo);s!==i&&s&&s.Tt(this),i&&i.jt(this)}else s&&s.Tt(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],s([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.mn({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.Io=t,this.currentView=this.Io.create(),this.currentView.So(s)}ds(s){this.currentView.ws(s|t.LifecycleFlags.Bi,this.$scope)}Lt(t){this.currentView.Et(t)}Wt(t){this.currentView.Zt(t)}js(t){this.currentView.us(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.mn({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.Io=t,this.currentView=this.Io.create(),this.currentView.So(s)}To(){3&this.$state&&this.Uo(t.LifecycleFlags.Vi)}ds(t){this.Uo(t)}Lt(t){this.currentView.Et(t)}Wt(t){this.currentView.Zt(t)}js(t){this.currentView.us(t)}Uo(t){const s=Scope.an(t,this.$scope,this.value);this.currentView.ws(t,s)}}With.inject=[IViewFactory,IRenderLocation],s([bindable],With.prototype,"value",void 0),CustomAttributeResource.mn({name:"with",isTemplateController:1},With);const IProjectorLocator=kernel.DI.dn("IProjectorLocator").th(),CustomElementResource={name:Fs,G:z,gn(t){return t.kind===this},Eo:Q,mn(t,s=null){if(!t)throw kernel.Reporter.error(70);const i=null===s?class{}:s,n=buildTemplateDefinition(i,t),h=i.prototype;return i.kind=CustomElementResource,i.description=n,i.register=pt,h.po=ft,h.ws=rt,h.Et=K,h.Zt=J,h.us=lt,h.hs=Z,h.Ss=null,h.gs=null,h.ts=null,h.qt=null,h.Gh=null,h.$scope=null,h.$hooks=0,h.vs=null,h.As=null,h.ms=null,h.Is=null,h.Ut=null,h.Yt=null,h.qh=st,h.Wh=it,h.Eh=null,h.Hh=null,h.rs=null,"flush"in h&&(h.ut=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.Uh=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.Jh=null),"render"in h&&(h.$hooks|=1024),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.zh=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Kh=null),i}},qs={mode:"open"},ISanitizer=kernel.DI.dn("ISanitizer").fn(t=>t.singleton(class{qo(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.zo=t}Us(t){return null==t?null:this.zo.qo(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.mn("sanitize",SanitizeValueConverter);class zs{constructor($lifecycle,cache){this.vs=null,this.As=null,this.ms=null,this.Is=null,this.gs=null,this.Ss=null,this.Ut=null,this.Yt=null,this.qt=null,this.ts=null,this.Eh=null,this.Hh=null,this.Gh=null,this.$state=0,this.$scope=null,this.cs=0,this.$lifecycle=$lifecycle,this.cache=cache}So(t){this.cs=0,this.location=t}release(t){return this.cs=1,8&this.$state?this.cache.Qo(this):!!this.Wh(t)}Ho(t){this.$scope=t,this.ws=wt,this.us=gt}}class Qs{constructor(name,template,t){this.Wo=0,this.Ko=-1,this.cache=null,this.A=t,this.name=name,this.template=template}_o(t,s){t&&("*"===t?t=Qs.Go:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Ko&&s||(this.Ko=t)),this.cache=this.Ko>0?[]:null,this.Wo=this.Ko>0}Qo(t){return null!==this.cache&&this.Ko>this.cache.length}ls(s){return this.Qo(s)?(s.hs(t.LifecycleFlags.Zs),this.cache.push(s),1):0}create(t){const cache=this.cache;let s;if(null!==cache&&cache.length>0)return(s=cache.pop()).$state&=-129,s;if(s=new zs(this.A,this),this.template.$s(s,null,null,t),!s.$nodes)throw kernel.Reporter.error(90);return s}}Qs.Go=65535,(t=>{t.ws=ot,t.us=ut,t.Et=_,t.Zt=X,t.hs=tt,t.qh=nt,t.Wh=ht})(zs.prototype);const ITemplateCompiler=kernel.DI.dn("ITemplateCompiler").th();(ViewCompileFlags=t.ViewCompileFlags||(t.ViewCompileFlags={}))[ViewCompileFlags.Zs=1]="none",ViewCompileFlags[ViewCompileFlags.Jo=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Xo=4]="shadowDOM";const ITemplateFactory=kernel.DI.dn("ITemplateFactory").th(),Hs={Yo:null,dom:null,$s(t){t.$nodes=NodeSequence.empty,t.$context=null}},Ws="default",IInstructionRenderer=kernel.DI.dn("IInstructionRenderer").th(),IRenderer=kernel.DI.dn("IRenderer").th(),IRenderingEngine=kernel.DI.dn("IRenderingEngine").fn(t=>t.singleton(Ks));class Ks{constructor(t,s,i,n){this.Zo=new Map,this.tc=t,this.sc=s,this.ic=new Map,this.A=i,this.nc=new Map,this.hc=n.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Bs(dom,t,s,i){if(!t)return null;let n=this.nc.get(t);return n||(n=this.ec(dom,t,s,i),this.nc.set(t,n)),n}rc(dom,t,s){if(!t)return null;let i=this.ic.get(t);if(!i){const n=buildTemplateDefinition(null,t),template=this.ec(dom,n,s,null);(i=new Qs(n.name,template,this.A))._o(n.cache,1),this.ic.set(t,i)}return i}Ps(t,s,i){let n=this.Zo.get(s);n||(n=Xs.create(s),this.Zo.set(s,n)),n.oc(t,i,this.A)}ec(dom,s,i,n){if(null===i&&(i=this.tc),null!==s.template){const h=createRenderContext(dom,i,s.dependencies,n);if(s.build.required){const i=s.build.compiler||Ws,compiler=this.hc[i];if(void 0===compiler)throw kernel.Reporter.error(20,i);s=compiler.compile(dom,s,new kernel.RuntimeCompilationResources(h),t.ViewCompileFlags.Jo)}return this.sc.create(h,s)}return Hs}}Ks.inject=[kernel.IContainer,ITemplateFactory,ILifecycle,kernel.all(ITemplateCompiler)];class _s{constructor(){this.g=null}Ws(t){this.g=t}resolve(t,s){if(void 0===this.g)throw kernel.Reporter.error(50);return this.g}_(){this.g=null}}class Gs{Ws(t,parts){this.Io=t,this.cc=parts||kernel.PLATFORM.Bt}resolve(t,s){const i=this.Io;if(null==i)throw kernel.Reporter.error(50);if(!i.name||!i.name.length)throw kernel.Reporter.error(51);const n=this.cc[i.name];if(n){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.rc(dom,n,s)}return i}_(){this.Io=null,this.cc=kernel.PLATFORM.Bt}}let Js=class{constructor(t,customElement){this.yt=0,this.children=null,this.customElement=customElement,this.A=t,this.L=0}H(){return this.L||(this.L=1,this.customElement.rs.lc(()=>{this.uc()}),this.children=mt(this.customElement.rs.children)),this.children}W(t){}flush(s){this.m(this.children,void 0,s|t.LifecycleFlags.K),this.yt=0}subscribe(t){this.l(t)}unsubscribe(t){this.u(t)}uc(){this.children=mt(this.customElement.rs.children),"$childrenChanged"in this.customElement&&this.customElement.ac(),this.A.T(this).catch(t=>{throw t}),this.yt=1}};Js=s([subscriberCollection(t.MutationKind.g)],Js);class Xs{constructor(){}static create(t){const s=new Xs;return s.bindables=t.description.bindables,s}oc(t,s,i){s.$lifecycle=i,"$projector"in s?this.fc(t,i,s):this.dc(t,s)}fc(t,s,i){this.dc(t,i).bc=new Js(s,i),Reflect.defineProperty(i,"$children",{Ks:0,get(){return this._s.bc.H()}})}dc(s,i){const n={},bindables=this.bindables,h=Object.getOwnPropertyNames(bindables);if(s&t.LifecycleFlags.$t)for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,t.ProxyObserver.Rs(i).O,name,bindables[name].Ns)}else{for(let e=0,r=h.length;r>e;++e){const name=h[e];n[name]=new t.SelfObserver(s,i,name,bindables[name].Ns),yt(s,i,name)}Reflect.defineProperty(i,"$observers",{Ks:0,value:n})}return n}}kernel.Profiler.bo("Aurelia.start"),kernel.Profiler.bo("Aurelia.stop");class Aurelia{constructor(t=kernel.DI.pc()){this.tc=t,this.vc=[],this.wc=[],this.gc=[],this.mc=0,this.yc=null,kernel.Registration.g(Aurelia,this).register(t,Aurelia)}register(...t){return this.tc.register(...t),this}app(s){const host=s.host;let dom;if(this.tc.has(IDOM,0))dom=this.tc.get(IDOM);else{const t=this.tc.get(IDOMInitializer);dom=t.initialize(s)}let component,i=t.LifecycleFlags.Pi,n=t.LifecycleFlags.Jt;s.$t&&(i|=t.LifecycleFlags.$t,n|=t.LifecycleFlags.$t);const h=s.component;CustomElementResource.gn(h)?(this.tc.register(h),component=this.tc.get(CustomElementResource.G(h.description.name))):component=h,component=t.ProxyObserver.Xi(component);const e=()=>{if(host.$au=this,!this.vc.includes(component)){this.yc=component,this.vc.push(component);const t=this.tc.get(IRenderingEngine),s=this.tc.get(IProjectorLocator);component.po(i,dom,s,t,host,this.tc)}component.ws(i|t.LifecycleFlags.et,null),component.Et(i|t.LifecycleFlags.Mt)};return this.wc.push(e),this.gc.push(()=>{component.Zt(n|t.LifecycleFlags.Ht),component.us(n|t.LifecycleFlags.Cs),host.$au=null}),this.mc&&e(),this}root(){return t.ProxyObserver.Gi(this.yc)}start(){for(const t of this.wc)t();return this.mc=1,this}stop(){this.mc=0;for(const t of this.gc)t();return this}}kernel.PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=kernel.DI.dn("IDOMInitializer").th();class Ys{constructor(t){const s=this.Cc={};t.forEach(t=>{s[t.Js]=t})}static register(t){return kernel.Registration.singleton(IRenderer,this).register(t)}$s(t,dom,s,i,targets,n,host,parts){const h=n.instructions,e=this.Cc;if(targets.length!==h.length)throw kernel.Reporter.error(targets.length>h.length?30:31);for(let n=0,r=targets.length;r>n;++n){const instructions=h[n],r=targets[n];for(let n=0,h=instructions.length;h>n;++n){const h=instructions[n];e[h.type].$s(t,dom,s,i,r,h,parts)}}if(host){const h=n.surrogates;for(let n=0,r=h.length;r>n;++n){const r=h[n];e[r.type].$s(t,dom,s,i,host,r,parts)}}}}Ys.inject=[kernel.all(IInstructionRenderer)];let Zs=class{$s(t,dom,s,i,n,h){n[h.to]=h.value}};Zs=s([instructionRenderer("re")],Zs);let ti=class{constructor(t){this.Oc=t}$s(t,dom,s,i,n,h){const e=s.Hs(i,n,h,null,null,n,1),component=s.get(z(h.res)),r=s.get(IRenderer).Cc,o=s.get(IProjectorLocator),c=h.instructions;component.po(t,dom,o,this.Oc,n,s,h);for(let n=0,h=c.length;h>n;++n){const h=c[n];r[h.type].$s(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),e._()}};ti.inject=[IRenderingEngine],ti=s([instructionRenderer("ra")],ti);let si=class{constructor(t){this.Oc=t}$s(t,dom,s,i,n,h){const e=s.Hs(i,n,h),component=s.get(H(h.res)),r=s.get(IRenderer).Cc,o=h.instructions;component.po(t,this.Oc);for(let n=0,h=o.length;h>n;++n){const h=o[n];r[h.type].$s(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),e._()}};si.inject=[IRenderingEngine],si=s([instructionRenderer("rb")],si);let ii=class{constructor(t){this.Oc=t}$s(t,dom,s,i,n,h,parts){const e=this.Oc.rc(dom,h.def,s),r=s.Hs(i,n,h,e,parts,dom.jc(n),0),component=s.get(H(h.res)),o=s.get(IRenderer).Cc,c=h.instructions;component.po(t,this.Oc),h.link&&component.link(i.Yt);for(let n=0,h=c.length;h>n;++n){const h=c[n];o[h.type].$s(t,dom,s,i,component,h)}addBindable(i,component),addAttachable(i,component),r._()}};ii.inject=[IRenderingEngine],ii=s([instructionRenderer("rc")],ii);let ni=class{constructor(t,s){this.Tc=t,this.st=s}$s(s,dom,i,n,h,e){dom.remove(h);const r=e.instructions,toViewModel=e.toViewModel;for(let s=0,h=r.length;h>s;++s){const h=r[s],e=ensureExpression(this.Tc,h.from,48);addEarlyBindable(n,new t.LetBinding(e,h.to,this.st,i,toViewModel))}}};ni.inject=[IExpressionParser,IObserverLocator],ni=s([instructionRenderer("rd")],ni);let hi=class{constructor(t,s){this.Tc=t,this.st=s}$s(t,dom,s,i,n,h){const e=ensureExpression(this.Tc,h.from,153);addEarlyBindable(i,new Call(e,n,h.to,this.st,s))}};hi.inject=[IExpressionParser,IObserverLocator],hi=s([instructionRenderer("rh")],hi);let ei=class{constructor(t){this.Tc=t}$s(t,dom,s,i,n,h){const e=ensureExpression(this.Tc,h.from,1280);addEarlyBindable(i,new Ref(e,n,s))}};ei.inject=[IExpressionParser],ei=s([instructionRenderer("rj")],ei);let ri=class{constructor(t,s){this.Tc=t,this.st=s}$s(s,dom,i,n,h,e){let bindable;const r=ensureExpression(this.Tc,e.from,2048);addEarlyBindable(n,bindable=r.Ac?new MultiInterpolationBinding(this.st,r,h,e.to,t.BindingMode.Us,i):new t.InterpolationBinding(r.Sc,r,h,e.to,t.BindingMode.Us,this.st,i,1))}};ri.inject=[IExpressionParser,IObserverLocator],ri=s([instructionRenderer("rf")],ri);let oi=class{constructor(t,s){this.Tc=t,this.st=s}$s(s,dom,i,n,h,e){const r=ensureExpression(this.Tc,e.from,48|e.mode);addEarlyBindable(n,new t.Binding(r,h,e.to,e.mode,this.st,i))}};oi.inject=[IExpressionParser,IObserverLocator],oi=s([instructionRenderer("rg")],oi);let ci=class{constructor(t,s){this.Tc=t,this.st=s}$s(s,dom,i,n,h,e){const r=ensureExpression(this.Tc,e.from,539);addEarlyBindable(n,new t.Binding(r,h,e.to,t.BindingMode.Us,this.st,i))}};ci.inject=[IExpressionParser,IObserverLocator],ci=s([instructionRenderer("rk")],ci);const li=Is,ui=Ft,ai=Ys,DefaultComponents=[li,ui,ai],IfRegistration=If,ElseRegistration=Else,RepeatRegistration=Repeat,ReplaceableRegistration=Replaceable,WithRegistration=With,SanitizeValueConverterRegistration=SanitizeValueConverter,DebounceBindingBehaviorRegistration=DebounceBindingBehavior,OneTimeBindingBehaviorRegistration=OneTimeBindingBehavior,ToViewBindingBehaviorRegistration=ToViewBindingBehavior,FromViewBindingBehaviorRegistration=FromViewBindingBehavior,SignalBindingBehaviorRegistration=SignalBindingBehavior,ThrottleBindingBehaviorRegistration=ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration=TwoWayBindingBehavior,DefaultResources=[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration],DefaultRenderers=[oi,ci,hi,ei,ri,Zs,ti,si,ii,ni],fi={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),pc(){return this.register(kernel.DI.pc())}};return t.CallFunction=class{constructor(t,s){this.J=1162,this.assign=kernel.PLATFORM.In,this.Ic=t,this.Bn=s}evaluate(s,i,n){const h=this.Ic.evaluate(s,i,n);if("function"==typeof h)return h.apply(null,g(s,i,n,this.Bn));if(s&t.LifecycleFlags.Y||null!=h)throw kernel.Reporter.error(207,this)}connect(t,s,i){const n=this.Ic.evaluate(t,s,null);if(this.Ic.connect(t,s,i),"function"==typeof n){const n=this.Bn;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.Pc(this)}},t.connects=function(t){return 32==(32&t.J)},t.observes=function(t){return 64==(64&t.J)},t.callsFunction=function(t){return 128==(128&t.J)},t.hasAncestor=function(t){return 256==(256&t.J)},t.isAssignable=function(t){return 8192==(8192&t.J)},t.isLeftHandSide=function(t){return 1024==(1024&t.J)},t.isPrimary=function(t){return 512==(512&t.J)},t.isResource=function(t){return 32768==(32768&t.J)},t.hasBind=hasBind,t.hasUnbind=hasUnbind,t.isLiteral=isLiteral,t.arePureLiterals=arePureLiterals,t.isPureLiteral=isPureLiteral,t.BindingBehavior=class{constructor(t,name,s){this.J=38962,this.kc=t,this.name=name,this.Bn=s,this.Rc=BindingBehaviorResource.G(this.name),this.Vc=hasBind(t),this.Dc=hasUnbind(t)}evaluate(t,s,i){return this.kc.evaluate(t,s,i)}assign(t,s,i,value){return this.kc.assign(t,s,i,value)}connect(t,s,i){this.kc.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.Pe;if(!n)throw kernel.Reporter.error(202,this);this.Vc&&this.kc.bind(t,s,i);const h=this.Rc,e=n.get(h);if(!e)throw kernel.Reporter.error(203,this);if(null!=i[h])throw kernel.Reporter.error(204,this);i[h]=e,e.bind.apply(e,[t,s,i].concat(g(t,s,n,this.Bn)))}Be(t,s,i){const n=this.Rc;i[n].Be(t,s,i),i[n]=null,this.Dc&&this.kc.Be(t,s,i)}accept(t){return t.$c(this)}},t.ValueConverter=class{constructor(t,name,s){this.J=36913,this.kc=t,this.name=name,this.Bn=s,this.Bc=ValueConverterResource.G(this.name)}evaluate(t,s,i){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.Bc);if(!n)throw kernel.Reporter.error(205,this);if("toView"in n){const h=this.Bn,e=h.length,r=Array(e+1);r[0]=this.kc.evaluate(t,s,i);for(let n=0;e>n;++n)r[n+1]=h[n].evaluate(t,s,i);return n.Us.apply(n,r)}return this.kc.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw kernel.Reporter.error(202,this);const n=i.get(this.Bc);if(!n)throw kernel.Reporter.error(205,this);return"fromView"in n&&(value=n.Xs.apply(n,[value].concat(g(t,s,i,this.Bn)))),this.kc.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw kernel.Reporter.error(250,this);if(null===s)throw kernel.Reporter.error(251,this);if(!i)throw kernel.Reporter.error(206,this);const n=i.Pe;if(!n)throw kernel.Reporter.error(202,this);this.kc.connect(t,s,i);const h=this.Bn;for(let n=0,e=h.length;e>n;++n)h[n].connect(t,s,i);const e=n.get(this.Bc);if(!e)throw kernel.Reporter.error(205,this);const r=e.bn;if(void 0===r)return;const o=n.get(ISignaler);for(let t=0,s=r.length;s>t;++t)o.vn(r[t],i)}Be(t,s,i){const n=i.Pe,h=n.get(this.Bc).bn;if(void 0===h)return;const e=n.get(ISignaler);for(let t=0,s=h.length;s>t;++t)e.wn(h[t],i)}accept(t){return t.Fc(this)}},t.Assign=class{constructor(t,value){this.J=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.Mc(this)}},t.Conditional=class{constructor(t,s,i){this.J=63,this.assign=kernel.PLATFORM.In,this.Lc=t,this.xc=s,this.Nc=i}evaluate(t,s,i){return this.Lc.evaluate(t,s,i)?this.xc.evaluate(t,s,i):this.Nc.evaluate(t,s,i)}connect(t,s,i){this.Lc.evaluate(t,s,null)?(this.Lc.connect(t,s,i),this.xc.connect(t,s,i)):(this.Lc.connect(t,s,i),this.Nc.connect(t,s,i))}accept(t){return t.Uc(this)}},t.AccessThis=AccessThis,t.AccessScope=AccessScope,t.AccessMember=AccessMember,t.AccessKeyed=class{constructor(t,s){this.J=9324,this.object=t,this.key=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);if(null!=n)return n[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof n&&null!==n){this.key.connect(t,s,i);const h=this.key.evaluate(t,s,null);Array.isArray(n)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(h)||i.nt(t,n,h)}}accept(t){return t.Ec(this)}},t.CallScope=CallScope,t.CallMember=CallMember,t.Binary=class{constructor(t,s,i){this.J=46,this.assign=kernel.PLATFORM.In,this.qc=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){const n=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.qc&&!n||"||"===this.qc&&n||this.right.connect(t,s,i)}zc(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}Qc(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}Hc(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}Wc(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}Kc(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}_c(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}Gc(t,s,i){const n=this.right.evaluate(t,s,i);return"function"==typeof n?this.left.evaluate(t,s,i)instanceof n:0}Jc(t,s,i){const n=this.right.evaluate(t,s,i);return null!==n&&"object"==typeof n?this.left.evaluate(t,s,i)in n:0}Xc(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}Yc(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}Zc(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}tl(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}sl(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}il(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}nl(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}hl(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}el(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.rl(this)}},t.Unary=class{constructor(t,s){this.J=39,this.assign=kernel.PLATFORM.In,this.qc=t,this.kc=s,this.evaluate=this[t]}evaluate(t,s,i){throw kernel.Reporter.error(208,this)}connect(t,s,i){this.kc.connect(t,s,i)}ol(t,s,i){this.kc.evaluate(t,s,i)}cl(t,s,i){return typeof this.kc.evaluate(t,s,i)}ll(t,s,i){return!this.kc.evaluate(t,s,i)}Yc(t,s,i){return-this.kc.evaluate(t,s,i)}Xc(t,s,i){return+this.kc.evaluate(t,s,i)}accept(t){return t.ul(this)}},t.PrimitiveLiteral=PrimitiveLiteral,t.HtmlLiteral=class{constructor(parts){this.J=51,this.assign=kernel.PLATFORM.In,this.parts=parts}evaluate(t,s,i){const n=this.parts;let h="";for(let e=0,r=n.length;r>e;++e){const value=n[e].evaluate(t,s,i);null!=value&&(h+=value)}return h}connect(t,s,i){for(let n=0,h=this.parts.length;h>n;++n)this.parts[n].connect(t,s,i)}accept(t){return t.al(this)}},t.ArrayLiteral=ArrayLiteral,t.ObjectLiteral=ObjectLiteral,t.Template=Template,t.TaggedTemplate=class{constructor(t,s,i,n){this.J=1197,this.assign=kernel.PLATFORM.In,this.Wn=t,this.Wn.raw=s,this.Ic=i,this.X=void 0===n?kernel.PLATFORM.Qn:n}evaluate(t,s,i){const n=this.X,h=n.length,e=Array(h);for(let r=0,o=h;o>r;++r)e[r]=n[r].evaluate(t,s,i);const r=this.Ic.evaluate(t,s,i);if("function"!=typeof r)throw kernel.Reporter.error(207,this);return r.apply(null,[this.Wn].concat(e))}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i);this.Ic.connect(t,s,i)}accept(t){return t.fl(this)}},t.ArrayBindingPattern=class{constructor(t){this.J=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.dl(this)}},t.ObjectBindingPattern=class{constructor(t,s){this.J=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.bl(this)}},t.BindingIdentifier=class{constructor(name){this.J=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.pl(this)}},t.ForOfStatement=class{constructor(t,s){this.J=55,this.assign=kernel.PLATFORM.In,this.Fo=t,this.vl=s}evaluate(t,s,i){return this.vl.evaluate(t,s,i)}count(t){return $t[Vt.call(t)](t)}No(t,s){Dt[Vt.call(t)](t,s)}connect(t,s,i){this.Fo.connect(t,s,i),this.vl.connect(t,s,i)}accept(t){return t.wl(this)}},t.Interpolation=class{constructor(parts,t){this.J=24,this.assign=kernel.PLATFORM.In,this.parts=parts,this.X=void 0===t?kernel.PLATFORM.Qn:t,this.Ac=this.X.length>1,this.Sc=this.X[0]}evaluate(t,s,i){if(this.Ac){const n=this.X,parts=this.parts;let h=parts[0];for(let e=0,r=n.length;r>e;++e)h+=n[e].evaluate(t,s,i),h+=parts[e+1];return h}{const parts=this.parts;return parts[0]+this.Sc.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.gl(this)}},t.Call=Call,t.connectable=connectable,t.IExpressionParser=IExpressionParser,t.MultiInterpolationBinding=MultiInterpolationBinding,t.Ref=Ref,t.enableArrayObservation=enableArrayObservation,t.disableArrayObservation=function(){for(const t of ss)1==Wt[t].L&&def(Wt,t,Object.assign({},ns,{value:ts[t]}))},t.enableMapObservation=enableMapObservation,t.disableMapObservation=function(){for(const t of ls)1==hs[t].L&&fs(hs,t,Object.assign({},as,{value:cs[t]}))},t.enableSetObservation=enableSetObservation,t.disableSetObservation=function(){for(const t of gs)1==ds[t].L&&Cs(ds,t,Object.assign({},ys,{value:ws[t]}))},t.BindingContext=BindingContext,t.Scope=Scope,t.OverrideContext=OverrideContext,t.collectionObserver=collectionObserver,t.computed=function(t){return function(s,i){(s.computed||(s.computed={}))[i]=t}},t.IDirtyChecker=IDirtyChecker,t.DirtyCheckSettings=DirtyCheckSettings,t.IObserverLocator=IObserverLocator,t.ITargetObserverLocator=ITargetObserverLocator,t.ITargetAccessorLocator=ITargetAccessorLocator,t.getCollectionObserver=getCollectionObserver,t.PrimitiveObserver=PrimitiveObserver,t.PropertyAccessor=PropertyAccessor,t.propertyObserver=propertyObserver,t.ISignaler=ISignaler,t.subscriberCollection=subscriberCollection,t.batchedSubscriberCollection=batchedSubscriberCollection,t.targetObserver=targetObserver,t.bindingBehavior=function(t){return s=>BindingBehaviorResource.mn(t,s)},t.BindingBehaviorResource=BindingBehaviorResource,t.BindingModeBehavior=BindingModeBehavior,t.OneTimeBindingBehavior=OneTimeBindingBehavior,t.ToViewBindingBehavior=ToViewBindingBehavior,t.FromViewBindingBehavior=FromViewBindingBehavior,t.TwoWayBindingBehavior=TwoWayBindingBehavior,t.DebounceBindingBehavior=DebounceBindingBehavior,t.SignalBindingBehavior=SignalBindingBehavior,t.ThrottleBindingBehavior=ThrottleBindingBehavior,t.customAttribute=function(t){return s=>CustomAttributeResource.mn(t,s)},t.CustomAttributeResource=CustomAttributeResource,t.dynamicOptions=function(t){return void 0===t?bt:bt(t)},t.templateController=function(t){return s=>CustomAttributeResource.mn("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s)},t.If=If,t.Else=Else,t.Repeat=Repeat,t.Replaceable=Replaceable,t.With=With,t.containerless=function(t){return void 0===t?vt:vt(t)},t.customElement=function(t){return s=>CustomElementResource.mn(t,s)},t.CustomElementResource=CustomElementResource,t.IProjectorLocator=IProjectorLocator,t.useShadowDOM=function(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:qs;return"function"==typeof t?s(t):s},t.valueConverter=function(t){return s=>ValueConverterResource.mn(t,s)},t.ValueConverterResource=ValueConverterResource,t.ISanitizer=ISanitizer,t.SanitizeValueConverter=SanitizeValueConverter,t.bindable=bindable,t.Aurelia=Aurelia,t.IDOMInitializer=IDOMInitializer,t.IfRegistration=IfRegistration,t.ElseRegistration=ElseRegistration,t.RepeatRegistration=RepeatRegistration,t.ReplaceableRegistration=ReplaceableRegistration,t.WithRegistration=WithRegistration,t.SanitizeValueConverterRegistration=SanitizeValueConverterRegistration,t.DebounceBindingBehaviorRegistration=DebounceBindingBehaviorRegistration,t.OneTimeBindingBehaviorRegistration=OneTimeBindingBehaviorRegistration,t.ToViewBindingBehaviorRegistration=ToViewBindingBehaviorRegistration,t.FromViewBindingBehaviorRegistration=FromViewBindingBehaviorRegistration,t.SignalBindingBehaviorRegistration=SignalBindingBehaviorRegistration,t.ThrottleBindingBehaviorRegistration=ThrottleBindingBehaviorRegistration,t.TwoWayBindingBehaviorRegistration=TwoWayBindingBehaviorRegistration,t.BasicResources=DefaultResources,t.ObserverLocatorRegistration=li,t.LifecycleRegistration=ui,t.RendererRegistration=ai,t.BasicConfiguration=fi,t.buildTemplateDefinition=buildTemplateDefinition,t.isTargetedInstruction=function(value){const type=value.type;return"string"==typeof type&&2===type.length},t.ITargetedInstruction=ITargetedInstruction,t.INode=INode,t.IRenderLocation=IRenderLocation,t.IDOM=IDOM,t.NodeSequence=NodeSequence,t.stringifyLifecycleFlags=function(s){const i=[];return s&t.LifecycleFlags.Y&&i.push("mustEvaluate"),s&t.LifecycleFlags.Ci&&i.push("isCollectionMutation"),s&t.LifecycleFlags.Oi&&i.push("isInstanceMutation"),s&t.LifecycleFlags.ji&&i.push("updateTargetObserver"),s&t.LifecycleFlags.K&&i.push("updateTargetInstance"),s&t.LifecycleFlags.Ti&&i.push("updateSourceExpression"),s&t.LifecycleFlags.Ai&&i.push("fromAsyncFlush"),s&t.LifecycleFlags.Si&&i.push("fromSyncFlush"),s&t.LifecycleFlags.Pi&&i.push("fromStartTask"),s&t.LifecycleFlags.Jt&&i.push("fromStopTask"),s&t.LifecycleFlags.et&&i.push("fromBind"),s&t.LifecycleFlags.Cs&&i.push("fromUnbind"),s&t.LifecycleFlags.Mt&&i.push("fromAttach"),s&t.LifecycleFlags.Ht&&i.push("fromDetach"),s&t.LifecycleFlags.ns&&i.push("fromCache"),s&t.LifecycleFlags.ki&&i.push("fromDOMEvent"),s&t.LifecycleFlags.Ri&&i.push("fromObserverSetter"),s&t.LifecycleFlags.Vi&&i.push("fromBindableHandler"),s&t.LifecycleFlags.Di&&i.push("fromLifecycleTask"),s&t.LifecycleFlags.Gt&&i.push("parentUnmountQueued"),s&t.LifecycleFlags.ot&&i.push("doNotUpdateDOM"),s&t.LifecycleFlags.$i&&i.push("isTraversingParentScope"),s&t.LifecycleFlags.Bi&&i.push("allowParentScopeTraversal"),s&t.LifecycleFlags.$t&&i.push("useProxies"),i.join("|")},t.CallBindingInstruction=class{constructor(from,to){this.type="rh",this.from=from,this.to=to}},t.FromViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Xs,this.oneTime=0,this.to=to}},t.HydrateAttributeInstruction=class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}},t.HydrateElementInstruction=class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}},t.HydrateTemplateController=class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}},t.InterpolationInstruction=class{constructor(from,to){this.type="rf",this.from=from,this.to=to}},t.IteratorBindingInstruction=class{constructor(from,to){this.type="rk",this.from=from,this.to=to}},t.LetBindingInstruction=class{constructor(from,to){this.type="ri",this.from=from,this.to=to}},t.LetElementInstruction=class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}},t.OneTimeBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.oneTime,this.oneTime=1,this.to=to}},t.RefBindingInstruction=class{constructor(from){this.type="rj",this.from=from}},t.SetPropertyInstruction=class{constructor(value,to){this.type="re",this.to=to,this.value=value}},t.ToViewBindingInstruction=class{constructor(from,to){this.type="rg",this.from=from,this.mode=t.BindingMode.Us,this.oneTime=0,this.to=to}},t.TwoWayBindingInstruction=class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=t.BindingMode.Ys,this.oneTime=0,this.to=to}},t.AggregateLifecycleTask=AggregateLifecycleTask,t.CompositionCoordinator=CompositionCoordinator,t.ILifecycle=ILifecycle,t.IRenderable=IRenderable,t.IViewFactory=IViewFactory,t.LifecycleTask=LifecycleTask,t.PromiseTask=class{constructor(t,s){this.done=0,this.Se=0,this.Ns=s,this.Ih=t.then(value=>{if(1!=this.Se)return this.done=1,this.Ns(value),value})}ye(){return!this.done}cancel(){this.ye()&&(this.Se=1)}Ce(){return this.Ih}},t.instructionRenderer=instructionRenderer,t.ensureExpression=ensureExpression,t.addAttachable=addAttachable,t.addBindable=addBindable,t.addEarlyBindable=addEarlyBindable,t.CompiledTemplate=class{constructor(dom,t,s,i){this.dom=dom,this.ml=t,this.Io=s,this.Yo=i}$s(s,host,parts,i=t.LifecycleFlags.Zs){const n=s.$nodes=this.Io.yl();s.$context=this.Yo,this.ml.$t&&(i|=t.LifecycleFlags.$t),this.Yo.$s(i,s,n.vo(),this.ml,host,parts)}},t.createRenderContext=createRenderContext,t.IInstructionRenderer=IInstructionRenderer,t.IRenderer=IRenderer,t.IRenderingEngine=IRenderingEngine,t.ITemplateCompiler=ITemplateCompiler,t.ITemplateFactory=ITemplateFactory,t})({},kernel);
