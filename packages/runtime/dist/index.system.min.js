System.register("runtime",["@aurelia/kernel"],function(t){"use strict";var Reporter,DI,Registration,PLATFORM,Profiler,RuntimeCompilationResources,IContainer,all;return{t:[function(t){Reporter=t.Reporter,DI=t.DI,Registration=t.Registration,PLATFORM=t.PLATFORM,Profiler=t.Profiler,RuntimeCompilationResources=t.RuntimeCompilationResources,IContainer=t.IContainer,all=t.all}],i(){function i(strategy){return 0==(strategy&Lt)||8===strategy?1|strategy:strategy}function s(t,i,s,e){var n,h,r=arguments.length,o=3>r?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,e);else for(h=t.length-1;h>=0;h--)(n=t[h])&&(o=(3>r?n(o):r>3?n(i,s,o):n(i,s))||o);return r>3&&o&&Object.defineProperty(i,s,o),o}function subscriberCollection(t){return function(i){const s=i.prototype;switch(s.s=0,s.h=null,s.o=null,s.l=null,s.u=null,s.g=e,s.v=n,s.p=c,s.m=l,t){case MutationKind.C:s.O=h;break;case MutationKind.R:s.O=r;break;case MutationKind.I:s.O=o}}}function e(t){if(this.p(t))return 0;const i=this.s;return 1&i?2&i?4&i?8&i?(this.u.push(t),1):(this.u=[t],this.s|=8,1):(this.l=t,this.s|=4,1):(this.o=t,this.s|=2,1):(this.h=t,this.s|=1,1)}function n(t){const i=this.s;if(1&i&&this.h===t)return this.h=null,this.s&=-2,1;if(2&i&&this.o===t)return this.o=null,this.s&=-3,1;if(4&i&&this.l===t)return this.l=null,this.s&=-5,1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s&=-9),1}return 0}function h(t,i,s){const e=this.h,n=this.o,h=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==h&&h.B(t,i,s);const o=r&&r.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=r[e];null!==n&&n.B(t,i,s)}}function r(t,i,s){const e=this.h,n=this.o,h=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==h&&h.B(t,i,s);const o=r&&r.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=r[e];null!==n&&n.B(t,i,s)}this.S.T(this).catch(t=>{throw t})}function o(t,i,s,e){const n=this.h,h=this.o,r=this.l;let o=this.u;null!==o&&(o=o.slice()),null!==n&&n.B(t,i,s,e),null!==h&&h.B(t,i,s,e),null!==r&&r.B(t,i,s,e);const l=o&&o.length;if(void 0!==l&&l>0)for(let n=0;l>n;++n){const h=o[n];null!==h&&h.B(t,i,s,e)}}function l(){return 0!==this.s}function c(t){const i=this.s;if(1&i&&this.h===t)return 1;if(2&i&&this.o===t)return 1;if(4&i&&this.l===t)return 1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const i=t.prototype;i.A=0,i.j=null,i.L=null,i.P=null,i.V=null,i.$=u,i.k=a,i.D=b,i.M=d,i.F=f}}function u(t){if(this.D(t))return 0;const i=this.A;return 1&i?2&i?4&i?8&i?(this.V.push(t),1):(this.V=[t],this.A|=8,1):(this.P=t,this.A|=4,1):(this.L=t,this.A|=2,1):(this.j=t,this.A|=1,1)}function a(t){const i=this.A;if(1&i&&this.j===t)return this.j=null,this.A&=-2,1;if(2&i&&this.L===t)return this.L=null,this.A&=-3,1;if(4&i&&this.P===t)return this.P=null,this.A&=-5,1;if(8&i){const i=this.V;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.A&=-9),1}return 0}function f(t,i){const s=this.j,e=this.L,n=this.P;let h=this.V;null!==h&&(h=h.slice()),null!==s&&s.N(t,i),null!==e&&e.N(t,i),null!==n&&n.N(t,i);const r=h&&h.length;if(void 0!==r&&r>0)for(let s=0;r>s;++s){const e=h[s];null!==e&&e.N(t,i)}}function d(){return 0!==this.A}function b(t){const i=this.A;if(1&i&&this.j===t)return 1;if(2&i&&this.L===t)return 1;if(4&i&&this.P===t)return 1;if(8&i){const i=this.V;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function g(value){return null!==value&&"object"==typeof value}function v(value,t){if(g(value))if(void 0!==value.U){const i=value.U;let s,e;for(s in i)void 0!==(e=i[s]).K&&e.K(t|LifecycleFlags.q|LifecycleFlags.H|LifecycleFlags.W)}else void 0!==value.G&&void 0!==value.G.K&&value.G.K(t|LifecycleFlags.q|LifecycleFlags.H|LifecycleFlags.W)}function p(t){0==this._&&(this._=1,this.J=this.X[this.Y],0==(this.Z&LifecycleFlags.q)&&(kt.get=(()=>this.tt()),kt.set=(value=>{this.it(value,LifecycleFlags.H)}),$t(this.X,this.Y,kt)||Reporter.write(1,this.Y,this.X))),this.g(t)}function m(){Reflect.deleteProperty(this.X,this.Y),this.X=null,this.Y=null,this.J=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.C)(t);const i=t.prototype;i._=0,i.X=null,i.Y=null,i.J=Symbol(),i.subscribe=i.subscribe||p,i.unsubscribe=i.unsubscribe||i.v,i.st=i.st||m}}function w(t){const i=BindingBehaviorResource.et(this.description.name);t.register(Registration.singleton(i,this))}function y(t){const i=this.kind.et(this.description.name);t.register(Registration.singleton(i,this))}function hasBind(t){return 2048==(2048&t.nt)}function hasUnbind(t){return 4096==(4096&t.nt)}function isLiteral(t){return 16384==(16384&t.nt)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.nt){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.ht);case 17925:return 1}return 0}function C(t,i,s,e){const n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}function O(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(t&LifecycleFlags.rt)&&null==s)return null;throw Reporter.error(207,i,name,s)}function R(t){if(t===Wt){const i=qt.length=Ht.length=(Wt+=5)+1;for(let s=t+1;i>s;++s)qt[s]=`_observer${s}`,Ht[s]=`_observerVersion${s}`}}function I(t){const i=void 0===this.ot?0:this.ot;let s=i;for(;s--&&this[qt[s]]!==t;);if(-1===s){for(s=0;this[qt[s]];)s++;this[qt[s]]=t,t.subscribe(this),s===i&&(this.ot=s+1)}void 0===this.version&&(this.version=0),this[Ht[s]]=this.version,R(s)}function B(t,i,s){const e=this.ct.lt(t,i,s);this.ut(e)}function T(t){const i=this.ot;let s,e;if(1==t)for(let t=0;i>t;++t)null!=(e=this[s=qt[t]])&&(this[s]=null,e.unsubscribe(this));else{const t=this.version;for(let n=0;i>n;++n)this[Ht[n]]!==t&&null!=(e=this[s=qt[n]])&&(this[s]=null,e.unsubscribe(this))}}function S(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.at=B),i.hasOwnProperty("unobserve")||(i.unobserve=T),i.hasOwnProperty("addObserver")||(i.ut=I),t}function connectable(t){return void 0===t?S:S(t)}function A(t,i){if(this.J!==(t=null==t?this.defaultValue:t)){if(this.J=t,!(i&(LifecycleFlags.W|LifecycleFlags.ft))||this.dt&&i&LifecycleFlags.bt)return this.gt=i,this.S.T(this);this.vt(t,i)}return Promise.resolve()}function j(t){if(this.dt&&t&LifecycleFlags.bt)return void this.S.T(this).catch(t=>{throw t});const i=this.J;this.oldValue!==i&&(this.vt(i,this.gt|t|LifecycleFlags.H),this.oldValue=this.J)}function L(t){const i=this.tt();this.J!==i&&(this.vt(i,this.gt|t|LifecycleFlags.H),this.J=i),v(i,t)}function P(){this.J=null,this.oldValue=null,this.defaultValue=null,this.X=null,this.Y=""}function targetObserver(t=null){return function(i){subscriberCollection(MutationKind.C)(i);const s=i.prototype;s.pt=null,s.J=t,s.oldValue=t,s.defaultValue=t,s.X=null,s.Y="",s.K=s.K||L,s.it=s.it||A,s.flush=s.flush||j,s.st=s.st||P}}function V(t){this.F(this.wt,t|this.Z),this.yt&&this.yt.K(LifecycleFlags.W|LifecycleFlags.H|this.Z),this.Ct()}function $(){this.R.G=void 0,this.R=null,this.wt=null}function k(){const t=this.R.length,i=this.wt=Array(t);let s=0;for(;t>s;)i[s]=s++;i.Ot=[]}function D(){const t=this.R.size,i=this.wt=Array(t);let s=0;for(;t>s;)i[s]=s++;i.Ot=[]}function M(){return void 0===this.yt?this.yt=new CollectionLengthObserver(this,this.Rt):this.yt}function collectionObserver(t){return function(i){subscriberCollection(MutationKind.R)(i),batchedSubscriberCollection()(i);const s=i.prototype;s.pt=null,s.R=null,s.wt=null,s.It=0,s.Rt=8&t?"length":"size",s.Bt=t,s.Ct=8&t?k:D,s.flush=V,s.st=$,s.Tt=M,s.subscribe=s.subscribe||s.g,s.unsubscribe=s.unsubscribe||s.v,s.St=s.St||s.$,s.At=s.At||s.k}}function F(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function x(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function E(t,i,from,to,s){let e,n,h,r,o,l,c;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],c=l-1;c>=from&&(r=i[c],(o=s(h=t[c],e))>0);c--)t[c+1]=h,i[c+1]=r;t[c+1]=e,i[c+1]=n}}function N(t,i,from,to,s){let e,n,h,r,o,l,c,u,a,f,d,b,g,v,p,m,w,y,C,O=0,R=0;for(;;){if(10>=to-from)return void E(t,i,from,to,s);r=i[from],o=i[to-1],h=t[O=from+(to-from>>1)],l=i[O],(c=s(e=t[from],n=t[to-1]))>0&&(f=e,d=r,e=n,r=o,n=f,o=d),0>(u=s(e,h))?(a=s(n,h))>0&&(f=n,d=o,n=h,o=l,h=f,l=d):(f=e,d=r,e=h,r=l,h=n,l=o,n=f,o=d),t[from]=e,i[from]=r,t[to-1]=h,i[to-1]=l,b=n,g=o,p=to-1,t[O]=t[v=from+1],i[O]=i[v],t[v]=b,i[v]=g;t:for(R=v+1;p>R;R++)if(w=i[R],0>(y=s(m=t[R],b)))t[R]=t[v],i[R]=i[v],t[v]=m,i[v]=w,v++;else if(y>0){do{if(--p==R)break t;y=s(C=t[p],b)}while(y>0);t[R]=t[p],i[R]=i[p],t[p]=m,i[p]=w,0>y&&(m=t[R],w=i[R],t[R]=t[v],i[R]=i[v],t[v]=m,i[v]=w,v++)}v-from>to-p?(N(t,i,p,to,s),to=v):(N(t,i,from,v,s),from=p)}}function enableArrayObservation(){for(const t of li)1!=Zt[t]._&&def(Zt,t,Object.assign({},ui,{value:ci[t]}))}function U(t,i,s){return s.G||new ArrayObserver(t,i,s)}function enableMapObservation(){for(const t of vi)1!=ai[t]._&&wi(ai,t,Object.assign({},mi,{value:pi[t]}))}function z(t,i,s){return s.G||new MapObserver(t,i,s)}function enableSetObservation(){for(const t of Bi)1!=yi[t]._&&Ai(yi,t,Object.assign({},Si,{value:Ti[t]}))}function K(t,i,s){return s.G||new SetObserver(t,i,s)}function getCollectionObserver(t,i,s){const e=s instanceof Object?ProxyObserver.jt(s):s;switch($i.call(s)){case"[object Array]":return U(t,i,e);case"[object Map]":return z(t,i,e);case"[object Set]":return K(t,i,e)}return null}function q(t,i,s){const e=this.Lt;PLATFORM.global.clearTimeout(e.Pt),e.Pt=PLATFORM.global.setTimeout(()=>{this.Vt(t,i,s)},e.$t)}function H(t,i,s){const e=this.Lt;if(PLATFORM.global.clearTimeout(e.Pt),!(s&e.kt))return e.oldValue=Ni,void this.Vt(t,i,s);e.oldValue===Ni&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=Ni,this.Vt(t,i,s)},e.$t);e.Pt=n}function W(t){const i=this.Dt,s=+new Date-i.Mt;if(s>=i.$t)return PLATFORM.global.clearTimeout(i.Pt),i.Pt=-1,i.Mt=+new Date,void this.Ft(t);if(i.newValue=t,-1===i.Pt){const t=PLATFORM.global.setTimeout(()=>{i.Pt=-1,i.Mt=+new Date,this.Ft(i.newValue)},i.$t-s);i.Pt=t}}function bindable(t,i){let s;const e=function(t,i){arguments.length>1&&(s.xt=i),zi.for(t.constructor).add(s)};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)}function Q(name){return`${Ki}:${name}`}function G(t){return void 0===t.$customElement?null:t.$customElement}function _(name){return`${qi}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,strategy){const def=new Qi,e=arguments.length;switch(e){case 13:null!==strategy&&(def.strategy=i(strategy));case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Hi:0==build?Wi:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=zi.for(t).get()),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(def.strategy=i(s.strategy),Gi.forEach(t=>{s[t]&&(def[t]=s[t])}),_i.forEach(t=>{s[t]&&(def[t]=PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===PLATFORM.Et?def.bindables=zi.for(s).get():Object.assign(def.bindables,s.bindables)))}return 2!==e||null===t||"string"!=typeof s&&"build"in s||(def.build=Hi),def}function J(t){if(8&this.$state)return;const i=this.$lifecycle;i.Nt(),this.$state|=4,t|=LifecycleFlags.Ut;const s=this.$hooks;16&s&&this.zt(t),this.$state|=8,this.$state&=-5,32&s&&i.Kt(this),i.qt(t)}function X(t){if(8&this.$state)return;const i=this.$lifecycle;i.Nt(),this.$state|=4,t|=LifecycleFlags.Ut;const s=this.$hooks;16&s&&this.zt(t);let e=this.Ht;for(;null!==e;)e.Wt(t),e=e.Qt;i.Gt(this),this.$state|=8,this.$state&=-5,32&s&&i.Kt(this),i.qt(t)}function Y(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.Ut;let i=this.Ht;for(;null!==i;)i.Wt(t),i=i.Qt;this.$lifecycle.Gt(this),this.$state|=8,this.$state&=-5}function Z(t){if(8&this.$state){const i=this.$lifecycle;i._t(),this.$state|=32,t|=LifecycleFlags.Jt;const s=this.$hooks;64&s&&this.Xt(t),this.$state&=-41,128&s&&i.Yt(this),i.Zt(t)}}function tt(t){if(8&this.$state){const i=this.$lifecycle;i._t(),this.$state|=32,(t|=LifecycleFlags.Jt)&LifecycleFlags.ti^LifecycleFlags.ti|t&LifecycleFlags.ii&&(i.si(this),t|=LifecycleFlags.ti);const s=this.$hooks;64&s&&this.Xt(t);let e=this.ei;for(;null!==e;)e.ni(t),e=e.hi;this.$state&=-41,128&s&&i.Yt(this),i.Zt(t)}}function it(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.Jt)&LifecycleFlags.ti^LifecycleFlags.ti|t&LifecycleFlags.ii&&(this.$lifecycle.si(this),t|=LifecycleFlags.ti);let i=this.ei;for(;null!==i;)i.ni(t),i=i.hi;this.$state&=-41}}function st(t){2048&this.$hooks&&this.ri(t|=LifecycleFlags.oi)}function et(t){t|=LifecycleFlags.oi,2048&this.$hooks&&this.ri(t);let i=this.ei;for(;null!==i;)i.li(t),i=i.hi}function nt(t){t|=LifecycleFlags.oi;let i=this.ei;for(;null!==i;)i.li(t),i=i.hi}function ht(){16&this.$state||(this.$state|=16,this.ui.ci(this.$nodes))}function rt(){16&this.$state&&(this.$state&=-17,this.ui.ai(this.$nodes))}function ot(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function lt(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.fi&&(this.fi=0,this.cache.di(this))?(this.$state|=128,1):0):0}function ct(t,i){if(t|=LifecycleFlags.ft,2&this.$state){if(this.$scope===i)return;this.bi(t)}const s=this.$lifecycle;s.gi(),this.$state|=1;const e=this.$hooks;8&e&&s.vi(this),this.$scope=i,4&e&&this.pi(t),this.$state|=2,this.$state&=-2,s.mi(t)}function ut(t,i){if(2&this.$state)return;const s=this.$scope;s.wi=i;const e=this.$lifecycle;e.gi(),this.$state|=1;const n=this.$hooks;t|=LifecycleFlags.ft,8&n&&e.vi(this);let h=this.yi;for(;null!==h;)h.Ci(t,s),h=h.Oi;4&n&&this.pi(t);let component=this.Ht;for(;null!==component;)component.Ci(t,s),component=component.Qt;this.$state|=2,this.$state&=-2,e.mi(t)}function at(t,i){if(t|=LifecycleFlags.ft,2&this.$state){if(this.$scope===i)return;this.bi(t)}this.$state|=1,this.$scope=i;let s=this.yi;for(;null!==s;)s.Ci(t,i),s=s.Oi;let component=this.Ht;for(;null!==component;)component.Ci(t,i),component=component.Qt;this.$state|=2,this.$state&=-2}function ft(t){if(t|=LifecycleFlags.ft,2&this.$state)return;this.$state|=1;const i=this.$scope;let s=this.yi;for(;null!==s;)s.Ci(t,i),s=s.Oi;let component=this.Ht;for(;null!==component;)component.Ci(t,i),component=component.Qt;this.$state|=2,this.$state&=-2}function dt(t){if(2&this.$state){const i=this.$lifecycle;i.Ri(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.Ii,512&s&&i.Bi(this),256&s&&this.Ti(t),this.$state&=-67,i.Si(t)}}function bt(t){if(2&this.$state){const i=this.$lifecycle;i.Ri(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.Ii,512&s&&i.Bi(this),256&s&&this.Ti(t);let component=this.ei;for(;null!==component;)component.bi(t),component=component.hi;let e=this.Ai;for(;null!==e;)e.bi(t),e=e.ji;this.$scope.wi=null,this.$state&=-67,i.Si(t)}}function gt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ii;let component=this.ei;for(;null!==component;)component.bi(t),component=component.hi;let i=this.Ai;for(;null!==i;)i.bi(t),i=i.ji;this.$state&=-67,this.$scope=null}}function vt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ii;let component=this.ei;for(;null!==component;)component.bi(t),component=component.hi;let i=this.Ai;for(;null!==i;)i.bi(t),i=i.ji;this.$state&=-67}}function pt(t){v(this,t);let component=this.Ht;for(;component;)component.K(t),component=component.Qt;let i=this.yi;for(;i;)void 0!==i.K&&i.K(t),i=i.Oi}function createRenderContext(dom,t,dependencies,i){const s=t.Li(),e=new es,n=new es,h=new es,r=new ns,o=new es,l=s.get(IRenderer);return dom.Pi(s,n),s.Vi(IViewFactory,r),s.Vi(IRenderable,e),s.Vi(ITargetedInstruction,h),s.Vi(IRenderLocation,o),dependencies&&s.register(...dependencies),i&&i.register(s),s.$i=function(t,i,targets,s,host,parts){l.$i(t,dom,this,i,targets,s,host,parts)},s.ki=function(t,i,l,c,parts,u){return e.Di(t),n.Di(i),h.Di(l),c&&r.Di(c,parts),u&&o.Di(u),s},s.st=function(){r.st(),e.st(),h.st(),n.st(),o.st()},s}function mt(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=G(t[s]);null!==component&&i.push(component)}return i}function wt(t,i,name){Reflect.defineProperty(i,name,{Mi:1,get(){return this.U[name].tt()},set(value){this.U[name].it(value,t&LifecycleFlags.Fi|LifecycleFlags.H)}})}function yt(t){const i=this.kind.et(this.description.name);t.register(Registration.transient(i,this))}function Ct(t){return t.containerless=1,t}function Ot(t,i){const s=this.constructor;t|=s.description.strategy;const e=i.get(IRenderingEngine);let n;n=t&LifecycleFlags.xi?ProxyObserver.Ei(this).I:this,e.Ni(t,s,this),2&this.$hooks&&n.Ui(t)}function Rt(t,i,host,s=PLATFORM.Et){const e=this.constructor,n=e.description;t|=n.strategy;const h=i.get(IProjectorLocator),r=i.get(IRenderingEngine),dom=i.get(IDOM);let o;if(o=t&LifecycleFlags.xi?ProxyObserver.Ei(this).I:this,this.$scope=Scope.create(t,o,null),this.zi=host,this.ui=h.Ki(dom,this,host,n),r.Ni(t,e,this),1024&this.$hooks){const n=this.$i(t,host,s.parts,i);n&&"getElementTemplate"in n&&n.qi(r,e,i).$i(this,host,s.parts)}else r.qi(dom,n,i,e).$i(this,host,s.parts);2&this.$hooks&&o.Ui(t)}function It(t){const i=this.description,s=this.kind.et(i.name),aliases=i.aliases;t.register(Registration.transient(s,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.et(aliases[i]);t.register(Registration.Hi(s,e))}}function Bt(t){return t.Wi=1,t}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Qi=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){i.ji=t.Ai,i.Oi=null,null===t.Ai?t.yi=i:t.Ai.Oi=i,t.Ai=i}function addComponent(t,component){component.hi=t.ei,component.Qt=null,null===t.ei?t.Ht=component:t.ei.Qt=component,t.ei=component}var BindingMode,BindingStrategy,State,Hooks,LifecycleFlags,ExpressionKind,Tt,DelegationStrategy,MutationKind,CollectionKind,St,At,jt,BindingType,TargetedInstructionType,ViewCompileFlags;t({connects:t=>32==(32&t.nt),observes:t=>64==(64&t.nt),callsFunction:t=>128==(128&t.nt),hasAncestor:t=>256==(256&t.nt),isAssignable:t=>8192==(8192&t.nt),isLeftHandSide:t=>1024==(1024&t.nt),isPrimary:t=>512==(512&t.nt),isResource:t=>32768==(32768&t.nt),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,connectable,BindingType:void 0,enableArrayObservation,disableArrayObservation(){for(const t of li)1==Zt[t]._&&def(Zt,t,Object.assign({},ui,{value:oi[t]}))},enableMapObservation,disableMapObservation(){for(const t of vi)1==ai[t]._&&wi(ai,t,Object.assign({},mi,{value:gi[t]}))},enableSetObservation,disableSetObservation(){for(const t of Bi)1==yi[t]._&&Ai(yi,t,Object.assign({},Si,{value:Ii[t]}))},collectionObserver,computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),getCollectionObserver,propertyObserver,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>i=>BindingBehaviorResource.Gi(t,i),customAttribute:t=>i=>CustomAttributeResource.Gi(t,i),dynamicOptions:t=>void 0===t?Bt:Bt(t),templateController:t=>i=>CustomAttributeResource.Gi("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),i),containerless:t=>void 0===t?Ct:Ct(t),customElement:t=>i=>CustomElementResource.Gi(t,i),useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:os;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Gi(t,i),bindable,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},TargetedInstructionType:void 0,BindingMode:void 0,BindingStrategy:void 0,ExpressionKind:void 0,Hooks:void 0,LifecycleFlags:void 0,State:void 0,CollectionKind:void 0,DelegationStrategy:void 0,MutationKind:void 0,instructionRenderer,ensureExpression,addComponent,addBinding,createRenderContext,ViewCompileFlags:void 0}),(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode._i=2]="toView",BindingMode[BindingMode.Ji=4]="fromView",BindingMode[BindingMode.Xi=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode=t("BindingMode",{}))),(function(BindingStrategy){BindingStrategy[BindingStrategy.Yi=1]="getterSetter",BindingStrategy[BindingStrategy.Zi=2]="proxies",BindingStrategy[BindingStrategy.ts=4]="patch",BindingStrategy[BindingStrategy.ss=8]="keyed"})(BindingStrategy||(BindingStrategy=t("BindingStrategy",{})));const Lt=7;(function(State){State[State.es=0]="none",State[State.ns=1]="isBinding",State[State.hs=2]="isBound",State[State.rs=4]="isAttaching",State[State.os=8]="isAttached",State[State.ls=16]="isMounted",State[State.cs=32]="isDetaching",State[State.us=64]="isUnbinding",State[State.as=128]="isCached",State[State.fs=256]="isContainerless",State[State.ds=512]="isPatching"})(State||(State=t("State",{}))),(function(Hooks){Hooks[Hooks.es=1]="none",Hooks[Hooks.bs=2]="hasCreated",Hooks[Hooks.gs=4]="hasBinding",Hooks[Hooks.vs=8]="hasBound",Hooks[Hooks.ps=16]="hasAttaching",Hooks[Hooks.ms=32]="hasAttached",Hooks[Hooks.ws=64]="hasDetaching",Hooks[Hooks.ys=128]="hasDetached",Hooks[Hooks.Cs=256]="hasUnbinding",Hooks[Hooks.Os=512]="hasUnbound",Hooks[Hooks.Rs=1024]="hasRender",Hooks[Hooks.Is=2048]="hasCaching"})(Hooks||(Hooks=t("Hooks",{}))),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.es=0]="none",LifecycleFlags[LifecycleFlags.rt=8388608]="mustEvaluate",LifecycleFlags[LifecycleFlags.Bs=15]="bindingStrategy",LifecycleFlags[LifecycleFlags.Ts=1]="getterSetterStrategy",LifecycleFlags[LifecycleFlags.xi=2]="proxyStrategy",LifecycleFlags[LifecycleFlags.q=4]="patchStrategy",LifecycleFlags[LifecycleFlags.Ss=8]="keyedStrategy",LifecycleFlags[LifecycleFlags.As=48]="mutation",LifecycleFlags[LifecycleFlags.js=16]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Ls=32]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=448]="update",LifecycleFlags[LifecycleFlags.Ps=64]="updateTargetObserver",LifecycleFlags[LifecycleFlags.H=128]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Vs=256]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=8388096]="from",LifecycleFlags[LifecycleFlags.W=3584]="fromFlush",LifecycleFlags[LifecycleFlags.$s=512]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.ks=1024]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Ds=2048]="fromTick",LifecycleFlags[LifecycleFlags.Ms=4096]="fromStartTask",LifecycleFlags[LifecycleFlags.ii=8192]="fromStopTask",LifecycleFlags[LifecycleFlags.ft=16384]="fromBind",LifecycleFlags[LifecycleFlags.Ii=32768]="fromUnbind",LifecycleFlags[LifecycleFlags.Ut=65536]="fromAttach",LifecycleFlags[LifecycleFlags.Jt=131072]="fromDetach",LifecycleFlags[LifecycleFlags.oi=262144]="fromCache",LifecycleFlags[LifecycleFlags.Fs=524288]="fromDOMEvent",LifecycleFlags[LifecycleFlags.xs=1048576]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Es=2097152]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Ns=4194304]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.ti=16777216]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.bt=33554432]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Us=67108864]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.zs=134217728]="isOriginalArray",LifecycleFlags[LifecycleFlags.Fi=268435471]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Ks=268435456]="allowParentScopeTraversal"})(LifecycleFlags||(LifecycleFlags=t("LifecycleFlags",{}))),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.qs=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.Hs=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind=t("ExpressionKind",{}))),(function(t){t[t.Ws=0]="None",t[t.Qs=1]="Subscriber0",t[t.Gs=2]="Subscriber1",t[t._s=4]="Subscriber2",t[t.Js=8]="SubscribersRest",t[t.Xs=15]="Any"})(Tt||(Tt={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.es=0]="none",DelegationStrategy[DelegationStrategy.Ys=1]="capturing",DelegationStrategy[DelegationStrategy.Zs=2]="bubbling"})(DelegationStrategy||(DelegationStrategy=t("DelegationStrategy",{}))),(function(MutationKind){MutationKind[MutationKind.C=1]="instance",MutationKind[MutationKind.R=2]="collection",MutationKind[MutationKind.I=4]="proxy"})(MutationKind||(MutationKind=t("MutationKind",{}))),(function(CollectionKind){CollectionKind[CollectionKind.te=8]="indexed",CollectionKind[CollectionKind.ss=4]="keyed",CollectionKind[CollectionKind.ie=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind=t("CollectionKind",{})));const Pt=new WeakMap;let Vt=class{constructor(t,i,s){this.raw=i,this.key=s,this.I=t,this.subscribe=this.g,this.unsubscribe=this.v,i[s]instanceof Object&&(i[s]=ProxyObserver.Ei(i[s]).I)}it(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.O(value,i,t|LifecycleFlags.xi|LifecycleFlags.H))}tt(){return this.raw[this.key]}};Vt=s([subscriberCollection(MutationKind.C)],Vt);let ProxyObserver=t("ProxyObserver",St=class{constructor(t){this.raw=t,this.I=new Proxy(t,this),Pt.set(t,this.I),this.se={}}static ee(t){if(void 0===t.ne){const i=Pt.get(t);return void 0===i?t:i}return t}static jt(t){const i=t.ne;return void 0===i?t:i}static Ei(t,i){let s;if(void 0===t.ne){const i=Pt.get(t);s=void 0===i?new St(t):i.G}else s=t.G;if(1===arguments.length)return s;let e=s.se[i];if(void 0===e){const n=this.jt(t);e=s.se[i]=new Vt(s.I,n,i)}return e}static he(t){return void 0!==t.ne}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(Reflect.set(t,i,value,t),this.re(value,e,i),this.O(i,value,e,LifecycleFlags.xi|LifecycleFlags.H)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.re(void 0,s,i),this.O(i,void 0,s,LifecycleFlags.xi|LifecycleFlags.H)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.re(s.value,e,i),this.O(i,s.value,e,LifecycleFlags.xi|LifecycleFlags.H)),1):0}apply(t,i,s){return Reflect.apply(t,t,s)}subscribe(t,i){if(1===arguments.length)this.g(t);else{let s=this.se[i];void 0===s&&(s=this.se[i]=new Vt(this.I,this.raw,i)),s.g(t)}}unsubscribe(t,i){if(1===arguments.length)this.v(t);else{const s=this.se[i];void 0!==s&&s.v(t)}}re(t,i,s){const e=this.se[s];void 0!==e&&e.O(t,i,LifecycleFlags.xi|LifecycleFlags.H)}});ProxyObserver=t("ProxyObserver",St=s([subscriberCollection(MutationKind.I)],ProxyObserver));const $t=Reflect.defineProperty,kt={get:void 0,set:void 0,Mi:1,oe:1};let SetterObserver=t("SetterObserver",class{constructor(t,i,s){this.Z=t&LifecycleFlags.Fi,this.X=i,this.Y=s,t&LifecycleFlags.q&&(this.tt=this.le)}tt(){return this.J}le(){return this.X[this.Y]}it(t,i){const s=this.J;(s!==t||i&LifecycleFlags.q)&&(this.J=t,i&LifecycleFlags.ft||this.O(t,s,this.Z|i),this._||(this.X[this.Y]=t))}K(t){this.O(this.X[this.Y],this.J,this.Z|t),v(this.X[this.Y],t)}});SetterObserver=t("SetterObserver",s([propertyObserver()],SetterObserver)),(function(t){t[t.ce=250]="UndefinedScope",t[t.ue=251]="NullScope",t[t.ae=252]="NilOverrideContext",t[t.fe=253]="NilParentScope"})(At||(At={}));class Dt{Ei(t,i,s){return void 0===this[s]&&(this[s]=new SetterObserver(t,i,s)),this[s]}}class BindingContext{constructor(t,value){if(this.de=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return t&LifecycleFlags.xi?ProxyObserver.Ei(s).I:s}static get(t,name,i,s){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let e=t.be;if(i>0){for(;i>0;){if(null===e.ge)return;i--,e=e.ge}return name in e?e:e.ve}for(;e&&!(name in e)&&!(e.ve&&name in e.ve);)e=e.ge;if(e)return name in e?e:e.ve;if(s&LifecycleFlags.Ks&&null!==t.wi){const e=this.get(t.wi,name,i,s&~LifecycleFlags.Ks|LifecycleFlags.Us);if(null!==e)return e}return s&LifecycleFlags.Us?null:t.ve||t.be}pe(t){return void 0===this.U&&(this.U=new Dt),this.U}}t("BindingContext",BindingContext);class Scope{constructor(t,i){this.ve=t,this.be=i,this.wi=null}static create(t,i,s){return new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static me(t,i){if(null==i)throw Reporter.error(252);return new Scope(i.ve,i)}static we(t,i,s){if(null==i)throw Reporter.error(253);return new Scope(s,OverrideContext.create(t,s,i.be))}}t("Scope",Scope);class OverrideContext{constructor(t,i){this.de=1,this.ve=t,this.ge=i}static create(t,i,s){return new OverrideContext(i,void 0===s?null:s)}pe(){return void 0===this.U&&(this.U=new Dt),this.U}}t("OverrideContext",OverrideContext);const ISignaler=t("ISignaler",DI.Ce("ISignaler").ye(t=>t.singleton(Mt)));class Mt{constructor(){this.Oe=Object.create(null)}Re(name,t){const i=this.Oe[name];if(void 0!==i)for(const s of i.keys())s.B(void 0,void 0,t|LifecycleFlags.H)}Ie(name,t){const i=this.Oe,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}Be(name,t){const i=this.Oe[name];i&&i.delete(t)}}const BindingBehaviorResource=t("BindingBehaviorResource",{name:"binding-behavior",et(name){return`${this.name}:${name}`},Te(t){return t.kind===this},Gi(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=BindingBehaviorResource,s.description=e,s.register=w,s}}),ValueConverterResource=t("ValueConverterResource",{name:"value-converter",et(name){return`${this.name}:${name}`},Te(t){return t.kind===this},Gi(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=y,s}});(function(t){t[t.Se=202]="NoLocator",t[t.Ae=203]="NoBehaviorFound",t[t.je=204]="BehaviorAlreadyApplied",t[t.Le=205]="NoConverterFound",t[t.Pe=206]="NoBinding",t[t.Ve=207]="NotAFunction",t[t.$e=208]="UnknownOperator",t[t.ce=250]="UndefinedScope",t[t.ue=251]="NullScope"})(jt||(jt={})),t("BindingBehavior",class{constructor(t,name,i){this.nt=38962,this.ke=t,this.name=name,this.De=i,this.Me=BindingBehaviorResource.et(this.name)}evaluate(t,i,s){return this.ke.evaluate(t,i,s)}assign(t,i,s,value){return this.ke.assign(t,i,s,value)}connect(t,i,s){this.ke.connect(t,i,s)}bind(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.Fe;if(!e)throw Reporter.error(202,this);hasBind(this.ke)&&this.ke.bind(t,i,s);const n=this.Me,h=e.get(n);if(!h)throw Reporter.error(203,this);null==s[n]?(s[n]=h,h.bind.apply(h,[t,i,s].concat(C(t,i,e,this.De)))):Reporter.write(204,this)}xe(t,i,s){const e=this.Me;null!=s[e]?(s[e].xe(t,i,s),s[e]=null):Reporter.write(204,this),hasUnbind(this.ke)&&this.ke.xe(t,i,s)}accept(t){return t.Ee(this)}}),t("ValueConverter",class{constructor(t,name,i){this.nt=36913,this.ke=t,this.name=name,this.De=i,this.Ne=ValueConverterResource.et(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ne);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.De,h=n.length,r=Array(h+1);r[0]=this.ke.evaluate(t,i,s);for(let e=0;h>e;++e)r[e+1]=n[e].evaluate(t,i,s);return e._i.apply(e,r)}return this.ke.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Ne);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.Ji.apply(e,[value].concat(C(t,i,s,this.De)))),this.ke.assign(t,i,s,value)}connect(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.Fe;if(!e)throw Reporter.error(202,this);this.ke.connect(t,i,s);const n=this.De;for(let e=0,h=n.length;h>e;++e)n[e].connect(t,i,s);const h=e.get(this.Ne);if(!h)throw Reporter.error(205,this);const r=h.Oe;if(void 0===r)return;const o=e.get(ISignaler);for(let t=0,i=r.length;i>t;++t)o.Ie(r[t],s)}xe(t,i,s){const e=s.Fe,n=e.get(this.Ne).Oe;if(void 0===n)return;const h=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)h.Be(n[t],s)}accept(t){return t.Ue(this)}}),t("Assign",class{constructor(t,value){this.nt=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.ze(this)}}),t("Conditional",class{constructor(t,i,s){this.nt=63,this.assign=PLATFORM.Ke,this.qe=t,this.He=i,this.We=s}evaluate(t,i,s){return this.qe.evaluate(t,i,s)?this.He.evaluate(t,i,s):this.We.evaluate(t,i,s)}connect(t,i,s){this.qe.evaluate(t,i,null)?(this.qe.connect(t,i,s),this.He.connect(t,i,s)):(this.qe.connect(t,i,s),this.We.connect(t,i,s))}accept(t){return t.Qe(this)}});class AccessThis{constructor(t=0){this.nt=1793,this.assign=PLATFORM.Ke,this.connect=PLATFORM.Ke,this.Ge=t}evaluate(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);let e=i.be,n=this.Ge;for(;n--&&e;)e=e.ge;return 1>n&&e?e.ve:void 0}accept(t){return t._e(this)}}t("AccessThis",AccessThis),AccessThis.Je=new AccessThis(0),AccessThis.Xe=new AccessThis(1);class AccessScope{constructor(name,t=0){this.nt=10082,this.name=name,this.Ge=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.Ge,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.Ge,t);return e?e[this.name]=value:void 0}connect(t,i,s){const e=BindingContext.get(i,this.name,this.Ge,t);s.at(t,e,this.name)}accept(t){return t.Ye(this)}}t("AccessScope",AccessScope);class AccessMember{constructor(t,name){this.nt=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){let e=this.object.evaluate(t,i,s);return null!==e&&"object"==typeof e||this.object.assign(t,i,s,e={}),e[this.name]=value,value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e&&s.at(t,e,this.name)}accept(t){return t.Ze(this)}}t("AccessMember",AccessMember),t("AccessKeyed",class{constructor(t,i){this.nt=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(null!=e)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),"object"==typeof e&&null!==e){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const i=value.length;if(0===i)return 0;let s;for(let t=0;i>t;++t)if(48>(s=value.charCodeAt(t))||s>57)return 0;return 1})(n)?t&LifecycleFlags.xi&&s.at(t,e,n):s.at(t,e,n)}}accept(t){return t.tn(this)}});class CallScope{constructor(name,t,i=0){this.nt=1448,this.assign=PLATFORM.Ke,this.name=name,this.De=t,this.Ge=i}evaluate(t,i,s){const e=C(t,i,s,this.De),n=BindingContext.get(i,this.name,this.Ge,t),h=O(t,n,this.name);if(h)return h.apply(n,e)}connect(t,i,s){const e=this.De;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.in(this)}}t("CallScope",CallScope);class CallMember{constructor(t,name,i){this.nt=1161,this.assign=PLATFORM.Ke,this.object=t,this.name=name,this.De=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=C(t,i,s,this.De),h=O(t,e,this.name);if(h)return h.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),O(t&~LifecycleFlags.rt,e,this.name)){const e=this.De;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.sn(this)}}t("CallMember",CallMember),t("CallFunction",class{constructor(t,i){this.nt=1162,this.assign=PLATFORM.Ke,this.en=t,this.De=i}evaluate(t,i,s){const e=this.en.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,C(t,i,s,this.De));if(t&LifecycleFlags.rt||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.en.evaluate(t,i,null);if(this.en.connect(t,i,s),"function"==typeof e){const e=this.De;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.nn(this)}}),t("Binary",class{constructor(t,i,s){this.nt=46,this.assign=PLATFORM.Ke,this.hn=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.hn&&!e||"||"===this.hn&&e||this.right.connect(t,i,s)}rn(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}on(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}ln(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}cn(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}un(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}an(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}fn(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}dn(t,i,s){const e=this.right.evaluate(t,i,s);return null!==e&&"object"==typeof e?this.left.evaluate(t,i,s)in e:0}bn(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}gn(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}vn(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}pn(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}mn(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}wn(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}yn(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}Cn(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}On(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.Rn(this)}}),t("Unary",class{constructor(t,i){this.nt=39,this.assign=PLATFORM.Ke,this.hn=t,this.ke=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.ke.connect(t,i,s)}In(t,i,s){this.ke.evaluate(t,i,s)}Bn(t,i,s){return typeof this.ke.evaluate(t,i,s)}Tn(t,i,s){return!this.ke.evaluate(t,i,s)}gn(t,i,s){return-this.ke.evaluate(t,i,s)}bn(t,i,s){return+this.ke.evaluate(t,i,s)}accept(t){return t.Sn(this)}});class PrimitiveLiteral{constructor(value){this.nt=17925,this.assign=PLATFORM.Ke,this.connect=PLATFORM.Ke,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.An(this)}}t("PrimitiveLiteral",PrimitiveLiteral),PrimitiveLiteral.jn=new PrimitiveLiteral(void 0),PrimitiveLiteral.Ln=new PrimitiveLiteral(null),PrimitiveLiteral.Pn=new PrimitiveLiteral(1),PrimitiveLiteral.Vn=new PrimitiveLiteral(0),PrimitiveLiteral.$n=new PrimitiveLiteral(""),t("HtmlLiteral",class{constructor(parts){this.nt=51,this.assign=PLATFORM.Ke,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let h=0,r=e.length;r>h;++h)null!=(value=e[h].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.kn(this)}});class ArrayLiteral{constructor(t){this.nt=17955,this.assign=PLATFORM.Ke,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}connect(t,i,s){const e=this.elements;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Dn(this)}}t("ArrayLiteral",ArrayLiteral),ArrayLiteral.$n=new ArrayLiteral(PLATFORM.Mn);class ObjectLiteral{constructor(t,i){this.nt=17956,this.assign=PLATFORM.Ke,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,h=this.values;for(let r=0,o=n.length;o>r;++r)e[n[r]]=h[r].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,h=this.keys.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Fn(this)}}t("ObjectLiteral",ObjectLiteral),ObjectLiteral.$n=new ObjectLiteral(PLATFORM.Mn,PLATFORM.Mn);class Template{constructor(t,i){this.nt=17958,this.assign=PLATFORM.Ke,this.xn=t,this.ht=void 0===i?PLATFORM.Mn:i}evaluate(t,i,s){const e=this.ht,n=this.xn;let h=n[0];for(let r=0,o=e.length;o>r;++r)h+=e[r].evaluate(t,i,s),h+=n[r+1];return h}connect(t,i,s){const e=this.ht;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.En(this)}}t("Template",Template),Template.$n=new Template([""]),t("TaggedTemplate",class{constructor(t,i,s,e){this.nt=1197,this.assign=PLATFORM.Ke,this.xn=t,this.xn.raw=i,this.en=s,this.ht=void 0===e?PLATFORM.Mn:e}evaluate(t,i,s){const e=this.ht,n=e.length,h=Array(n);for(let r=0,o=n;o>r;++r)h[r]=e[r].evaluate(t,i,s);const r=this.en.evaluate(t,i,s);if("function"!=typeof r)throw Reporter.error(207,this);return r.apply(null,[this.xn].concat(h))}connect(t,i,s){const e=this.ht;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s);this.en.connect(t,i,s)}accept(t){return t.Nn(this)}}),t("ArrayBindingPattern",class{constructor(t){this.nt=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Un(this)}}),t("ObjectBindingPattern",class{constructor(t,i){this.nt=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.zn(this)}}),t("BindingIdentifier",class{constructor(name){this.nt=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Kn(this)}});const Ft={}.toString;t("ForOfStatement",class{constructor(t,i){this.nt=6199,this.assign=PLATFORM.Ke,this.qn=t,this.Hn=i}evaluate(t,i,s){return this.Hn.evaluate(t,i,s)}count(t,i){return Nt[Ft.call(i)](i)}Wn(t,i,s){Et[Ft.call(i)](t|LifecycleFlags.zs,i,s)}connect(t,i,s){this.qn.connect(t,i,s),this.Hn.connect(t,i,s)}bind(t,i,s){hasBind(this.Hn)&&this.Hn.bind(t,i,s)}xe(t,i,s){hasUnbind(this.Hn)&&this.Hn.xe(t,i,s)}accept(t){return t.Qn(this)}}),t("Interpolation",class{constructor(parts,t){this.nt=24,this.assign=PLATFORM.Ke,this.parts=parts,this.ht=void 0===t?PLATFORM.Mn:t,this.Gn=this.ht.length>1,this._n=this.ht[0]}evaluate(t,i,s){if(this.Gn){const e=this.ht,parts=this.parts;let n=parts[0];for(let h=0,r=e.length;r>h;++h)n+=e[h].evaluate(t,i,s),n+=parts[h+1];return n}{const parts=this.parts;return parts[0]+this._n.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.Jn(this)}});const xt=LifecycleFlags.xi|LifecycleFlags.zs,Et={Xn(t,i,s){if((t&xt)===xt){const t=ProxyObserver.jt(i),e=t.length;let n,h=0;for(;e>h;++h)(n=t[h])instanceof Object&&(n=t[h]=ProxyObserver.Ei(n).I),s(t,h,n)}else for(let t=0,e=i.length;e>t;++t)s(i,t,i[t])},Yn(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.entries())e[++n]=t;Et["Xn"](t&~LifecycleFlags.zs,e,s)},Zn(t,i,s){const e=Array(i.size);let n=-1;for(const t of i.keys())e[++n]=t;Et["Xn"](t&~LifecycleFlags.zs,e,s)},th(t,i,s){const e=Array(i);for(let t=0;i>t;++t)e[t]=t;Et["Xn"](t&~LifecycleFlags.zs,e,s)},ih(t,i,s){},sh(t,i,s){}},Nt={Xn:t=>t.length,Yn:t=>t.size,Zn:t=>t.size,th:t=>t,ih:()=>0,sh:()=>0},IRenderable=t("IRenderable",DI.Ce("IRenderable").eh()),IViewFactory=t("IViewFactory",DI.Ce("IViewFactory").eh()),Ut=Object.freeze(Object.create(null)),ILifecycle=t("ILifecycle",DI.Ce("ILifecycle").ye(t=>t.singleton(zt)));class zt{constructor(){this.nh=0,this.hh=0,this.rh=0,this.oh=0,this.lh=0,this.uh=this,this.ah=this,this.fh=this,this.dh=this,this.bh=this,this.gh=this,this.vh=this,this.ph=this,this.mh=this,this.wh=this,this.yh=this,this.Ch=this,this.Oh=this,this.Rh=this,this.Ih=this,this.Bh=this,this.Th=this,this.Sh=this,this.Ah=null,this.jh=Promise.resolve(),this.Lh=0,this.Ph=0,this.Vh=0,this.$h=0,this.kh=0,this.Dh=0,this.Mh=0,this.Fh=0,this.xh=0,this.Eh=0,this.pt=Ut,this.flush=PLATFORM.Ke,this.Nh=Ut,this.connect=PLATFORM.Ke,this.Uh=Ut,this.bound=PLATFORM.Ke,this.zh=Ut,this.Kh=PLATFORM.Ke,this.qh=Ut,this.Hh=PLATFORM.Ke,this.Wh=Ut,this.Qh=PLATFORM.Ke,this.Gh=Ut,this._h=PLATFORM.Ke,this.Jh=Ut,this.bi=PLATFORM.Ke,this.Xh=Ut,this.Yh=PLATFORM.Ke,this.Zh=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}tr(t){null===this.Zh&&(this.Zh=new AggregateLifecycleTask),this.Zh.ir(t)}sr(t){null!==this.Zh&&(this.Zh===t?this.Zh=null:this.Zh.er(t))}T(t){return this.uh===this&&(this.Ah=this.jh.then(()=>{this.nr(LifecycleFlags.$s)})),null===t.pt&&(t.pt=Ut,this.ah.pt=t,this.ah=t,++this.Lh),this.Ah}nr(t){for(t|=LifecycleFlags.ks;this.Lh>0;){let i,s=this.uh.pt;this.uh=this.ah=this,this.Lh=0;do{i=s.pt,s.pt=null,s.flush(t),s=i}while(s!==Ut);if(t&LifecycleFlags.bt)break}}gi(){++this.nh}vi(t){null===t.Uh&&(t.Uh=Ut,this.gh.Uh=t,this.gh=t,++this.$h)}hr(t){null===t.Nh&&(t.Nh=Ut,this.dh.Nh=t,this.dh=t,++this.Ph)}rr(t){if(this.Ph>0){this.Ph=0;let i,s=this.fh.Nh;this.fh=this.dh=this;do{s.connect(t),i=s.Nh,s.Nh=null,s=i}while(s!==Ut)}}mi(t){if(0==--this.nh)return null===this.Zh||this.Zh.done?(this.or(t),LifecycleTask.done):(this.Zh.lr=this,this.Zh)}or(t){for(t&LifecycleFlags.Ms&&this.nr(t|LifecycleFlags.ks);this.$h>0;){this.$h=0;let i,s=this.bh.Uh;this.bh=this.gh=this;do{s.bound(t),i=s.Uh,s.Uh=null,s=i}while(s!==Ut)}}Ri(){++this.lh}Bi(t){null===t.Xh&&(t.Xh=Ut,this.Sh.Xh=t,this.Sh=t,++this.Eh)}Si(t){if(0==--this.lh)return null===this.Zh||this.Zh.done?(this.cr(t),LifecycleTask.done):(this.Zh.lr=this,this.Zh)}cr(t){for(;this.Eh>0;){this.Eh=0;let i,s=this.Th.Xh;this.Th=this.Sh=this;do{s.Yh(t),i=s.Xh,s.Xh=null,s=i}while(s!==Ut)}}Nt(){++this.rh}Gt(t){null===t.zh&&(t.zh=Ut,this.ph.zh=t,this.ph=t,++this.kh)}Kt(t){null===t.qh&&(t.qh=Ut,this.wh.qh=t,this.wh=t,++this.Dh)}qt(t){if(0==--this.rh)return null===this.Zh||this.Zh.done?(this.ur(t),LifecycleTask.done):(this.Zh.lr=this,this.Zh)}ur(t){if(this.nr(t|LifecycleFlags.ks),this.kh>0){this.kh=0;let i,s=this.vh.zh;this.vh=this.ph=this;do{s.Kh(t),i=s.zh,s.zh=null,s=i}while(s!==Ut)}if(this.rr(LifecycleFlags.rt),this.Dh>0){this.Dh=0;let i,s=this.mh.qh;this.mh=this.wh=this;do{s.Hh(t),i=s.qh,s.qh=null,s=i}while(s!==Ut)}}_t(){++this.oh}si(t){if(null===t.Wh&&(t.Wh=Ut,this.Ch.Wh=t,this.Ch=t,++this.Mh),null!==t.zh){let i=this.vh,s=i.zh;for(;s!==t;)s=(i=s).zh;i.zh=s.zh,s.zh=null,this.ph===s&&(this.ph=this),--this.kh}}Yt(t){null===t.Gh&&(t.Gh=Ut,this.Rh.Gh=t,this.Rh=t,++this.Fh)}ar(t){null===t.Jh&&(t.Jh=Ut,this.Bh.Jh=t,this.Bh=t,++this.xh)}Zt(t){if(0==--this.oh)return null===this.Zh||this.Zh.done?(this.dr(t),LifecycleTask.done):(this.Zh.lr=this,this.Zh)}dr(t){if(this.nr(t|LifecycleFlags.W|LifecycleFlags.bt),this.Mh>0){this.Mh=0;let i,s=this.yh.Wh;this.yh=this.Ch=this;do{s.Qh(t),i=s.Wh,s.Wh=null,s=i}while(s!==Ut)}if(this.Fh>0){this.Fh=0;let i,s=this.Oh.Gh;this.Oh=this.Rh=this;do{s._h(t),i=s.Gh,s.Gh=null,s=i}while(s!==Ut)}if(this.xh>0){this.Ri(),this.xh=0;let i,s=this.Ih.Jh;this.Ih=this.Bh=this;do{s.bi(t),i=s.Jh,s.Jh=null,s=i}while(s!==Ut);this.Si(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.br=PLATFORM.Ke,this.currentView=null,this.os=0,this.hs=0,this.gr=null,this.vr=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}pr(value,t){this.vr.done?value instanceof Promise?(this.mr(new Kt(this,value)),this.wr()):this.yr(value,t):(value instanceof Promise?this.mr(new Kt(this,value)):this.mr(value),this.vr.Cr()&&this.vr.cancel())}pi(t,i){this.scope=i,this.hs=1,null!==this.currentView&&this.currentView.Ci(t,i)}zt(t){this.os=1,null!==this.currentView&&this.currentView.Wt(t)}Xt(t){this.os=0,null!==this.currentView&&this.currentView.ni(t)}Ti(t){this.hs=0,null!==this.currentView&&this.currentView.bi(t)}ri(t){this.currentView=null}mr(t){null===this.gr&&(this.gr=[]),this.gr.push(t)}yr(t,i){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,s=new AggregateLifecycleTask;let e,n=this.currentView;null===n?e=LifecycleTask.done:($lifecycle.ar(n),$lifecycle._t(),n.ni(i),e=$lifecycle.Zt(i)),s.ir(e),null===(n=this.currentView=t)?e=LifecycleTask.done:(this.hs&&($lifecycle.gi(),n.Ci(i,this.scope),$lifecycle.mi(i)),this.os?($lifecycle.Nt(),n.Wt(i),e=$lifecycle.qt(i)):e=LifecycleTask.done),s.ir(e),s.done?(this.vr=LifecycleTask.done,this.br()):(this.vr=s,this.vr.Or().then(()=>{this.br(),this.wr()}).catch(t=>{throw t}))}wr(){if(null!==this.gr&&this.gr.length>0){const t=this.gr.pop();this.gr.length=0,Kt.is(t)?this.vr=t.start():this.yr(t,LifecycleFlags.Ns)}else this.vr=LifecycleTask.done}}t("CompositionCoordinator",CompositionCoordinator),CompositionCoordinator.inject=[ILifecycle];const LifecycleTask=t("LifecycleTask",{done:{done:1,Cr:()=>0,cancel(){},Or:()=>Promise.resolve()}});class AggregateLifecycleTask{constructor(){this.done=1,this.lr=null,this.resolve=null,this.Rr=[],this.Ir=null}ir(t){t.done||(this.done=0,this.Rr.push(t),t.Or().then(()=>{this.Br()}).catch(t=>{throw t}))}er(t){if(t.done){const i=this.Rr.indexOf(t);-1!==i&&this.Rr.splice(i,1)}0===this.Rr.length&&null!==this.lr&&(this.lr.sr(this),this.lr=null)}Cr(){return this.done?0:this.Rr.every(t=>t.Cr())}cancel(){this.Cr()&&(this.Rr.forEach(t=>{t.cancel()}),this.done=0)}Or(){return null===this.Ir&&(this.Ir=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.Ir}Br(){this.done||this.Rr.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.lr&&(this.lr.dr(LifecycleFlags.Ns),this.lr.cr(LifecycleFlags.Ns),this.lr.or(LifecycleFlags.Ns),this.lr.ur(LifecycleFlags.Ns)),this.lr.sr(this),null!==this.resolve&&this.resolve()}}t("AggregateLifecycleTask",AggregateLifecycleTask);class Kt{constructor(t,i){this.Tr=t,this.done=0,this.Sr=0,this.jh=i}static is(t){return"start"in t}start(){return this.Sr?LifecycleTask.done:(this.jh=this.jh.then(t=>(this.Ar(t),t)),this)}Cr(){return!this.done}cancel(){this.Cr()&&(this.Sr=1)}Or(){return this.jh}Ar(value){this.Sr||(this.done=1,this.Tr.pr(value,LifecycleFlags.Ns))}}t("PromiseTask",class{constructor(t,i){this.done=0,this.Sr=0,this.jr=i,this.jh=t.then(value=>{if(1!=this.Sr)return this.done=1,this.jr(value),value})}Cr(){return!this.done}cancel(){this.Cr()&&(this.Sr=1)}Or(){return this.jh}});const qt=[],Ht=[];let Wt=-1;R(-1);const{oneTime,_i:Qt,Ji:Gt}=BindingMode,_t=Qt|oneTime;let Binding=t("Binding",class{constructor(t,i,s,mode,e,n){this.Oi=null,this.ji=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.Nh=null,this.$scope=null,this.Fe=n,this.mode=mode,this.ct=e,this.Lr=t,this.target=i,this.Pr=s,this.Z=LifecycleFlags.es}Vr(value,t){this.targetObserver.it(value,(t|=this.Z)|LifecycleFlags.H),t&LifecycleFlags.q&&this.targetObserver.K(t)}$r(value,t){this.Lr.assign((t|=this.Z)|LifecycleFlags.Vs,this.$scope,this.Fe,value)}B(t,i,s){if(2&this.$state){if(s|=this.Z,this.mode===BindingMode.Ji&&(s&=~LifecycleFlags.H,s|=LifecycleFlags.Vs),s&LifecycleFlags.H){const i=this.targetObserver.tt();return(10082!==this.Lr.nt||this.ot>1)&&(t=this.Lr.evaluate(s,this.$scope,this.Fe)),t!==i&&this.Vr(t,s),void(0==(this.mode&oneTime)&&(this.version++,this.Lr.connect(s,this.$scope,this),this.unobserve(0)))}if(!(s&LifecycleFlags.Vs))throw Reporter.error(15,LifecycleFlags[s]);t!==this.Lr.evaluate(s,this.$scope,this.Fe)&&this.$r(t,s)}}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t|LifecycleFlags.ft)}this.$state|=1,this.Z=t&LifecycleFlags.Fi,this.$scope=i;let s=this.Lr;hasBind(s)&&s.bind(t,i,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=this.mode&Gt?this.ct.lt(t,this.target,this.Pr):this.ct.kr(t,this.target,this.Pr)),targetObserver.bind&&targetObserver.bind(t),s=this.Lr,this.mode&_t&&this.Vr(s.evaluate(t,i,this.Fe),t),this.mode&Qt&&s.connect(t,i,this),this.mode&Gt&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}bi(t){2&this.$state&&(this.$state|=64,this.Z=LifecycleFlags.es,hasUnbind(this.Lr)&&this.Lr.xe(t,this.$scope,this),this.$scope=null,this.targetObserver.xe&&this.targetObserver.xe(t),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67)}connect(t){2&this.$state&&this.Lr.connect((t|=this.Z)|LifecycleFlags.rt,this.$scope,this)}K(t){2&this.$state&&this.targetObserver.K(t|this.Z)}});Binding=t("Binding",s([connectable()],Binding));class Call{constructor(t,i,s,e,n){this.Oi=null,this.ji=null,this.$state=0,this.Fe=n,this.Lr=t,this.targetObserver=e.lt(LifecycleFlags.es,i,s)}Dr(t){const i=this.$scope.be;Object.assign(i,t);const s=this.Lr.evaluate(LifecycleFlags.rt,this.$scope,this.Fe);for(const s in t)Reflect.deleteProperty(i,s);return s}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t|LifecycleFlags.ft)}this.$state|=1,this.$scope=i,hasBind(this.Lr)&&this.Lr.bind(t,i,this),this.targetObserver.it(t=>this.Dr(t),t),this.$state|=2,this.$state&=-2}bi(t){2&this.$state&&(this.$state|=64,hasUnbind(this.Lr)&&this.Lr.xe(t,this.$scope,this),this.$scope=null,this.targetObserver.it(null,t),this.$state&=-67)}at(t,i,s){}B(t,i,s){}}t("Call",Call);const IExpressionParser=t("IExpressionParser",DI.Ce("IExpressionParser").ye(t=>t.singleton(Jt)));class Jt{constructor(){this.Mr=Object.create(null),this.Fr=Object.create(null),this.xr=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.xr[t];return void 0===s&&(s=this.xr[t]=this.Er(t,i)),s}case 539:{let s=this.Fr[t];return void 0===s&&(s=this.Fr[t]=this.Er(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.$n;let s=this.Mr[t];return void 0===s&&(s=this.Mr[t]=this.Er(t,i)),s}}}cache(t){const{Fr:i,Mr:s,xr:e}=this;for(const n in t){const h=t[n];switch(h.nt){case 24:e[n]=h;break;case 6199:i[n]=h;break;default:s[n]=h}}}Er(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.Mn):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.Mn):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Ws=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Nr=1280]="IsRef",BindingType[BindingType.Ur=512]="IsIterator",BindingType[BindingType.zr=256]="IsCustom",BindingType[BindingType.Kr=128]="IsFunction",BindingType[BindingType.qr=64]="IsEvent",BindingType[BindingType.Hr=32]="IsProperty",BindingType[BindingType.Wr=16]="IsCommand",BindingType[BindingType.Qr=48]="IsPropertyCommand",BindingType[BindingType.Gr=80]="IsEventCommand",BindingType[BindingType._r=6]="DelegationStrategyDelta",BindingType[BindingType.Jr=15]="Command",BindingType[BindingType.Xr=49]="OneTimeCommand",BindingType[BindingType.Yr=50]="ToViewCommand",BindingType[BindingType.Zr=51]="FromViewCommand",BindingType[BindingType.io=52]="TwoWayCommand",BindingType[BindingType.so=53]="BindCommand",BindingType[BindingType.eo=86]="TriggerCommand",BindingType[BindingType.no=87]="CaptureCommand",BindingType[BindingType.ho=88]="DelegateCommand",BindingType[BindingType.ro=153]="CallCommand",BindingType[BindingType.oo=26]="OptionsCommand",BindingType[BindingType.lo=539]="ForCommand",BindingType[BindingType.co=284]="CustomCommand"})(BindingType||(BindingType=t("BindingType",{})));const{_i:Xt,oneTime:Yt}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.Oi=null,this.ji=null,this.$state=0,this.$scope=null,this.uo=i,this.Fe=n,this.mode=mode,this.ct=t,this.target=s,this.Pr=e;const h=i.ht,parts=this.parts=Array(h.length);for(let r=0,o=h.length;o>r;++r)parts[r]=new InterpolationBinding(h[r],i,s,e,mode,t,n,0===r)}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t)}this.$state|=2,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].Ci(t,i)}bi(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].bi(t)}}t("MultiInterpolationBinding",MultiInterpolationBinding);let InterpolationBinding=t("InterpolationBinding",class{constructor(t,i,s,e,mode,n,h,r){this.$state=0,this.uo=i,this.ao=r,this.mode=mode,this.Fe=h,this.ct=n,this.Lr=t,this.target=s,this.Pr=e,this.targetObserver=n.kr(LifecycleFlags.es,s,e)}Vr(value,t){this.targetObserver.it(value,t|LifecycleFlags.H)}B(t,i,s){if(!(2&this.$state))return;const e=this.targetObserver.tt(),n=this.uo.evaluate(s,this.$scope,this.Fe);n!==e&&this.Vr(n,s),0==(this.mode&Yt)&&(this.version++,this.Lr.connect(s,this.$scope,this),this.unobserve(0))}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t)}this.$state|=2,this.$scope=i;const s=this.Lr;s.bind&&s.bind(t,i,this),this.ao&&this.Vr(this.uo.evaluate(t,i,this.Fe),t),this.mode&Xt&&s.connect(t,i,this)}bi(t){if(!(2&this.$state))return;this.$state&=-3;const i=this.Lr;i.xe&&i.xe(t,this.$scope,this),this.$scope=null,this.unobserve(1)}});InterpolationBinding=t("InterpolationBinding",s([connectable()],InterpolationBinding));let LetBinding=t("LetBinding",class{constructor(t,i,s,e,toViewModel=0){this.Oi=null,this.ji=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=null,this.Fe=e,this.ct=s,this.Lr=t,this.target=null,this.Pr=i,this.toViewModel=toViewModel}B(t,i,s){if(2&this.$state){if(!(s&LifecycleFlags.H))throw Reporter.error(15,s);{const{target:t,Pr:i}=this,e=t[i],n=this.Lr.evaluate(s,this.$scope,this.Fe);n!==e&&(t[i]=n)}}}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t|LifecycleFlags.ft)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.ve:i.be;const s=this.Lr;s.bind&&s.bind(t,i,this),this.target[this.Pr]=this.Lr.evaluate(LifecycleFlags.ft,i,this.Fe),this.Lr.connect(t,i,this),this.$state|=2,this.$state&=-2}bi(t){if(!(2&this.$state))return;this.$state|=64;const i=this.Lr;i.xe&&i.xe(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}});LetBinding=t("LetBinding",s([connectable()],LetBinding));class Ref{constructor(t,i,s){this.Oi=null,this.ji=null,this.$state=0,this.Fe=s,this.Lr=t,this.target=i}Ci(t,i){if(2&this.$state){if(this.$scope===i)return;this.bi(t|LifecycleFlags.ft)}this.$state|=1,this.$scope=i,hasBind(this.Lr)&&this.Lr.bind(t,i,this),this.Lr.assign(t,this.$scope,this.Fe,this.target),this.$state|=2,this.$state&=-2}bi(t){if(!(2&this.$state))return;this.$state|=64,this.Lr.evaluate(t,this.$scope,this.Fe)===this.target&&this.Lr.assign(t,this.$scope,this.Fe,null);const i=this.Lr;hasUnbind(i)&&i.xe(t,this.$scope,this),this.$scope=null,this.$state&=-67}at(t,i,s){}B(t,i,s){}}t("Ref",Ref);let CollectionLengthObserver=t("CollectionLengthObserver",class{constructor(t,i){this.X=t,this.Y=i,this.J=t[i]}tt(){return this.X[this.Y]}vt(t){this.X[this.Y]=t}K(t){const i=this.X[this.Y],s=this.J;s!==i&&(this.X[this.Y]=i,this.J=i,this.O(i,s,t|LifecycleFlags.H))}subscribe(t){this.g(t)}unsubscribe(t){this.v(t)}});CollectionLengthObserver=t("CollectionLengthObserver",s([targetObserver()],CollectionLengthObserver));const Zt=Array.prototype,ti=Zt.push,ii=Zt.unshift,si=Zt.pop,ei=Zt.shift,ni=Zt.splice,hi=Zt.reverse,ri=Zt.sort,oi={push:ti,unshift:ii,pop:si,shift:ei,splice:ni,reverse:hi,sort:ri},li=["push","unshift","pop","shift","splice","reverse","sort"],ci={push(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return ti.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.wt.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.wt[n]=-2,n++;return i.O("push",arguments,i.Z|LifecycleFlags.js),t.length},unshift(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return ii.apply(t,arguments);const s=arguments.length,e=Array(s);let n=0;for(;s>n;)e[n++]=-2;ii.apply(i.wt,e);const h=ii.apply(t,arguments);return i.O("unshift",arguments,i.Z|LifecycleFlags.js),h},pop(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return si.call(t);const s=i.wt,e=si.call(t),n=s.length-1;return s[n]>-1&&s.Ot.push(s[n]),si.call(s),i.O("pop",arguments,i.Z|LifecycleFlags.js),e},shift(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return ei.call(t);const s=i.wt,e=ei.call(t);return s[0]>-1&&s.Ot.push(s[0]),ei.call(s),i.O("shift",arguments,i.Z|LifecycleFlags.js),e},splice(t,i){let s=this;void 0!==s.ne&&(s=s.ne);const e=s.G;if(void 0===e)return ni.apply(s,arguments);const n=e.wt;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.Ot.push(n[s]),s++}const h=arguments.length;if(h>2){const s=h-2,e=Array(s);let r=0;for(;s>r;)e[r++]=-2;ni.call(n,t,i,...e)}else 2===h&&ni.call(n,t,i);const r=ni.apply(s,arguments);return e.O("splice",arguments,e.Z|LifecycleFlags.js),r},reverse(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return hi.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,h=t[n],r=i.wt[n],o=i.wt[e];t[n]=t[e],i.wt[n]=o,t[e]=h,i.wt[e]=r,n++}return i.O("reverse",arguments,i.Z|LifecycleFlags.js),this},sort(t){let i=this;void 0!==i.ne&&(i=i.ne);const s=i.G;if(void 0===s)return ri.call(i,t),this;const e=i.length;if(2>e)return this;N(i,s.wt,0,e,x);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=F),N(i,s.wt,0,n,t),s.O("sort",arguments,s.Z|LifecycleFlags.js),this}},ui={fo:1,Mi:0,oe:1},def=Reflect.defineProperty;for(const t of li)def(ci[t],"observing",{value:1,fo:0,oe:0,Mi:0});enableArrayObservation();let ArrayObserver=t("ArrayObserver",class{constructor(t,i,s){this.S=i,s.G=this,this.R=s,this.flags=t&LifecycleFlags.Fi,this.Ct()}K(t){const i=this.R,s=i.length;let e=0;for(;s>e;++e)v(i[e],t)}});ArrayObserver=t("ArrayObserver",s([collectionObserver(9)],ArrayObserver));const ai=Map.prototype,fi=ai.set,di=ai.clear,bi=ai.delete,gi={set:fi,clear:di,delete:bi},vi=["set","clear","delete"],pi={set(t,value){let i=this;void 0!==i.ne&&(i=i.ne);const s=i.G;if(void 0===s)return fi.call(i,t,value),this;const e=i.size;if(fi.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.wt[e]=-2),this;e++}return this}return s.wt[e]=-2,s.O("set",arguments,s.Z|LifecycleFlags.js),this},clear(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return di.call(t);if(t.size>0){const s=i.wt;let e=0;for(const i of t.keys())s[e]>-1&&s.Ot.push(s[e]),e++;di.call(t),s.length=0,i.O("clear",arguments,i.Z|LifecycleFlags.js)}},delete(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return bi.call(t,value);if(0===t.size)return 0;let s=0;const e=i.wt;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.Ot.push(e[s]),e.splice(s,1),bi.call(t,value);s++}return i.O("delete",arguments,i.Z|LifecycleFlags.js),0}},mi={fo:1,Mi:0,oe:1},wi=Reflect.defineProperty;for(const t of vi)wi(pi[t],"observing",{value:1,fo:0,oe:0,Mi:0});enableMapObservation();let MapObserver=t("MapObserver",class{constructor(t,i,s){this.S=i,s.G=this,this.R=s,this.flags=t&LifecycleFlags.Fi,this.Ct()}K(t){this.R.forEach((value,i)=>{v(value,t),v(i,t)})}});MapObserver=t("MapObserver",s([collectionObserver(6)],MapObserver));const yi=Set.prototype,Ci=yi.add,Oi=yi.clear,Ri=yi.delete,Ii={add:Ci,clear:Oi,delete:Ri},Bi=["add","clear","delete"],Ti={add(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return Ci.call(t,value),this;const s=t.size;return Ci.call(t,value),t.size===s?this:(i.wt[s]=-2,i.O("add",arguments,i.Z|LifecycleFlags.js),this)},clear(){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return Oi.call(t);if(t.size>0){const s=i.wt;let e=0;for(const i of t.keys())s[e]>-1&&s.Ot.push(s[e]),e++;Oi.call(t),s.length=0,i.O("clear",arguments,i.Z|LifecycleFlags.js)}},delete(value){let t=this;void 0!==t.ne&&(t=t.ne);const i=t.G;if(void 0===i)return Ri.call(t,value);if(0===t.size)return 0;let s=0;const e=i.wt;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.Ot.push(e[s]),e.splice(s,1),Ri.call(t,value);s++}return i.O("delete",arguments,i.Z|LifecycleFlags.js),0}},Si={fo:1,Mi:0,oe:1},Ai=Reflect.defineProperty;for(const t of Bi)Ai(Ti[t],"observing",{value:1,fo:0,oe:0,Mi:0});enableSetObservation();let SetObserver=t("SetObserver",class{constructor(t,i,s){this.S=i,s.G=this,this.R=s,this.flags=t&LifecycleFlags.Fi,this.Ct()}K(t){this.R.forEach((value,i)=>{v(i,t)})}});SetObserver=t("SetObserver",s([collectionObserver(7)],SetObserver));const ji={do:0,bo:0};let CustomSetterObserver=t("CustomSetterObserver",class{constructor(t,i,s){this.X=t,this.Y=i,this.J=this.oldValue=void 0,this.vo=s,this._=0}it(t){this.vo.set.call(this.X,t),this.J!==t&&(this.oldValue=this.J,this.J=t,this.O(t,this.oldValue,LifecycleFlags.H))}subscribe(t){this._||this.po(),this.g(t)}unsubscribe(t){this.v(t)}po(){this._=1,this.J=this.X[this.Y],Reflect.defineProperty(this.X,this.Y,{set:t=>{this.it(t)}})}});CustomSetterObserver=t("CustomSetterObserver",s([subscriberCollection(MutationKind.C)],CustomSetterObserver));let GetterObserver=t("GetterObserver",class{constructor(t,i,s,e,n,h,r){this.X=s,this.Y=e,this.mo=0,this.J=this.oldValue=void 0,this.wo=[],this.yo=[],this.Co=i,this.Oo=0,this.vo=n,this.I=new Proxy(s,(function t(i,s,e){return{get(n,h,r){if(e.Ro(h))return Reflect.get(n,h,r);switch(Li.call(n)){case"[object Array]":if(e.Io(s.Bo(i,n)),"length"===h)return Reflect.get(n,h,n);case"[object Map]":if(e.Io(s.To(i,n)),"size"===h)return Reflect.get(n,h,n);case"[object Set]":if(e.Io(s.So(i,n)),"size"===h)return Reflect.get(n,h,n);default:e.Ao(s.lt(i,n,h))}return(function(i,s,e,n,h){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,h))})(i,n,h,s,e)}}})(t,h,this)),Reflect.defineProperty(s,e,{get:()=>this.tt()})}Ao(t){-1===this.wo.indexOf(t)&&this.wo.push(t)}Io(t){-1===this.yo.indexOf(t)&&this.yo.push(t)}tt(){return this.J=0===this.Oo||this.mo?Reflect.apply(this.vo.get,this.I,PLATFORM.Mn):Reflect.apply(this.vo.get,this.X,PLATFORM.Mn),this.J}subscribe(t){this.g(t),1==++this.Oo&&this.jo(1)}unsubscribe(t){this.v(t),0==--this.Oo&&this.Lo()}B(){const t=this.J,i=this.jo(0);t!==i&&this.O(i,t,LifecycleFlags.H)}N(){const t=this.J,i=this.jo(0);t!==i&&this.O(i,t,LifecycleFlags.W|LifecycleFlags.H)}jo(t){const i=!this.Co.do||t;return i&&(this.Lo(),this.mo=1),this.J=this.tt(),i&&(this.wo.forEach(t=>{t.subscribe(this)}),this.yo.forEach(t=>{t.St(this)}),this.mo=0),this.J}Ro(t){return!this.mo||"$observers"===t}Lo(){this.wo.forEach(t=>{t.unsubscribe(this)}),this.wo.length=0,this.yo.forEach(t=>{t.At(this)}),this.yo.length=0}});GetterObserver=t("GetterObserver",s([subscriberCollection(MutationKind.C)],GetterObserver));const Li={}.toString,IDirtyChecker=t("IDirtyChecker",DI.Ce("IDirtyChecker").ye(t=>t.singleton(Pi))),DirtyCheckSettings=t("DirtyCheckSettings",{Po:6,disabled:0,warn:1,Vo:0,$o(){this.Po=6,this.disabled=0,this.warn=1,this.Vo=0}});class Pi{constructor(){this.ko=0,this.Do=[]}Mo(t,i){if(DirtyCheckSettings.Vo)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,i)}Fo(t){this.Do.push(t),1===this.Do.length&&PLATFORM.xo.add(this.Eo,this)}removeProperty(t){this.Do.splice(this.Do.indexOf(t),1),0===this.Do.length&&PLATFORM.xo.remove(this.Eo,this)}Eo(t){if(DirtyCheckSettings.disabled)return;if(++this.ko<DirtyCheckSettings.Po)return;this.ko=0;const i=this.Do,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).No()&&e.flush(LifecycleFlags.Ds)}}let DirtyCheckProperty=t("DirtyCheckProperty",class{constructor(t,i,s){this.X=i,this.Y=s,this.Uo=t}No(){return this.oldValue!==this.X[this.Y]}flush(t){const i=this.X[this.Y];this.O(i,this.oldValue,t|LifecycleFlags.H),this.oldValue=i}subscribe(t){this.m()||(this.oldValue=this.X[this.Y],this.Uo.Fo(this)),this.g(t)}unsubscribe(t){this.v(t)&&!this.m()&&this.Uo.removeProperty(this)}});DirtyCheckProperty=t("DirtyCheckProperty",s([propertyObserver()],DirtyCheckProperty));const Vi=PLATFORM.Ke;class PrimitiveObserver{constructor(t,i){this.zo=1,"length"===i?(this.X=t,this.tt=this.Ko):this.tt=this.qo}Ko(){return this.X.length}qo(){}}t("PrimitiveObserver",PrimitiveObserver),PrimitiveObserver.prototype.it=Vi,PrimitiveObserver.prototype.subscribe=Vi,PrimitiveObserver.prototype.unsubscribe=Vi,PrimitiveObserver.prototype.st=Vi,PrimitiveObserver.prototype.K=Vi;class PropertyAccessor{constructor(t,i){this.X=t,this.Y=i}tt(){return this.X[this.Y]}it(value){this.X[this.Y]=value}K(t){(function(value,t,i){if(g(value)&&void 0!==value.U){const s=value.U[t];s&&void 0!==s.K&&s.K(i|LifecycleFlags.q|LifecycleFlags.H|LifecycleFlags.W)}})(this.X,this.Y,t)}}t("PropertyAccessor",PropertyAccessor);const $i={}.toString,IObserverLocator=t("IObserverLocator",DI.Ce("IObserverLocator").eh()),ITargetObserverLocator=t("ITargetObserverLocator",DI.Ce("ITargetObserverLocator").eh()),ITargetAccessorLocator=t("ITargetAccessorLocator",DI.Ce("ITargetAccessorLocator").eh());class ki{constructor(t,i,s,e){this.Ho=[],this.Uo=i,this.S=t,this.Wo=s,this.Qo=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}lt(t,i,s){if(t&LifecycleFlags.xi&&"object"==typeof i)return ProxyObserver.Ei(i,s);if((function(t){return 1==t.de})(i))return i.pe(t).Ei(t,i,s);let e,n=i.U;return n&&s in n?n[s]:((e=this.Go(t,i,s)).zo||(void 0===n&&(n=this._o(i)),n[s]=e),e)}Jo(t){this.Ho.push(t)}kr(t,i,s){return this.Qo.Xo(t,i)?this.Wo.Yo(t,i,s)?this.lt(t,i,s):this.Qo.kr(t,this.S,i,s):t&LifecycleFlags.xi?ProxyObserver.Ei(i,s):new PropertyAccessor(i,s)}Bo(t,i){return U(t,this.S,i)}To(t,i){return z(t,this.S,i)}So(t,i){return K(t,this.S,i)}_o(t){return t.U||this.Zo(t)}Zo(t){const value={};return Reflect.defineProperty(t,"$observers",{Mi:0,oe:0,fo:0,value})||Reporter.write(0,t),value}tl(t,i,s,e){for(let n=0,h=this.Ho.length;h>n;n++){const h=this.Ho[n].lt(t,i,s,e);if(h)return h}return null}Go(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.Wo.Xo(t,i)){const n=this.Wo.lt(t,this.S,this,i,s);if(null!==n)return n;if(null!==n)return n;e=1}switch($i.call(i)){case"[object Array]":return"length"===s?this.Bo(t,i).Tt(t):this.Uo.Mo(i,s);case"[object Map]":return"size"===s?this.To(t,i).Tt(t):this.Uo.Mo(i,s);case"[object Set]":return"size"===s?this.So(t,i).Tt(t):this.Uo.Mo(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.lt)return n.get.lt(i);return this.tl(t,i,s,n)||(e?this.Uo.Mo(i,s):(function(t,i,s,e,n,h,r){if(0==r.oe)return s.Mo(n,h);if(r.get){const s=n.constructor.computed&&n.constructor.computed[h]||ji;return r.set?s.bo?new GetterObserver(t,s,n,h,r,i,e):new CustomSetterObserver(n,h,r):new GetterObserver(t,s,n,h,r,i,e)}throw Reporter.error(18,h)})(t,this,this.Uo,this.S,i,s,n))}return new SetterObserver(t,i,s)}}ki.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Di=PLATFORM.Ke;let SelfObserver=t("SelfObserver",class{constructor(t,i,s,e){this.Z=t&LifecycleFlags.Fi,ProxyObserver.he(i)?(i.G.subscribe(this,s),this.X=i.ne,this.Y=s,this.J=i.ne[s],this.jr=e in i.ne?i[e].bind(i):Di):(this.X=i,this.Y=s,this.J=i[s],this.jr=e in i?i[e].bind(i):Di),t&LifecycleFlags.q&&(this.tt=this.le)}B(t,i,s){this.it(t,s)}tt(){return this.J}le(){return this.X[this.Y]}it(t,i){const s=this.J;if((s!==t||i&LifecycleFlags.q)&&(this.J=t,!(i&LifecycleFlags.ft))){const e=this.jr(t,s,i);void 0!==e&&(this.J=t=e),this.O(t,s,i)}}K(t){this.jr(this.X[this.Y],this.J,this.Z|t),this.O(this.X[this.Y],this.J,this.Z|t)}});SelfObserver=t("SelfObserver",s([propertyObserver()],SelfObserver));const{oneTime:Mi,_i:Fi,Ji:xi,Xi:Ei}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.il=s.mode,s.mode=this.mode}xe(t,i,s){s.mode=s.il,s.il=null}}t("BindingModeBehavior",BindingModeBehavior);class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Mi)}}t("OneTimeBindingBehavior",OneTimeBindingBehavior),BindingBehaviorResource.Gi("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Fi)}}t("ToViewBindingBehavior",ToViewBindingBehavior),BindingBehaviorResource.Gi("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(xi)}}t("FromViewBindingBehavior",FromViewBindingBehavior),BindingBehaviorResource.Gi("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ei)}}t("TwoWayBindingBehavior",TwoWayBindingBehavior),BindingBehaviorResource.Gi("twoWay",TwoWayBindingBehavior);const Ni={},Ui=BindingMode.Ji;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,h,r;s instanceof Binding?(n="handleChange",r=H,h=s.mode&Ui?LifecycleFlags.Vs:LifecycleFlags.H):(n="callSource",r=q,h=LifecycleFlags.H),s.Vt=s[n],s.Vt.sl=n,s[n]=r,s.Lt={kt:h,$t:e,Pt:0,oldValue:Ni}}xe(t,i,s){s[s.Vt.sl]=s.Vt,s.Vt=null,PLATFORM.global.clearTimeout(s.Lt.Pt),s.Lt=null}}t("DebounceBindingBehavior",DebounceBindingBehavior),BindingBehaviorResource.Gi("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.el=t}bind(t,i,s,...e){if(!s.Vr)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.el.Ie(name,s),s.nl=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.el.Ie(t[i],s);s.nl=t}}}xe(t,i,s){const name=s.nl;if(s.nl=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.el.Be(t[i],s)}else this.el.Be(name,s)}}t("SignalBindingBehavior",SignalBindingBehavior),SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Gi("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.Ft=s[n=s instanceof Binding?s.mode===BindingMode.Xi?"updateSource":"updateTarget":"callSource"],s.Ft.sl=n,s[n]=W,s.Dt={$t:e,Mt:0,Pt:-1}}xe(t,i,s){s[s.Ft.sl]=s.Ft,s.Ft=null,PLATFORM.global.clearTimeout(s.Dt.Pt),s.Dt=null}}t("ThrottleBindingBehavior",ThrottleBindingBehavior),BindingBehaviorResource.Gi("throttle",ThrottleBindingBehavior);const zi={for(t){const i={add(i){let s;null!==i&&"object"==typeof i?s=i:"string"==typeof i&&(s={xt:i});const e=s.xt;if(!e)throw Reporter.error(0);return s.hl||(s.hl=PLATFORM.rl(e)),s.jr||(s.jr=`${e}Changed`),void 0===s.mode&&(s.mode=BindingMode._i),t.bindables[e]=s,this},get:()=>t.bindables};if(void 0===t.bindables)t.bindables={};else if(Array.isArray(t.bindables)){const s=t.bindables;t.bindables={},s.forEach(i.add)}return i}},Ki="custom-element",qi="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.ol="ra",TargetedInstructionType.ll="rb",TargetedInstructionType.cl="rc",TargetedInstructionType.ul="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.uo="rf",TargetedInstructionType.al="rg",TargetedInstructionType.fl="rh",TargetedInstructionType.dl="ri",TargetedInstructionType.bl="rj",TargetedInstructionType.gl="rk"})(TargetedInstructionType||(TargetedInstructionType=t("TargetedInstructionType",{})));const ITargetedInstruction=t("ITargetedInstruction",DI.Ce("createInterface").eh()),Hi=Object.freeze({required:1,compiler:"default"}),Wi=Object.freeze({required:0,compiler:"default"});class Qi{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Wi,this.bindables=PLATFORM.Et,this.instructions=PLATFORM.Mn,this.dependencies=PLATFORM.Mn,this.surrogates=PLATFORM.Mn,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.strategy=1}}const Gi=["name","template","cache","build","containerless","shadowOptions","hasSlots"],_i=["instructions","dependencies","surrogates"],IRenderLocation=(Profiler.vl("AttachLifecycle"),Profiler.vl("BindLifecycle"),t("INode",DI.Ce("INode").eh()),t("IRenderLocation",DI.Ce("IRenderLocation").eh())),IDOM=t("IDOM",DI.Ce("IDOM").eh()),Ji=function(){throw Reporter.error(1e3)},Xi={addEventListener:Ji,appendChild:Ji,cloneNode:Ji,pl:Ji,createDocumentFragment:Ji,createElement:Ji,ml:Ji,dispatchEvent:Ji,wl:Ji,yl:Ji,createTextNode:Ji,insertBefore:Ji,Cl:Ji,Ol:Ji,Rl:Ji,Il:Ji,Pi:Ji,remove:Ji,removeEventListener:Ji,setAttribute:Ji},NodeSequence=(t("DOM",Object.assign({},Xi,{get Bl(){return 1==Reflect.get(this,"$initialized")},initialize(dom){if(this.Bl)throw Reporter.error(1001);const t={},i=[dom];let s=Object.getPrototypeOf(dom);for(;s&&s!==Object.prototype;)i.unshift(s),s=Object.getPrototypeOf(s);for(s of i)Object.assign(t,Object.getOwnPropertyDescriptors(s));const e=[];let n,h;for(n in t)(h=t[n]).oe&&h.fo&&(Reflect.defineProperty(this,n,h),e.push(n));Reflect.set(this,"$domKeys",e),Reflect.set(this,"$initialized",1)},Tl(){if(!this.Bl)throw Reporter.error(1002);Reflect.get(this,"$domKeys").forEach(t=>{Reflect.deleteProperty(this,t)}),Object.assign(this,Xi),Reflect.set(this,"$domKeys",PLATFORM.Mn),Reflect.set(this,"$initialized",0)}})),t("NodeSequence",{empty:{childNodes:PLATFORM.Mn,firstChild:null,lastChild:null,Sl:()=>PLATFORM.Mn,insertBefore(t){},Al(t){},remove(){}}}));class Yi{constructor($lifecycle,cache){this.yi=null,this.Ai=null,this.Ht=null,this.ei=null,this.Ht=null,this.ei=null,this.Qt=null,this.hi=null,this.jl=null,this.zh=null,this.Wh=null,this.Jh=null,this.$state=0,this.$scope=null,this.fi=0,this.$lifecycle=$lifecycle,this.cache=cache}Ll(t){this.fi=0,this.location=t}release(t){return this.fi=1,8&this.$state?this.cache.Pl(this):!!this.Qh(t)}Vl(t){this.$scope=t,this.Ci=ft,this.bi=vt}}class Zi{constructor(name,template,t){this.$l=0,this.kl=-1,this.cache=null,this.S=t,this.name=name,this.template=template}Dl(t,i){t&&("*"===t?t=Zi.Ml:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.kl&&i||(this.kl=t)),this.cache=this.kl>0?[]:null,this.$l=this.kl>0}Pl(t){return null!==this.cache&&this.kl>this.cache.length}di(t){return this.Pl(t)?(t.li(LifecycleFlags.es),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!==cache&&cache.length>0)return(i=cache.pop()).$state&=-129,i;if(i=new Yi(this.S,this),this.template.$i(i,null,null,t),!i.$nodes)throw Reporter.error(90);return i}}Zi.Ml=65535,(t=>{t.Ci=at,t.K=pt,t.bi=gt,t.Wt=Y,t.ni=it,t.li=nt,t.Kh=ot,t.Qh=lt})(Yi.prototype);const ITemplateCompiler=t("ITemplateCompiler",DI.Ce("ITemplateCompiler").eh());(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.es=1]="none",ViewCompileFlags[ViewCompileFlags.Fl=2]="surrogate",ViewCompileFlags[ViewCompileFlags.xl=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags=t("ViewCompileFlags",{})));const ITemplateFactory=t("ITemplateFactory",DI.Ce("ITemplateFactory").eh());t("CompiledTemplate",class{constructor(dom,t,i,s){this.dom=dom,this.El=t,this.Nl=i,this.Ul=s}$i(t,host,parts,i=LifecycleFlags.es){const s=t.$nodes=this.Nl.zl();t.$context=this.Ul,this.Ul.$i(i|=this.El.strategy,t,s.Sl(),this.El,host,parts)}});const ts={Ul:null,dom:null,$i(t){t.$nodes=NodeSequence.empty,t.$context=null}},is="default",IInstructionRenderer=t("IInstructionRenderer",DI.Ce("IInstructionRenderer").eh()),IRenderer=t("IRenderer",DI.Ce("IRenderer").eh()),IRenderingEngine=t("IRenderingEngine",DI.Ce("IRenderingEngine").ye(t=>t.singleton(ss)));class ss{constructor(t,i,s,e){this.Kl=new Map,this.ql=t,this.Hl=i,this.Wl=new Map,this.S=s,this.Ql=new Map,this.Gl=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}qi(dom,t,i,s){if(!t)return null;let e=this.Ql.get(t);return e||(e=this._l(dom,t,i,s),this.Ql.set(t,e)),e}Jl(dom,t,i){if(!t)return null;let s=this.Wl.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this._l(dom,e,i,null);(s=new Zi(e.name,template,this.S)).Dl(e.cache,1),this.Wl.set(t,s)}return s}Ni(t,i,s){let e=this.Kl.get(i);e||(e=rs.create(i),this.Kl.set(i,e)),e.Xl(t,s,this.S)}_l(dom,t,i,s){if(null===i&&(i=this.ql),null!==t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||is,compiler=this.Gl[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.Fl)}return this.Hl.create(e,t)}return ts}}ss.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class es{constructor(){this.C=null}Di(t){this.C=t}resolve(t,i){if(void 0===this.C)throw Reporter.error(50);return this.C}st(){this.C=null}}class ns{Di(t,parts){this.Nl=t,this.Yl=parts||PLATFORM.Et}resolve(t,i){const s=this.Nl;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=this.Yl[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Jl(dom,e,i)}return s}st(){this.Nl=null,this.Yl=PLATFORM.Et}}let hs=class{constructor(t,customElement){this.It=0,this.children=null,this.customElement=customElement,this.S=t,this._=0}tt(){return this._||(this._=1,this.customElement.ui.Zl(()=>{this.tc()}),this.children=mt(this.customElement.ui.children)),this.children}it(t){}flush(t){this.O(this.children,void 0,t|LifecycleFlags.H),this.It=0}subscribe(t){this.g(t)}unsubscribe(t){this.v(t)}tc(){this.children=mt(this.customElement.ui.children),"$childrenChanged"in this.customElement&&this.customElement.ic(),this.S.T(this).catch(t=>{throw t}),this.It=1}};hs=s([subscriberCollection(MutationKind.C)],hs);class rs{constructor(){}static create(t){const i=new rs;return i.bindables=t.description.bindables,i}Xl(t,i,s){i.$lifecycle=s,"$projector"in i?this.sc(t,s,i):this.ec(t,i)}sc(t,i,s){this.ec(t,s).nc=new hs(i,s),Reflect.defineProperty(s,"$children",{Mi:0,get(){return this.U.nc.tt()}})}ec(t,i){const s={},bindables=this.bindables,e=Object.getOwnPropertyNames(bindables);if(t&LifecycleFlags.xi)for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,ProxyObserver.Ei(i).I,name,bindables[name].jr)}else{for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,i,name,bindables[name].jr),t&LifecycleFlags.q||wt(t,i,name)}Reflect.defineProperty(i,"$observers",{Mi:0,value:s})}return s}}const IProjectorLocator=t("IProjectorLocator",DI.Ce("IProjectorLocator").eh()),CustomElementResource=t("CustomElementResource",{name:Ki,et:Q,Te(t){return t.kind===this},hc:G,Gi(t,i=null){if(!t)throw Reporter.error(70);const s=null===i?class{}:i,e=buildTemplateDefinition(s,t),n=s.prototype;return s.kind=CustomElementResource,s.description=e,s.register=yt,n.rc=Rt,n.Ci=ut,n.K=pt,n.Wt=X,n.ni=tt,n.bi=bt,n.li=et,n.hi=null,n.Qt=null,n.jl=null,n.Jh=null,n.$scope=null,n.$hooks=0,n.yi=null,n.Ai=null,n.Ht=null,n.ei=null,n.Kh=ht,n.Qh=rt,n.zh=null,n.Wh=null,n.ui=null,"flush"in n&&(n.pt=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Uh=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.Xh=null),"render"in n&&(n.$hooks|=1024),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.qh=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Gh=null),s}}),os={mode:"open"},CustomAttributeResource=(Profiler.vl("RenderLifecycle"),t("CustomAttributeResource",{name:qi,et:_,Te(t){return t.kind===this},Gi(t,s){const e=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Mn:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode._i:defaultBindingMode,Wi:void 0===def.Wi?0:def.Wi,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},zi.for(t).get(),zi.for(def).get()),strategy:i(def.strategy)}})("string"==typeof t?{name:t}:t,e),h=e.prototype;return e.kind=CustomAttributeResource,e.description=n,e.register=It,h.rc=Ot,h.Ci=ct,h.K=pt,h.Wt=J,h.ni=Z,h.bi=dt,h.li=st,h.hi=null,h.Qt=null,h.jl=null,h.Jh=null,h.$scope=null,h.$hooks=0,h.$state=0,"flush"in h&&(h.pt=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.Uh=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.Xh=null),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.qh=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Gh=null),e}}));class If{constructor(t,i,s){this.value=0,this.Tr=s,this.oc=null,this.lc=null,this.cc=t,this.uc=null,this.location=i,this.Z=LifecycleFlags.es}pi(t){this.Z=t&LifecycleFlags.Fi;const i=this.ac(t);this.Tr.pr(i,t),this.Tr.pi(t,this.$scope)}zt(t){this.Tr.zt(t)}Xt(t){this.Tr.Xt(t)}Ti(t){this.Tr.Ti(t)}ri(t){null!==this.uc&&this.uc.release(t)&&(this.uc=null),null!==this.lc&&this.lc.release(t)&&(this.lc=null),this.Tr.ri(t)}fc(t,i,s){if(3&this.$state){s|=this.Z;const t=ProxyObserver.jt(this);if(s&LifecycleFlags.W){const i=t.ac(s);t.Tr.pr(i,s)}else t.$lifecycle.T(t).catch(t=>{throw t})}}flush(t){t|=this.Z;const i=ProxyObserver.jt(this),s=i.ac(t);i.Tr.pr(s,t)}ac(t){return this.value?this.uc=this.dc(this.uc,this.cc,t):null!==this.oc?this.lc=this.dc(this.lc,this.oc,t):null}dc(t,i,s){return null===t&&(t=i.create(s)),t.Ll(this.location),t}}t("If",If),If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],s([bindable],If.prototype,"value",void 0),CustomAttributeResource.Gi({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Nl=t}link(t){t.oc=this.Nl}}t("Else",Else),Else.inject=[IViewFactory],CustomAttributeResource.Gi({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,i,s){this.Nl=s,this.bc=0,this.location=t,this.gc=null,this.vc=i,this.pc=[],this.key=null,this.ss=0}pi(t){this.Z=t&LifecycleFlags.Fi,this.mc(t);let i=this.vc.yi;for(;null!==i;){if(ProxyObserver.jt(i.target)===ProxyObserver.jt(this)&&"items"===i.Pr){this.wc=i.Lr;break}i=i.Oi}this.yc=this.wc.qn.evaluate(t,this.$scope,null),this.ss||(t&LifecycleFlags.Ss)>0?this.Cc(null,t):this.Oc(null,t)}zt(t){const{pc:i,location:s}=this;let e;for(let n=0,h=i.length;h>n;++n)(e=i[n]).Ll(s),e.Wt(t)}Xt(t){const{pc:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).ni(t),s.release(t)}Ti(t){this.mc(t);const{pc:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).bi(t)}Rc(t,i,s){s|=this.Z;const e=ProxyObserver.jt(this);e.mc(s),s|=LifecycleFlags.H,e.ss||(s&LifecycleFlags.Ss)>0?e.Cc(null,s):e.Oc(null,s)}N(t,i){i|=this.Z;const s=ProxyObserver.jt(this);i|=LifecycleFlags.W|LifecycleFlags.H,s.ss||(i&LifecycleFlags.Ss)>0?s.Cc(t,i):s.Oc(t,i)}Oc(t,i){const{pc:s,$lifecycle}=this;let e;if(3&this.$state){const{yc:n,$scope,Nl:h,wc:r,Ic:o}=this,l=s.length,c=r.count(i,o);if(c>l){s.length=c;for(let t=l;c>t;++t)s[t]=h.create(i)}else if(l>c){$lifecycle._t();for(let t=c;l>t;++t)(e=s[t]).release(i),e.ni(i);$lifecycle.Zt(i),$lifecycle.Ri();for(let t=c;l>t;++t)(e=s[t]).bi(i);if($lifecycle.Si(i),s.length=c,0===c)return}else if(0===c)return;$lifecycle.gi(),r.Wn(i,o,null===t?(t,h,r)=>{(e=s[h]).Ci(i,Scope.we(i,$scope,e.$scope&&e.$scope.ve[n]===r?e.$scope.ve:BindingContext.create(i,n,r)))}:(h,r,o)=>{(e=s[r]).Ci(i,Scope.we(i,$scope,!e.$scope||t[r]!==r&&e.$scope.ve[n]!==o?BindingContext.create(i,n,o):e.$scope.ve))}),$lifecycle.mi(i)}if(12&this.$state){const{location:n}=this;if($lifecycle.Nt(),null===t)for(let t=0,h=s.length;h>t;++t)(e=s[t]).Ll(n),e.Wt(i);else for(let h=0,r=s.length;r>h;++h)t[h]!==h&&((e=s[h]).Ll(n),e.Wt(i));$lifecycle.qt(i)}}Cc(t,i){const{$lifecycle,yc:s,$scope,Nl:e,wc:n,Ic:h}=this;let r=this.pc;if(null===t){if(3&this.$state){$lifecycle._t();const t=r.length;let o;for(let s=0;t>s;++s)(o=r[s]).release(i),o.ni(i);$lifecycle.Zt(i),$lifecycle.Ri();for(let s=0;t>s;++s)(o=r[s]).bi(i);$lifecycle.Si(i);const l=n.count(i,h);r=this.pc=Array(l),$lifecycle.gi(),n.Wn(i,h,(t,n,h)=>{(o=r[n]=e.create(i)).Ci(i,Scope.we(i,$scope,BindingContext.create(i,s,h)))}),$lifecycle.mi(i)}if(12&this.$state){const{location:t}=this;let s;$lifecycle.Nt();const e=r.length;for(let n=0;e>n;++n)(s=r[n]).Ll(t),s.Wt(i);$lifecycle.qt(i)}}else{const n=t.length;let o;const l=t.Ot,c=l.length;let u=0;if(3&this.$state){if(c>0){for($lifecycle._t(),u=0;c>u;++u)(o=r[l[u]]).release(i),o.ni(i);for($lifecycle.Zt(i),$lifecycle.Ri(),u=0;c>u;++u)(o=r[l[u]]).bi(i);$lifecycle.Si(i),u=0;let s=0,e=0;for(l.sort();c>u;++u)for(r.splice(s=l[u]-u,1),e=0;n>e;++e)s>t[e]||--t[e]}for($lifecycle.gi(),u=0;n>u;++u)-2===t[u]&&((o=e.create(i)).Ci(i,Scope.we(i,$scope,BindingContext.create(i,s,h[u]))),r.splice(u,0,o));if($lifecycle.mi(i),r.length!==n)throw Error(`viewsLen=${r.length}, mapLen=${n}`)}if(12&this.$state){const{location:s}=this,e=(function(t){const i=t.length,s=i+t.Ot.length,e=255>s?Uint8Array:65535>s?Uint16Array:Uint32Array;i>us&&(us=i,ls=new e(i),cs=new e(i));let n=0,h=0,r=0,o=0,l=0,c=0,u=0,a=0;for(;i>o;o++)if(-2!==(h=t[o])){if(-2!==(r=t[l=ls[n]])&&h>r){cs[o]=l,ls[++n]=o;continue}for(c=0,u=n;u>c;)-2!==(r=t[ls[a=c+u>>1]])&&h>r?c=a+1:u=a;((r=t[ls[c]])>h||-2===r)&&(c>0&&(ls[o]=ls[c-1]),ls[c]=o)}const f=new e(o=++n);for(h=ls[n-1];n-- >0;)f[n]=h,h=cs[h];for(;o-- >0;)ls[o]=0;return f})(t),n=e.length;$lifecycle._t(),$lifecycle.Nt(),$lifecycle.Gt({Kh(){let h=s,l=n-1;for(u=t.length-1;u>=0;--u)if(-2===t[u]){(o=r[u]).$state|=4;let t=o.Ht;for(;null!==t;)t.Wt(i|LifecycleFlags.Ut),t=t.Qt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else if(0>l||1===n||u!==e[l]){(o=r[t[u]]).$state|=32;let s=o.ei;for(;null!==s;)s.ni(i|LifecycleFlags.Jt),s=s.hi;for(o.$nodes.remove(),o.$state&=-57,o.$state|=4,s=o.Ht;null!==s;)s.Wt(i|LifecycleFlags.Ut),s=s.Qt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else h=(o=r[u]).$nodes.firstChild,--l},zh:null}),$lifecycle.Zt(i),$lifecycle.qt(i)}}}mc(t){const i=ProxyObserver.jt(this),s=i.gc;if(3&i.$state){const e=i.gc=getCollectionObserver(t,i.$lifecycle,i.Ic);s!==e&&s&&s.At(i),e&&e.St(i)}else s&&s.At(i)}}let ls,cs;t("Repeat",Repeat),Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],s([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.Gi({name:"repeat",isTemplateController:1},Repeat);let us=0;class Replaceable{constructor(t,i){this.Nl=t,this.currentView=this.Nl.create(),this.currentView.Ll(i)}pi(t){this.currentView.Ci(t|LifecycleFlags.Ks,this.$scope)}zt(t){this.currentView.Wt(t)}Xt(t){this.currentView.ni(t)}Ti(t){this.currentView.bi(t)}}t("Replaceable",Replaceable),Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.Gi({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,i){this.value=null,this.Nl=t,this.currentView=this.Nl.create(),this.currentView.Ll(i)}fc(){3&this.$state&&this.Bc(LifecycleFlags.Es)}pi(t){this.Bc(t)}zt(t){this.currentView.Wt(t)}Xt(t){this.currentView.ni(t)}Ti(t){this.currentView.bi(t)}Bc(t){const i=Scope.we(t,this.$scope,this.value);this.currentView.Ci(t,i)}}t("With",With),With.inject=[IViewFactory,IRenderLocation],s([bindable],With.prototype,"value",void 0),CustomAttributeResource.Gi({name:"with",isTemplateController:1},With);const ISanitizer=t("ISanitizer",DI.Ce("ISanitizer").ye(t=>t.singleton(class{Tc(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}})));class SanitizeValueConverter{constructor(t){this.Sc=t}_i(t){return null==t?null:this.Sc.Tc(t)}}t("SanitizeValueConverter",SanitizeValueConverter),SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Gi("sanitize",SanitizeValueConverter),Profiler.vl("Aurelia.start"),Profiler.vl("Aurelia.stop");class Aurelia{constructor(t=DI.Ac()){this.ql=t,this.jc=[],this.Lc=[],this.Pc=[],this.Vc=0,this.$c=null,Registration.C(Aurelia,this).register(t,Aurelia)}register(...t){return this.ql.register(...t),this}app(t){const host=t.host;this.ql.get(IDOMInitializer).initialize(t);const i=LifecycleFlags.Ms|t.strategy,s=LifecycleFlags.ii|t.strategy;let component;const e=t.component;CustomElementResource.Te(e)?(this.ql.register(e),component=this.ql.get(CustomElementResource.et(e.description.name))):component=e,component=ProxyObserver.jt(component);const n=()=>{host.$au=this,this.jc.includes(component)||(this.$c=component,this.jc.push(component),component.rc(i,this.ql,host)),component.Ci(i|LifecycleFlags.ft,null),component.Wt(i|LifecycleFlags.Ut)};return this.Lc.push(n),this.Pc.push(()=>{component.ni(s|LifecycleFlags.Jt),component.bi(s|LifecycleFlags.Ii),host.$au=null}),this.Vc&&n(),this}root(){return ProxyObserver.ee(this.$c)}start(){for(const t of this.Lc)t();return this.Vc=1,this}stop(){this.Vc=0;for(const t of this.Pc)t();return this}}t("Aurelia",Aurelia),PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=t("IDOMInitializer",DI.Ce("IDOMInitializer").eh());class as{constructor(t){const i=this.kc={};t.forEach(t=>{i[t.Qi]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}$i(t,dom,i,s,targets,e,host,parts){const n=e.instructions,h=this.kc;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,r,o;for(let e=0,l=targets.length;l>e;++e){r=targets[e];for(let l=0,c=(instructions=n[e]).length;c>l;++l)h[(o=instructions[l]).type].$i(t,dom,i,s,r,o,parts)}if(host){const n=e.surrogates;for(let e=0,r=n.length;r>e;++e)h[(o=n[e]).type].$i(t,dom,i,s,host,o,parts)}}}as.inject=[all(IInstructionRenderer)];let fs=class{$i(t,dom,i,s,e,n){e[n.to]=n.value}};fs=s([instructionRenderer("re")],fs);let ds=class{$i(t,dom,i,s,e,n){const h=i.ki(s,e,n,null,null,e,1),component=i.get(Q(n.res)),r=i.get(IRenderer).kc,o=n.instructions;let l;component.rc(t,i,e,n);for(let e=0,n=o.length;n>e;++e)r[(l=o[e]).type].$i(t,dom,i,s,component,l);addComponent(s,component),h.st()}};ds=s([instructionRenderer("ra")],ds);let bs=class{$i(t,dom,i,s,e,n){const h=i.ki(s,e,n),component=i.get(_(n.res)),r=i.get(IRenderer).kc,o=n.instructions;let l;component.rc(t,i);for(let e=0,n=o.length;n>e;++e)r[(l=o[e]).type].$i(t,dom,i,s,component,l);addComponent(s,component),h.st()}};bs=s([instructionRenderer("rb")],bs);let gs=class{constructor(t){this.Dc=t}$i(t,dom,i,s,e,n,parts){const h=this.Dc.Jl(dom,n.def,i),r=i.ki(s,e,n,h,parts,dom.pl(e),0),component=i.get(_(n.res)),o=i.get(IRenderer).kc,l=n.instructions;let c;component.rc(t,i),n.link&&component.link(s.ei);for(let e=0,n=l.length;n>e;++e)o[(c=l[e]).type].$i(t,dom,i,s,component,c);addComponent(s,component),r.st()}};gs.inject=[IRenderingEngine],gs=s([instructionRenderer("rc")],gs);let vs=class{constructor(t,i){this.Mc=t,this.ct=i}$i(t,dom,i,s,e,n){dom.remove(e);const h=n.instructions,toViewModel=n.toViewModel;let r,o,l;for(let t=0,e=h.length;e>t;++t)o=ensureExpression(this.Mc,(r=h[t]).from,48),addBinding(s,l=new LetBinding(o,r.to,this.ct,i,toViewModel))}};vs.inject=[IExpressionParser,IObserverLocator],vs=s([instructionRenderer("rd")],vs);let ps=class{constructor(t,i){this.Mc=t,this.ct=i}$i(t,dom,i,s,e,n){const h=ensureExpression(this.Mc,n.from,153);addBinding(s,new Call(h,e,n.to,this.ct,i))}};ps.inject=[IExpressionParser,IObserverLocator],ps=s([instructionRenderer("rh")],ps);let ms=class{constructor(t){this.Mc=t}$i(t,dom,i,s,e,n){const h=ensureExpression(this.Mc,n.from,1280);addBinding(s,new Ref(h,e,i))}};ms.inject=[IExpressionParser],ms=s([instructionRenderer("rj")],ms);let ws=class{constructor(t,i){this.Mc=t,this.ct=i}$i(t,dom,i,s,e,n){let h;const r=ensureExpression(this.Mc,n.from,2048);addBinding(s,h=r.Gn?new MultiInterpolationBinding(this.ct,r,e,n.to,BindingMode._i,i):new InterpolationBinding(r._n,r,e,n.to,BindingMode._i,this.ct,i,1))}};ws.inject=[IExpressionParser,IObserverLocator],ws=s([instructionRenderer("rf")],ws);let ys=class{constructor(t,i){this.Mc=t,this.ct=i}$i(t,dom,i,s,e,n){const h=ensureExpression(this.Mc,n.from,48|n.mode);addBinding(s,new Binding(h,e,n.to,n.mode,this.ct,i))}};ys.inject=[IExpressionParser,IObserverLocator],ys=s([instructionRenderer("rg")],ys);let Cs=class{constructor(t,i){this.Mc=t,this.ct=i}$i(t,dom,i,s,e,n){const h=ensureExpression(this.Mc,n.from,539);addBinding(s,new Binding(h,e,n.to,BindingMode._i,this.ct,i))}};Cs.inject=[IExpressionParser,IObserverLocator],Cs=s([instructionRenderer("rk")],Cs);class Os{bind(t,i,s,e){s.target.key=e,s.target.ss=1}xe(t,i,s){s.target.key=null,s.target.ss=0}}BindingBehaviorResource.Gi("keyed",Os);const DefaultComponents=[t("IObserverLocatorRegistration",ki),t("ILifecycleRegistration",zt),t("IRendererRegistration",as)],IfRegistration=t("IfRegistration",If),ElseRegistration=t("ElseRegistration",Else),RepeatRegistration=t("RepeatRegistration",Repeat),ReplaceableRegistration=t("ReplaceableRegistration",Replaceable),WithRegistration=t("WithRegistration",With),SanitizeValueConverterRegistration=t("SanitizeValueConverterRegistration",SanitizeValueConverter),DebounceBindingBehaviorRegistration=t("DebounceBindingBehaviorRegistration",DebounceBindingBehavior),KeyedBindingBehaviorRegistration=t("KeyedBindingBehaviorRegistration",Os),OneTimeBindingBehaviorRegistration=t("OneTimeBindingBehaviorRegistration",OneTimeBindingBehavior),ToViewBindingBehaviorRegistration=t("ToViewBindingBehaviorRegistration",ToViewBindingBehavior),FromViewBindingBehaviorRegistration=t("FromViewBindingBehaviorRegistration",FromViewBindingBehavior),SignalBindingBehaviorRegistration=t("SignalBindingBehaviorRegistration",SignalBindingBehavior),ThrottleBindingBehaviorRegistration=t("ThrottleBindingBehaviorRegistration",ThrottleBindingBehavior),TwoWayBindingBehaviorRegistration=t("TwoWayBindingBehaviorRegistration",TwoWayBindingBehavior),DefaultResources=t("DefaultResources",[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,KeyedBindingBehaviorRegistration,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration]),CallBindingRendererRegistration=t("CallBindingRendererRegistration",ps),CustomAttributeRendererRegistration=t("CustomAttributeRendererRegistration",bs),CustomElementRendererRegistration=t("CustomElementRendererRegistration",ds),InterpolationBindingRendererRegistration=t("InterpolationBindingRendererRegistration",ws),IteratorBindingRendererRegistration=t("IteratorBindingRendererRegistration",Cs),LetElementRendererRegistration=t("LetElementRendererRegistration",vs),DefaultRenderers=[t("PropertyBindingRendererRegistration",ys),IteratorBindingRendererRegistration,CallBindingRendererRegistration,t("RefBindingRendererRegistration",ms),InterpolationBindingRendererRegistration,t("SetPropertyRendererRegistration",fs),CustomElementRendererRegistration,CustomAttributeRendererRegistration,t("TemplateControllerRendererRegistration",gs),LetElementRendererRegistration];t("RuntimeBasicConfiguration",{register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),Ac(){return this.register(DI.Ac())}}),t("InterpolationInstruction",class{constructor(from,to){this.type="rf",this.from=from,this.to=to}}),t("OneTimeBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}),t("ToViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode._i,this.oneTime=0,this.to=to}}),t("FromViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Ji,this.oneTime=0,this.to=to}}),t("TwoWayBindingInstruction",class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.Xi,this.oneTime=0,this.to=to}}),t("IteratorBindingInstruction",class{constructor(from,to){this.type="rk",this.from=from,this.to=to}}),t("CallBindingInstruction",class{constructor(from,to){this.type="rh",this.from=from,this.to=to}}),t("RefBindingInstruction",class{constructor(from){this.type="rj",this.from=from}}),t("SetPropertyInstruction",class{constructor(value,to){this.type="re",this.to=to,this.value=value}}),t("HydrateElementInstruction",class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}),t("HydrateAttributeInstruction",class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}),t("HydrateTemplateController",class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}),t("LetElementInstruction",class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}),t("LetBindingInstruction",class{constructor(from,to){this.type="ri",this.from=from,this.to=to}})}}});
