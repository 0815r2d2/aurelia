System.register("runtime",["@aurelia/kernel"],function(t){"use strict";var Reporter,DI,Registration,PLATFORM,Profiler,RuntimeCompilationResources,IContainer,all;return{t:[function(t){Reporter=t.Reporter,DI=t.DI,Registration=t.Registration,PLATFORM=t.PLATFORM,Profiler=t.Profiler,RuntimeCompilationResources=t.RuntimeCompilationResources,IContainer=t.IContainer,all=t.all}],i(){function i(t,i,s,e){var n,h,r=arguments.length,o=3>r?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,e);else for(h=t.length-1;h>=0;h--)(n=t[h])&&(o=(3>r?n(o):r>3?n(i,s,o):n(i,s))||o);return r>3&&o&&Object.defineProperty(i,s,o),o}function subscriberCollection(t){return function(i){const c=i.prototype;switch(c.s=0,c.h=null,c.o=null,c.l=null,c.u=null,c.v=s,c.p=e,c.g=l,c.m=o,t){case MutationKind.C:c.O=n;break;case MutationKind.I:c.O=h;break;case MutationKind.T:c.O=r}}}function s(t){if(this.g(t))return 0;const i=this.s;return 1&i?2&i?4&i?8&i?(this.u.push(t),1):(this.u=[t],this.s|=8,1):(this.l=t,this.s|=4,1):(this.o=t,this.s|=2,1):(this.h=t,this.s|=1,1)}function e(t){const i=this.s;if(1&i&&this.h===t)return this.h=null,this.s&=-2,1;if(2&i&&this.o===t)return this.o=null,this.s&=-3,1;if(4&i&&this.l===t)return this.l=null,this.s&=-5,1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.s&=-9),1}return 0}function n(t,i,s){const e=this.h,n=this.o,h=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==h&&h.B(t,i,s);const o=r&&r.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=r[e];null!==n&&n.B(t,i,s)}}function h(t,i,s){const e=this.h,n=this.o,h=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==h&&h.B(t,i,s);const o=r&&r.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=r[e];null!==n&&n.B(t,i,s)}this.A.S(this).catch(t=>{throw t})}function r(t,i,s,e){const n=this.h,h=this.o,r=this.l;let o=this.u;null!==o&&(o=o.slice()),null!==n&&n.B(t,i,s,e),null!==h&&h.B(t,i,s,e),null!==r&&r.B(t,i,s,e);const l=o&&o.length;if(void 0!==l&&l>0)for(let n=0;l>n;++n){const h=o[n];null!==h&&h.B(t,i,s,e)}}function o(){return 0!==this.s}function l(t){const i=this.s;if(1&i&&this.h===t)return 1;if(2&i&&this.o===t)return 1;if(4&i&&this.l===t)return 1;if(8&i){const i=this.u;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const i=t.prototype;i.j=0,i.R=null,i.P=null,i.L=null,i.k=null,i.V=c,i.D=u,i.M=d,i.F=f,i.$=a}}function c(t){if(this.M(t))return 0;const i=this.j;return 1&i?2&i?4&i?8&i?(this.k.push(t),1):(this.k=[t],this.j|=8,1):(this.L=t,this.j|=4,1):(this.P=t,this.j|=2,1):(this.R=t,this.j|=1,1)}function u(t){const i=this.j;if(1&i&&this.R===t)return this.R=null,this.j&=-2,1;if(2&i&&this.P===t)return this.P=null,this.j&=-3,1;if(4&i&&this.L===t)return this.L=null,this.j&=-5,1;if(8&i){const i=this.k;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.j&=-9),1}return 0}function a(t,i){const s=this.R,e=this.P,n=this.L;let h=this.k;null!==h&&(h=h.slice()),null!==s&&s.U(t,i),null!==e&&e.U(t,i),null!==n&&n.U(t,i);const r=h&&h.length;if(void 0!==r&&r>0)for(let s=0;r>s;++s){const e=h[s];null!==e&&e.U(t,i)}}function f(){return 0!==this.j}function d(t){const i=this.j;if(1&i&&this.R===t)return 1;if(2&i&&this.P===t)return 1;if(4&i&&this.L===t)return 1;if(8&i){const i=this.k;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function b(t){if(0==this.N){this.N=1;const{H:t,q:i}=this;this.K=t[i],jt.get=(()=>this.W()),jt.set=(value=>{this.G(value,LifecycleFlags._)}),At(t,i,jt)||Reporter.write(1,i,t)}this.v(t)}function v(){delete this.H[this.q],this.H=null,this.q=null,this.K=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.C)(t);const i=t.prototype;i.N=0,i.H=null,i.q=null,i.K=Symbol(),i.subscribe=i.subscribe||b,i.unsubscribe=i.unsubscribe||i.p,i.J=i.J||v}}function p(t){const i=BindingBehaviorResource.X(this.description.name);t.register(Registration.singleton(i,this))}function g(t){const i=this.kind.X(this.description.name);t.register(Registration.singleton(i,this))}function hasBind(t){return 2048==(2048&t.Y)}function hasUnbind(t){return 4096==(4096&t.Y)}function isLiteral(t){return 16384==(16384&t.Y)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.Y){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.Z);case 17925:return 1}return 0}function m(t,i,s,e){const n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}function w(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(t&LifecycleFlags.tt)&&null==s)return null;throw Reporter.error(207,i,name,s)}function y(t){if(t===Ut){const i=$t.length=xt.length=(Ut+=5)+1;for(let s=t+1;i>s;++s)$t[s]=`_observer${s}`,xt[s]=`_observerVersion${s}`}}function C(t){const i=void 0===this.it?0:this.it;let s=i;for(;s--&&this[$t[s]]!==t;);if(-1===s){for(s=0;this[$t[s]];)s++;this[$t[s]]=t,t.subscribe(this),s===i&&(this.it=s+1)}void 0===this.version&&(this.version=0),this[xt[s]]=this.version,y(s)}function O(t,i,s){const e=this.et.st(t,i,s);this.nt(e)}function I(t){const i=this.it;let s,e;if(1==t)for(let t=0;i>t;++t)null!=(e=this[s=$t[t]])&&(this[s]=null,e.unsubscribe(this));else{const t=this.version;for(let n=0;i>n;++n)this[xt[n]]!==t&&null!=(e=this[s=$t[n]])&&(this[s]=null,e.unsubscribe(this))}}function T(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.ht=O),i.hasOwnProperty("unobserve")||(i.unobserve=I),i.hasOwnProperty("addObserver")||(i.nt=C),t}function connectable(t){return void 0===t?T:T(t)}function B(t,i){if(this.K!==(t=null==t?this.defaultValue:t)){if(this.K=t,!(i&(LifecycleFlags.rt|LifecycleFlags.ot))||this.lt&&i&LifecycleFlags.ct)return this.ut=i,this.A.S(this);this.at(t,i)}return Promise.resolve()}function S(t){if(this.lt&&t&LifecycleFlags.ct)return void this.A.S(this).catch(t=>{throw t});const i=this.K;this.oldValue!==i&&(this.at(i,this.ut|t|LifecycleFlags._),this.oldValue=this.K)}function A(){this.K=null,this.oldValue=null,this.defaultValue=null,this.H=null,this.q=""}function targetObserver(t=null){return function(i){subscriberCollection(MutationKind.C)(i);const s=i.prototype;s.ft=null,s.K=t,s.oldValue=t,s.defaultValue=t,s.H=null,s.q="",s.G=s.G||B,s.flush=s.flush||S,s.J=s.J||A}}function j(t){this.$(this.dt,t|this.bt),this.vt&&this.vt.pt(LifecycleFlags.rt|LifecycleFlags._|this.bt),this.gt()}function R(){this.I.wt=void 0,this.I=null,this.dt=null}function P(){const t=this.I.length,i=this.dt=Array(t);let s=0;for(;t>s;)i[s]=s++;i.yt=[]}function L(){const t=this.I.size,i=this.dt=Array(t);let s=0;for(;t>s;)i[s]=s++;i.yt=[]}function k(){return void 0===this.vt?this.vt=new CollectionLengthObserver(this,this.Ct):this.vt}function collectionObserver(t){return function(i){subscriberCollection(MutationKind.I)(i),batchedSubscriberCollection()(i);const s=i.prototype;s.ft=null,s.I=null,s.dt=null,s.Ot=0,s.Ct=8&t?"length":"size",s.It=t,s.gt=8&t?P:L,s.flush=j,s.J=R,s.Tt=k,s.subscribe=s.subscribe||s.v,s.unsubscribe=s.unsubscribe||s.p,s.Bt=s.Bt||s.V,s.St=s.St||s.D}}function V(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function D(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function M(t,i,from,to,s){let e,n,h,r,o,l,c;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],c=l-1;c>=from&&(r=i[c],(o=s(h=t[c],e))>0);c--)t[c+1]=h,i[c+1]=r;t[c+1]=e,i[c+1]=n}}function F(t,i,from,to,s){let e,n,h,r,o,l,c,u,a,f,d,b,v,p,g,m,w,y,C,O=0,I=0;for(;;){if(10>=to-from)return void M(t,i,from,to,s);r=i[from],o=i[to-1],h=t[O=from+(to-from>>1)],l=i[O],(c=s(e=t[from],n=t[to-1]))>0&&(f=e,d=r,e=n,r=o,n=f,o=d),0>(u=s(e,h))?(a=s(n,h))>0&&(f=n,d=o,n=h,o=l,h=f,l=d):(f=e,d=r,e=h,r=l,h=n,l=o,n=f,o=d),t[from]=e,i[from]=r,t[to-1]=h,i[to-1]=l,b=n,v=o,g=to-1,t[O]=t[p=from+1],i[O]=i[p],t[p]=b,i[p]=v;t:for(I=p+1;g>I;I++)if(w=i[I],0>(y=s(m=t[I],b)))t[I]=t[p],i[I]=i[p],t[p]=m,i[p]=w,p++;else if(y>0){do{if(--g==I)break t;y=s(C=t[g],b)}while(y>0);t[I]=t[g],i[I]=i[g],t[g]=m,i[g]=w,0>y&&(m=t[I],w=i[I],t[I]=t[p],i[I]=i[p],t[p]=m,i[p]=w,p++)}p-from>to-g?(F(t,i,g,to,s),to=p):(F(t,i,from,p,s),from=g)}}function enableArrayObservation(){for(const t of ii)1!=Wt[t].N&&def(Wt,t,Object.assign({},ei,{value:si[t]}))}function $(t,i,s){return s.wt||new ArrayObserver(t,i,s)}function enableMapObservation(){for(const t of ci)1!=ni[t].N&&fi(ni,t,Object.assign({},ai,{value:ui[t]}))}function x(t,i,s){return s.wt||new MapObserver(t,i,s)}function enableSetObservation(){for(const t of mi)1!=di[t].N&&Ci(di,t,Object.assign({},yi,{value:wi[t]}))}function U(t,i,s){return s.wt||new SetObserver(t,i,s)}function getCollectionObserver(t,i,s){switch(Si.call(s)){case"[object Array]":return $(t,i,s);case"[object Map]":return x(t,i,s);case"[object Set]":return U(t,i,s)}return null}function N(t,i,s){const e=this.At;PLATFORM.global.clearTimeout(e.jt),e.jt=PLATFORM.global.setTimeout(()=>{this.Rt(t,i,s)},e.Pt)}function E(t,i,s){const e=this.At;if(PLATFORM.global.clearTimeout(e.jt),!(s&e.Lt))return e.oldValue=Vi,void this.Rt(t,i,s);e.oldValue===Vi&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=Vi,this.Rt(t,i,s)},e.Pt);e.jt=n}function z(t){const i=this.kt,s=+new Date-i.Vt;if(s>=i.Pt)return PLATFORM.global.clearTimeout(i.jt),i.jt=-1,i.Vt=+new Date,void this.Dt(t);if(i.newValue=t,-1===i.jt){const t=PLATFORM.global.setTimeout(()=>{i.jt=-1,i.Vt=+new Date,this.Dt(i.newValue)},i.Pt-s);i.jt=t}}function H(name){return`${Mi}:${name}`}function q(t){return void 0===t.$customElement?null:t.$customElement}function K(name){return`${Fi}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,s){const def=new Ui,e=arguments.length;switch(e){case 13:null!==s&&(def.Mt=s);case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?$i:0==build?xi:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof i?i.length>0&&(def.name=i):null!==i&&(Ni.forEach(t=>{i[t]&&(def[t]=i[t])}),Ei.forEach(t=>{i[t]&&(def[t]=PLATFORM.toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.Ft?def.bindables=Object.assign({},i.bindables):Object.assign(def.bindables,i.bindables)))}return 2!==e||null===t||"string"!=typeof i&&"build"in i||(def.build=$i),def}function W(t){if(8&this.$state)return;const i=this.$lifecycle;i.$t(),this.$state|=4,t|=LifecycleFlags.xt;const s=this.$hooks;16&s&&this.Ut(t),this.$state|=8,this.$state&=-5,32&s&&i.Nt(this),i.Et(t)}function Q(t){if(8&this.$state)return;const i=this.$lifecycle;i.$t(),this.$state|=4,t|=LifecycleFlags.xt;const s=this.$hooks;16&s&&this.Ut(t);let e=this.zt;for(;null!==e;)e.Ht(t),e=e.qt;i.Kt(this),this.$state|=8,this.$state&=-5,32&s&&i.Nt(this),i.Et(t)}function G(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.xt;let i=this.zt;for(;null!==i;)i.Ht(t),i=i.qt;this.$lifecycle.Kt(this),this.$state|=8,this.$state&=-5}function _(t){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,t|=LifecycleFlags.Qt;const s=this.$hooks;64&s&&this.Gt(t),this.$state&=-41,128&s&&i._t(this),i.Jt(t)}}function J(t){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,(t|=LifecycleFlags.Qt)&LifecycleFlags.Xt^LifecycleFlags.Xt|t&LifecycleFlags.Yt&&(i.Zt(this),t|=LifecycleFlags.Xt);const s=this.$hooks;64&s&&this.Gt(t);let e=this.ti;for(;null!==e;)e.ii(t),e=e.si;this.$state&=-41,128&s&&i._t(this),i.Jt(t)}}function X(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.Qt)&LifecycleFlags.Xt^LifecycleFlags.Xt|t&LifecycleFlags.Yt&&(this.$lifecycle.Zt(this),t|=LifecycleFlags.Xt);let i=this.ti;for(;null!==i;)i.ii(t),i=i.si;this.$state&=-41}}function Y(t){2048&this.$hooks&&this.ei(t|=LifecycleFlags.ni)}function Z(t){t|=LifecycleFlags.ni,2048&this.$hooks&&this.ei(t);let i=this.ti;for(;null!==i;)i.hi(t),i=i.si}function tt(t){t|=LifecycleFlags.ni;let i=this.ti;for(;null!==i;)i.hi(t),i=i.si}function it(){16&this.$state||(this.$state|=16,this.oi.ri(this.$nodes))}function st(){16&this.$state&&(this.$state&=-17,this.oi.li(this.$nodes))}function et(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function nt(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.ci&&(this.ci=0,this.cache.ui(this))?(this.$state|=128,1):0):0}function ht(t,i){if(t|=LifecycleFlags.ot,2&this.$state){if(this.$scope===i)return;this.ai(t)}const s=this.$lifecycle;s.fi(),this.$state|=1;const e=this.$hooks;8&e&&s.di(this),this.$scope=i,4&e&&this.bi(t),this.$state|=2,this.$state&=-2,s.vi(t)}function rt(t,i){if(2&this.$state)return;const s=this.$scope;s.pi=i;const e=this.$lifecycle;e.fi(),this.$state|=1;const n=this.$hooks;t|=LifecycleFlags.ot,8&n&&e.di(this);let h=this.gi;for(;null!==h;)h.mi(t,s),h=h.wi;4&n&&this.bi(t);let component=this.zt;for(;null!==component;)component.mi(t,s),component=component.qt;this.$state|=2,this.$state&=-2,e.vi(t)}function ot(t,i){if(t|=LifecycleFlags.ot,2&this.$state){if(this.$scope===i)return;this.ai(t)}this.$state|=1,this.$scope=i;let s=this.gi;for(;null!==s;)s.mi(t,i),s=s.wi;let component=this.zt;for(;null!==component;)component.mi(t,i),component=component.qt;this.$state|=2,this.$state&=-2}function lt(t){if(t|=LifecycleFlags.ot,2&this.$state)return;this.$state|=1;const i=this.$scope;let s=this.gi;for(;null!==s;)s.mi(t,i),s=s.wi;let component=this.zt;for(;null!==component;)component.mi(t,i),component=component.qt;this.$state|=2,this.$state&=-2}function ct(t){if(2&this.$state){const i=this.$lifecycle;i.yi(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.Ci,512&s&&i.Oi(this),256&s&&this.Ii(t),this.$state&=-67,i.Ti(t)}}function ut(t){if(2&this.$state){const i=this.$lifecycle;i.yi(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.Ci,512&s&&i.Oi(this),256&s&&this.Ii(t);let component=this.ti;for(;null!==component;)component.ai(t),component=component.si;let e=this.Bi;for(;null!==e;)e.ai(t),e=e.Si;this.$scope.pi=null,this.$state&=-67,i.Ti(t)}}function at(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ci;let component=this.ti;for(;null!==component;)component.ai(t),component=component.si;let i=this.Bi;for(;null!==i;)i.ai(t),i=i.Si;this.$state&=-67,this.$scope=null}}function ft(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ci;let component=this.ti;for(;null!==component;)component.ai(t),component=component.si;let i=this.Bi;for(;null!==i;)i.ai(t),i=i.Si;this.$state&=-67}}function createRenderContext(dom,t,dependencies,i){const s=t.Ai(),e=new Qi,n=new Qi,h=new Qi,r=new Gi,o=new Qi,l=s.get(IRenderer);return dom.ji(s,n),s.Ri(IViewFactory,r),s.Ri(IRenderable,e),s.Ri(ITargetedInstruction,h),s.Ri(IRenderLocation,o),dependencies&&s.register(...dependencies),i&&i.register(s),s.Pi=function(t,i,targets,s,host,parts){l.Pi(t,dom,this,i,targets,s,host,parts)},s.Li=function(t,i,l,c,parts,u){return e.ki(t),n.ki(i),h.ki(l),c&&r.ki(c,parts),u&&o.ki(u),s},s.J=function(){r.J(),e.J(),h.J(),n.J(),o.J()},s}function dt(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=q(t[s]);null!==component&&i.push(component)}return i}function bt(t,i,name){Reflect.defineProperty(i,name,{Vi:1,get(){return this.Di[name].W()},set(value){this.Di[name].G(value,t&LifecycleFlags.Mi|LifecycleFlags._)}})}function vt(t){const i=this.kind.X(this.description.name);t.register(Registration.transient(i,this))}function pt(t){return t.containerless=1,t}function gt(t,i){const s=this.constructor;i.get(IRenderingEngine).Fi(t,s,this),2&this.$hooks&&this.$i(t)}function mt(t,i,host,s=PLATFORM.Ft){const e=this.constructor,n=e.description,h=i.get(IProjectorLocator),r=i.get(IRenderingEngine),dom=i.get(IDOM);let o;if(o=t&LifecycleFlags.Mt?ProxyObserver.xi(this).T:this,this.$scope=Scope.create(t,o,null),this.Ui=host,this.oi=h.Ni(dom,this,host,n),r.Fi(t,e,this),1024&this.$hooks){const n=this.Pi(t,host,s.parts,i);n&&"getElementTemplate"in n&&n.Ei(r,e,i).Pi(this,host,s.parts)}else r.Ei(dom,n,i,e).Pi(this,host,s.parts);2&this.$hooks&&this.$i(t)}function wt(t){const i=this.description,s=this.kind.X(i.name),aliases=i.aliases;t.register(Registration.transient(s,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind.X(aliases[i]);t.register(Registration.zi(s,e))}}function yt(t){return t.Hi=1,t}function bindable(t,i){let s;const e=function(t,i){const e=t.constructor;let bindables=e.bindables;void 0===bindables&&(bindables=e.bindables={}),s.qi||(s.qi=PLATFORM.Ki(i)),s.Wi||(s.Wi=`${i}Changed`),void 0===s.mode&&(s.mode=BindingMode.Qi),void 0===s.Mt&&(s.Mt=0),arguments.length>1&&(s.Gi=i),bindables[s.Gi]=s};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e._i=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){i.Si=t.Bi,i.wi=null,null===t.Bi?t.gi=i:t.Bi.wi=i,t.Bi=i}function addComponent(t,component){component.si=t.ti,component.qt=null,null===t.ti?t.zt=component:t.ti.qt=component,t.ti=component}var BindingMode,State,Hooks,LifecycleFlags,ExpressionKind,Ct,DelegationStrategy,MutationKind,CollectionKind,Ot,It,Tt,BindingType,TargetedInstructionType,ViewCompileFlags;t({connects:t=>32==(32&t.Y),observes:t=>64==(64&t.Y),callsFunction:t=>128==(128&t.Y),hasAncestor:t=>256==(256&t.Y),isAssignable:t=>8192==(8192&t.Y),isLeftHandSide:t=>1024==(1024&t.Y),isPrimary:t=>512==(512&t.Y),isResource:t=>32768==(32768&t.Y),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,connectable,BindingType:void 0,enableArrayObservation,disableArrayObservation(){for(const t of ii)1==Wt[t].N&&def(Wt,t,Object.assign({},ei,{value:ti[t]}))},enableMapObservation,disableMapObservation(){for(const t of ci)1==ni[t].N&&fi(ni,t,Object.assign({},ai,{value:li[t]}))},enableSetObservation,disableSetObservation(){for(const t of mi)1==di[t].N&&Ci(di,t,Object.assign({},yi,{value:gi[t]}))},collectionObserver,computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),getCollectionObserver,propertyObserver,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>i=>BindingBehaviorResource.Ji(t,i),customAttribute:t=>i=>CustomAttributeResource.Ji(t,i),dynamicOptions:t=>void 0===t?yt:yt(t),templateController:t=>i=>CustomAttributeResource.Ji("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),i),containerless:t=>void 0===t?pt:pt(t),customElement:t=>i=>CustomElementResource.Ji(t,i),useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:Xi;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Ji(t,i),bindable,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},TargetedInstructionType:void 0,BindingMode:void 0,ExpressionKind:void 0,Hooks:void 0,LifecycleFlags:void 0,State:void 0,stringifyLifecycleFlags(t){const i=[];return t&LifecycleFlags.tt&&i.push("mustEvaluate"),t&LifecycleFlags.Xi&&i.push("isCollectionMutation"),t&LifecycleFlags.Yi&&i.push("isInstanceMutation"),t&LifecycleFlags.Zi&&i.push("updateTargetObserver"),t&LifecycleFlags._&&i.push("updateTargetInstance"),t&LifecycleFlags.ts&&i.push("updateSourceExpression"),t&LifecycleFlags.ss&&i.push("fromAsyncFlush"),t&LifecycleFlags.es&&i.push("fromSyncFlush"),t&LifecycleFlags.ns&&i.push("fromStartTask"),t&LifecycleFlags.Yt&&i.push("fromStopTask"),t&LifecycleFlags.ot&&i.push("fromBind"),t&LifecycleFlags.Ci&&i.push("fromUnbind"),t&LifecycleFlags.xt&&i.push("fromAttach"),t&LifecycleFlags.Qt&&i.push("fromDetach"),t&LifecycleFlags.ni&&i.push("fromCache"),t&LifecycleFlags.hs&&i.push("fromDOMEvent"),t&LifecycleFlags.rs&&i.push("fromObserverSetter"),t&LifecycleFlags.os&&i.push("fromBindableHandler"),t&LifecycleFlags.ls&&i.push("fromLifecycleTask"),t&LifecycleFlags.Xt&&i.push("parentUnmountQueued"),t&LifecycleFlags.ct&&i.push("doNotUpdateDOM"),t&LifecycleFlags.cs&&i.push("isTraversingParentScope"),t&LifecycleFlags.us&&i.push("allowParentScopeTraversal"),t&LifecycleFlags.Mt&&i.push("useProxies"),i.join("|")},CollectionKind:void 0,DelegationStrategy:void 0,MutationKind:void 0,instructionRenderer,ensureExpression,addComponent,addBinding,createRenderContext,ViewCompileFlags:void 0}),(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Qi=2]="toView",BindingMode[BindingMode.as=4]="fromView",BindingMode[BindingMode.fs=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode=t("BindingMode",{}))),(function(State){State[State.ds=0]="none",State[State.bs=1]="isBinding",State[State.vs=2]="isBound",State[State.ps=4]="isAttaching",State[State.gs=8]="isAttached",State[State.ms=16]="isMounted",State[State.ws=32]="isDetaching",State[State.ys=64]="isUnbinding",State[State.Cs=128]="isCached",State[State.Os=256]="isContainerless"})(State||(State=t("State",{}))),(function(Hooks){Hooks[Hooks.ds=1]="none",Hooks[Hooks.Is=2]="hasCreated",Hooks[Hooks.Ts=4]="hasBinding",Hooks[Hooks.Bs=8]="hasBound",Hooks[Hooks.Ss=16]="hasAttaching",Hooks[Hooks.As=32]="hasAttached",Hooks[Hooks.js=64]="hasDetaching",Hooks[Hooks.Rs=128]="hasDetached",Hooks[Hooks.Ps=256]="hasUnbinding",Hooks[Hooks.Ls=512]="hasUnbound",Hooks[Hooks.ks=1024]="hasRender",Hooks[Hooks.Vs=2048]="hasCaching"})(Hooks||(Hooks=t("Hooks",{}))),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.ds=0]="none",LifecycleFlags[LifecycleFlags.tt=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.Ds=3]="mutation",LifecycleFlags[LifecycleFlags.Xi=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Yi=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.Zi=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags._=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.ts=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.rt=224]="fromFlush",LifecycleFlags[LifecycleFlags.ss=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.es=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Ms=128]="fromTick",LifecycleFlags[LifecycleFlags.ns=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Yt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.ot=1024]="fromBind",LifecycleFlags[LifecycleFlags.Ci=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.xt=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Qt=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ni=16384]="fromCache",LifecycleFlags[LifecycleFlags.hs=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.rs=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.os=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.ls=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Xt=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ct=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.cs=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Mi=58720256]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.us=8388608]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Mt=16777216]="useProxies",LifecycleFlags[LifecycleFlags.Fs=33554432]="keyedMode"})(LifecycleFlags||(LifecycleFlags=t("LifecycleFlags",{}))),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.$s=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.xs=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind=t("ExpressionKind",{}))),(function(t){t[t.Us=0]="None",t[t.Ns=1]="Subscriber0",t[t.Es=2]="Subscriber1",t[t.zs=4]="Subscriber2",t[t.Hs=8]="SubscribersRest",t[t.qs=15]="Any"})(Ct||(Ct={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.ds=0]="none",DelegationStrategy[DelegationStrategy.Ks=1]="capturing",DelegationStrategy[DelegationStrategy.Ws=2]="bubbling"})(DelegationStrategy||(DelegationStrategy=t("DelegationStrategy",{}))),(function(MutationKind){MutationKind[MutationKind.C=1]="instance",MutationKind[MutationKind.I=2]="collection",MutationKind[MutationKind.T=4]="proxy"})(MutationKind||(MutationKind=t("MutationKind",{}))),(function(CollectionKind){CollectionKind[CollectionKind.Qs=8]="indexed",CollectionKind[CollectionKind.Gs=4]="keyed",CollectionKind[CollectionKind._s=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind=t("CollectionKind",{})));const Bt=new WeakMap;let St=class{constructor(t,i,s){this.raw=i,this.key=s,this.T=t,this.subscribe=this.v,this.unsubscribe=this.p}G(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.O(value,i,t|LifecycleFlags.Mt|LifecycleFlags._))}W(){return this.raw[this.key]}};St=i([subscriberCollection(MutationKind.C)],St);let ProxyObserver=t("ProxyObserver",Ot=class{constructor(t){this.raw=t,this.T=new Proxy(t,this),Bt.set(t,this.T),this.Js={}}static Xs(t){if(void 0===t.Ys){const i=Bt.get(t);return void 0===i?t:i}return t}static Zs(t){const i=t.Ys;return void 0===i?t:i}static xi(t,i){let s;if(void 0===t.Ys){const i=Bt.get(t);s=void 0===i?new Ot(t):i.wt}else s=t.wt;if(1===arguments.length)return s;let e=s.Js[i];if(void 0===e){const n=this.Zs(t);e=s.Js[i]=new St(s.T,n,i)}return e}static te(t){return void 0!==t.Ys}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(Reflect.set(t,i,value,t),this.ie(value,e,i),this.O(i,value,e,LifecycleFlags.Mt|LifecycleFlags._)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.ie(void 0,s,i),this.O(i,void 0,s,LifecycleFlags.Mt|LifecycleFlags._)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.ie(s.value,e,i),this.O(i,s.value,e,LifecycleFlags.Mt|LifecycleFlags._)),1):0}apply(t,i,s){return Reflect.apply(t,t,s)}subscribe(t,i){if(1===arguments.length)this.v(t);else{let s=this.Js[i];void 0===s&&(s=this.Js[i]=new St(this.T,this.raw,i)),s.v(t)}}unsubscribe(t,i){if(1===arguments.length)this.p(t);else{const s=this.Js[i];void 0!==s&&s.p(t)}}ie(t,i,s){const e=this.Js[s];void 0!==e&&e.O(t,i,LifecycleFlags.Mt|LifecycleFlags._)}});ProxyObserver=t("ProxyObserver",Ot=i([subscriberCollection(MutationKind.T)],ProxyObserver));const At=Reflect.defineProperty,jt={get:void 0,set:void 0,Vi:1,se:1};let SetterObserver=t("SetterObserver",class{constructor(t,i,s){this.bt=t&LifecycleFlags.Mi,this.H=i,this.q=s}W(){return this.K}G(t,i){const s=this.K;s!==t&&(this.K=t,i&LifecycleFlags.ot||this.O(t,s,this.bt|i),this.N||(this.H[this.q]=t))}});SetterObserver=t("SetterObserver",i([propertyObserver()],SetterObserver)),(function(t){t[t.ee=250]="UndefinedScope",t[t.ne=251]="NullScope",t[t.he=252]="NilOverrideContext",t[t.re=253]="NilParentScope"})(It||(It={}));class Rt{xi(t,i,s){let e=this[s];return void 0===e&&(e=this[s]=new SetterObserver(t,i,s)),e}}class BindingContext{constructor(t,value){if(this.oe=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return t&LifecycleFlags.Mt?ProxyObserver.xi(s).T:s}static get(t,name,i,s){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let e=t.le;if(i>0){for(;i>0;){if(null===e.ce)return;i--,e=e.ce}return name in e?e:e.ue}for(;e&&!(name in e)&&!(e.ue&&name in e.ue);)e=e.ce;if(e)return name in e?e:e.ue;if(s&LifecycleFlags.us&&null!==t.pi){const e=this.get(t.pi,name,i,s&~LifecycleFlags.us|LifecycleFlags.cs);if(null!==e)return e}return s&LifecycleFlags.cs?null:t.ue||t.le}ae(t){let i=this.Di;return void 0===i&&(this.Di=i=new Rt),i}}t("BindingContext",BindingContext);class Scope{constructor(t,i){this.ue=t,this.le=i,this.pi=null}static create(t,i,s){return new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static fe(t,i){if(null==i)throw Reporter.error(252);return new Scope(i.ue,i)}static de(t,i,s){if(null==i)throw Reporter.error(253);return new Scope(s,OverrideContext.create(t,s,i.le))}}t("Scope",Scope);class OverrideContext{constructor(t,i){this.oe=1,this.ue=t,this.ce=i}static create(t,i,s){return new OverrideContext(i,void 0===s?null:s)}ae(){let t=this.Di;return void 0===t&&(this.Di=t=new Rt),t}}t("OverrideContext",OverrideContext);const ISignaler=t("ISignaler",DI.ve("ISignaler").be(t=>t.singleton(Pt)));class Pt{constructor(){this.pe=Object.create(null)}ge(name,t){const i=this.pe[name];if(void 0!==i)for(const s of i.keys())s.B(void 0,void 0,t|LifecycleFlags._)}me(name,t){const i=this.pe,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}we(name,t){const i=this.pe[name];i&&i.delete(t)}}const BindingBehaviorResource=t("BindingBehaviorResource",{name:"binding-behavior",X(name){return`${this.name}:${name}`},ye(t){return t.kind===this},Ji(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=BindingBehaviorResource,s.description=e,s.register=p,s}}),ValueConverterResource=t("ValueConverterResource",{name:"value-converter",X(name){return`${this.name}:${name}`},ye(t){return t.kind===this},Ji(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=g,s}});(function(t){t[t.Ce=202]="NoLocator",t[t.Oe=203]="NoBehaviorFound",t[t.Ie=204]="BehaviorAlreadyApplied",t[t.Te=205]="NoConverterFound",t[t.Be=206]="NoBinding",t[t.Se=207]="NotAFunction",t[t.Ae=208]="UnknownOperator",t[t.ee=250]="UndefinedScope",t[t.ne=251]="NullScope"})(Tt||(Tt={})),t("BindingBehavior",class{constructor(t,name,i){this.Y=38962,this.je=t,this.name=name,this.Re=i,this.Pe=BindingBehaviorResource.X(this.name),this.Le=hasBind(t),this.ke=hasUnbind(t)}evaluate(t,i,s){return this.je.evaluate(t,i,s)}assign(t,i,s,value){return this.je.assign(t,i,s,value)}connect(t,i,s){this.je.connect(t,i,s)}bind(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.Ve;if(!e)throw Reporter.error(202,this);this.Le&&this.je.bind(t,i,s);const n=this.Pe,h=e.get(n);if(!h)throw Reporter.error(203,this);null==s[n]?(s[n]=h,h.bind.apply(h,[t,i,s].concat(m(t,i,e,this.Re)))):Reporter.write(204,this)}De(t,i,s){const e=this.Pe;null!=s[e]?(s[e].De(t,i,s),s[e]=null):Reporter.write(204,this),this.ke&&this.je.De(t,i,s)}accept(t){return t.Me(this)}}),t("ValueConverter",class{constructor(t,name,i){this.Y=36913,this.je=t,this.name=name,this.Re=i,this.Fe=ValueConverterResource.X(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Fe);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Re,h=n.length,r=Array(h+1);r[0]=this.je.evaluate(t,i,s);for(let e=0;h>e;++e)r[e+1]=n[e].evaluate(t,i,s);return e.Qi.apply(e,r)}return this.je.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Fe);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.as.apply(e,[value].concat(m(t,i,s,this.Re)))),this.je.assign(t,i,s,value)}connect(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.Ve;if(!e)throw Reporter.error(202,this);this.je.connect(t,i,s);const n=this.Re;for(let e=0,h=n.length;h>e;++e)n[e].connect(t,i,s);const h=e.get(this.Fe);if(!h)throw Reporter.error(205,this);const r=h.pe;if(void 0===r)return;const o=e.get(ISignaler);for(let t=0,i=r.length;i>t;++t)o.me(r[t],s)}De(t,i,s){const e=s.Ve,n=e.get(this.Fe).pe;if(void 0===n)return;const h=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)h.we(n[t],s)}accept(t){return t.$e(this)}}),t("Assign",class{constructor(t,value){this.Y=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.xe(this)}}),t("Conditional",class{constructor(t,i,s){this.Y=63,this.assign=PLATFORM.Ue,this.Ne=t,this.Ee=i,this.ze=s}evaluate(t,i,s){return this.Ne.evaluate(t,i,s)?this.Ee.evaluate(t,i,s):this.ze.evaluate(t,i,s)}connect(t,i,s){this.Ne.evaluate(t,i,null)?(this.Ne.connect(t,i,s),this.Ee.connect(t,i,s)):(this.Ne.connect(t,i,s),this.ze.connect(t,i,s))}accept(t){return t.He(this)}});class AccessThis{constructor(t=0){this.Y=1793,this.assign=PLATFORM.Ue,this.connect=PLATFORM.Ue,this.qe=t}evaluate(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);let e=i.le,n=this.qe;for(;n--&&e;)e=e.ce;return 1>n&&e?e.ue:void 0}accept(t){return t.Ke(this)}}t("AccessThis",AccessThis),AccessThis.We=new AccessThis(0),AccessThis.Qe=new AccessThis(1);class AccessScope{constructor(name,t=0){this.Y=10082,this.name=name,this.qe=t}evaluate(t,i,s){const name=this.name;return BindingContext.get(i,name,this.qe,t)[name]}assign(t,i,s,value){const name=this.name,e=BindingContext.get(i,name,this.qe,t);return e?e[name]=value:void 0}connect(t,i,s){const name=this.name,e=BindingContext.get(i,name,this.qe,t);s.ht(t,e,name)}accept(t){return t.Ge(this)}}t("AccessScope",AccessScope);class AccessMember{constructor(t,name){this.Y=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){let e=this.object.evaluate(t,i,s);return null!==e&&"object"==typeof e||this.object.assign(t,i,s,e={}),e[this.name]=value,value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e&&s.ht(t,e,this.name)}accept(t){return t._e(this)}}t("AccessMember",AccessMember),t("AccessKeyed",class{constructor(t,i){this.Y=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(null!=e)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),"object"==typeof e&&null!==e){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const i=value.length;if(0===i)return 0;for(let t=0;i>t;++t){const i=value.charCodeAt(t);if(48>i||i>57)return 0}return 1})(n)||s.ht(t,e,n)}}accept(t){return t.Je(this)}});class CallScope{constructor(name,t,i=0){this.Y=1448,this.assign=PLATFORM.Ue,this.name=name,this.Re=t,this.qe=i}evaluate(t,i,s){const e=m(t,i,s,this.Re),n=BindingContext.get(i,this.name,this.qe,t),h=w(t,n,this.name);if(h)return h.apply(n,e)}connect(t,i,s){const e=this.Re;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Xe(this)}}t("CallScope",CallScope);class CallMember{constructor(t,name,i){this.Y=1161,this.assign=PLATFORM.Ue,this.object=t,this.name=name,this.Re=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=m(t,i,s,this.Re),h=w(t,e,this.name);if(h)return h.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),w(t&~LifecycleFlags.tt,e,this.name)){const e=this.Re;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.Ye(this)}}t("CallMember",CallMember),t("CallFunction",class{constructor(t,i){this.Y=1162,this.assign=PLATFORM.Ue,this.Ze=t,this.Re=i}evaluate(t,i,s){const e=this.Ze.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,m(t,i,s,this.Re));if(t&LifecycleFlags.tt||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.Ze.evaluate(t,i,null);if(this.Ze.connect(t,i,s),"function"==typeof e){const e=this.Re;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}}accept(t){return t.tn(this)}}),t("Binary",class{constructor(t,i,s){this.Y=46,this.assign=PLATFORM.Ue,this.in=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.in&&!e||"||"===this.in&&e||this.right.connect(t,i,s)}sn(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}en(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}nn(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}hn(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}rn(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}on(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}ln(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}cn(t,i,s){const e=this.right.evaluate(t,i,s);return null!==e&&"object"==typeof e?this.left.evaluate(t,i,s)in e:0}un(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}an(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}fn(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}dn(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}bn(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}vn(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}pn(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}gn(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}mn(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.wn(this)}}),t("Unary",class{constructor(t,i){this.Y=39,this.assign=PLATFORM.Ue,this.in=t,this.je=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.je.connect(t,i,s)}yn(t,i,s){this.je.evaluate(t,i,s)}Cn(t,i,s){return typeof this.je.evaluate(t,i,s)}On(t,i,s){return!this.je.evaluate(t,i,s)}an(t,i,s){return-this.je.evaluate(t,i,s)}un(t,i,s){return+this.je.evaluate(t,i,s)}accept(t){return t.In(this)}});class PrimitiveLiteral{constructor(value){this.Y=17925,this.assign=PLATFORM.Ue,this.connect=PLATFORM.Ue,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Tn(this)}}t("PrimitiveLiteral",PrimitiveLiteral),PrimitiveLiteral.Bn=new PrimitiveLiteral(void 0),PrimitiveLiteral.Sn=new PrimitiveLiteral(null),PrimitiveLiteral.An=new PrimitiveLiteral(1),PrimitiveLiteral.jn=new PrimitiveLiteral(0),PrimitiveLiteral.Rn=new PrimitiveLiteral(""),t("HtmlLiteral",class{constructor(parts){this.Y=51,this.assign=PLATFORM.Ue,this.parts=parts}evaluate(t,i,s){const e=this.parts;let n="";for(let h=0,r=e.length;r>h;++h){const value=e[h].evaluate(t,i,s);null!=value&&(n+=value)}return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.Pn(this)}});class ArrayLiteral{constructor(t){this.Y=17955,this.assign=PLATFORM.Ue,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,h=Array(n);for(let r=0;n>r;++r)h[r]=e[r].evaluate(t,i,s);return h}connect(t,i,s){const e=this.elements;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Ln(this)}}t("ArrayLiteral",ArrayLiteral),ArrayLiteral.Rn=new ArrayLiteral(PLATFORM.kn);class ObjectLiteral{constructor(t,i){this.Y=17956,this.assign=PLATFORM.Ue,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,h=this.values;for(let r=0,o=n.length;o>r;++r)e[n[r]]=h[r].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,h=this.keys.length;h>n;++n)e[n].connect(t,i,s)}accept(t){return t.Vn(this)}}t("ObjectLiteral",ObjectLiteral),ObjectLiteral.Rn=new ObjectLiteral(PLATFORM.kn,PLATFORM.kn);class Template{constructor(t,i){this.Y=17958,this.assign=PLATFORM.Ue,this.Dn=t,this.Z=void 0===i?PLATFORM.kn:i}evaluate(t,i,s){const e=this.Z,n=this.Dn;let h=n[0];for(let r=0,o=e.length;o>r;++r)h+=e[r].evaluate(t,i,s),h+=n[r+1];return h}connect(t,i,s){const e=this.Z;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.Mn(this)}}t("Template",Template),Template.Rn=new Template([""]),t("TaggedTemplate",class{constructor(t,i,s,e){this.Y=1197,this.assign=PLATFORM.Ue,this.Dn=t,this.Dn.raw=i,this.Ze=s,this.Z=void 0===e?PLATFORM.kn:e}evaluate(t,i,s){const e=this.Z,n=e.length,h=Array(n);for(let r=0,o=n;o>r;++r)h[r]=e[r].evaluate(t,i,s);const r=this.Ze.evaluate(t,i,s);if("function"!=typeof r)throw Reporter.error(207,this);return r.apply(null,[this.Dn].concat(h))}connect(t,i,s){const e=this.Z;for(let n=0,h=e.length;h>n;++n)e[n].connect(t,i,s);this.Ze.connect(t,i,s)}accept(t){return t.Fn(this)}}),t("ArrayBindingPattern",class{constructor(t){this.Y=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.$n(this)}}),t("ObjectBindingPattern",class{constructor(t,i){this.Y=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.xn(this)}}),t("BindingIdentifier",class{constructor(name){this.Y=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Un(this)}});const Lt={}.toString;t("ForOfStatement",class{constructor(t,i){this.Y=6199,this.assign=PLATFORM.Ue,this.Nn=t,this.En=i}evaluate(t,i,s){return this.En.evaluate(t,i,s)}count(t){return Vt[Lt.call(t)](t)}zn(t,i){kt[Lt.call(t)](t,i)}connect(t,i,s){this.Nn.connect(t,i,s),this.En.connect(t,i,s)}bind(t,i,s){hasBind(this.En)&&this.En.bind(t,i,s)}De(t,i,s){hasUnbind(this.En)&&this.En.De(t,i,s)}accept(t){return t.Hn(this)}}),t("Interpolation",class{constructor(parts,t){this.Y=24,this.assign=PLATFORM.Ue,this.parts=parts,this.Z=void 0===t?PLATFORM.kn:t,this.qn=this.Z.length>1,this.Kn=this.Z[0]}evaluate(t,i,s){if(this.qn){const e=this.Z,parts=this.parts;let n=parts[0];for(let h=0,r=e.length;r>h;++h)n+=e[h].evaluate(t,i,s),n+=parts[h+1];return n}{const parts=this.parts;return parts[0]+this.Kn.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.Wn(this)}});const kt={Qn(t,i){for(let s=0,e=t.length;e>s;++s)i(t,s,t[s])},Gn(t,i){const s=Array(t.size);let e=-1;for(const i of t.entries())s[++e]=i;kt["Qn"](s,i)},_n(t,i){const s=Array(t.size);let e=-1;for(const i of t.keys())s[++e]=i;kt["Qn"](s,i)},Jn(t,i){const s=Array(t);for(let i=0;t>i;++i)s[i]=i;kt["Qn"](s,i)},Xn(t,i){},Yn(t,i){}},Vt={Qn:t=>t.length,Gn:t=>t.size,_n:t=>t.size,Jn:t=>t,Xn:()=>0,Yn:()=>0},IRenderable=t("IRenderable",DI.ve("IRenderable").Zn()),IViewFactory=t("IViewFactory",DI.ve("IViewFactory").Zn()),Dt=Object.freeze(Object.create(null)),ILifecycle=t("ILifecycle",DI.ve("ILifecycle").be(t=>t.singleton(Mt)));class Mt{constructor(){this.th=0,this.ih=0,this.sh=0,this.eh=0,this.nh=this,this.hh=this,this.rh=this,this.oh=this,this.lh=this,this.uh=this,this.ah=this,this.fh=this,this.dh=this,this.bh=this,this.vh=this,this.ph=this,this.gh=this,this.mh=this,this.wh=this,this.yh=this,this.Ch=this,this.Oh=this,this.Ih=this,this.Th=this,this.Bh=null,this.Sh=Promise.resolve(),this.Ah=0,this.jh=0,this.Rh=0,this.Ph=0,this.Lh=0,this.kh=0,this.Vh=0,this.Dh=0,this.Mh=0,this.Fh=0,this.ft=Dt,this.flush=PLATFORM.Ue,this.$h=Dt,this.connect=PLATFORM.Ue,this.xh=Dt,this.pt=PLATFORM.Ue,this.Uh=Dt,this.bound=PLATFORM.Ue,this.Nh=Dt,this.Eh=PLATFORM.Ue,this.zh=Dt,this.Hh=PLATFORM.Ue,this.qh=Dt,this.Kh=PLATFORM.Ue,this.Wh=Dt,this.Qh=PLATFORM.Ue,this.Gh=Dt,this.ai=PLATFORM.Ue,this._h=Dt,this.Jh=PLATFORM.Ue,this.Xh=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}Yh(t){null===this.Xh&&(this.Xh=new AggregateLifecycleTask),this.Xh.Zh(t)}tr(t){null!==this.Xh&&(this.Xh===t?this.Xh=null:this.Xh.ir(t))}S(t){return this.nh===this&&(this.Bh=this.Sh.then(()=>{this.sr(LifecycleFlags.ss)})),null===t.ft&&(t.ft=Dt,this.hh.ft=t,this.hh=t,++this.Ah),this.Bh}sr(t){for(t|=LifecycleFlags.es;this.Ah>0;){let i,s=this.nh.ft;this.nh=this.hh=this,this.Ah=0;do{i=s.ft,s.ft=null,s.flush(t),s=i}while(s!==Dt);if(t&LifecycleFlags.ct)break}}fi(){++this.th}di(t){null===t.Uh&&(t.Uh=Dt,this.fh.Uh=t,this.fh=t,++this.Ph)}er(t){null===t.$h&&(t.$h=Dt,this.oh.$h=t,this.oh=t,++this.jh),null===t.xh&&(t.xh=Dt,this.uh.xh=t,this.uh=t,++this.Rh)}nr(t){if(this.jh>0){this.jh=0;let i,s=this.rh.$h;this.rh=this.oh=this;do{s.connect(t),i=s.$h,s.$h=null,s=i}while(s!==Dt)}}hr(t){for(t&LifecycleFlags.ns&&this.sr(t|LifecycleFlags.es);this.Rh>0;){this.Rh=0;let i,s=this.lh.xh;this.lh=this.uh=this;do{s.pt(t),i=s.xh,s.xh=null,s=i}while(s!==Dt)}}vi(t){if(0==--this.th)return null===this.Xh||this.Xh.done?(this.rr(t),LifecycleTask.done):(this.Xh.or=this,this.Xh)}rr(t){for(t&LifecycleFlags.ns&&this.sr(t|LifecycleFlags.es);this.Ph>0;){this.Ph=0;let i,s=this.ah.Uh;this.ah=this.fh=this;do{s.bound(t),i=s.Uh,s.Uh=null,s=i}while(s!==Dt)}}yi(){++this.eh}Oi(t){null===t._h&&(t._h=Dt,this.Th._h=t,this.Th=t,++this.Fh)}Ti(t){if(0==--this.eh)return null===this.Xh||this.Xh.done?(this.lr(t),LifecycleTask.done):(this.Xh.or=this,this.Xh)}lr(t){for(;this.Fh>0;){this.Fh=0;let i,s=this.Ih._h;this.Ih=this.Th=this;do{s.Jh(t),i=s._h,s._h=null,s=i}while(s!==Dt)}}$t(){++this.ih}Kt(t){null===t.Nh&&(t.Nh=Dt,this.bh.Nh=t,this.bh=t,++this.Lh)}Nt(t){null===t.zh&&(t.zh=Dt,this.ph.zh=t,this.ph=t,++this.kh)}Et(t){if(0==--this.ih)return null===this.Xh||this.Xh.done?(this.cr(t),LifecycleTask.done):(this.Xh.or=this,this.Xh)}cr(t){if(this.sr(t|LifecycleFlags.es),this.Lh>0){this.Lh=0;let i,s=this.dh.Nh;this.dh=this.bh=this;do{s.Eh(t),i=s.Nh,s.Nh=null,s=i}while(s!==Dt)}if(this.nr(LifecycleFlags.tt),this.kh>0){this.kh=0;let i,s=this.vh.zh;this.vh=this.ph=this;do{s.Hh(t),i=s.zh,s.zh=null,s=i}while(s!==Dt)}}Wt(){++this.sh}Zt(t){if(null===t.qh&&(t.qh=Dt,this.mh.qh=t,this.mh=t,++this.Vh),null!==t.Nh){let i=this.dh,s=i.Nh;for(;s!==t;)s=(i=s).Nh;i.Nh=s.Nh,s.Nh=null,this.bh===s&&(this.bh=this),--this.Lh}}_t(t){null===t.Wh&&(t.Wh=Dt,this.yh.Wh=t,this.yh=t,++this.Dh)}ur(t){null===t.Gh&&(t.Gh=Dt,this.Oh.Gh=t,this.Oh=t,++this.Mh)}Jt(t){if(0==--this.sh)return null===this.Xh||this.Xh.done?(this.ar(t),LifecycleTask.done):(this.Xh.or=this,this.Xh)}ar(t){if(this.sr(t|LifecycleFlags.rt|LifecycleFlags.ct),this.Vh>0){this.Vh=0;let i,s=this.gh.qh;this.gh=this.mh=this;do{s.Kh(t),i=s.qh,s.qh=null,s=i}while(s!==Dt)}if(this.Dh>0){this.Dh=0;let i,s=this.wh.Wh;this.wh=this.yh=this;do{s.Qh(t),i=s.Wh,s.Wh=null,s=i}while(s!==Dt)}if(this.Mh>0){this.yi(),this.Mh=0;let i,s=this.Ch.Gh;this.Ch=this.Oh=this;do{s.ai(t),i=s.Gh,s.Gh=null,s=i}while(s!==Dt);this.Ti(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.dr=PLATFORM.Ue,this.currentView=null,this.gs=0,this.vs=0,this.br=null,this.vr=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}pr(value,t){this.vr.done?value instanceof Promise?(this.gr(new Ft(this,value)),this.mr()):this.wr(value,t):(value instanceof Promise?this.gr(new Ft(this,value)):this.gr(value),this.vr.yr()&&this.vr.cancel())}bi(t,i){this.scope=i,this.vs=1,null!==this.currentView&&this.currentView.mi(t,i)}Ut(t){this.gs=1,null!==this.currentView&&this.currentView.Ht(t)}Gt(t){this.gs=0,null!==this.currentView&&this.currentView.ii(t)}Ii(t){this.vs=0,null!==this.currentView&&this.currentView.ai(t)}ei(t){this.currentView=null}gr(t){null===this.br&&(this.br=[]),this.br.push(t)}wr(t,i){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,s=new AggregateLifecycleTask;let e,n=this.currentView;null===n?e=LifecycleTask.done:($lifecycle.ur(n),$lifecycle.Wt(),n.ii(i),e=$lifecycle.Jt(i)),s.Zh(e),null===(n=this.currentView=t)?e=LifecycleTask.done:(this.vs&&($lifecycle.fi(),n.mi(i,this.scope),$lifecycle.vi(i)),this.gs?($lifecycle.$t(),n.Ht(i),e=$lifecycle.Et(i)):e=LifecycleTask.done),s.Zh(e),s.done?(this.vr=LifecycleTask.done,this.dr()):(this.vr=s,this.vr.Cr().then(()=>{this.dr(),this.mr()}).catch(t=>{throw t}))}mr(){if(null!==this.br&&this.br.length>0){const t=this.br.pop();this.br.length=0,Ft.is(t)?this.vr=t.start():this.wr(t,LifecycleFlags.ls)}else this.vr=LifecycleTask.done}}t("CompositionCoordinator",CompositionCoordinator),CompositionCoordinator.inject=[ILifecycle];const LifecycleTask=t("LifecycleTask",{done:{done:1,yr:()=>0,cancel(){},Cr:()=>Promise.resolve()}});class AggregateLifecycleTask{constructor(){this.done=1,this.or=null,this.resolve=null,this.Or=[],this.Ir=null}Zh(t){t.done||(this.done=0,this.Or.push(t),t.Cr().then(()=>{this.Tr()}).catch(t=>{throw t}))}ir(t){if(t.done){const i=this.Or.indexOf(t);-1!==i&&this.Or.splice(i,1)}0===this.Or.length&&null!==this.or&&(this.or.tr(this),this.or=null)}yr(){return this.done?0:this.Or.every(t=>t.yr())}cancel(){this.yr()&&(this.Or.forEach(t=>{t.cancel()}),this.done=0)}Cr(){return null===this.Ir&&(this.Ir=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.Ir}Tr(){this.done||this.Or.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.or&&(this.or.ar(LifecycleFlags.ls),this.or.lr(LifecycleFlags.ls),this.or.rr(LifecycleFlags.ls),this.or.cr(LifecycleFlags.ls)),this.or.tr(this),null!==this.resolve&&this.resolve()}}t("AggregateLifecycleTask",AggregateLifecycleTask);class Ft{constructor(t,i){this.Br=t,this.done=0,this.Sr=0,this.Sh=i}static is(t){return"start"in t}start(){return this.Sr?LifecycleTask.done:(this.Sh=this.Sh.then(t=>(this.Ar(t),t)),this)}yr(){return!this.done}cancel(){this.yr()&&(this.Sr=1)}Cr(){return this.Sh}Ar(value){this.Sr||(this.done=1,this.Br.pr(value,LifecycleFlags.ls))}}t("PromiseTask",class{constructor(t,i){this.done=0,this.Sr=0,this.Wi=i,this.Sh=t.then(value=>{if(1!=this.Sr)return this.done=1,this.Wi(value),value})}yr(){return!this.done}cancel(){this.yr()&&(this.Sr=1)}Cr(){return this.Sh}});const $t=[],xt=[];let Ut=-1;y(-1);const{oneTime,Qi:Nt,as:Et}=BindingMode,zt=Nt|oneTime;let Binding=t("Binding",class{constructor(t,i,s,mode,e,n){this.wi=null,this.Si=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$h=null,this.xh=null,this.$scope=null,this.Ve=n,this.mode=mode,this.et=e,this.jr=t,this.target=i,this.Rr=s,this.bt=LifecycleFlags.ds}Pr(value,t){this.targetObserver.G(value,(t|=this.bt)|LifecycleFlags._)}Lr(value,t){this.jr.assign((t|=this.bt)|LifecycleFlags.ts,this.$scope,this.Ve,value)}B(t,i,s){if(!(2&this.$state))return;const e=this.jr,$scope=this.$scope,n=this.Ve;if(s|=this.bt,this.mode===BindingMode.as&&(s&=~LifecycleFlags._,s|=LifecycleFlags.ts),s&LifecycleFlags._){const mode=this.mode,i=this.targetObserver.W();return(10082!==e.Y||this.it>1)&&(t=e.evaluate(s,$scope,n)),t!==i&&this.Pr(t,s),void(0==(mode&oneTime)&&(this.version++,e.connect(s,$scope,this),this.unobserve(0)))}if(!(s&LifecycleFlags.ts))throw Reporter.error(15,LifecycleFlags[s]);t!==e.evaluate(s,$scope,n)&&this.Lr(t,s)}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t|LifecycleFlags.ot)}this.$state|=1,this.bt=t&LifecycleFlags.Mi,this.$scope=i;let s=this.jr;hasBind(s)&&s.bind(t,i,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&Et?this.et.st(t,this.target,this.Rr):this.et.kr(t,this.target,this.Rr)),targetObserver.bind&&targetObserver.bind(t),s=this.jr,mode&zt&&this.Pr(s.evaluate(t,i,this.Ve),t),mode&Nt&&s.connect(t,i,this),mode&Et&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}ai(t){if(!(2&this.$state))return;this.$state|=64,this.bt=LifecycleFlags.ds;const i=this.jr;hasUnbind(i)&&i.De(t,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.De&&targetObserver.De(t),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(t){2&this.$state&&this.jr.connect((t|=this.bt)|LifecycleFlags.tt,this.$scope,this)}pt(t){2&this.$state&&this.Pr(this.jr.evaluate((t|=this.bt)|LifecycleFlags.tt,this.$scope,this.Ve),t)}});Binding=t("Binding",i([connectable()],Binding));class Call{constructor(t,i,s,e,n){this.wi=null,this.Si=null,this.$state=0,this.Ve=n,this.jr=t,this.targetObserver=e.st(LifecycleFlags.ds,i,s)}Vr(t){const i=this.$scope.le;Object.assign(i,t);const s=this.jr.evaluate(LifecycleFlags.tt,this.$scope,this.Ve);for(const s in t)delete i[s];return s}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t|LifecycleFlags.ot)}this.$state|=1,this.$scope=i;const s=this.jr;hasBind(s)&&s.bind(t,i,this),this.targetObserver.G(t=>this.Vr(t),t),this.$state|=2,this.$state&=-2}ai(t){if(!(2&this.$state))return;this.$state|=64;const i=this.jr;hasUnbind(i)&&i.De(t,this.$scope,this),this.$scope=null,this.targetObserver.G(null,t),this.$state&=-67}ht(t,i,s){}B(t,i,s){}}t("Call",Call);const IExpressionParser=t("IExpressionParser",DI.ve("IExpressionParser").be(t=>t.singleton(Ht)));class Ht{constructor(){this.Dr=Object.create(null),this.Mr=Object.create(null),this.Fr=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.Fr[t];return void 0===s&&(s=this.Fr[t]=this.$r(t,i)),s}case 539:{let s=this.Mr[t];return void 0===s&&(s=this.Mr[t]=this.$r(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.Rn;let s=this.Dr[t];return void 0===s&&(s=this.Dr[t]=this.$r(t,i)),s}}}cache(t){const{Mr:i,Dr:s,Fr:e}=this;for(const n in t){const h=t[n];switch(h.Y){case 24:e[n]=h;break;case 6199:i[n]=h;break;default:s[n]=h}}}$r(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.kn):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.kn):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Us=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.xr=1280]="IsRef",BindingType[BindingType.Ur=512]="IsIterator",BindingType[BindingType.Nr=256]="IsCustom",BindingType[BindingType.Er=128]="IsFunction",BindingType[BindingType.zr=64]="IsEvent",BindingType[BindingType.Hr=32]="IsProperty",BindingType[BindingType.qr=16]="IsCommand",BindingType[BindingType.Kr=48]="IsPropertyCommand",BindingType[BindingType.Wr=80]="IsEventCommand",BindingType[BindingType.Qr=6]="DelegationStrategyDelta",BindingType[BindingType.Gr=15]="Command",BindingType[BindingType._r=49]="OneTimeCommand",BindingType[BindingType.Jr=50]="ToViewCommand",BindingType[BindingType.Xr=51]="FromViewCommand",BindingType[BindingType.Yr=52]="TwoWayCommand",BindingType[BindingType.Zr=53]="BindCommand",BindingType[BindingType.io=86]="TriggerCommand",BindingType[BindingType.so=87]="CaptureCommand",BindingType[BindingType.eo=88]="DelegateCommand",BindingType[BindingType.no=153]="CallCommand",BindingType[BindingType.ho=26]="OptionsCommand",BindingType[BindingType.ro=539]="ForCommand",BindingType[BindingType.oo=284]="CustomCommand"})(BindingType||(BindingType=t("BindingType",{})));const{Qi:qt,oneTime:Kt}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.wi=null,this.Si=null,this.$state=0,this.$scope=null,this.lo=i,this.Ve=n,this.mode=mode,this.et=t,this.target=s,this.Rr=e;const h=i.Z,parts=this.parts=Array(h.length);for(let r=0,o=h.length;o>r;++r)parts[r]=new InterpolationBinding(h[r],i,s,e,mode,t,n,0===r)}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t)}this.$state|=2,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].mi(t,i)}ai(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].ai(t)}}t("MultiInterpolationBinding",MultiInterpolationBinding);let InterpolationBinding=t("InterpolationBinding",class{constructor(t,i,s,e,mode,n,h,r){this.$state=0,this.lo=i,this.co=r,this.mode=mode,this.Ve=h,this.et=n,this.jr=t,this.target=s,this.Rr=e,this.targetObserver=n.kr(LifecycleFlags.ds,s,e)}Pr(value,t){this.targetObserver.G(value,t|LifecycleFlags._)}B(t,i,s){if(!(2&this.$state))return;const e=this.targetObserver.W(),n=this.lo.evaluate(s,this.$scope,this.Ve);n!==e&&this.Pr(n,s),0==(this.mode&Kt)&&(this.version++,this.jr.connect(s,this.$scope,this),this.unobserve(0))}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t)}this.$state|=2,this.$scope=i;const s=this.jr;s.bind&&s.bind(t,i,this),this.co&&this.Pr(this.lo.evaluate(t,i,this.Ve),t),this.mode&qt&&s.connect(t,i,this)}ai(t){if(!(2&this.$state))return;this.$state&=-3;const i=this.jr;i.De&&i.De(t,this.$scope,this),this.$scope=null,this.unobserve(1)}});InterpolationBinding=t("InterpolationBinding",i([connectable()],InterpolationBinding));let LetBinding=t("LetBinding",class{constructor(t,i,s,e,toViewModel=0){this.wi=null,this.Si=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=null,this.Ve=e,this.et=s,this.jr=t,this.target=null,this.Rr=i,this.toViewModel=toViewModel}B(t,i,s){if(2&this.$state){if(!(s&LifecycleFlags._))throw Reporter.error(15,s);{const{target:t,Rr:i}=this,e=t[i],n=this.jr.evaluate(s,this.$scope,this.Ve);n!==e&&(t[i]=n)}}}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t|LifecycleFlags.ot)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.ue:i.le;const s=this.jr;s.bind&&s.bind(t,i,this),this.target[this.Rr]=this.jr.evaluate(LifecycleFlags.ot,i,this.Ve),this.jr.connect(t,i,this),this.$state|=2,this.$state&=-2}ai(t){if(!(2&this.$state))return;this.$state|=64;const i=this.jr;i.De&&i.De(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}});LetBinding=t("LetBinding",i([connectable()],LetBinding));class Ref{constructor(t,i,s){this.wi=null,this.Si=null,this.$state=0,this.Ve=s,this.jr=t,this.target=i}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ai(t|LifecycleFlags.ot)}this.$state|=1,this.$scope=i;const s=this.jr;hasBind(s)&&s.bind(t,i,this),this.jr.assign(t,this.$scope,this.Ve,this.target),this.$state|=2,this.$state&=-2}ai(t){if(!(2&this.$state))return;this.$state|=64,this.jr.evaluate(t,this.$scope,this.Ve)===this.target&&this.jr.assign(t,this.$scope,this.Ve,null);const i=this.jr;hasUnbind(i)&&i.De(t,this.$scope,this),this.$scope=null,this.$state&=-67}ht(t,i,s){}B(t,i,s){}}t("Ref",Ref);let CollectionLengthObserver=t("CollectionLengthObserver",class{constructor(t,i){this.H=t,this.q=i,this.K=t[i]}W(){return this.H[this.q]}at(t){this.H[this.q]=t}pt(t){this.O(this.H[this.q],this.K,t),this.K=this.H[this.q]}subscribe(t){this.v(t)}unsubscribe(t){this.p(t)}});CollectionLengthObserver=t("CollectionLengthObserver",i([targetObserver()],CollectionLengthObserver));const Wt=Array.prototype,Qt=Wt.push,Gt=Wt.unshift,_t=Wt.pop,Jt=Wt.shift,Xt=Wt.splice,Yt=Wt.reverse,Zt=Wt.sort,ti={push:Qt,unshift:Gt,pop:_t,shift:Jt,splice:Xt,reverse:Yt,sort:Zt},ii=["push","unshift","pop","shift","splice","reverse","sort"],si={push(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return Qt.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.dt.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.dt[n]=-2,n++;return i.O("push",arguments,i.bt|LifecycleFlags.Xi),t.length},unshift(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return Gt.apply(t,arguments);const s=arguments.length,e=Array(s);let n=0;for(;s>n;)e[n++]=-2;Gt.apply(i.dt,e);const h=Gt.apply(t,arguments);return i.O("unshift",arguments,i.bt|LifecycleFlags.Xi),h},pop(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return _t.call(t);const s=i.dt,e=_t.call(t),n=s.length-1;return s[n]>-1&&s.yt.push(s[n]),_t.call(s),i.O("pop",arguments,i.bt|LifecycleFlags.Xi),e},shift(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return Jt.call(t);const s=i.dt,e=Jt.call(t);return s[0]>-1&&s.yt.push(s[0]),Jt.call(s),i.O("shift",arguments,i.bt|LifecycleFlags.Xi),e},splice(t,i){let s=this;void 0!==s.Ys&&(s=s.Ys);const e=s.wt;if(void 0===e)return Xt.apply(s,arguments);const n=e.dt;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.yt.push(n[s]),s++}const h=arguments.length;if(h>2){const s=h-2,e=Array(s);let r=0;for(;s>r;)e[r++]=-2;Xt.call(n,t,i,...e)}else 2===h&&Xt.call(n,t,i);const r=Xt.apply(s,arguments);return e.O("splice",arguments,e.bt|LifecycleFlags.Xi),r},reverse(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return Yt.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,h=t[n],r=i.dt[n],o=i.dt[e];t[n]=t[e],i.dt[n]=o,t[e]=h,i.dt[e]=r,n++}return i.O("reverse",arguments,i.bt|LifecycleFlags.Xi),this},sort(t){let i=this;void 0!==i.Ys&&(i=i.Ys);const s=i.wt;if(void 0===s)return Zt.call(i,t),this;const e=i.length;if(2>e)return this;F(i,s.dt,0,e,D);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=V),F(i,s.dt,0,n,t),s.O("sort",arguments,s.bt|LifecycleFlags.Xi),this}},ei={uo:1,Vi:0,se:1},def=Object.defineProperty;for(const t of ii)def(si[t],"observing",{value:1,uo:0,se:0,Vi:0});enableArrayObservation();let ArrayObserver=t("ArrayObserver",class{constructor(t,i,s){this.A=i,s.wt=this,this.I=s,this.flags=t&LifecycleFlags.Mi,this.gt()}});ArrayObserver=t("ArrayObserver",i([collectionObserver(9)],ArrayObserver));const ni=Map.prototype,hi=ni.set,ri=ni.clear,oi=ni.delete,li={set:hi,clear:ri,delete:oi},ci=["set","clear","delete"],ui={set(t,value){let i=this;void 0!==i.Ys&&(i=i.Ys);const s=i.wt;if(void 0===s)return hi.call(i,t,value),this;const e=i.size;if(hi.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.dt[e]=-2),this;e++}return this}return s.dt[e]=-2,s.O("set",arguments,s.bt|LifecycleFlags.Xi),this},clear(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return ri.call(t);if(t.size>0){const s=i.dt;let e=0;for(const i of t.keys())s[e]>-1&&s.yt.push(s[e]),e++;ri.call(t),s.length=0,i.O("clear",arguments,i.bt|LifecycleFlags.Xi)}},delete(value){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return oi.call(t,value);if(0===t.size)return 0;let s=0;const e=i.dt;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.yt.push(e[s]),e.splice(s,1),oi.call(t,value);s++}return i.O("delete",arguments,i.bt|LifecycleFlags.Xi),0}},ai={uo:1,Vi:0,se:1},fi=Object.defineProperty;for(const t of ci)fi(ui[t],"observing",{value:1,uo:0,se:0,Vi:0});enableMapObservation();let MapObserver=t("MapObserver",class{constructor(t,i,s){this.A=i,s.wt=this,this.I=s,this.flags=t&LifecycleFlags.Mi,this.gt()}});MapObserver=t("MapObserver",i([collectionObserver(6)],MapObserver));const di=Set.prototype,bi=di.add,vi=di.clear,pi=di.delete,gi={add:bi,clear:vi,delete:pi},mi=["add","clear","delete"],wi={add(value){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return bi.call(t,value),this;const s=t.size;return bi.call(t,value),t.size===s?this:(i.dt[s]=-2,i.O("add",arguments,i.bt|LifecycleFlags.Xi),this)},clear(){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return vi.call(t);if(t.size>0){const s=i.dt;let e=0;for(const i of t.keys())s[e]>-1&&s.yt.push(s[e]),e++;vi.call(t),s.length=0,i.O("clear",arguments,i.bt|LifecycleFlags.Xi)}},delete(value){let t=this;void 0!==t.Ys&&(t=t.Ys);const i=t.wt;if(void 0===i)return pi.call(t,value);if(0===t.size)return 0;let s=0;const e=i.dt;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.yt.push(e[s]),e.splice(s,1),pi.call(t,value);s++}return i.O("delete",arguments,i.bt|LifecycleFlags.Xi),0}},yi={uo:1,Vi:0,se:1},Ci=Object.defineProperty;for(const t of mi)Ci(wi[t],"observing",{value:1,uo:0,se:0,Vi:0});enableSetObservation();let SetObserver=t("SetObserver",class{constructor(t,i,s){this.A=i,s.wt=this,this.I=s,this.flags=t&LifecycleFlags.Mi,this.gt()}});SetObserver=t("SetObserver",i([collectionObserver(7)],SetObserver));const Oi={ao:0,fo:0};let CustomSetterObserver=t("CustomSetterObserver",class{constructor(t,i,s){this.H=t,this.q=i,this.K=this.oldValue=void 0,this.do=s,this.N=0}G(t){this.do.set.call(this.H,t),this.K!==t&&(this.oldValue=this.K,this.K=t,this.O(t,this.oldValue,LifecycleFlags._))}subscribe(t){this.N||this.bo(),this.v(t)}unsubscribe(t){this.p(t)}bo(){this.N=1,this.K=this.H[this.q],Reflect.defineProperty(this.H,this.q,{set:t=>{this.G(t)}})}});CustomSetterObserver=t("CustomSetterObserver",i([subscriberCollection(MutationKind.C)],CustomSetterObserver));let GetterObserver=t("GetterObserver",class{constructor(t,i,s,e,n,h,r){this.H=s,this.q=e,this.vo=0,this.K=this.oldValue=void 0,this.po=[],this.mo=[],this.wo=i,this.yo=0,this.do=n,this.T=new Proxy(s,(function t(i,s,e){return{get(n,h,r){if(e.Co(h))return Reflect.get(n,h,r);switch(Ii.call(n)){case"[object Array]":if(e.Oo(s.Io(i,n)),"length"===h)return Reflect.get(n,h,n);case"[object Map]":if(e.Oo(s.To(i,n)),"size"===h)return Reflect.get(n,h,n);case"[object Set]":if(e.Oo(s.Bo(i,n)),"size"===h)return Reflect.get(n,h,n);default:e.So(s.st(i,n,h))}return(function(i,s,e,n,h){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,h))})(i,n,h,s,e)}}})(t,h,this)),Reflect.defineProperty(s,e,{get:()=>this.W()})}So(t){-1===this.po.indexOf(t)&&this.po.push(t)}Oo(t){-1===this.mo.indexOf(t)&&this.mo.push(t)}W(){return this.K=0===this.yo||this.vo?Reflect.apply(this.do.get,this.T,PLATFORM.kn):Reflect.apply(this.do.get,this.H,PLATFORM.kn),this.K}subscribe(t){this.v(t),1==++this.yo&&this.Ao(1)}unsubscribe(t){this.p(t),0==--this.yo&&this.jo()}B(){const t=this.K,i=this.Ao(0);t!==i&&this.O(i,t,LifecycleFlags._)}U(){const t=this.K,i=this.Ao(0);t!==i&&this.O(i,t,LifecycleFlags.rt|LifecycleFlags._)}Ao(t){const i=!this.wo.ao||t;return i&&(this.jo(),this.vo=1),this.K=this.W(),i&&(this.po.forEach(t=>{t.subscribe(this)}),this.mo.forEach(t=>{t.Bt(this)}),this.vo=0),this.K}Co(t){return!this.vo||"$observers"===t}jo(){this.po.forEach(t=>{t.unsubscribe(this)}),this.po.length=0,this.mo.forEach(t=>{t.St(this)}),this.mo.length=0}});GetterObserver=t("GetterObserver",i([subscriberCollection(MutationKind.C)],GetterObserver));const Ii={}.toString,IDirtyChecker=t("IDirtyChecker",DI.ve("IDirtyChecker").be(t=>t.singleton(Ti))),DirtyCheckSettings=t("DirtyCheckSettings",{Ro:6,disabled:0,warn:1,Po:0,Lo(){this.Ro=6,this.disabled=0,this.warn=1,this.Po=0}});class Ti{constructor(){this.ko=0,this.Vo=[]}Do(t,i){if(DirtyCheckSettings.Po)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,i)}Mo(t){this.Vo.push(t),1===this.Vo.length&&PLATFORM.Fo.add(this.$o,this)}removeProperty(t){this.Vo.splice(this.Vo.indexOf(t),1),0===this.Vo.length&&PLATFORM.Fo.remove(this.$o,this)}$o(t){if(DirtyCheckSettings.disabled)return;if(++this.ko<DirtyCheckSettings.Ro)return;this.ko=0;const i=this.Vo,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).xo()&&e.flush(LifecycleFlags.Ms)}}let DirtyCheckProperty=t("DirtyCheckProperty",class{constructor(t,i,s){this.H=i,this.q=s,this.Uo=t}xo(){return this.oldValue!==this.H[this.q]}flush(t){const i=this.H[this.q];this.O(i,this.oldValue,t|LifecycleFlags._),this.oldValue=i}subscribe(t){this.m()||(this.oldValue=this.H[this.q],this.Uo.Mo(this)),this.v(t)}unsubscribe(t){this.p(t)&&!this.m()&&this.Uo.removeProperty(this)}});DirtyCheckProperty=t("DirtyCheckProperty",i([propertyObserver()],DirtyCheckProperty));const Bi=PLATFORM.Ue;class PrimitiveObserver{constructor(t,i){this.No=1,"length"===i?(this.H=t,this.W=this.Eo):this.W=this.zo}Eo(){return this.H.length}zo(){}}t("PrimitiveObserver",PrimitiveObserver),PrimitiveObserver.prototype.G=Bi,PrimitiveObserver.prototype.subscribe=Bi,PrimitiveObserver.prototype.unsubscribe=Bi,PrimitiveObserver.prototype.J=Bi;class PropertyAccessor{constructor(t,i){this.H=t,this.q=i}W(){return this.H[this.q]}G(value){this.H[this.q]=value}}t("PropertyAccessor",PropertyAccessor);const Si={}.toString,IObserverLocator=t("IObserverLocator",DI.ve("IObserverLocator").Zn()),ITargetObserverLocator=t("ITargetObserverLocator",DI.ve("ITargetObserverLocator").Zn()),ITargetAccessorLocator=t("ITargetAccessorLocator",DI.ve("ITargetAccessorLocator").Zn());class Ai{constructor(t,i,s,e){this.Ho=[],this.Uo=i,this.A=t,this.qo=s,this.Ko=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}st(t,i,s){if(t&LifecycleFlags.Mt&&"object"==typeof i)return ProxyObserver.xi(i,s);if((function(t){return 1==t.oe})(i))return i.ae(t).xi(t,i,s);let e,n=i.Di;return n&&s in n?n[s]:((e=this.Wo(t,i,s)).No||(void 0===n&&(n=this.Qo(i)),n[s]=e),e)}Go(t){this.Ho.push(t)}kr(t,i,s){return this.Ko._o(t,i)?this.qo.Jo(t,i,s)?this.st(t,i,s):this.Ko.kr(t,this.A,i,s):t&LifecycleFlags.Mt?ProxyObserver.xi(i,s):new PropertyAccessor(i,s)}Io(t,i){return $(t,this.A,i)}To(t,i){return x(t,this.A,i)}Bo(t,i){return U(t,this.A,i)}Qo(t){return t.Di||this.Xo(t)}Xo(t){const value={};return Reflect.defineProperty(t,"$observers",{Vi:0,se:0,uo:0,value})||Reporter.write(0,t),value}Yo(t,i,s,e){for(let n=0,h=this.Ho.length;h>n;n++){const h=this.Ho[n].st(t,i,s,e);if(h)return h}return null}Wo(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.qo._o(t,i)){const n=this.qo.st(t,this.A,this,i,s);if(null!==n)return n;if(null!==n)return n;e=1}switch(Si.call(i)){case"[object Array]":return"length"===s?this.Io(t,i).Tt(t):this.Uo.Do(i,s);case"[object Map]":return"size"===s?this.To(t,i).Tt(t):this.Uo.Do(i,s);case"[object Set]":return"size"===s?this.Bo(t,i).Tt(t):this.Uo.Do(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.st)return n.get.st(i);return this.Yo(t,i,s,n)||(e?this.Uo.Do(i,s):(function(t,i,s,e,n,h,r){if(0==r.se)return s.Do(n,h);if(r.get){const s=n.constructor.computed&&n.constructor.computed[h]||Oi;return r.set?s.fo?new GetterObserver(t,s,n,h,r,i,e):new CustomSetterObserver(n,h,r):new GetterObserver(t,s,n,h,r,i,e)}throw Reporter.error(18,h)})(t,this,this.Uo,this.A,i,s,n))}return new SetterObserver(t,i,s)}}Ai.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const ji=PLATFORM.Ue;let SelfObserver=t("SelfObserver",class{constructor(t,i,s,e){this.bt=t&LifecycleFlags.Mi,ProxyObserver.te(i)?(i.wt.subscribe(this,s),this.H=i.Ys,this.q=s,this.K=i.Ys[s],this.Wi=e in i.Ys?i[e].bind(i):ji):(this.H=i,this.q=s,this.K=i[s],this.Wi=e in i?i[e].bind(i):ji)}B(t,i,s){this.G(t,s)}W(){return this.K}G(t,i){const s=this.K;if(s!==t&&(this.K=t,!(i&LifecycleFlags.ot))){const e=this.Wi(t,s,i);void 0!==e&&(this.K=t=e),this.O(t,s,i)}}});SelfObserver=t("SelfObserver",i([propertyObserver()],SelfObserver));const{oneTime:Ri,Qi:Pi,as:Li,fs:ki}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.Zo=s.mode,s.mode=this.mode}De(t,i,s){s.mode=s.Zo,s.Zo=null}}t("BindingModeBehavior",BindingModeBehavior);class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Ri)}}t("OneTimeBindingBehavior",OneTimeBindingBehavior),BindingBehaviorResource.Ji("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Pi)}}t("ToViewBindingBehavior",ToViewBindingBehavior),BindingBehaviorResource.Ji("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Li)}}t("FromViewBindingBehavior",FromViewBindingBehavior),BindingBehaviorResource.Ji("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(ki)}}t("TwoWayBindingBehavior",TwoWayBindingBehavior),BindingBehaviorResource.Ji("twoWay",TwoWayBindingBehavior);const Vi={},Di=BindingMode.as;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,h,r;s instanceof Binding?(n="handleChange",r=E,h=s.mode&Di?LifecycleFlags.ts:LifecycleFlags._):(n="callSource",r=N,h=LifecycleFlags._),s.Rt=s[n],s.Rt.tl=n,s[n]=r,s.At={Lt:h,Pt:e,jt:0,oldValue:Vi}}De(t,i,s){s[s.Rt.tl]=s.Rt,s.Rt=null,PLATFORM.global.clearTimeout(s.At.jt),s.At=null}}t("DebounceBindingBehavior",DebounceBindingBehavior),BindingBehaviorResource.Ji("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.il=t}bind(t,i,s,...e){if(!s.Pr)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.il.me(name,s),s.sl=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.il.me(t[i],s);s.sl=t}}}De(t,i,s){const name=s.sl;if(s.sl=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.il.we(t[i],s)}else this.il.we(name,s)}}t("SignalBindingBehavior",SignalBindingBehavior),SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Ji("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.Dt=s[n=s instanceof Binding?s.mode===BindingMode.fs?"updateSource":"updateTarget":"callSource"],s.Dt.tl=n,s[n]=z,s.kt={Pt:e,Vt:0,jt:-1}}De(t,i,s){s[s.Dt.tl]=s.Dt,s.Dt=null,PLATFORM.global.clearTimeout(s.kt.jt),s.kt=null}}t("ThrottleBindingBehavior",ThrottleBindingBehavior),BindingBehaviorResource.Ji("throttle",ThrottleBindingBehavior);const Mi="custom-element",Fi="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.el="ra",TargetedInstructionType.nl="rb",TargetedInstructionType.hl="rc",TargetedInstructionType.rl="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.lo="rf",TargetedInstructionType.ol="rg",TargetedInstructionType.ll="rh",TargetedInstructionType.cl="ri",TargetedInstructionType.ul="rj",TargetedInstructionType.al="rk"})(TargetedInstructionType||(TargetedInstructionType=t("TargetedInstructionType",{})));const ITargetedInstruction=t("ITargetedInstruction",DI.ve("createInterface").Zn()),$i=Object.freeze({required:1,compiler:"default"}),xi=Object.freeze({required:0,compiler:"default"});class Ui{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=xi,this.bindables=PLATFORM.Ft,this.instructions=PLATFORM.kn,this.dependencies=PLATFORM.kn,this.surrogates=PLATFORM.kn,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.Mt=0}}const Ni=["name","template","cache","build","containerless","shadowOptions","hasSlots","useProxies"],Ei=["instructions","dependencies","surrogates"],IRenderLocation=(Profiler.fl("AttachLifecycle"),Profiler.fl("BindLifecycle"),t("INode",DI.ve("INode").Zn()),t("IRenderLocation",DI.ve("IRenderLocation").Zn())),IDOM=t("IDOM",DI.ve("IDOM").Zn()),NodeSequence=t("NodeSequence",{empty:{childNodes:PLATFORM.kn,firstChild:null,lastChild:null,dl:()=>PLATFORM.kn,insertBefore(t){},bl(t){},remove(){}}});class zi{constructor($lifecycle,cache){this.gi=null,this.Bi=null,this.zt=null,this.ti=null,this.zt=null,this.ti=null,this.qt=null,this.si=null,this.Nh=null,this.qh=null,this.Gh=null,this.$state=0,this.$scope=null,this.ci=0,this.$lifecycle=$lifecycle,this.cache=cache}vl(t){this.ci=0,this.location=t}release(t){return this.ci=1,8&this.$state?this.cache.pl(this):!!this.Kh(t)}gl(t){this.$scope=t,this.mi=lt,this.ai=ft}}class Hi{constructor(name,template,t){this.ml=0,this.wl=-1,this.cache=null,this.A=t,this.name=name,this.template=template}yl(t,i){t&&("*"===t?t=Hi.Cl:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.wl&&i||(this.wl=t)),this.cache=this.wl>0?[]:null,this.ml=this.wl>0}pl(t){return null!==this.cache&&this.wl>this.cache.length}ui(t){return this.pl(t)?(t.hi(LifecycleFlags.ds),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!==cache&&cache.length>0)return(i=cache.pop()).$state&=-129,i;if(i=new zi(this.A,this),this.template.Pi(i,null,null,t),!i.$nodes)throw Reporter.error(90);return i}}Hi.Cl=65535,(t=>{t.mi=ot,t.ai=at,t.Ht=G,t.ii=X,t.hi=tt,t.Eh=et,t.Kh=nt})(zi.prototype);const ITemplateCompiler=t("ITemplateCompiler",DI.ve("ITemplateCompiler").Zn());(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.ds=1]="none",ViewCompileFlags[ViewCompileFlags.Ol=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Il=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags=t("ViewCompileFlags",{})));const ITemplateFactory=t("ITemplateFactory",DI.ve("ITemplateFactory").Zn());t("CompiledTemplate",class{constructor(dom,t,i,s){this.dom=dom,this.Tl=t,this.Bl=i,this.Sl=s}Pi(t,host,parts,i=LifecycleFlags.ds){const s=t.$nodes=this.Bl.Al();t.$context=this.Sl,this.Tl.Mt&&(i|=LifecycleFlags.Mt),this.Sl.Pi(i,t,s.dl(),this.Tl,host,parts)}});const qi={Sl:null,dom:null,Pi(t){t.$nodes=NodeSequence.empty,t.$context=null}},Ki="default",IInstructionRenderer=t("IInstructionRenderer",DI.ve("IInstructionRenderer").Zn()),IRenderer=t("IRenderer",DI.ve("IRenderer").Zn()),IRenderingEngine=t("IRenderingEngine",DI.ve("IRenderingEngine").be(t=>t.singleton(Wi)));class Wi{constructor(t,i,s,e){this.jl=new Map,this.Rl=t,this.Pl=i,this.Ll=new Map,this.A=s,this.kl=new Map,this.Vl=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}Ei(dom,t,i,s){if(!t)return null;let e=this.kl.get(t);return e||(e=this.Dl(dom,t,i,s),this.kl.set(t,e)),e}Ml(dom,t,i){if(!t)return null;let s=this.Ll.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.Dl(dom,e,i,null);(s=new Hi(e.name,template,this.A)).yl(e.cache,1),this.Ll.set(t,s)}return s}Fi(t,i,s){let e=this.jl.get(i);e||(e=Ji.create(i),this.jl.set(i,e)),e.Fl(t,s,this.A)}Dl(dom,t,i,s){if(null===i&&(i=this.Rl),null!==t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||Ki,compiler=this.Vl[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.Ol)}return this.Pl.create(e,t)}return qi}}Wi.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class Qi{constructor(){this.C=null}ki(t){this.C=t}resolve(t,i){if(void 0===this.C)throw Reporter.error(50);return this.C}J(){this.C=null}}class Gi{ki(t,parts){this.Bl=t,this.$l=parts||PLATFORM.Ft}resolve(t,i){const s=this.Bl;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=this.$l[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Ml(dom,e,i)}return s}J(){this.Bl=null,this.$l=PLATFORM.Ft}}let _i=class{constructor(t,customElement){this.Ot=0,this.children=null,this.customElement=customElement,this.A=t,this.N=0}W(){return this.N||(this.N=1,this.customElement.oi.xl(()=>{this.Ul()}),this.children=dt(this.customElement.oi.children)),this.children}G(t){}flush(t){this.O(this.children,void 0,t|LifecycleFlags._),this.Ot=0}subscribe(t){this.v(t)}unsubscribe(t){this.p(t)}Ul(){this.children=dt(this.customElement.oi.children),"$childrenChanged"in this.customElement&&this.customElement.Nl(),this.A.S(this).catch(t=>{throw t}),this.Ot=1}};_i=i([subscriberCollection(MutationKind.C)],_i);class Ji{constructor(){}static create(t){const i=new Ji;return i.bindables=t.description.bindables,i}Fl(t,i,s){i.$lifecycle=s,"$projector"in i?this.El(t,s,i):this.zl(t,i)}El(t,i,s){this.zl(t,s).Hl=new _i(i,s),Reflect.defineProperty(s,"$children",{Vi:0,get(){return this.Di.Hl.W()}})}zl(t,i){const s={},bindables=this.bindables,e=Object.getOwnPropertyNames(bindables);if(t&LifecycleFlags.Mt)for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,ProxyObserver.xi(i).T,name,bindables[name].Wi)}else{for(let n=0,h=e.length;h>n;++n){const name=e[n];s[name]=new SelfObserver(t,i,name,bindables[name].Wi),bt(t,i,name)}Reflect.defineProperty(i,"$observers",{Vi:0,value:s})}return s}}const IProjectorLocator=t("IProjectorLocator",DI.ve("IProjectorLocator").Zn()),CustomElementResource=t("CustomElementResource",{name:Mi,X:H,ye(t){return t.kind===this},ql:q,Ji(t,i=null){if(!t)throw Reporter.error(70);const s=null===i?class{}:i,e=buildTemplateDefinition(s,t),n=s.prototype;return s.kind=CustomElementResource,s.description=e,s.register=vt,n.Kl=mt,n.mi=rt,n.Ht=Q,n.ii=J,n.ai=ut,n.hi=Z,n.si=null,n.qt=null,n.Gh=null,n.$scope=null,n.$hooks=0,n.gi=null,n.Bi=null,n.zt=null,n.ti=null,n.Eh=it,n.Kh=st,n.Nh=null,n.qh=null,n.oi=null,"flush"in n&&(n.ft=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Uh=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n._h=null),"render"in n&&(n.$hooks|=1024),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.zh=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Wh=null),s}}),Xi={mode:"open"},CustomAttributeResource=(Profiler.fl("RenderLifecycle"),t("CustomAttributeResource",{name:Fi,X:K,ye(t){return t.kind===this},Ji(t,i){const s=i,e=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.kn:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Qi:defaultBindingMode,Hi:void 0===def.Hi?0:def.Hi,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},t.bindables,def.bindables),Mt:void 0===def.Mt?0:def.Mt}})("string"==typeof t?{name:t}:t,s),n=s.prototype;return s.kind=CustomAttributeResource,s.description=e,s.register=wt,n.Kl=gt,n.mi=ht,n.Ht=W,n.ii=_,n.ai=ct,n.hi=Y,n.si=null,n.qt=null,n.Gh=null,n.$scope=null,n.$hooks=0,n.$state=0,"flush"in n&&(n.ft=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Uh=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n._h=null),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.zh=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Wh=null),s}}));class If{constructor(t,i,s){this.value=0,this.Br=s,this.Wl=null,this.Ql=null,this.Gl=t,this._l=null,this.location=i}bi(t){const i=this.Jl(t);this.Br.pr(i,t),this.Br.bi(t,this.$scope)}Ut(t){this.Br.Ut(t)}Gt(t){this.Br.Gt(t)}Ii(t){this.Br.Ii(t)}ei(t){null!==this._l&&this._l.release(t)&&(this._l=null),null!==this.Ql&&this.Ql.release(t)&&(this.Ql=null),this.Br.ei(t)}Xl(t,i,s){if(3&this.$state)if(ProxyObserver.te(this)&&(s|=LifecycleFlags.Mt),s&LifecycleFlags.rt){const t=this.Jl(s);this.Br.pr(t,s)}else this.$lifecycle.S(this).catch(t=>{throw t})}flush(t){ProxyObserver.te(this)&&(t|=LifecycleFlags.Mt);const i=this.Jl(t);this.Br.pr(i,t)}Jl(t){return this.value?this._l=this.Yl(this._l,this.Gl,t):null!==this.Wl?this.Ql=this.Yl(this.Ql,this.Wl,t):null}Yl(t,i,s){return null===t&&(t=i.create(s)),t.vl(this.location),t}}t("If",If),If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],i([bindable],If.prototype,"value",void 0),CustomAttributeResource.Ji({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Bl=t}link(t){t.Wl=this.Bl}}t("Else",Else),Else.inject=[IViewFactory],CustomAttributeResource.Ji({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,i,s){this.Bl=s,this.Zl=0,this.location=t,this.tc=null,this.ic=i,this.sc=[],this.key=null,this.Gs=0}bi(t){this.ec(t);let i=this.ic.gi;for(;null!==i;){if(ProxyObserver.Zs(i.target)===ProxyObserver.Zs(this)&&"items"===i.Rr){this.nc=i.jr;break}i=i.wi}this.hc=this.nc.Nn.evaluate(t,this.$scope,null),this.Gs||(t&LifecycleFlags.Fs)>0?this.rc(null,t):this.oc(null,t)}Ut(t){const{sc:i,location:s}=this;for(let e=0,n=i.length;n>e;++e){const n=i[e];n.vl(s),n.Ht(t)}}Gt(t){const{sc:i}=this;for(let s=0,e=i.length;e>s;++s){const e=i[s];e.ii(t),e.release(t)}}Ii(t){this.ec(t);const{sc:i}=this;for(let s=0,e=i.length;e>s;++s)i[s].ai(t)}lc(t,i,s){this.ec(s),s|=LifecycleFlags._,this.Gs||(s&LifecycleFlags.Fs)>0?this.rc(null,s):this.oc(null,s)}U(t,i){i|=LifecycleFlags.rt|LifecycleFlags._,this.Gs||(i&LifecycleFlags.Fs)>0?this.rc(t,i):this.oc(t,i)}oc(t,i){ProxyObserver.te(this)&&(i|=LifecycleFlags.Mt);const{sc:s,$lifecycle}=this;if(3&this.$state){const{hc:e,$scope,Bl:n,nc:h,cc:r}=this,o=s.length,l=h.count(r);if(l>o){s.length=l;for(let t=o;l>t;++t)s[t]=n.create(i)}else if(o>l){$lifecycle.Wt();for(let t=l,e=s[t];o>t;e=s[++t])e.release(i),e.ii(i);$lifecycle.Jt(i),$lifecycle.yi();for(let t=l,e=s[t];o>t;e=s[++t])e.ai(i);if($lifecycle.Ti(i),s.length=l,0===l)return}else if(0===l)return;$lifecycle.fi(),h.zn(r,null===t?(t,n,h)=>{const r=s[n];r.mi(i,Scope.de(i,$scope,r.$scope&&r.$scope.ue[e]===h?r.$scope.ue:BindingContext.create(i,e,h)))}:(n,h,r)=>{const o=s[h];o.mi(i,Scope.de(i,$scope,!o.$scope||t[h]!==h&&o.$scope.ue[e]!==r?BindingContext.create(i,e,r):o.$scope.ue))}),$lifecycle.vi(i)}if(12&this.$state){const{location:e}=this;if($lifecycle.$t(),null===t)for(let t=0,n=s.length;n>t;++t){const n=s[t];n.vl(e),n.Ht(i)}else for(let n=0,h=s.length;h>n;++n)if(t[n]!==n){const t=s[n];t.vl(e),t.Ht(i)}$lifecycle.Et(i)}}rc(t,i){ProxyObserver.te(this)&&(i|=LifecycleFlags.Mt);const{$lifecycle,hc:s,$scope,Bl:e,nc:n,cc:h}=this;let r=this.sc;if(null===t){if(3&this.$state){$lifecycle.Wt();const t=r.length;let o;for(let s=0;t>s;++s)(o=r[s]).release(i),o.ii(i);$lifecycle.Jt(i),$lifecycle.yi();for(let s=0;t>s;++s)(o=r[s]).ai(i);$lifecycle.Ti(i);const l=n.count(h);r=this.sc=Array(l),$lifecycle.fi(),n.zn(h,(t,n,h)=>{(o=r[n]=e.create(i)).mi(i,Scope.de(i,$scope,BindingContext.create(i,s,h)))}),$lifecycle.vi(i)}if(12&this.$state){const{location:t}=this;let s;$lifecycle.$t();const e=r.length;for(let n=0;e>n;++n)(s=r[n]).vl(t),s.Ht(i);$lifecycle.Et(i)}}else{const n=t.length;let o;const l=t.yt,c=l.length;let u=0;if(3&this.$state){if(c>0){for($lifecycle.Wt(),u=0;c>u;++u)(o=r[l[u]]).release(i),o.ii(i);for($lifecycle.Jt(i),$lifecycle.yi(),u=0;c>u;++u)(o=r[l[u]]).ai(i);$lifecycle.Ti(i),u=0;let s=0,e=0;for(l.sort();c>u;++u)for(r.splice(s=l[u]-u,1),e=0;n>e;++e)s>t[e]||--t[e]}for($lifecycle.fi(),u=0;n>u;++u)-2===t[u]&&((o=e.create(i)).mi(i,Scope.de(i,$scope,BindingContext.create(i,s,h[u]))),r.splice(u,0,o));if($lifecycle.vi(i),r.length!==n)throw Error(`viewsLen=${r.length}, mapLen=${n}`)}if(12&this.$state){const{location:s}=this,e=(function(t){const i=t.length,s=i+(t.yt&&t.yt.length||0);let e;const n=new(e=255>s?Uint8Array:65535>s?Uint16Array:Uint32Array)(i),h=new e(i);let r=0,o=0,l=0,c=0,u=0,a=0,f=0,d=0;for(;i>c;c++)if(-2!==(o=t[c])){if(-2!==(l=t[u=h[r]])&&o>l){n[c]=u,h[++r]=c;continue}for(a=0,f=r;f>a;)-2!==(l=t[h[d=a+f>>1]])&&o>l?a=d+1:f=d;((l=t[h[a]])>o||-2===l)&&(a>0&&(n[c]=h[a-1]),h[a]=c)}const b=new e(++r);for(o=h[r-1];r-- >0;)b[r]=o,o=n[o];return b})(t),n=e.length;$lifecycle.Wt(),$lifecycle.$t(),$lifecycle.Kt({Eh(){let h=s,l=n-1,c=t.length-1;for(;c>=0;--c)if(-2===t[c]){(o=r[c]).$state|=4;let t=o.zt;for(;null!==t;)t.Ht(i|LifecycleFlags.xt),t=t.qt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else if(0>l||1===n||c!==e[l]){(o=r[t[c]]).$state|=32;let s=o.ti;for(;null!==s;)s.ii(i|LifecycleFlags.Qt),s=s.si;for(o.$nodes.remove(),o.$state&=-57,o.$state|=4,s=o.zt;null!==s;)s.Ht(i|LifecycleFlags.xt),s=s.qt;o.$nodes.insertBefore(h),o.$state|=24,o.$state&=-5,h=o.$nodes.firstChild}else h=(o=r[c]).$nodes.firstChild,--l},Nh:null}),$lifecycle.Jt(i),$lifecycle.Et(i)}}}ec(t){const i=this.tc;if(3&this.$state){const s=this.tc=getCollectionObserver(t,this.$lifecycle,this.cc);i!==s&&i&&i.St(this),s&&s.Bt(this)}else i&&i.St(this)}}t("Repeat",Repeat),Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],i([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.Ji({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,i){this.Bl=t,this.currentView=this.Bl.create(),this.currentView.vl(i)}bi(t){this.currentView.mi(t|LifecycleFlags.us,this.$scope)}Ut(t){this.currentView.Ht(t)}Gt(t){this.currentView.ii(t)}Ii(t){this.currentView.ai(t)}}t("Replaceable",Replaceable),Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.Ji({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,i){this.value=null,this.Bl=t,this.currentView=this.Bl.create(),this.currentView.vl(i)}Xl(){3&this.$state&&this.uc(LifecycleFlags.os)}bi(t){this.uc(t)}Ut(t){this.currentView.Ht(t)}Gt(t){this.currentView.ii(t)}Ii(t){this.currentView.ai(t)}uc(t){const i=Scope.de(t,this.$scope,this.value);this.currentView.mi(t,i)}}t("With",With),With.inject=[IViewFactory,IRenderLocation],i([bindable],With.prototype,"value",void 0),CustomAttributeResource.Ji({name:"with",isTemplateController:1},With);const ISanitizer=t("ISanitizer",DI.ve("ISanitizer").be(t=>t.singleton(class{ac(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}})));class SanitizeValueConverter{constructor(t){this.fc=t}Qi(t){return null==t?null:this.fc.ac(t)}}t("SanitizeValueConverter",SanitizeValueConverter),SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Ji("sanitize",SanitizeValueConverter),Profiler.fl("Aurelia.start"),Profiler.fl("Aurelia.stop");class Aurelia{constructor(t=DI.dc()){this.Rl=t,this.bc=[],this.vc=[],this.pc=[],this.gc=0,this.mc=null,Registration.C(Aurelia,this).register(t,Aurelia)}register(...t){return this.Rl.register(...t),this}app(t){const host=t.host;this.Rl.get(IDOMInitializer).initialize(t);let component,i=LifecycleFlags.ns,s=LifecycleFlags.Yt;t.Mt&&(i|=LifecycleFlags.Mt,s|=LifecycleFlags.Mt);const e=t.component;CustomElementResource.ye(e)?(this.Rl.register(e),component=this.Rl.get(CustomElementResource.X(e.description.name))):component=e,component=ProxyObserver.Zs(component);const n=()=>{host.$au=this,this.bc.includes(component)||(this.mc=component,this.bc.push(component),component.Kl(i,this.Rl,host)),component.mi(i|LifecycleFlags.ot,null),component.Ht(i|LifecycleFlags.xt)};return this.vc.push(n),this.pc.push(()=>{component.ii(s|LifecycleFlags.Qt),component.ai(s|LifecycleFlags.Ci),host.$au=null}),this.gc&&n(),this}root(){return ProxyObserver.Xs(this.mc)}start(){for(const t of this.vc)t();return this.gc=1,this}stop(){this.gc=0;for(const t of this.pc)t();return this}}t("Aurelia",Aurelia),PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=t("IDOMInitializer",DI.ve("IDOMInitializer").Zn());class Yi{constructor(t){const i=this.wc={};t.forEach(t=>{i[t._i]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Pi(t,dom,i,s,targets,e,host,parts){const n=e.instructions,h=this.wc;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);for(let e=0,r=targets.length;r>e;++e){const instructions=n[e],r=targets[e];for(let e=0,n=instructions.length;n>e;++e){const n=instructions[e];h[n.type].Pi(t,dom,i,s,r,n,parts)}}if(host){const n=e.surrogates;for(let e=0,r=n.length;r>e;++e){const r=n[e];h[r.type].Pi(t,dom,i,s,host,r,parts)}}}}Yi.inject=[all(IInstructionRenderer)];let Zi=class{Pi(t,dom,i,s,e,n){e[n.to]=n.value}};Zi=i([instructionRenderer("re")],Zi);let ts=class{Pi(t,dom,i,s,e,n){const h=i.Li(s,e,n,null,null,e,1),component=i.get(H(n.res)),r=i.get(IRenderer).wc,o=n.instructions;component.Kl(t,i,e,n);for(let e=0,n=o.length;n>e;++e){const n=o[e];r[n.type].Pi(t,dom,i,s,component,n)}addComponent(s,component),h.J()}};ts=i([instructionRenderer("ra")],ts);let is=class{Pi(t,dom,i,s,e,n){const h=i.Li(s,e,n),component=i.get(K(n.res)),r=i.get(IRenderer).wc,o=n.instructions;component.Kl(t,i);for(let e=0,n=o.length;n>e;++e){const n=o[e];r[n.type].Pi(t,dom,i,s,component,n)}addComponent(s,component),h.J()}};is=i([instructionRenderer("rb")],is);let ss=class{constructor(t){this.yc=t}Pi(t,dom,i,s,e,n,parts){const h=this.yc.Ml(dom,n.def,i),r=i.Li(s,e,n,h,parts,dom.Cc(e),0),component=i.get(K(n.res)),o=i.get(IRenderer).wc,l=n.instructions;component.Kl(t,i),n.link&&component.link(s.ti);for(let e=0,n=l.length;n>e;++e){const n=l[e];o[n.type].Pi(t,dom,i,s,component,n)}addComponent(s,component),r.J()}};ss.inject=[IRenderingEngine],ss=i([instructionRenderer("rc")],ss);let es=class{constructor(t,i){this.Oc=t,this.et=i}Pi(t,dom,i,s,e,n){dom.remove(e);const h=n.instructions,toViewModel=n.toViewModel;for(let t=0,e=h.length;e>t;++t){const e=h[t],n=ensureExpression(this.Oc,e.from,48);addBinding(s,new LetBinding(n,e.to,this.et,i,toViewModel))}}};es.inject=[IExpressionParser,IObserverLocator],es=i([instructionRenderer("rd")],es);let ns=class{constructor(t,i){this.Oc=t,this.et=i}Pi(t,dom,i,s,e,n){const h=ensureExpression(this.Oc,n.from,153);addBinding(s,new Call(h,e,n.to,this.et,i))}};ns.inject=[IExpressionParser,IObserverLocator],ns=i([instructionRenderer("rh")],ns);let hs=class{constructor(t){this.Oc=t}Pi(t,dom,i,s,e,n){const h=ensureExpression(this.Oc,n.from,1280);addBinding(s,new Ref(h,e,i))}};hs.inject=[IExpressionParser],hs=i([instructionRenderer("rj")],hs);let rs=class{constructor(t,i){this.Oc=t,this.et=i}Pi(t,dom,i,s,e,n){let h;const r=ensureExpression(this.Oc,n.from,2048);addBinding(s,h=r.qn?new MultiInterpolationBinding(this.et,r,e,n.to,BindingMode.Qi,i):new InterpolationBinding(r.Kn,r,e,n.to,BindingMode.Qi,this.et,i,1))}};rs.inject=[IExpressionParser,IObserverLocator],rs=i([instructionRenderer("rf")],rs);let os=class{constructor(t,i){this.Oc=t,this.et=i}Pi(t,dom,i,s,e,n){const h=ensureExpression(this.Oc,n.from,48|n.mode);addBinding(s,new Binding(h,e,n.to,n.mode,this.et,i))}};os.inject=[IExpressionParser,IObserverLocator],os=i([instructionRenderer("rg")],os);let ls=class{constructor(t,i){this.Oc=t,this.et=i}Pi(t,dom,i,s,e,n){const h=ensureExpression(this.Oc,n.from,539);addBinding(s,new Binding(h,e,n.to,BindingMode.Qi,this.et,i))}};ls.inject=[IExpressionParser,IObserverLocator],ls=i([instructionRenderer("rk")],ls);class cs{bind(t,i,s,e){s.target.key=e,s.target.Gs=1}De(t,i,s){s.target.key=null,s.target.Gs=0}}BindingBehaviorResource.Ji("keyed",cs);const DefaultComponents=[t("ObserverLocatorRegistration",Ai),t("LifecycleRegistration",Mt),t("RendererRegistration",Yi)],IfRegistration=t("IfRegistration",If),ElseRegistration=t("ElseRegistration",Else),RepeatRegistration=t("RepeatRegistration",Repeat),ReplaceableRegistration=t("ReplaceableRegistration",Replaceable),WithRegistration=t("WithRegistration",With),SanitizeValueConverterRegistration=t("SanitizeValueConverterRegistration",SanitizeValueConverter),DebounceBindingBehaviorRegistration=t("DebounceBindingBehaviorRegistration",DebounceBindingBehavior),us=cs,OneTimeBindingBehaviorRegistration=t("OneTimeBindingBehaviorRegistration",OneTimeBindingBehavior),ToViewBindingBehaviorRegistration=t("ToViewBindingBehaviorRegistration",ToViewBindingBehavior),FromViewBindingBehaviorRegistration=t("FromViewBindingBehaviorRegistration",FromViewBindingBehavior),SignalBindingBehaviorRegistration=t("SignalBindingBehaviorRegistration",SignalBindingBehavior),ThrottleBindingBehaviorRegistration=t("ThrottleBindingBehaviorRegistration",ThrottleBindingBehavior),TwoWayBindingBehaviorRegistration=t("TwoWayBindingBehaviorRegistration",TwoWayBindingBehavior),DefaultResources=t("BasicResources",[IfRegistration,ElseRegistration,RepeatRegistration,ReplaceableRegistration,WithRegistration,SanitizeValueConverterRegistration,DebounceBindingBehaviorRegistration,us,OneTimeBindingBehaviorRegistration,ToViewBindingBehaviorRegistration,FromViewBindingBehaviorRegistration,SignalBindingBehaviorRegistration,ThrottleBindingBehaviorRegistration,TwoWayBindingBehaviorRegistration]),DefaultRenderers=[os,ls,ns,hs,rs,Zi,ts,is,ss,es];t("BasicConfiguration",{register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),dc(){return this.register(DI.dc())}}),t("InterpolationInstruction",class{constructor(from,to){this.type="rf",this.from=from,this.to=to}}),t("OneTimeBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}),t("ToViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Qi,this.oneTime=0,this.to=to}}),t("FromViewBindingInstruction",class{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.as,this.oneTime=0,this.to=to}}),t("TwoWayBindingInstruction",class{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.fs,this.oneTime=0,this.to=to}}),t("IteratorBindingInstruction",class{constructor(from,to){this.type="rk",this.from=from,this.to=to}}),t("CallBindingInstruction",class{constructor(from,to){this.type="rh",this.from=from,this.to=to}}),t("RefBindingInstruction",class{constructor(from){this.type="rj",this.from=from}}),t("SetPropertyInstruction",class{constructor(value,to){this.type="re",this.to=to,this.value=value}}),t("HydrateElementInstruction",class{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}),t("HydrateAttributeInstruction",class{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}),t("HydrateTemplateController",class{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}),t("LetElementInstruction",class{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}),t("LetBindingInstruction",class{constructor(from,to){this.type="ri",this.from=from,this.to=to}})}}});
