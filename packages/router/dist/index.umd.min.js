(function(t,s){"object"==typeof exports&&"undefined"!=typeof module?s(exports,require("@aurelia/runtime"),require("@aurelia/kernel")):"function"==typeof define&&define.t?define(["exports","@aurelia/runtime","@aurelia/kernel"],s):s((t=t||self).router={},t.runtime,t.kernel)})(this,function(t,runtime,kernel){"use strict";function s(t){const s={},i=[];if(!t||!t.length)return{s,list:i};const h=t.replace("+"," ").split("&");for(const t of h){const h=t.split("="),e=decodeURIComponent(h.shift());if(!h.length){i.push(e);continue}const value=decodeURIComponent(h.shift());s[e]=value}return{s,list:i}}function i(t,s,i,h){var e,n,o=arguments.length,r=3>o?s:null===h?h=Object.getOwnPropertyDescriptor(s,i):h;if("object"==typeof Reflect&&"function"==typeof Reflect.i)r=Reflect.i(t,s,i,h);else for(n=t.length-1;n>=0;n--)(e=t[n])&&(r=(3>o?e(r):o>3?e(s,i,r):e(s,i))||r);return o>3&&r&&Object.defineProperty(s,i,r),r}class h{constructor(){this.h=(()=>{if(null!==this.o){const t=this.o;return this.o=null,void t()}const t=this.l(),s=this.u(),i={};let h,e=this.p("HistoryEntry");if(this.m&&this.m.path===t){i.v=1;const t=this.$?this.P.index:this.history.length-this.O;h=this.P,this.P=this.m,this.P.index=t,this.$?(this.j=0,this.k[this.P.index]=this.P,this.S?(i.V=1,this.S=0):this.H?(i.C=1,this.H=0):i.g=1,this.$=0):(this.j=1,this.k=this.k.slice(0,this.P.index),this.k.push(this.P)),this.N({A:this.k,_:this.O,J:this.P})}else this.k=this.k||this.p("HistoryEntries")||[],this.O=this.O||this.p("HistoryOffset")||0,e||this.P?e?this.P?e.index>this.P.index?i.q=1:this.P.index>e.index&&(i.D=1):i.C=1:i.v=1:(i.v=1,i.L=1,this.O=this.history.length),e||(this.k=this.k.slice(0,(e={path:t,T:null,index:this.history.length-this.O,I:s}).index),this.k.push(e),this.N({A:this.k,_:this.O,J:e})),this.j=this.P?e.index-this.P.index:0,h=this.P,this.P=e,this.S&&(i.V=1,this.S=0);this.m=null,this.U&&this.U--,this.B(this.P,i,h)}),this.location=window.location,this.history=window.history,this.P=null,this.k=null,this.O=null,this.R=null,this.m=null,this.options=null,this.W=0,this.j=null,this.U=null,this.S=0,this.$=0,this.H=0,this.o=null}G(t){if(this.W)throw Error("History has already been activated.");return this.W=1,this.options=Object.assign({},t),window.addEventListener("popstate",this.h),Promise.resolve().then(()=>{this.K(this.l(),1)})}X(){window.removeEventListener("popstate",this.h),this.W=0}Y(t,s,i){this.m={path:t,T:null,title:s,data:i},this.K(t)}replace(t,s,i){this.$=1,this.m={path:t,T:null,title:s,data:i},this.K(t,1)}Z(t,s,i){this.U=this.j+1,this.replace(t,s,i)}refresh(){this.P&&(this.H=1,this.replace(this.P.path,this.P.title,this.P.data))}back(){this.history.go(-1)}forward(){this.history.go(1)}cancel(){this.S=1;const t=this.j||this.U;t?this.history.go(-t):this.replace(this.R.path,this.R.title,this.R.data)}async pop(){let t,s=new Promise(t=>{this.o=t});this.history.go(-1),await s;const i=""+this.location;t=this.history.state,s=new Promise(t=>{this.o=t}),this.history.go(-1),await s,this.history.pushState(t,null,i)}N(t,value){const{pathname:s,search:i,hash:h}=this.location;let e=Object.assign({},this.history.state);"string"==typeof t?e[t]=JSON.parse(JSON.stringify(value)):e=Object.assign({},e,JSON.parse(JSON.stringify(t))),this.history.replaceState(e,null,`${s}${i}${h}`)}p(t){return Object.assign({},this.history.state)[t]}M(t){this.P.title=t,this.k[this.P.index]=this.P,this.N({A:this.k,J:this.P})}F(t,s,i){if(i.index!==this.P.index)return;const h=`#/${t}`,{pathname:e,search:n,hash:o}=this.location;if(h===o&&this.P.path===t&&this.P.T===s)return;this.P.path=t,this.P.T=s;const r=Object.assign({},this.history.state,{J:this.P,A:this.k});this.history.replaceState(r,null,`${e}${n}${h}`)}tt(t){t.startsWith("#")||(t=`#${t}`),this.location.hash=t}get st(){return this.k?this.k.slice(0,this.P.index+1).map(value=>value.title):[]}l(){return this.location.hash.substr(1).split("?")[0]}K(t,s=0){if(this.P&&this.P.path===t&&!this.H)return;const{pathname:i,search:h}=this.location,e=`#${t}`;s?(this.R=this.P,this.history.replaceState({},null,`${i}${h}${e}`)):this.history.pushState({},null,`${i}${h}${e}`),this.h()}u(){const t=this.location.hash.substr(1).split("?");return t.shift(),t.length>0?t.shift():""}B(t,s,i){const h=Object.assign({},t,s);h.it=i,this.options.B&&this.options.B(h)}}class e{constructor(){this.W=0,this.ht=(t=>{const s=e.et(t);s.nt&&(t.preventDefault(),this.options.B(s))}),this.document=document}static et(t){const s={nt:0,href:null,anchor:null},i=e.ot(t.target);if(!i||!e.rt(i))return s;if(i.hasAttribute("external"))return s;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return s;const h=i.getAttribute("href");return s.anchor=i,s.href=h,s.nt=1===t.which,s}static ot(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}}static rt(t){const s=t.getAttribute("target");return!s||s===e.window.name||"_self"===s}G(t){if(this.W)throw Error("LinkHandler has already been activated.");this.W=1,this.options=Object.assign({},t),this.document.addEventListener("click",this.ht,1)}X(){this.document.removeEventListener("click",this.ht,1),this.W=0}}class n{constructor(t,s){this.active="",this.lt=t,Object.assign(this,{ct:s.ct,title:s.title,children:null,at:s.at,active:""}),this.link=this.ut(this.ct),this.ft=s.dt?this.ut(s.dt):this.link,this.pt=this.lt.router.vt.get(runtime.IObserverLocator),this.wt=this.pt.bt(this.lt.router,"activeComponents"),this.wt.subscribe(this)}get $t(){return this.children&&this.children.length?"nav-has-children":""}Pt(){this.active=this.link&&this.link.length?this.Ot():"nav-active"===this.active?"nav-active":this.jt()?"nav-active-child":""}Ot(){const t=this.ft.split(this.lt.router.kt.add),s=this.lt.router.St;for(const component of t)if(0>component.indexOf(this.lt.router.kt.viewport)){if(0>s.findIndex(value=>value.replace(/\@[^=]*/,"")===component))return""}else if(0>s.indexOf(component))return"";return"nav-active"}Vt(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}ut(t){return Array.isArray(t)?t.map(value=>this.Ht(value)).join(this.lt.router.kt.Ct):this.Ht(t)}jt(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.jt())return 1;return 0}Ht(component){return component?"string"==typeof component?component:component.description?component.description.name:component.component?this.Ht(component.component)+(component.viewport?`@${component.viewport}`:""):void 0:""}}class o{constructor(router,name){this.router=router,this.name=name,this.gt=[]}Nt(t){for(const s of t)this.At(this.gt,s)}At(t,s){const i=new n(this,s);if(t.push(i),s.children){i.children=[];for(const t of s.children)this.At(i.children,t)}}}class r{constructor(router,name,t,s,i,h){this.router=router,this.name=name,this.yt=t,this._t=s,this.scope=i,this.options=h,this.clear=0,this.content=null,this.Jt=null,this.s=null,this.qt=null,this.Dt=null,this.Lt=null,this.component=null,this.Tt=null,this.It=null}Ut(t,s){let i;if(this.clear=0,"string"==typeof t)if(t===this.router.kt.clear)this.clear=1,t=null;else{const s=t.split(this.router.kt.s);t=s.shift(),i=s.length?s.join(this.router.kt.s):null;const h=this.router.vt.Bt(runtime.CustomElementResource.Rt(t));null!==h&&(t=h.zt(this.router.vt).Wt)}return this.Jt=t,this.Lt=s,this.qt=i,this.content!==t||this.s!==i||!this.Dt||this.Dt.I!==s.I||s.C?1:0}Gt(t,s){this.scope&&this.scope.parent&&!this.scope.viewport&&(this.scope.viewport=this),this.scope&&!this.scope.yt&&(this.scope.yt=t),this.yt||(this.yt=t,s&&s.Kt&&(this.options.Kt=s.Kt),s&&s.default&&(this.options.default=s.default),s&&s.Qt&&(this.options.Qt=s.Qt),s&&s.Xt&&(this.options.Xt=s.Xt),this.It&&this.It()),this.component||this.Tt||!this.options.default||this.router.Yt(this,this.options.default)}Zt(){if(!this.component)return Promise.resolve(1);const component=this.component;if(!component.Zt)return Promise.resolve(1);const t=component.Zt(this.Dt,this.Lt);return"boolean"==typeof t?Promise.resolve(t):t}Mt(){if(this.clear)return Promise.resolve(1);if(!this.Jt)return Promise.resolve(0);if(this.loadComponent(this.Jt),!this.Tt)return Promise.resolve(0);const component=this.Tt;if(!component.Mt)return Promise.resolve(1);const t=component.Mt(this.Lt,this.Dt);return"boolean"==typeof t?Promise.resolve(t):t}async Ft(){if(this.component&&(this.component.xt&&await this.component.xt(this.Dt,this.Lt),this.Tt||this.Et(this.component)),this.Tt){if(this.Tt.ts){const t=(function(t,i,h){const e=s(i),n=s(t),o=Object.assign({},e.s,n.s),r=[...e.list,...n.list];if(r.length&&h&&h.length)for(const t of h)o[t]=r.shift();let l;return r.length&&Object.keys(o).length&&(o["ss"]=r.splice(0,r.length)),{s:o,list:r,hs:l=r.length?r:o}})(this.qt,this.Lt.I,this.Jt.s);this.Lt.s=t.s,this.Lt.es=t.list,await this.Tt.ts(t.hs,this.Lt,this.Dt)}if(!this.yt&&(await this.ns(),!this.yt))return Promise.resolve(0);this.component&&this.Et(this.component),this.os(this.Tt),this.content=this.Jt,this.s=this.qt,this.Dt=this.Lt,this.component=this.Tt}return this.clear&&(this.content=this.s=this.component=null,this.Dt=this.Lt),this.Jt=this.qt=this.Lt=this.Tt=null,Promise.resolve(1)}description(t=0){if(this.content){const component=this.content.description.name,s=this.scope?this.router.kt.rs:"",i=this.s?this.router.kt.s+this.s:"";if(t||s.length||this.options.ls)return`${component}${this.router.kt.viewport}${this.name}${s}${i}`;const h={};return h[component]=component,this._t.cs(h)?`${component}${i}`:`${component}${this.router.kt.viewport}${this.name}${s}${i}`}}as(t=0){return[this._t.context(t),this.description(t)].filter(value=>value&&value.length).join(this.router.kt.scope)}us(component){let t=this.options.Kt||[];return"string"==typeof t&&(t=t.split(",")),t.indexOf(component)>=0}fs(component){if("-"===component||null===component)return 1;let t=this.options.Kt;return t&&t.length?("string"==typeof t&&(t=t.split(",")),0>t.indexOf(component)?t.filter(value=>value.indexOf("*")>=0).length?1:0:1):1}ds(t){this.component&&this.component.ps(t)}ms(t){this.component&&this.component.vs(t)}ws(t){this.component&&this.component.bs(t)}$s(t){this.component&&this.component.Ps(t)}loadComponent(component){this.Tt=this.router.vt.get(runtime.CustomElementResource.Rt(component.description.name))}os(component){const host=this.yt,t=this.router.vt,dom=t.get(runtime.IDOM),s=t.get(runtime.IProjectorLocator),i=t.get(runtime.IRenderingEngine);component.Os(dom,s,i,host,null),component.ps(runtime.LifecycleFlags.js|runtime.LifecycleFlags.ks,null),component.vs(runtime.LifecycleFlags.js)}Et(component){component.bs(runtime.LifecycleFlags.Ss),component.Ps(runtime.LifecycleFlags.Ss|runtime.LifecycleFlags.Vs)}async ns(){return this.yt?Promise.resolve():new Promise(t=>{this.It=t})}}class Scope{constructor(router,t,s){this.router=router,this.yt=t,this.parent=s,this.viewport=null,this.children=[],this.Hs={},this.Cs={},this.gs=null,this.parent&&this.parent.Ns(this)}cs(t){const s=[];let i=0;t&&(this.gs={},this.Cs={}),this.gs=Object.assign({},this.Hs,this.gs);for(const s in t){const parts=s.split(this.router.kt.scope),t=parts.shift();this.Cs[t]||(this.Cs[t]=[]),this.Cs[t].push(parts)}for(const h in this.Cs){const e=h.split(this.router.kt.s),component=e.shift().split(this.router.kt.viewport).shift(),n=component+(e.length?this.router.kt.s+e.join(this.router.kt.s):"");for(const name in this.gs){const e=this.gs[name];if(e&&e.us(component)){const o=this.As(t,this.Cs,h,n,e);s.push(...o.ys),i=i||o._s,this.gs[name]=null,delete this.Cs[h];break}}}for(const h in this.Cs){const e=h.split(this.router.kt.s),parts=e.shift().split(this.router.kt.viewport),component=parts.shift(),n=component+(e.length?this.router.kt.s+e.join(this.router.kt.s):"");let name=parts.shift();if(!name||!name.length||name.startsWith("?"))continue;let o=0;name.endsWith(this.router.kt.rs)&&(o=1,name=name.substr(0,name.length-1)),this.Hs[name]||(this.Js(name,null,{scope:o,ls:1}),this.gs[name]=this.Hs[name]);const r=this.gs[name];if(r&&r.fs(component)){const e=this.As(t,this.Cs,h,n,r);s.push(...e.ys),i=i||e._s,this.gs[name]=null,delete this.Cs[h]}}for(const h in this.Cs){const e=h.split(this.router.kt.s),component=e.shift().split(this.router.kt.viewport).shift(),n=component+(e.length?this.router.kt.s+e.join(this.router.kt.s):""),o=[];for(const name in this.gs){const t=this.gs[name];t&&t.fs(component)&&o.push(t)}if(1===o.length){const e=o.shift(),r=this.As(t,this.Cs,h,n,e);s.push(...r.ys),i=i||r._s,this.gs[e.name]=null,delete this.Cs[h];break}}if(i=i||Object.keys(this.Cs).length>0,!t)for(const t of this.children){const h=t.cs();s.push(...h.ys),i=i||h._s}return{ys:s,_s:i}}As(t,s,i,component,h){const e=[{component,viewport:h}];let n=0;if(s[i].length){const o=h.scope||h._t;for(const h of s[i])if(h.length){const s=h.join(this.router.kt.scope),r={};r[s]=t[i+this.router.kt.scope+s];const l=o.cs(r);e.push(...l.ys),n=n||l._s}}return{ys:e,_s:n}}Js(name,t,s){let i=this.Hs[name];if(!i){let h;s.scope&&(h=new Scope(this.router,t,this),this.router.qs.push(h)),i=this.Hs[name]=new r(this.router,name,t,this,h,s)}return t&&i.Gt(t,s),i}Ds(t){return t.scope&&this.router.Ls(t.scope),delete this.Hs[t.name],Object.keys(this.Hs).length}Ls(){for(const t of this.children)t.Ls();for(const t in this.Hs)this.router.Ds(this.Hs[t])}Ts(t){return t.Mt().then(()=>t.Ft())}Ns(t){0>this.children.indexOf(t)&&this.children.push(t)}removeChild(t){this.children.splice(this.children.indexOf(t),1)}Is(t=0,s=0){const i=[];for(const h in this.Hs){const e=this.Hs[h];(e.options.Xt||e.options.Qt&&!t)&&!s||i.push(e.as(t))}for(const s of this.children)i.push(...s.Is(t));return i.filter(value=>value&&value.length)}Us(){const t=[];for(const s in this.Hs)t.push(this.Hs[s]);for(const s of this.children)t.push(...s.Us());return t}context(t=0){if(!this.yt||!this.parent)return"";const s=[];this.viewport&&s.unshift(this.viewport.description(t));let i=this.parent.Bs(this.yt.parentElement);for(;i&&i._t===this.parent;)s.unshift(i.description(t)),i=this.Bs(i.yt.parentElement);return s.unshift(this.parent.context(t)),s.filter(value=>value&&value.length).join(this.router.kt.scope)}Rs(component){if("string"==typeof component){const t=this.router.vt.Bt(runtime.CustomElementResource.Rt(component));null!==t&&(component=t.zt(this.router.vt).Wt)}return component}Bs(t){let s,i=Number.MAX_SAFE_INTEGER;for(const h in this.Hs){const e=this.Hs[h].yt;let n=t,o=0;for(;n&&n!==e;)o++,n=n.parentElement;i>o&&(i=o,s=this.Hs[h])}return s}}class l{constructor(t){this.vt=t,this.Hs={},this.qs=[],this.Ws={},this.St=[],this.zs=[],this.W=0,this.Gs=0,this.Ks=[],this.Qs=null,this.Xs=(t=>{let s=t.href;if(s.startsWith("#")&&(s=s.substr(1)),!s.startsWith("/")){const i=this.Ys(t.anchor).context();i&&(s=`/${i}${this.kt.scope}${s}`)}this.Zs.tt(s)}),this.Zs=new h,this.Ms=new e}G(t){if(this.W)throw Error("Router has already been activated.");return this.W=1,this.options=Object.assign({B:t=>{this.Fs(t)}},t),this.kt=Object.assign({viewport:"@",Ct:"+",scope:"/",rs:"!",s:"=",add:"+",clear:"-",action:"."},this.options.kt),this.Ms.G({B:this.Xs}),this.Zs.G(this.options).catch(t=>{throw t})}X(){if(!this.W)throw Error("Router has not been activated.");this.Ms.X(),this.Zs.X()}Fs(t){this.Ks.push(t),this.xs().catch(t=>{throw t})}async xs(){if(null!==this.Qs||!this.Ks.length)return Promise.resolve();const t=this.Ks.shift();if(this.Qs=t,this.options.Es&&this.options.Es(t),t.V)return this.Qs=null,Promise.resolve();let i=0,h=0;(t.D||t.q)&&t.T&&(t.path=t.T,h=1);let e=t.path;this.options.ti&&!h&&(e=this.options.ti(e,this),Array.isArray(e)&&(e=this.si(e))),(e===this.kt.clear||e.startsWith(this.kt.clear+this.kt.add))&&(i=1,e.startsWith(this.kt.clear)&&(e=e.substr(1)));const n=s(t.I);t.s=n.s,t.es=n.list;const o=this.ii(e);if(!o&&!Object.keys(o).length&&!i)return this.Qs=null,Promise.resolve();this.hi();const r=i?this.ei.Us().filter(value=>null!==value.component):[],l=this.ei.Us().filter(value=>value.options.default&&null===value.component);let c=t.L,{ys:a,_s:u}=this.ei.cs(o),f=100;for(;(a.length||u||l.length)&&f--;){const s=[];for(const i of a){const{component,viewport:h}=i;h.Ut(component,t)&&s.push(h);const e=r.findIndex(value=>value===h);0>e||r.splice(e,1);const n=l.findIndex(value=>value===h);0>n||l.splice(n,1)}for(const i of r)i.Ut(this.kt.clear,t)&&s.push(i);let i;for(;i=l.shift();)i.Ut(i.options.default,t)&&s.push(i);!s.length&&this.Gs&&(this.Zs.cancel(),this.Gs=0);let h=await Promise.all(s.map(value=>value.Zt()));if(h.findIndex(value=>0==value)>=0)return this.Zs.cancel(),this.Qs=null,Promise.resolve();if((h=await Promise.all(s.map(value=>value.Mt()))).findIndex(value=>0==value)>=0)return this.Zs.cancel(),this.Qs=null,Promise.resolve();await Promise.all(s.map(value=>value.Ft())),s.reduce((t,s)=>!s.options.Xt||t,c)&&(c=1);const e=this.ei.cs();let n;for(a=[];n=this.zs.shift();)e.ys.find(value=>value.viewport===n.viewport)||a.push(n);a=[...a,...e.ys],u=e._s}this.ni(t),c||this.Zs.pop().catch(t=>{throw t}),this.Qs=null,this.Ks.length&&this.xs().catch(t=>{throw t})}Yt(t,component){this.Qs&&this.zs.push({viewport:t,component})}ii(t){const s={};t.startsWith("/")&&(t=t.substr(1));const i=t.split(this.kt.Ct);let h=0;for(;i.length;){const t=i.shift().split(this.kt.scope),parts=t.pop().split(this.kt.viewport),component=parts[0];t.push(parts.length?parts.join(this.kt.viewport):`?${h++}`);const name=t.join(this.kt.scope);component&&(s[name]=component)}return s}oi(t){return this.hi(),this.Ys(t)}Js(name,t,s){return this.oi(t).Js(name,t,s)}Ds(t){const s=t._t;s.Ds(t)||this.Ls(s)}Ls(t){if(t!==this.ei){t.Ls();const s=this.qs.indexOf(t);0>s||this.qs.splice(s,1)}}Y(t,s,i){"string"==typeof t&&this.Zs.Y(t,s,i)}replace(t,s,i){"string"==typeof t&&this.Zs.replace(t,s,i)}refresh(){this.Zs.refresh()}back(){this.Zs.back()}forward(){this.Zs.forward()}si(t){const s=[];for(const i of t){let t=i.component;if(i.viewport&&(t+=this.kt.viewport+i.viewport),i.s)for(const s in i.s)t+=this.kt.s+i.s[s];s.push(t)}return s.join(this.kt.Ct)}ri(t){const s=[],i=t.split(this.kt.Ct);for(const t of i){let component,i,h;const[e,n]=t.split(this.kt.viewport);void 0===n?[component,h]=e.split(this.kt.s):(component=e,[i,h]=n.split(this.kt.s));const o={component};i&&(o.viewport=i),h&&(o.s={id:h}),s.push(o)}return s}li(name,t){const s=this.ci(name);s&&(s.gt=[]),this.ai(name,t)}ai(name,t){let s=this.Ws[name];s||(s=this.Ws[name]=new o(this,name)),s.Nt(t)}ci(name){return this.Ws[name]}hi(){if(!this.ei){const t=this.vt.get(runtime.Aurelia).root().ui;this.ei=new Scope(this,t,null),this.qs.push(this.ei)}}Ys(t){let s,i=Number.MAX_SAFE_INTEGER;for(const h of this.qs){let e=t,n=0;for(;e&&e!==h.yt;)n++,e=e.parentElement;i>n&&(i=n,s=h)}return s}fi(t){let s=t.slice().sort((t,s)=>s.split(this.kt.scope).length-t.split(this.kt.scope).length),i=[];if((s=s.map(value=>`${this.kt.scope}${value}${this.kt.scope}`)).length)for(i.push(s.shift());s.length;){const t=s.shift();i.find(value=>-1===value.indexOf(t))&&i.push(t)}return(i=i.map(value=>value.substring(1,value.length-1))).sort((t,s)=>t.split(this.kt.scope).length-s.split(this.kt.scope).length),i}ni(t){this.St=this.ei.Is(1,1),this.St=this.fi(this.St);let s=this.ei.Is(),i=(s=this.fi(s)).join(this.kt.Ct);this.options.di&&(i=this.options.di(this.ri(i),this));let h=this.ei.Is(1);(h=this.fi(h)).unshift(this.kt.clear);const e=t.I&&t.I.length?`?${t.I}`:"";this.Zs.F(i+e,h.join(this.kt.Ct)+e,t)}}l.inject=[kernel.IContainer];class c{constructor(router,t){this.router=router,this.yt=t,this.name="default",this.scope=null,this.Kt=null,this.default=null,this.Qt=null,this.Xt=null,this.viewport=null}pi(){const t={scope:this.yt.hasAttribute("scope")};this.Kt&&this.Kt.length&&(t.Kt=this.Kt),this.default&&this.default.length&&(t.default=this.default),this.yt.hasAttribute("no-link")&&(t.Qt=1),this.yt.hasAttribute("no-history")&&(t.Xt=1),this.viewport=this.router.Js(this.name,this.yt,t)}mi(){this.router.Ds(this.viewport)}ds(t){this.viewport&&this.viewport.ds(t)}ms(t){this.viewport&&this.viewport.ms(t)}ws(t){this.viewport&&this.viewport.ws(t)}$s(t){this.viewport&&this.viewport.$s(t)}}c.inject=[l,runtime.INode],i([runtime.bindable],c.prototype,"name",void 0),i([runtime.bindable],c.prototype,"scope",void 0),i([runtime.bindable],c.prototype,"usedBy",void 0),i([runtime.bindable],c.prototype,"default",void 0),i([runtime.bindable],c.prototype,"noLink",void 0),i([runtime.bindable],c.prototype,"noHistory",void 0),runtime.CustomElementResource.vi({name:"au-viewport",template:'<template><div class="viewport-header"> Viewport: <b>${name}</b> </div></template>'},c),t.wi=class{constructor(router){this.router=router,this.name=null,this.gt=null,this.level=0}get bi(){const t=this.router.ci(this.name);return t?t.gt:[]}active(t){return"Active"}},i([runtime.bindable],t.wi.prototype,"name",void 0),i([runtime.bindable],t.wi.prototype,"routes",void 0),i([runtime.bindable],t.wi.prototype,"level",void 0),t.wi=i([kernel.inject(l,Element),runtime.customElement({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name}">\n    <au-nav routes.bind="navRoutes" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level}">\n    <li repeat.for="route of routes" class="${route.active} ${route.hasChildren}">\n      <a if.bind="route.link && route.link.length" href="${route.link}">${route.title}</a>\n      <a if.bind="!route.link || !route.link.length" click.delegate="route.toggleActive()" href="">${route.title}</a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" containerless></au-nav>\n    </li>\n  </ul>\n</template>'})],t.wi),t.$i=h,t.Pi=e,t.Oi=o,t.ji=l,t.Scope=Scope,t.ki=r,t.Si=c,Object.defineProperty(t,"Vi",{value:1})});
