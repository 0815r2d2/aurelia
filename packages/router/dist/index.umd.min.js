(function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports,require("@aurelia/runtime"),require("@aurelia/kernel")):"function"==typeof define&&define.amd?define(["exports","@aurelia/runtime","@aurelia/kernel"],i):i((t=t||self).router={},t.runtime,t.kernel)})(this,function(t,runtime,kernel){"use strict";function i(t){const i={},s=[];if(!t||!t.length)return{t:i,list:s};const h=t.replace("+"," ").split("&");for(const t of h){const h=t.split("="),e=decodeURIComponent(h.shift());if(!h.length){s.push(e);continue}const value=decodeURIComponent(h.shift());i[e]=value}return{t:i,list:s}}function s(t,i,s,h){var e,n,o=arguments.length,r=3>o?i:null===h?h=Object.getOwnPropertyDescriptor(i,s):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,s,h);else for(n=t.length-1;n>=0;n--)(e=t[n])&&(r=(3>o?e(r):o>3?e(i,s,r):e(i,s))||r);return o>3&&r&&Object.defineProperty(i,s,r),r}class h{constructor(){this.i=(()=>{if(null!==this.s){const t=this.s;return this.s=null,void t()}const t=this.h(),i=this.o(),s={};let h,e=this.l("HistoryEntry");if(this.u&&this.u.path===t){s.p=1;const t=this.v?this.m.index:this.history.length-this.g;h=this.m,this.m=this.u,this.m.index=t,this.v?(this.$=0,this.P[this.m.index]=this.m,this.O?(s.k=1,this.O=0):this.j?(s.S=1,this.j=0):s.C=1,this.v=0):(this.$=1,this.P=this.P.slice(0,this.m.index),this.P.push(this.m)),this.H({R:this.P,V:this.g,N:this.m})}else this.P=this.P||this.l("HistoryEntries")||[],this.g=this.g||this.l("HistoryOffset")||0,e||this.m?e?this.m?e.index>this.m.index?s.A=1:this.m.index>e.index&&(s._=1):s.S=1:s.p=1:(s.p=1,s.I=1,this.g=this.history.length),e||(this.P=this.P.slice(0,(e={path:t,J:null,index:this.history.length-this.g,q:i}).index),this.P.push(e),this.H({R:this.P,V:this.g,N:e})),this.$=this.m?e.index-this.m.index:0,h=this.m,this.m=e,this.O&&(s.k=1,this.O=0);this.u=null,this.D&&this.D--,this.L(this.m,s,h)}),this.location=window.location,this.history=window.history,this.m=null,this.P=null,this.g=null,this.T=null,this.u=null,this.options=null,this.F=0,this.$=null,this.D=null,this.O=0,this.v=0,this.j=0,this.s=null}U(t){if(this.F)throw Error("History has already been activated.");return this.F=1,this.options=Object.assign({},t),window.addEventListener("popstate",this.i),Promise.resolve().then(()=>{this.B(this.h(),1)})}M(){window.removeEventListener("popstate",this.i),this.F=0}W(t,i,s){this.u={path:t,J:null,title:i,data:s},this.B(t)}replace(t,i,s){this.v=1,this.u={path:t,J:null,title:i,data:s},this.B(t,1)}G(t,i,s){this.D=this.$+1,this.replace(t,i,s)}refresh(){this.m&&(this.j=1,this.replace(this.m.path,this.m.title,this.m.data))}back(){this.history.go(-1)}forward(){this.history.go(1)}cancel(){this.O=1;const t=this.$||this.D;t?this.history.go(-t):this.replace(this.T.path,this.T.title,this.T.data)}async pop(){let t,i=new Promise(t=>{this.s=t});this.history.go(-1),await i;const s=""+this.location;t=this.history.state,i=new Promise(t=>{this.s=t}),this.history.go(-1),await i,this.history.pushState(t,null,s)}H(t,value){const{pathname:i,search:s,hash:h}=this.location;let e=Object.assign({},this.history.state);"string"==typeof t?e[t]=JSON.parse(JSON.stringify(value)):e=Object.assign({},e,JSON.parse(JSON.stringify(t))),this.history.replaceState(e,null,`${i}${s}${h}`)}l(t){return Object.assign({},this.history.state)[t]}K(t){this.m.title=t,this.P[this.m.index]=this.m,this.H({R:this.P,N:this.m})}X(t,i,s){if(s.index!==this.m.index)return;const h=`#/${t}`,{pathname:e,search:n,hash:o}=this.location;if(h===o&&this.m.path===t&&this.m.J===i)return;this.m.path=t,this.m.J=i;const r=Object.assign({},this.history.state,{N:this.m,R:this.P});this.history.replaceState(r,null,`${e}${n}${h}`)}Y(t){t.startsWith("#")||(t=`#${t}`),this.location.hash=t}get Z(){return this.P?this.P.slice(0,this.m.index+1).map(value=>value.title):[]}h(){return this.location.hash.substring(1).split("?")[0]}B(t,i=0){if(this.m&&this.m.path===t&&!this.j)return;const{pathname:s,search:h}=this.location,e=`#${t}`;i?(this.T=this.m,this.history.replaceState({},null,`${s}${h}${e}`)):this.history.pushState({},null,`${s}${h}${e}`),this.i()}o(){const t=this.location.hash.substring(1).split("?");return t.shift(),t.length>0?t.shift():""}L(t,i,s){const h=Object.assign({},t,i);h.tt=s,this.options.L&&this.options.L(h)}}class e{constructor(){this.F=0,this.it=(t=>{const i=e.st(t);i.ht&&(t.preventDefault(),this.options.L(i))}),this.document=document}static st(t){const i={ht:0,href:null,anchor:null},s=e.et(t.target);if(!s||!e.nt(s))return i;if(s.hasAttribute("external"))return i;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return i;const h=s.getAttribute("href");return i.anchor=s,i.href=h,i.ht=1===t.which,i}static et(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}}static nt(t){const i=t.getAttribute("target");return!i||i===e.window.name||"_self"===i}U(t){if(this.F)throw Error("LinkHandler has already been activated.");this.F=1,this.options=Object.assign({},t),this.document.addEventListener("click",this.it,1)}M(){this.document.removeEventListener("click",this.it,1),this.F=0}}class n{constructor(t,i){this.active="",this.ot=t,Object.assign(this,{rt:i.rt,title:i.title,children:null,lt:i.lt,active:""}),this.link=this.ct(this.rt),this.at=i.ut?this.ct(i.ut):this.link,this.ft=this.ot.router.dt.get(runtime.IObserverLocator),this.pt=this.ft.vt(runtime.LifecycleFlags.wt,this.ot.router,"activeComponents"),this.pt.subscribe(this)}get bt(){return this.children&&this.children.length?"nav-has-children":""}yt(){this.active=this.link&&this.link.length?this.gt():"nav-active"===this.active?"nav-active":this.$t()?"nav-active-child":""}gt(){const t=this.at.split(this.ot.router.Pt.add),i=this.ot.router.Ot;for(const component of t)if(0>component.indexOf(this.ot.router.Pt.viewport)){if(0>i.findIndex(value=>value.replace(/\@[^=]*/,"")===component))return""}else if(0>i.indexOf(component))return"";return"nav-active"}kt(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}ct(t){return Array.isArray(t)?t.map(value=>this.jt(value)).join(this.ot.router.Pt.Et):this.jt(t)}$t(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.$t())return 1;return 0}jt(component){return component?"string"==typeof component?component:component.description?component.description.name:component.component?this.jt(component.component)+(component.viewport?`@${component.viewport}`:""):void 0:""}}class o{constructor(router,name){this.router=router,this.name=name,this.St=[]}Ct(t){for(const i of t)this.Ht(this.St,i)}Ht(t,i){const s=new n(this,i);if(t.push(s),i.children){s.children=[];for(const t of i.children)this.Ht(s.children,t)}}}class r{constructor(router,name,t,i,s,h){this.router=router,this.name=name,this.Rt=t,this.Vt=i,this.scope=s,this.options=h,this.clear=0,this.content=null,this.Nt=null,this.t=null,this.xt=null,this.At=null,this._t=null,this.component=null,this.It=null,this.Jt=null}qt(t,i){let s;if(this.clear=0,"string"==typeof t)if(t===this.router.Pt.clear)this.clear=1,t=null;else{const i=t.split(this.router.Pt.t);t=i.shift(),s=i.length?i.join(this.router.Pt.t):null;const h=this.router.dt.Dt(runtime.CustomElementResource.Lt(t));null!==h&&(t=h.Ft(this.router.dt).Tt)}return this.Nt=t,this._t=i,this.xt=s,this.content!==t||this.t!==s||!this.At||this.At.q!==i.q||i.S?1:0}Ut(t,i){this.scope&&this.scope.parent&&!this.scope.viewport&&(this.scope.viewport=this),this.scope&&!this.scope.Rt&&(this.scope.Rt=t),this.Rt||(this.Rt=t,i&&i.Bt&&(this.options.Bt=i.Bt),i&&i.default&&(this.options.default=i.default),i&&i.Mt&&(this.options.Mt=i.Mt),i&&i.Wt&&(this.options.Wt=i.Wt),this.Jt&&this.Jt()),this.component||this.It||!this.options.default||this.router.zt(this,this.options.default)}Gt(){if(!this.component)return Promise.resolve(1);const component=this.component;if(!component.Gt)return Promise.resolve(1);const t=component.Gt(this.At,this._t);return"boolean"==typeof t?Promise.resolve(t):t}Kt(){if(this.clear)return Promise.resolve(1);if(!this.Nt)return Promise.resolve(0);if(this.loadComponent(this.Nt),!this.It)return Promise.resolve(0);const component=this.It;if(!component.Kt)return Promise.resolve(1);const t=component.Kt(this._t,this.At);return"boolean"==typeof t?Promise.resolve(t):t}async Qt(){if(this.component&&(this.component.Xt&&await this.component.Xt(this.At,this._t),this.It||this.Yt(this.component)),this.It){if(this.It.Zt){const t=(function(t,s,h){const e=i(s),n=i(t),o=Object.assign({},e.t,n.t),r=[...e.list,...n.list];if(r.length&&h&&h.length)for(const t of h)o[t]=r.shift();let l;return r.length&&Object.keys(o).length&&(o["ti"]=r.splice(0,r.length)),{t:o,list:r,ii:l=r.length?r:o}})(this.xt,this._t.q,this.Nt.t);this._t.t=t.t,this._t.si=t.list,await this.It.Zt(t.ii,this._t,this.At)}if(!this.Rt&&(await this.hi(),!this.Rt))return Promise.resolve(0);this.component&&this.Yt(this.component),this.ei(this.It),this.content=this.Nt,this.t=this.xt,this.At=this._t,this.component=this.It}return this.clear&&(this.content=this.t=this.component=null,this.At=this._t),this.Nt=this.xt=this._t=this.It=null,Promise.resolve(1)}description(t=0){if(this.content){const component=this.content.description.name,i=this.scope?this.router.Pt.ni:"",s=this.t?this.router.Pt.t+this.t:"";if(t||i.length||this.options.oi)return`${component}${this.router.Pt.viewport}${this.name}${i}${s}`;const h={};return h[component]=component,this.Vt.ri(h)?`${component}${s}`:`${component}${this.router.Pt.viewport}${this.name}${i}${s}`}}li(t=0){return[this.Vt.context(t),this.description(t)].filter(value=>value&&value.length).join(this.router.Pt.scope)}ci(component){let t=this.options.Bt||[];return"string"==typeof t&&(t=t.split(",")),t.indexOf(component)>=0}ai(component){if("-"===component||null===component)return 1;let t=this.options.Bt;return t&&t.length?("string"==typeof t&&(t=t.split(",")),0>t.indexOf(component)?t.filter(value=>value.indexOf("*")>=0).length?1:0:1):1}ui(t){this.component&&this.component.fi(t)}di(t){this.component&&this.component.pi(t)}vi(t){this.component&&this.component.mi(t)}wi(t){this.component&&this.component.bi(t)}loadComponent(component){this.It=this.router.dt.get(runtime.CustomElementResource.Lt(component.description.name))}ei(component){const host=this.Rt,t=this.router.dt,dom=t.get(runtime.IDOM),i=t.get(runtime.IProjectorLocator),s=t.get(runtime.IRenderingEngine);component.yi(runtime.LifecycleFlags.wt,dom,i,s,host,null),component.fi(runtime.LifecycleFlags.gi|runtime.LifecycleFlags.$i,null),component.pi(runtime.LifecycleFlags.gi)}Yt(component){component.mi(runtime.LifecycleFlags.Pi),component.bi(runtime.LifecycleFlags.Pi|runtime.LifecycleFlags.Oi)}async hi(){return this.Rt?Promise.resolve():new Promise(t=>{this.Jt=t})}}class Scope{constructor(router,t,i){this.router=router,this.Rt=t,this.parent=i,this.viewport=null,this.children=[],this.ki={},this.ji={},this.Ei=null,this.parent&&this.parent.Si(this)}ri(t){const i=[];let s=0;t&&(this.Ei={},this.ji={}),this.Ei=Object.assign({},this.ki,this.Ei);for(const i in t){const parts=i.split(this.router.Pt.scope),t=parts.shift();this.ji[t]||(this.ji[t]=[]),this.ji[t].push(parts)}for(const h in this.ji){const e=h.split(this.router.Pt.t),component=e.shift().split(this.router.Pt.viewport).shift(),n=component+(e.length?this.router.Pt.t+e.join(this.router.Pt.t):"");for(const name in this.Ei){const e=this.Ei[name];if(e&&e.ci(component)){const o=this.Ci(t,this.ji,h,n,e);i.push(...o.Hi),s=s||o.Ri,this.Ei[name]=null,delete this.ji[h];break}}}for(const h in this.ji){const e=h.split(this.router.Pt.t),parts=e.shift().split(this.router.Pt.viewport),component=parts.shift(),n=component+(e.length?this.router.Pt.t+e.join(this.router.Pt.t):"");let name=parts.shift();if(!name||!name.length||name.startsWith("?"))continue;let o=0;name.endsWith(this.router.Pt.ni)&&(o=1,name=name.substring(0,name.length-1)),this.ki[name]||(this.Vi(name,null,{scope:o,oi:1}),this.Ei[name]=this.ki[name]);const r=this.Ei[name];if(r&&r.ai(component)){const e=this.Ci(t,this.ji,h,n,r);i.push(...e.Hi),s=s||e.Ri,this.Ei[name]=null,delete this.ji[h]}}for(const h in this.ji){const e=h.split(this.router.Pt.t),component=e.shift().split(this.router.Pt.viewport).shift(),n=component+(e.length?this.router.Pt.t+e.join(this.router.Pt.t):""),o=[];for(const name in this.Ei){const t=this.Ei[name];t&&t.ai(component)&&o.push(t)}if(1===o.length){const e=o.shift(),r=this.Ci(t,this.ji,h,n,e);i.push(...r.Hi),s=s||r.Ri,this.Ei[e.name]=null,delete this.ji[h];break}}if(s=s||Object.keys(this.ji).length>0,!t)for(const t of this.children){const h=t.ri();i.push(...h.Hi),s=s||h.Ri}return{Hi:i,Ri:s}}Ci(t,i,s,component,h){const e=[{component,viewport:h}];let n=0;if(i[s].length){const o=h.scope||h.Vt;for(const h of i[s])if(h.length){const i=h.join(this.router.Pt.scope),r={};r[i]=t[s+this.router.Pt.scope+i];const l=o.ri(r);e.push(...l.Hi),n=n||l.Ri}}return{Hi:e,Ri:n}}Vi(name,t,i){let s=this.ki[name];if(!s){let h;i.scope&&(h=new Scope(this.router,t,this),this.router.Ni.push(h)),s=this.ki[name]=new r(this.router,name,t,this,h,i)}return t&&s.Ut(t,i),s}xi(t){return t.scope&&this.router.Ai(t.scope),delete this.ki[t.name],Object.keys(this.ki).length}Ai(){for(const t of this.children)t.Ai();for(const t in this.ki)this.router.xi(this.ki[t])}_i(t){return t.Kt().then(()=>t.Qt())}Si(t){0>this.children.indexOf(t)&&this.children.push(t)}removeChild(t){this.children.splice(this.children.indexOf(t),1)}Ii(t=0,i=0){const s=[];for(const h in this.ki){const e=this.ki[h];(e.options.Wt||e.options.Mt&&!t)&&!i||s.push(e.li(t))}for(const i of this.children)s.push(...i.Ii(t));return s.filter(value=>value&&value.length)}Ji(){const t=[];for(const i in this.ki)t.push(this.ki[i]);for(const i of this.children)t.push(...i.Ji());return t}context(t=0){if(!this.Rt||!this.parent)return"";const i=[];this.viewport&&i.unshift(this.viewport.description(t));let s=this.parent.qi(this.Rt.parentElement);for(;s&&s.Vt===this.parent;)i.unshift(s.description(t)),s=this.qi(s.Rt.parentElement);return i.unshift(this.parent.context(t)),i.filter(value=>value&&value.length).join(this.router.Pt.scope)}Di(component){if("string"==typeof component){const t=this.router.dt.Dt(runtime.CustomElementResource.Lt(component));null!==t&&(component=t.Ft(this.router.dt).Tt)}return component}qi(t){let i,s=Number.MAX_SAFE_INTEGER;for(const h in this.ki){const e=this.ki[h].Rt;let n=t,o=0;for(;n&&n!==e;)o++,n=n.parentElement;s>o&&(s=o,i=this.ki[h])}return i}}class l{constructor(t){this.dt=t,this.ki={},this.Ni=[],this.Li={},this.Ot=[],this.Ti=[],this.F=0,this.Fi=0,this.Ui=[],this.Bi=null,this.Mi=(t=>{let i=t.href;if(i.startsWith("#")&&(i=i.substring(1)),!i.startsWith("/")){const s=this.Wi(t.anchor).context();s&&(i=`/${s}${this.Pt.scope}${i}`)}this.zi.Y(i)}),this.zi=new h,this.Gi=new e}U(t){if(this.F)throw Error("Router has already been activated.");return this.F=1,this.options=Object.assign({L:t=>{this.Ki(t)}},t),this.Pt=Object.assign({viewport:"@",Et:"+",scope:"/",ni:"!",t:"=",add:"+",clear:"-",action:"."},this.options.Pt),this.Gi.U({L:this.Mi}),this.zi.U(this.options).catch(t=>{throw t})}M(){if(!this.F)throw Error("Router has not been activated.");this.Gi.M(),this.zi.M()}Ki(t){this.Ui.push(t),this.Qi().catch(t=>{throw t})}async Qi(){if(null!==this.Bi||!this.Ui.length)return Promise.resolve();const t=this.Ui.shift();if(this.Bi=t,this.options.Xi&&this.options.Xi(t),t.k)return this.Bi=null,Promise.resolve();let s=0,h=0;(t._||t.A)&&t.J&&(t.path=t.J,h=1);let e=t.path;this.options.Yi&&!h&&(e=this.options.Yi(e,this),Array.isArray(e)&&(e=this.Zi(e))),(e===this.Pt.clear||e.startsWith(this.Pt.clear+this.Pt.add))&&(s=1,e.startsWith(this.Pt.clear)&&(e=e.substring(1)));const n=i(t.q);t.t=n.t,t.si=n.list;const o=this.ts(e);if(!o&&!Object.keys(o).length&&!s)return this.Bi=null,Promise.resolve();this.ss();const r=s?this.hs.Ji().filter(value=>null!==value.component):[],l=this.hs.Ji().filter(value=>value.options.default&&null===value.component);let c=t.I,{Hi:a,Ri:u}=this.hs.ri(o),f=100;for(;(a.length||u||l.length)&&f--;){const i=[];for(const s of a){const{component,viewport:h}=s;h.qt(component,t)&&i.push(h);const e=r.findIndex(value=>value===h);0>e||r.splice(e,1);const n=l.findIndex(value=>value===h);0>n||l.splice(n,1)}for(const s of r)s.qt(this.Pt.clear,t)&&i.push(s);let s;for(;s=l.shift();)s.qt(s.options.default,t)&&i.push(s);!i.length&&this.Fi&&(this.zi.cancel(),this.Fi=0);let h=await Promise.all(i.map(value=>value.Gt()));if(h.findIndex(value=>0==value)>=0)return this.zi.cancel(),this.Bi=null,Promise.resolve();if((h=await Promise.all(i.map(value=>value.Kt()))).findIndex(value=>0==value)>=0)return this.zi.cancel(),this.Bi=null,Promise.resolve();await Promise.all(i.map(value=>value.Qt())),i.reduce((t,i)=>!i.options.Wt||t,c)&&(c=1);const e=this.hs.ri();let n;for(a=[];n=this.Ti.shift();)e.Hi.find(value=>value.viewport===n.viewport)||a.push(n);a=[...a,...e.Hi],u=e.Ri}this.es(t),c||this.zi.pop().catch(t=>{throw t}),this.Bi=null,this.Ui.length&&this.Qi().catch(t=>{throw t})}zt(t,component){this.Bi&&this.Ti.push({viewport:t,component})}ts(t){const i={};t.startsWith("/")&&(t=t.substring(1));const s=t.split(this.Pt.Et);let h=0;for(;s.length;){const t=s.shift().split(this.Pt.scope),parts=t.pop().split(this.Pt.viewport),component=parts[0];t.push(parts.length?parts.join(this.Pt.viewport):`?${h++}`);const name=t.join(this.Pt.scope);component&&(i[name]=component)}return i}ns(t){return this.ss(),this.Wi(t)}Vi(name,t,i){return this.ns(t).Vi(name,t,i)}xi(t){const i=t.Vt;i.xi(t)||this.Ai(i)}Ai(t){if(t!==this.hs){t.Ai();const i=this.Ni.indexOf(t);0>i||this.Ni.splice(i,1)}}W(t,i,s){"string"==typeof t&&this.zi.W(t,i,s)}replace(t,i,s){"string"==typeof t&&this.zi.replace(t,i,s)}refresh(){this.zi.refresh()}back(){this.zi.back()}forward(){this.zi.forward()}Zi(t){const i=[];for(const s of t){let t=s.component;if(s.viewport&&(t+=this.Pt.viewport+s.viewport),s.t)for(const i in s.t)t+=this.Pt.t+s.t[i];i.push(t)}return i.join(this.Pt.Et)}os(t){const i=[],s=t.split(this.Pt.Et);for(const t of s){let component,s,h;const[e,n]=t.split(this.Pt.viewport);void 0===n?[component,h]=e.split(this.Pt.t):(component=e,[s,h]=n.split(this.Pt.t));const o={component};s&&(o.viewport=s),h&&(o.t={id:h}),i.push(o)}return i}rs(name,t){const i=this.ls(name);i&&(i.St=[]),this.cs(name,t)}cs(name,t){let i=this.Li[name];i||(i=this.Li[name]=new o(this,name)),i.Ct(t)}ls(name){return this.Li[name]}ss(){if(!this.hs){const t=this.dt.get(runtime.Aurelia).root().as;this.hs=new Scope(this,t,null),this.Ni.push(this.hs)}}Wi(t){let i,s=Number.MAX_SAFE_INTEGER;for(const h of this.Ni){let e=t,n=0;for(;e&&e!==h.Rt;)n++,e=e.parentElement;s>n&&(s=n,i=h)}return i}us(t){let i=t.slice().sort((t,i)=>i.split(this.Pt.scope).length-t.split(this.Pt.scope).length),s=[];if((i=i.map(value=>`${this.Pt.scope}${value}${this.Pt.scope}`)).length)for(s.push(i.shift());i.length;){const t=i.shift();s.find(value=>-1===value.indexOf(t))&&s.push(t)}return(s=s.map(value=>value.substring(1,value.length-1))).sort((t,i)=>t.split(this.Pt.scope).length-i.split(this.Pt.scope).length),s}es(t){this.Ot=this.hs.Ii(1,1),this.Ot=this.us(this.Ot);let i=this.hs.Ii(),s=(i=this.us(i)).join(this.Pt.Et);this.options.fs&&(s=this.options.fs(this.os(s),this));let h=this.hs.Ii(1);(h=this.us(h)).unshift(this.Pt.clear);const e=t.q&&t.q.length?`?${t.q}`:"";this.zi.X(s+e,h.join(this.Pt.Et)+e,t)}}l.inject=[kernel.IContainer];class c{constructor(router,t){this.router=router,this.Rt=t,this.name="default",this.scope=null,this.Bt=null,this.default=null,this.Mt=null,this.Wt=null,this.viewport=null}ds(){const t={scope:this.Rt.hasAttribute("scope")};this.Bt&&this.Bt.length&&(t.Bt=this.Bt),this.default&&this.default.length&&(t.default=this.default),this.Rt.hasAttribute("no-link")&&(t.Mt=1),this.Rt.hasAttribute("no-history")&&(t.Wt=1),this.viewport=this.router.Vi(this.name,this.Rt,t)}ps(){this.router.xi(this.viewport)}ui(t){this.viewport&&this.viewport.ui(t)}di(t){this.viewport&&this.viewport.di(t)}vi(t){this.viewport&&this.viewport.vi(t)}wi(t){this.viewport&&this.viewport.wi(t)}}c.inject=[l,runtime.INode],s([runtime.bindable],c.prototype,"name",void 0),s([runtime.bindable],c.prototype,"scope",void 0),s([runtime.bindable],c.prototype,"usedBy",void 0),s([runtime.bindable],c.prototype,"default",void 0),s([runtime.bindable],c.prototype,"noLink",void 0),s([runtime.bindable],c.prototype,"noHistory",void 0),runtime.CustomElementResource.vs({name:"au-viewport",template:'<template><div class="viewport-header"> Viewport: <b>${name}</b> </div></template>'},c),t.ms=class{constructor(router){this.router=router,this.name=null,this.St=null,this.level=0}get ws(){const t=this.router.ls(this.name);return t?t.St:[]}active(t){return"Active"}},s([runtime.bindable],t.ms.prototype,"name",void 0),s([runtime.bindable],t.ms.prototype,"routes",void 0),s([runtime.bindable],t.ms.prototype,"level",void 0),t.ms=s([kernel.inject(l,Element),runtime.customElement({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name}">\n    <au-nav routes.bind="navRoutes" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level}">\n    <li repeat.for="route of routes" class="${route.active} ${route.hasChildren}">\n      <a if.bind="route.link && route.link.length" href="${route.link}">${route.title}</a>\n      <a if.bind="!route.link || !route.link.length" click.delegate="route.toggleActive()" href="">${route.title}</a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" containerless></au-nav>\n    </li>\n  </ul>\n</template>'})],t.ms),t.bs=h,t.ys=e,t.gs=o,t.$s=l,t.Scope=Scope,t.Ps=r,t.Os=c,Object.defineProperty(t,"ks",{value:1})});
