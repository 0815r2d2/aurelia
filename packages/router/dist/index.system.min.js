System.register("router",["@aurelia/runtime","@aurelia/kernel"],function(t){"use strict";var IObserverLocator,LifecycleFlags,CustomElementResource,Aurelia,IDOM,createRenderContext,INode,IRenderingEngine,bindable,customElement,IContainer,inject;return{t:[function(t){IObserverLocator=t.IObserverLocator,LifecycleFlags=t.LifecycleFlags,CustomElementResource=t.CustomElementResource,Aurelia=t.Aurelia,IDOM=t.IDOM,createRenderContext=t.createRenderContext,INode=t.INode,IRenderingEngine=t.IRenderingEngine,bindable=t.bindable,customElement=t.customElement},function(t){IContainer=t.IContainer,inject=t.inject}],i(){function i(t){const i={},s=[];if(!t||!t.length)return{s:i,list:s};const h=t.replace("+"," ").split("&");for(const t of h){const h=t.split("="),e=decodeURIComponent(h.shift());if(!h.length){s.push(e);continue}const value=decodeURIComponent(h.shift());i[e]=value}return{s:i,list:s}}function s(t,i,s,h){var e,n,r=arguments.length,o=3>r?i:null===h?h=Object.getOwnPropertyDescriptor(i,s):h;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,h);else for(n=t.length-1;n>=0;n--)(e=t[n])&&(o=(3>r?e(o):r>3?e(i,s,o):e(i,s))||o);return r>3&&o&&Object.defineProperty(i,s,o),o}class h{constructor(){this.h=(()=>{if(null!==this.o){const t=this.o;return this.o=null,void t()}const t=this.l(),i=this.u(),s={};let h,e=this.p("HistoryEntry");if(this.v&&this.v.path===t){s.m=1;const t=this.g?this.$.index:this.history.length-this.O;h=this.$,this.$=this.v,this.$.index=t,this.g?(this.C=0,this.k[this.$.index]=this.$,this.P?(s.S=1,this.P=0):this.j?(s.H=1,this.j=0):s.R=1,this.g=0):(this.C=1,this.k=this.k.slice(0,this.$.index),this.k.push(this.$)),this.V({N:this.k,A:this.O,I:this.$})}else this.k=this.k||this.p("HistoryEntries")||[],this.O=this.O||this.p("HistoryOffset")||0,e||this.$?e?this.$?e.index>this.$.index?s.L=1:this.$.index>e.index&&(s.J=1):s.H=1:s.m=1:(s.m=1,s.T=1,this.O=this.history.length),e||(this.k=this.k.slice(0,(e={path:t,D:null,index:this.history.length-this.O,F:i}).index),this.k.push(e),this.V({N:this.k,A:this.O,I:e})),this.C=this.$?e.index-this.$.index:0,h=this.$,this.$=e,this.P&&(s.S=1,this.P=0);this.v=null,this._&&this._--,this.B(this.$,s,h)}),this.location=window.location,this.history=window.history,this.$=null,this.k=null,this.O=null,this.U=null,this.v=null,this.options=null,this.q=0,this.C=null,this._=null,this.P=0,this.g=0,this.j=0,this.o=null}W(t){if(this.q)throw Error("History has already been activated.");return this.q=1,this.options=Object.assign({},t),window.addEventListener("popstate",this.h),Promise.resolve().then(()=>{this.G(this.l(),1)})}K(){window.removeEventListener("popstate",this.h),this.q=0}M(t,i,s){this.v={path:t,D:null,title:i,data:s},this.G(t)}replace(t,i,s){this.g=1,this.v={path:t,D:null,title:i,data:s},this.G(t,1)}X(t,i,s){this._=this.C+1,this.replace(t,i,s)}refresh(){this.$&&(this.j=1,this.replace(this.$.path,this.$.title,this.$.data))}back(){this.history.go(-1)}forward(){this.history.go(1)}cancel(){this.P=1;const t=this.C||this._;t?this.history.go(-t):this.replace(this.U.path,this.U.title,this.U.data)}async pop(){let t,i=new Promise(t=>{this.o=t});this.history.go(-1),await i;const s=""+this.location;t=this.history.state,i=new Promise(t=>{this.o=t}),this.history.go(-1),await i,this.history.pushState(t,null,s)}V(t,value){const{pathname:i,search:s,hash:h}=this.location;let e=Object.assign({},this.history.state);"string"==typeof t?e[t]=JSON.parse(JSON.stringify(value)):e=Object.assign({},e,JSON.parse(JSON.stringify(t))),this.history.replaceState(e,null,`${i}${s}${h}`)}p(t){return Object.assign({},this.history.state)[t]}Y(t){this.$.title=t,this.k[this.$.index]=this.$,this.V({N:this.k,I:this.$})}Z(t,i,s){if(s.index!==this.$.index)return;const h=`#/${t}`,{pathname:e,search:n,hash:r}=this.location;if(h===r&&this.$.path===t&&this.$.D===i)return;this.$.path=t,this.$.D=i;const o=Object.assign({},this.history.state,{I:this.$,N:this.k});this.history.replaceState(o,null,`${e}${n}${h}`)}tt(t){t.startsWith("#")||(t=`#${t}`),this.location.hash=t}get it(){return this.k?this.k.slice(0,this.$.index+1).map(value=>value.title):[]}l(){return this.location.hash.substring(1).split("?")[0]}G(t,i=0){if(this.$&&this.$.path===t&&!this.j)return;const{pathname:s,search:h}=this.location,e=`#${t}`;i?(this.U=this.$,this.history.replaceState({},null,`${s}${h}${e}`)):this.history.pushState({},null,`${s}${h}${e}`),this.h()}u(){const t=this.location.hash.substring(1).split("?");return t.shift(),t.length>0?t.shift():""}B(t,i,s){const h=Object.assign({},t,i);h.st=s,this.options.B&&this.options.B(h)}}t("HistoryBrowser",h);class e{constructor(){this.q=0,this.ht=(t=>{const i=e.et(t);i.nt&&(t.preventDefault(),this.options.B(i))}),this.document=document}static et(t){const i={nt:0,href:null,anchor:null},s=e.rt(t.target);if(!s||!e.ot(s))return i;if(s.hasAttribute("external"))return i;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return i;const h=s.getAttribute("href");return i.anchor=s,i.href=h,i.nt=1===t.which,i}static rt(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}}static ot(t){const i=t.getAttribute("target");return!i||i===e.window.name||"_self"===i}W(t){if(this.q)throw Error("LinkHandler has already been activated.");this.q=1,this.options=Object.assign({},t),this.document.addEventListener("click",this.ht,1)}K(){this.document.removeEventListener("click",this.ht,1),this.q=0}}t("LinkHandler",e);class n{constructor(t,i){this.active="",this.lt=t,Object.assign(this,{ct:i.ct,title:i.title,children:null,at:i.at,active:""}),this.link=this.ut(this.ct),this.ft=i.pt?this.ut(i.pt):this.link,this.dt=this.lt.router.vt.get(IObserverLocator),this.wt=this.dt.yt(LifecycleFlags.bt,this.lt.router,"activeComponents"),this.wt.subscribe(this)}get gt(){return this.children&&this.children.length?"nav-has-children":""}$t(){this.active=this.link&&this.link.length?this.Ot():"nav-active"===this.active?"nav-active":this.Ct()?"nav-active-child":""}Ot(){const t=this.ft.split(this.lt.router.Et.add),i=this.lt.router.kt;for(const component of t)if(0>component.indexOf(this.lt.router.Et.viewport)){if(0>i.findIndex(value=>value.replace(/\@[^=]*/,"")===component))return""}else if(0>i.indexOf(component))return"";return"nav-active"}Pt(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}ut(t){return Array.isArray(t)?t.map(value=>this.St(value)).join(this.lt.router.Et.jt):this.St(t)}Ct(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.Ct())return 1;return 0}St(component){return component?"string"==typeof component?component:component.description?component.description.name:component.component?this.St(component.component)+(component.viewport?`@${component.viewport}`:""):void 0:""}}class r{constructor(router,name){this.router=router,this.name=name,this.Ht=[]}Rt(t){for(const i of t)this.Vt(this.Ht,i)}Vt(t,i){const s=new n(this,i);if(t.push(s),i.children){s.children=[];for(const t of i.children)this.Vt(s.children,t)}}}t("Nav",r);class o{constructor(router,name,t,i,s,h,e){this.router=router,this.name=name,this.Nt=t,this.context=i,this.At=s,this.scope=h,this.options=e,this.clear=0,this.content=null,this.xt=null,this.s=null,this.It=null,this.Lt=null,this.Jt=null,this.component=null,this.Tt=null,this.Dt=null,this.Ft=null,this._t=0}zt(t,i){let s;if(this.clear=0,"string"==typeof t)if(t===this.router.Et.clear)this.clear=1,t=null;else{const i=t.split(this.router.Et.s);t=i.shift(),s=i.length?i.join(this.router.Et.s):null,this.context&&(t=this.Bt(t))}return this.xt=t,this.Jt=i,this.It=s,this._t=0,"string"==typeof t&&this.Ut(this.content)!==t||"string"!=typeof t&&this.content!==t||this.s!==s||!this.Lt||this.Lt.F!==i.F||i.H?1:0}qt(t,i,s){this.scope&&this.scope.parent&&!this.scope.viewport&&(this.scope.viewport=this),this.scope&&!this.scope.Nt&&(this.scope.Nt=t),this.Nt!==t&&(this.Ft=Object.assign({},this),this.Wt(),this.Nt=t,s&&s.Gt&&(this.options.Gt=s.Gt),s&&s.default&&(this.options.default=s.default),s&&s.Kt&&(this.options.Kt=s.Kt),s&&s.Mt&&(this.options.Mt=s.Mt),this.Dt&&this.Dt()),this.context!==i&&(this.context=i),this.component||this.Tt||!this.options.default||this.router.Qt(this,this.options.default)}remove(t,i){return this.Nt===t&&this.context===i}async Xt(){if(!this.component)return 1;const component=this.component;return component.Xt?component.Xt(this.Lt,this.Jt):1}async Yt(){if(this.clear)return 1;if(!this.xt)return 0;if(await this.loadComponent(this.xt),!this.Tt)return 0;const component=this.Tt;return component.Yt?component.Yt(this.Jt,this.Lt):1}async Zt(){if(this.clear)return 1;if(!this.Tt)return 0;if(this.Tt.Zt){const t=(function(t,s,h){const e=i(s),n=i(t),r=Object.assign({},e.s,n.s),o=[...e.list,...n.list];if(o.length&&h&&h.length)for(const t of h)r[t]=o.shift();let l;return o.length&&Object.keys(r).length&&(r["ti"]=o.splice(0,o.length)),{ii:r,si:o,hi:l=o.length?o:r}})(this.It,this.Jt.F,this.xt.s);this.Jt.s=t.ii,this.Jt.si=t.si,await this.Tt.Zt(t.hi,this.Jt,this.Lt),this._t=0}return this.ei(this.Tt),1}async ni(){return this.component&&(this.component.ri&&await this.component.ri(this.Lt,this.Jt),this.Tt||(this.oi(this.component),this.li(this.component),this.ci(this.component))),this.Tt&&(this.component&&(this.oi(this.component),this.li(this.component),this.ci(this.component)),this.addComponent(this.Tt),this.content=this.xt,this.s=this.It,this.Lt=this.Jt,this.component=this.Tt),this.clear&&(this.content=this.s=this.component=null,this.Lt=this.Jt),this.xt=this.It=this.Jt=this.Tt=null,1}ai(){this.Ft=null}async ui(){this._t&&await this.Tt.ri(),this.Ft&&Object.assign(this,this.Ft)}description(t=0){if(this.content){const component=this.Ut(this.content),i=this.scope?this.router.Et.fi:"",s=this.s?this.router.Et.s+this.s:"";if(t||i.length||this.options.pi)return`${component}${this.router.Et.viewport}${this.name}${i}${s}`;const h={};return h[component]=component,this.At.di(h)?`${component}${s}`:`${component}${this.router.Et.viewport}${this.name}${i}${s}`}}vi(t=0){return[this.At.mi(t),this.description(t)].filter(value=>value&&value.length).join(this.router.Et.scope)}wi(component){let t=this.options.Gt||[];return"string"==typeof t&&(t=t.split(",")),t.indexOf(component)>=0}yi(component){if("-"===component||null===component)return 1;let t=this.options.Gt;return t&&t.length?("string"==typeof t&&(t=t.split(",")),0>t.indexOf(component)?t.filter(value=>value.indexOf("*")>=0).length?1:0:1):1}bi(t){this.component&&this.component.gi(t)}$i(t){this.component&&this.component.Oi(t)}Ci(t){this.component&&this.component.Ei(t)}ki(t){this.component&&this.component.Pi(t)}Ut(component){return null===component?null:"string"==typeof component?component:component.description.name}Bt(component){if(null===component)return null;if("string"!=typeof component)return component;{const t=this.context||this.router.vt,i=t.get(IContainer).Si(CustomElementResource.ji(component));return null!==i?i.Ri(t.get(IContainer)).Hi:null}}Vi(component){if(null===component)return null;component=this.Ut(component);const t=this.context||this.router.vt;return"string"!=typeof component?t.get(IContainer).get(component):t.get(IContainer).get(CustomElementResource.ji(component))}Wt(){this.options={},this.content=null,this.s=null,this.Lt=null,this.component=null}async loadComponent(component){await this.Ni(),this.Tt=this.Vi(component),this.Tt.Ai(LifecycleFlags.bt,this.context||this.router.vt,this.Nt)}ci(component){}ei(component){component.gi(LifecycleFlags.xi|LifecycleFlags.Ii,null)}li(component){component.Pi(LifecycleFlags.Li|LifecycleFlags.Ji)}addComponent(component){component.Oi(LifecycleFlags.xi)}oi(component){component.Ei(LifecycleFlags.Li)}async Ni(){return this.Nt?Promise.resolve():new Promise(t=>{this.Dt=t})}}t("Viewport",o);class Scope{constructor(router,t,i,s){this.router=router,this.Nt=t,this.context=i,this.parent=s,this.viewport=null,this.children=[],this.Ti={},this.Di={},this.Fi=null,this.parent&&this.parent._i(this)}di(t){const i=[];let s=0;t&&(this.Fi={},this.Di={}),this.Fi=Object.assign({},this.Ti,this.Fi);for(const i in t){const parts=i.split(this.router.Et.scope),t=parts.shift();this.Di[t]||(this.Di[t]=[]),this.Di[t].push(parts)}for(const h in this.Di){const e=h.split(this.router.Et.s),component=e.shift().split(this.router.Et.viewport).shift(),n=component+(e.length?this.router.Et.s+e.join(this.router.Et.s):"");for(const name in this.Fi){const e=this.Fi[name];if(e&&e.wi(component)){const r=this.zi(t,this.Di,h,n,e);i.push(...r.Bi),s=s||r.Ui,this.Fi[name]=null,Reflect.deleteProperty(this.Di,h);break}}}for(const h in this.Di){const e=h.split(this.router.Et.s),parts=e.shift().split(this.router.Et.viewport),component=parts.shift(),n=component+(e.length?this.router.Et.s+e.join(this.router.Et.s):"");let name=parts.shift();if(!name||!name.length||name.startsWith("?"))continue;let r=0;name.endsWith(this.router.Et.fi)&&(r=1,name=name.substring(0,name.length-1)),this.Ti[name]||(this.qi(name,null,null,{scope:r,pi:1}),this.Fi[name]=this.Ti[name]);const o=this.Fi[name];if(o&&o.yi(component)){const e=this.zi(t,this.Di,h,n,o);i.push(...e.Bi),s=s||e.Ui,this.Fi[name]=null,Reflect.deleteProperty(this.Di,h)}}for(const h in this.Di){const e=h.split(this.router.Et.s),component=e.shift().split(this.router.Et.viewport).shift(),n=component+(e.length?this.router.Et.s+e.join(this.router.Et.s):""),r=[];for(const name in this.Fi){const t=this.Fi[name];t&&t.yi(component)&&r.push(t)}if(1===r.length){const e=r.shift(),o=this.zi(t,this.Di,h,n,e);i.push(...o.Bi),s=s||o.Ui,this.Fi[e.name]=null,Reflect.deleteProperty(this.Di,h);break}}if(s=s||Object.keys(this.Di).length>0,!t)for(const t of this.children){const h=t.di();i.push(...h.Bi),s=s||h.Ui}return{Bi:i,Ui:s}}zi(t,i,s,component,h){const e=[{component,viewport:h}];let n=0;if(i[s].length){const r=h.scope||h.At;for(const h of i[s])if(h.length){const i=h.join(this.router.Et.scope),o={};o[i]=t[s+this.router.Et.scope+i];const l=r.di(o);e.push(...l.Bi),n=n||l.Ui}}return{Bi:e,Ui:n}}qi(name,t,i,s){let h=this.Ti[name];if(!h){let e;s.scope&&(e=new Scope(this.router,t,i,this),this.router.Wi.push(e)),h=this.Ti[name]=new o(this.router,name,t,i,this,e,s)}return(t||i)&&h.qt(t,i,s),h}Gi(t,i,s){return(!i&&!s||t.remove(i,s))&&(t.scope&&this.router.Ki(t.scope),Reflect.deleteProperty(this.Ti,t.name)),Object.keys(this.Ti).length}Ki(){for(const t of this.children)t.Ki();for(const t in this.Ti)this.router.Gi(this.Ti[t],null,null)}Mi(t){return t.Yt().then(()=>t.ni())}_i(t){0>this.children.indexOf(t)&&this.children.push(t)}removeChild(t){this.children.splice(this.children.indexOf(t),1)}Qi(t=0,i=0){const s=[];for(const h in this.Ti){const e=this.Ti[h];(e.options.Mt||e.options.Kt&&!t)&&!i||s.push(e.vi(t))}for(const i of this.children)s.push(...i.Qi(t));return s.filter(value=>value&&value.length)}Xi(){const t=[];for(const i in this.Ti)t.push(this.Ti[i]);for(const i of this.children)t.push(...i.Xi());return t}mi(t=0){if(!this.Nt||!this.parent)return"";const i=[];this.viewport&&i.unshift(this.viewport.description(t));let s=this.parent.Yi(this.context.get(IContainer).parent);for(;s&&s.At===this.parent;)i.unshift(s.description(t)),s=this.Yi(s.context.get(IContainer).parent);return i.unshift(this.parent.mi(t)),i.filter(value=>value&&value.length).join(this.router.Et.scope)}Yi(t){const i=Object.values(this.Ti);for(;t;){const s=i.find(i=>i.context.get(IContainer)===t);if(s)return s;t=t.parent}return null}}t("Scope",Scope);class l{constructor(t){this.vt=t,this.Ti={},this.Wi=[],this.Zi={},this.kt=[],this.ts=[],this.q=0,this.ss=0,this.hs=[],this.es=null,this.ns=(t=>{let i=t.href;if(i.startsWith("#")&&(i=i.substring(1)),!i.startsWith("/")){const s=this.rs(t.anchor).mi();s&&(i=`/${s}${this.Et.scope}${i}`)}this.os.tt(i)}),this.os=new h,this.ls=new e}W(t){if(this.q)throw Error("Router has already been activated.");return this.q=1,this.options=Object.assign({B:t=>{this.cs(t)}},t),this.Et=Object.assign({viewport:"@",jt:"+",scope:"/",fi:"!",s:"=",add:"+",clear:"-",action:"."},this.options.Et),this.ls.W({B:this.ns}),this.os.W(this.options).catch(t=>{throw t})}K(){if(!this.q)throw Error("Router has not been activated.");this.ls.K(),this.os.K()}cs(t){this.hs.push(t),this.as().catch(t=>{throw t})}async as(){if(null!==this.es||!this.hs.length)return Promise.resolve();const t=this.hs.shift();if(this.es=t,this.options.us&&this.options.us(t),t.S)return this.es=null,Promise.resolve();let s=0,h=0;(t.J||t.L)&&t.D&&(t.path=t.D,h=1);let e=t.path;this.options.fs&&!h&&(e=this.options.fs(e,this),Array.isArray(e)&&(e=this.ps(e))),(e===this.Et.clear||e.startsWith(this.Et.clear+this.Et.add))&&(s=1,e.startsWith(this.Et.clear)&&(e=e.substring(1)));const n=i(t.F);t.s=n.s,t.si=n.list;const r=this.ds(e);if(!r&&!Object.keys(r).length&&!s)return this.es=null,Promise.resolve();this.vs();const o=s?this.ms.Xi().filter(value=>null!==value.component):[],l=this.ms.Xi().filter(value=>value.options.default&&null===value.component),c=[];let{Bi:a,Ui:u}=this.ms.di(r),f=100;for(;a.length||u||l.length;){if(!f--)throw Error("Failed to resolve all viewports");const i=[];for(const s of a){const{component,viewport:h}=s;h.zt(component,t)&&i.push(h);const e=o.findIndex(value=>value===h);0>e||o.splice(e,1);const n=l.findIndex(value=>value===h);0>n||l.splice(n,1)}for(const s of o)s.zt(this.Et.clear,t)&&i.push(s);let s;for(;s=l.shift();)s.zt(s.options.default,t)&&i.push(s);!i.length&&this.ss&&(this.os.cancel(),this.ss=0);let h=await Promise.all(i.map(value=>value.Xt()));if(h.findIndex(value=>0==value)>=0)return this.os.cancel(),this.es=null,Promise.resolve();if((h=await Promise.all(i.map(async value=>{const t=await value.Yt();return"boolean"==typeof t?t?value.Zt():0:1}))).some(t=>0==t))return this.os.cancel(),this.es=null,Promise.resolve();await Promise.all(i.map(value=>value.ni())),c.push(...i);const e=this.ms.di();let n;for(a=[];n=this.ts.shift();)e.Bi.find(value=>value.viewport===n.viewport)||a.push(n);a=[...a,...e.Bi],u=e.Ui}this.ws(t),!t.T&&c.every(t=>t.options.Mt)&&this.os.pop().catch(t=>{throw t}),c.forEach(t=>{t.ai()}),this.es=null,this.hs.length&&this.as().catch(t=>{throw t})}Qt(t,component){this.es&&this.ts.push({viewport:t,component})}ds(t){const i={};t.startsWith("/")&&(t=t.substring(1));const s=t.split(this.Et.jt);let h=0;for(;s.length;){const t=s.shift().split(this.Et.scope),parts=t.pop().split(this.Et.viewport),component=parts[0];t.push(parts.length?parts.join(this.Et.viewport):`?${h++}`);const name=t.join(this.Et.scope);component&&(i[name]=component)}return i}ys(t){return this.vs(),this.rs(t)}qi(name,t,i,s){return this.ys(t).qi(name,t,i,s)}Gi(t,i,s){const h=t.At;h.Gi(t,i,s)||this.Ki(h)}Ki(t){if(t!==this.ms){t.Ki();const i=this.Wi.indexOf(t);0>i||this.Wi.splice(i,1)}}M(t,i,s){"string"==typeof t&&this.os.M(t,i,s)}replace(t,i,s){"string"==typeof t&&this.os.replace(t,i,s)}refresh(){this.os.refresh()}back(){this.os.back()}forward(){this.os.forward()}ps(t){const i=[];for(const s of t){let t=s.component;if(s.viewport&&(t+=this.Et.viewport+s.viewport),s.s)for(const i in s.s)t+=this.Et.s+s.s[i];i.push(t)}return i.join(this.Et.jt)}bs(t){const i=[],s=t.split(this.Et.jt);for(const t of s){let component,s,h;const[e,n]=t.split(this.Et.viewport);void 0===n?[component,h]=e.split(this.Et.s):(component=e,[s,h]=n.split(this.Et.s));const r={component};s&&(r.viewport=s),h&&(r.s={id:h}),i.push(r)}return i}gs(name,t){const i=this.$s(name);i&&(i.Ht=[]),this.Os(name,t)}Os(name,t){let i=this.Zi[name];i||(i=this.Zi[name]=new r(this,name)),i.Rt(t)}$s(name){return this.Zi[name]}vs(){if(!this.ms){const t=this.vt.get(Aurelia).root();this.ms=new Scope(this,t.Cs,t.$context,null),this.Wi.push(this.ms)}}rs(t){let i=(function(t){for(;t&&!t.$customElement;)t=t.parentElement;return t})(t).$customElement.$context.get(IContainer);for(;i;){const t=this.Wi.find(t=>t.context.get(IContainer)===i);if(t)return t;i=i.parent}}Es(t){let i=t.slice().sort((t,i)=>i.split(this.Et.scope).length-t.split(this.Et.scope).length),s=[];if((i=i.map(value=>`${this.Et.scope}${value}${this.Et.scope}`)).length)for(s.push(i.shift());i.length;){const t=i.shift();s.find(value=>-1===value.indexOf(t))&&s.push(t)}return(s=s.map(value=>value.substring(1,value.length-1))).sort((t,i)=>t.split(this.Et.scope).length-i.split(this.Et.scope).length),s}ws(t){this.kt=this.ms.Qi(1,1),this.kt=this.Es(this.kt);let i=this.ms.Qi(),s=(i=this.Es(i)).join(this.Et.jt);this.options.ks&&(s=this.options.ks(this.bs(s),this));let h=this.ms.Qi(1);(h=this.Es(h)).unshift(this.Et.clear);const e=t.F&&t.F.length?`?${t.F}`:"";this.os.Z(s+e,h.join(this.Et.jt)+e,t)}}t("Router",l),l.inject=[IContainer];class c{constructor(router,t,i){this.router=router,this.Nt=t,this.Ps=i,this.name="default",this.scope=null,this.Gt=null,this.default=null,this.Kt=null,this.Mt=null,this.viewport=null}Ss(t,host,parts,i){const s=this.constructor,dom=i.get(IDOM),template=this.Ps.js(dom,s.description,i,s);template.Hs=createRenderContext(dom,i,s.description.dependencies,s),template.Ss(this,host,parts)}bound(){const t={scope:this.Nt.hasAttribute("scope")};this.Gt&&this.Gt.length&&(t.Gt=this.Gt),this.default&&this.default.length&&(t.default=this.default),this.Nt.hasAttribute("no-link")&&(t.Kt=1),this.Nt.hasAttribute("no-history")&&(t.Mt=1),this.viewport=this.router.qi(this.name,this.Nt,this.$context,t)}Rs(){this.router.Gi(this.viewport,this.Nt,this.$context)}bi(t){this.viewport&&this.viewport.bi(t)}$i(t){this.viewport&&this.viewport.$i(t)}Ci(t){this.viewport&&this.viewport.Ci(t)}ki(t){this.viewport&&this.viewport.ki(t)}}t("ViewportCustomElement",c),c.inject=[l,INode,IRenderingEngine],s([bindable],c.prototype,"name",void 0),s([bindable],c.prototype,"scope",void 0),s([bindable],c.prototype,"usedBy",void 0),s([bindable],c.prototype,"default",void 0),s([bindable],c.prototype,"noLink",void 0),s([bindable],c.prototype,"noHistory",void 0),CustomElementResource.Vs({name:"au-viewport",template:'<template><div class="viewport-header"> Viewport: <b>${name}</b> </div></template>'},c);let a=t("NavCustomElement",class{constructor(router){this.router=router,this.name=null,this.Ht=null,this.level=0}get Ns(){const t=this.router.$s(this.name);return t?t.Ht:[]}active(t){return"Active"}});s([bindable],a.prototype,"name",void 0),s([bindable],a.prototype,"routes",void 0),s([bindable],a.prototype,"level",void 0),a=t("NavCustomElement",s([inject(l,Element),customElement({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name}">\n    <au-nav routes.bind="navRoutes" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level}">\n    <li repeat.for="route of routes" class="${route.active} ${route.hasChildren}">\n      <a if.bind="route.link && route.link.length" href="${route.link}">${route.title}</a>\n      <a if.bind="!route.link || !route.link.length" click.delegate="route.toggleActive()" href="">${route.title}</a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" containerless></au-nav>\n    </li>\n  </ul>\n</template>'})],a))}}});
