function parseQuery(t){const i={},s=[];if(!t||!t.length)return{t:i,list:s};const e=t.replace("+"," ").split("&");for(const t of e){const e=t.split("="),h=decodeURIComponent(e.shift());if(!e.length){s.push(h);continue}const value=decodeURIComponent(e.shift());i[h]=value}return{t:i,list:s}}function mergeParameters(t,i,s){const e=parseQuery(i),h=parseQuery(t),n=Object.assign({},e.t,h.t),o=[...e.list,...h.list];if(o.length&&s&&s.length)for(const t of s)n[t]=o.shift();let r;return o.length&&Object.keys(n).length&&(n["i"]=o.splice(0,o.length)),{s:n,h:o,o:r=o.length?o:n}}function closestCustomElement(t){for(;t&&!t.$customElement;)t=t.parentElement;return t}function __decorate(t,i,s,e){var h,n,o=arguments.length,r=3>o?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,i,s,e);else for(n=t.length-1;n>=0;n--)(h=t[n])&&(r=(3>o?h(r):o>3?h(i,s,r):h(i,s))||r);return o>3&&r&&Object.defineProperty(i,s,r),r}import{IObserverLocator,LifecycleFlags,CustomElementResource,Aurelia,IDOM,createRenderContext,INode,IRenderingEngine,bindable,customElement}from"@aurelia/runtime";import{IContainer,inject}from"@aurelia/kernel";class HistoryBrowser{constructor(){this.l=(()=>{if(null!==this.u){const t=this.u;return this.u=null,void t()}const t=this.m(),i=this.p(),s={};let e,h=this.v("HistoryEntry");if(this.g&&this.g.path===t){s.C=1;const t=this.$?this.R.index:this.history.length-this.O;e=this.R,this.R=this.g,this.R.index=t,this.$?(this.k=0,this.H[this.R.index]=this.R,this.V?(s.N=1,this.V=0):this.P?(s.S=1,this.P=0):s._=1,this.$=0):(this.k=1,this.H=this.H.slice(0,this.R.index),this.H.push(this.R)),this.j({I:this.H,L:this.O,F:this.R})}else this.H=this.H||this.v("HistoryEntries")||[],this.O=this.O||this.v("HistoryOffset")||0,h||this.R?h?this.R?h.index>this.R.index?s.A=1:this.R.index>h.index&&(s.D=1):s.S=1:s.C=1:(s.C=1,s.B=1,this.O=this.history.length),h||(this.H=this.H.slice(0,(h={path:t,J:null,index:this.history.length-this.O,T:i}).index),this.H.push(h),this.j({I:this.H,L:this.O,F:h})),this.k=this.R?h.index-this.R.index:0,e=this.R,this.R=h,this.V&&(s.N=1,this.V=0);this.g=null,this.M&&this.M--,this.U(this.R,s,e)}),this.location=window.location,this.history=window.history,this.R=null,this.H=null,this.O=null,this.q=null,this.g=null,this.options=null,this.W=0,this.k=null,this.M=null,this.V=0,this.$=0,this.P=0,this.u=null}G(t){if(this.W)throw Error("History has already been activated.");return this.W=1,this.options=Object.assign({},t),window.addEventListener("popstate",this.l),Promise.resolve().then(()=>{this.K(this.m(),1)})}X(){window.removeEventListener("popstate",this.l),this.W=0}Y(t,i,s){this.g={path:t,J:null,title:i,data:s},this.K(t)}replace(t,i,s){this.$=1,this.g={path:t,J:null,title:i,data:s},this.K(t,1)}Z(t,i,s){this.M=this.k+1,this.replace(t,i,s)}refresh(){this.R&&(this.P=1,this.replace(this.R.path,this.R.title,this.R.data))}back(){this.history.go(-1)}forward(){this.history.go(1)}cancel(){this.V=1;const t=this.k||this.M;t?this.history.go(-t):this.replace(this.q.path,this.q.title,this.q.data)}async pop(){let t,i=new Promise(t=>{this.u=t});this.history.go(-1),await i;const s=""+this.location;t=this.history.state,i=new Promise(t=>{this.u=t}),this.history.go(-1),await i,this.history.pushState(t,null,s)}j(t,value){const{pathname:i,search:s,hash:e}=this.location;let h=Object.assign({},this.history.state);"string"==typeof t?h[t]=JSON.parse(JSON.stringify(value)):h=Object.assign({},h,JSON.parse(JSON.stringify(t))),this.history.replaceState(h,null,`${i}${s}${e}`)}v(t){return Object.assign({},this.history.state)[t]}tt(t){this.R.title=t,this.H[this.R.index]=this.R,this.j({I:this.H,F:this.R})}it(t,i,s){if(s.index!==this.R.index)return;const e=`#/${t}`,{pathname:h,search:n,hash:o}=this.location;if(e===o&&this.R.path===t&&this.R.J===i)return;this.R.path=t,this.R.J=i;const r=Object.assign({},this.history.state,{F:this.R,I:this.H});this.history.replaceState(r,null,`${h}${n}${e}`)}st(t){t.startsWith("#")||(t=`#${t}`),this.location.hash=t}get et(){return this.H?this.H.slice(0,this.R.index+1).map(value=>value.title):[]}m(){return this.location.hash.substring(1).split("?")[0]}K(t,i=0){if(this.R&&this.R.path===t&&!this.P)return;const{pathname:s,search:e}=this.location,h=`#${t}`;i?(this.q=this.R,this.history.replaceState({},null,`${s}${e}${h}`)):this.history.pushState({},null,`${s}${e}${h}`),this.l()}p(){const t=this.location.hash.substring(1).split("?");return t.shift(),t.length>0?t.shift():""}U(t,i,s){const e=Object.assign({},t,i);e.ht=s,this.options.U&&this.options.U(e)}}class LinkHandler{constructor(){this.W=0,this.nt=(t=>{const i=LinkHandler.ot(t);i.rt&&(t.preventDefault(),this.options.U(i))}),this.document=document}static ot(t){const i={rt:0,href:null,anchor:null},s=LinkHandler.lt(t.target);if(!s||!LinkHandler.at(s))return i;if(s.hasAttribute("external"))return i;if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey)return i;const e=s.getAttribute("href");return i.anchor=s,i.href=e,i.rt=1===t.which,i}static lt(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}}static at(t){const i=t.getAttribute("target");return!i||i===LinkHandler.window.name||"_self"===i}G(t){if(this.W)throw Error("LinkHandler has already been activated.");this.W=1,this.options=Object.assign({},t),this.document.addEventListener("click",this.nt,1)}X(){this.document.removeEventListener("click",this.nt,1),this.W=0}}class NavRoute{constructor(t,i){this.active="",this.ct=t,Object.assign(this,{ut:i.ut,title:i.title,children:null,ft:i.ft,active:""}),this.link=this.dt(this.ut),this.pt=i.vt?this.dt(i.vt):this.link,this.wt=this.ct.router.bt.get(IObserverLocator),this.yt=this.wt.gt(LifecycleFlags.Ct,this.ct.router,"activeComponents"),this.yt.subscribe(this)}get Et(){return this.children&&this.children.length?"nav-has-children":""}$t(){this.active=this.link&&this.link.length?this.Rt():"nav-active"===this.active?"nav-active":this.Ot()?"nav-active-child":""}Rt(){const t=this.pt.split(this.ct.router.kt.add),i=this.ct.router.Ht;for(const component of t)if(0>component.indexOf(this.ct.router.kt.viewport)){if(0>i.findIndex(value=>value.replace(/\@[^=]*/,"")===component))return""}else if(0>i.indexOf(component))return"";return"nav-active"}Vt(){this.active=this.active.startsWith("nav-active")?"":"nav-active"}dt(t){return Array.isArray(t)?t.map(value=>this.Nt(value)).join(this.ct.router.kt.Pt):this.Nt(t)}Ot(){if(this.children)for(const t of this.children)if(t.active.startsWith("nav-active")||t.Ot())return 1;return 0}Nt(component){return component?"string"==typeof component?component:component.description?component.description.name:component.component?this.Nt(component.component)+(component.viewport?`@${component.viewport}`:""):void 0:""}}class Nav{constructor(router,name){this.router=router,this.name=name,this.St=[]}_t(t){for(const i of t)this.jt(this.St,i)}jt(t,i){const s=new NavRoute(this,i);if(t.push(s),i.children){s.children=[];for(const t of i.children)this.jt(s.children,t)}}}class Viewport{constructor(router,name,t,i,s,e,h){this.router=router,this.name=name,this.It=t,this.context=i,this.Lt=s,this.scope=e,this.options=h,this.clear=0,this.content=null,this.Ft=null,this.t=null,this.At=null,this.xt=null,this.Dt=null,this.component=null,this.Bt=null,this.Jt=null,this.Qt=null,this.Tt=0}zt(t,i){let s;if(this.clear=0,"string"==typeof t)if(t===this.router.kt.clear)this.clear=1,t=null;else{const i=t.split(this.router.kt.t);t=i.shift(),s=i.length?i.join(this.router.kt.t):null,this.context&&(t=this.Mt(t))}return this.Ft=t,this.Dt=i,this.At=s,this.Tt=0,"string"==typeof t&&this.Ut(this.content)!==t||"string"!=typeof t&&this.content!==t||this.t!==s||!this.xt||this.xt.T!==i.T||i.S?1:0}qt(t,i,s){this.scope&&this.scope.parent&&!this.scope.viewport&&(this.scope.viewport=this),this.scope&&!this.scope.It&&(this.scope.It=t),this.It!==t&&(this.Qt=Object.assign({},this),this.Wt(),this.It=t,s&&s.Gt&&(this.options.Gt=s.Gt),s&&s.default&&(this.options.default=s.default),s&&s.Kt&&(this.options.Kt=s.Kt),s&&s.Xt&&(this.options.Xt=s.Xt),this.Jt&&this.Jt()),this.context!==i&&(this.context=i),this.component||this.Bt||!this.options.default||this.router.Yt(this,this.options.default)}remove(t,i){return this.It===t&&this.context===i}async Zt(){if(!this.component)return 1;const component=this.component;return component.Zt?component.Zt(this.xt,this.Dt):1}async ti(){if(this.clear)return 1;if(!this.Ft)return 0;if(await this.loadComponent(this.Ft),!this.Bt)return 0;const component=this.Bt;return component.ti?component.ti(this.Dt,this.xt):1}async ii(){if(this.clear)return 1;if(!this.Bt)return 0;if(this.Bt.ii){const t=mergeParameters(this.At,this.Dt.T,this.Ft.t);this.Dt.t=t.s,this.Dt.h=t.h,await this.Bt.ii(t.o,this.Dt,this.xt),this.Tt=0}return this.si(this.Bt),1}async ei(){return this.component&&(this.component.hi&&await this.component.hi(this.xt,this.Dt),this.Bt||(this.ni(this.component),this.oi(this.component),this.ri(this.component))),this.Bt&&(this.component&&(this.ni(this.component),this.oi(this.component),this.ri(this.component)),this.addComponent(this.Bt),this.content=this.Ft,this.t=this.At,this.xt=this.Dt,this.component=this.Bt),this.clear&&(this.content=this.t=this.component=null,this.xt=this.Dt),this.Ft=this.At=this.Dt=this.Bt=null,1}li(){this.Qt=null}async ai(){this.Tt&&await this.Bt.hi(),this.Qt&&Object.assign(this,this.Qt)}description(t=0){if(this.content){const component=this.Ut(this.content),i=this.scope?this.router.kt.ci:"",s=this.t?this.router.kt.t+this.t:"";if(t||i.length||this.options.ui)return`${component}${this.router.kt.viewport}${this.name}${i}${s}`;const e={};return e[component]=component,this.Lt.fi(e)?`${component}${s}`:`${component}${this.router.kt.viewport}${this.name}${i}${s}`}}di(t=0){return[this.Lt.mi(t),this.description(t)].filter(value=>value&&value.length).join(this.router.kt.scope)}pi(component){let t=this.options.Gt||[];return"string"==typeof t&&(t=t.split(",")),t.indexOf(component)>=0}vi(component){if("-"===component||null===component)return 1;let t=this.options.Gt;return t&&t.length?("string"==typeof t&&(t=t.split(",")),0>t.indexOf(component)?t.filter(value=>value.indexOf("*")>=0).length?1:0:1):1}wi(t){this.component&&this.component.bi(t)}yi(t){this.component&&this.component.gi(t)}Ci(t){this.component&&this.component.Ei(t)}$i(t){this.component&&this.component.Ri(t)}Ut(component){return null===component?null:"string"==typeof component?component:component.description.name}Mt(component){if(null===component)return null;if("string"!=typeof component)return component;{const t=this.context||this.router.bt,i=t.get(IContainer).Oi(CustomElementResource.ki(component));return null!==i?i.Vi(t.get(IContainer)).Hi:null}}Ni(component){if(null===component)return null;component=this.Ut(component);const t=this.context||this.router.bt;return"string"!=typeof component?t.get(IContainer).get(component):t.get(IContainer).get(CustomElementResource.ki(component))}Wt(){this.options={},this.content=null,this.t=null,this.xt=null,this.component=null}async loadComponent(component){await this.Pi(),this.Bt=this.Ni(component),this.Bt.Si(LifecycleFlags.Ct,this.context||this.router.bt,this.It)}ri(component){}si(component){component.bi(LifecycleFlags._i|LifecycleFlags.ji,null)}oi(component){component.Ri(LifecycleFlags.Ii|LifecycleFlags.Li)}addComponent(component){component.gi(LifecycleFlags._i)}ni(component){component.Ei(LifecycleFlags.Ii)}async Pi(){return this.It?Promise.resolve():new Promise(t=>{this.Jt=t})}}class Scope{constructor(router,t,i,s){this.router=router,this.It=t,this.context=i,this.parent=s,this.viewport=null,this.children=[],this.Fi={},this.Ai={},this.xi=null,this.parent&&this.parent.Di(this)}fi(t){const i=[];let s=0;t&&(this.xi={},this.Ai={}),this.xi=Object.assign({},this.Fi,this.xi);for(const i in t){const parts=i.split(this.router.kt.scope),t=parts.shift();this.Ai[t]||(this.Ai[t]=[]),this.Ai[t].push(parts)}for(const e in this.Ai){const h=e.split(this.router.kt.t),component=h.shift().split(this.router.kt.viewport).shift(),n=component+(h.length?this.router.kt.t+h.join(this.router.kt.t):"");for(const name in this.xi){const h=this.xi[name];if(h&&h.pi(component)){const o=this.Bi(t,this.Ai,e,n,h);i.push(...o.Ji),s=s||o.Qi,this.xi[name]=null,Reflect.deleteProperty(this.Ai,e);break}}}for(const e in this.Ai){const h=e.split(this.router.kt.t),parts=h.shift().split(this.router.kt.viewport),component=parts.shift(),n=component+(h.length?this.router.kt.t+h.join(this.router.kt.t):"");let name=parts.shift();if(!name||!name.length||name.startsWith("?"))continue;let o=0;name.endsWith(this.router.kt.ci)&&(o=1,name=name.substring(0,name.length-1)),this.Fi[name]||(this.Ti(name,null,null,{scope:o,ui:1}),this.xi[name]=this.Fi[name]);const r=this.xi[name];if(r&&r.vi(component)){const h=this.Bi(t,this.Ai,e,n,r);i.push(...h.Ji),s=s||h.Qi,this.xi[name]=null,Reflect.deleteProperty(this.Ai,e)}}for(const e in this.Ai){const h=e.split(this.router.kt.t),component=h.shift().split(this.router.kt.viewport).shift(),n=component+(h.length?this.router.kt.t+h.join(this.router.kt.t):""),o=[];for(const name in this.xi){const t=this.xi[name];t&&t.vi(component)&&o.push(t)}if(1===o.length){const h=o.shift(),r=this.Bi(t,this.Ai,e,n,h);i.push(...r.Ji),s=s||r.Qi,this.xi[h.name]=null,Reflect.deleteProperty(this.Ai,e);break}}if(s=s||Object.keys(this.Ai).length>0,!t)for(const t of this.children){const e=t.fi();i.push(...e.Ji),s=s||e.Qi}return{Ji:i,Qi:s}}Bi(t,i,s,component,e){const h=[{component,viewport:e}];let n=0;if(i[s].length){const o=e.scope||e.Lt;for(const e of i[s])if(e.length){const i=e.join(this.router.kt.scope),r={};r[i]=t[s+this.router.kt.scope+i];const l=o.fi(r);h.push(...l.Ji),n=n||l.Qi}}return{Ji:h,Qi:n}}Ti(name,t,i,s){let e=this.Fi[name];if(!e){let h;s.scope&&(h=new Scope(this.router,t,i,this),this.router.zi.push(h)),e=this.Fi[name]=new Viewport(this.router,name,t,i,this,h,s)}return(t||i)&&e.qt(t,i,s),e}Mi(t,i,s){return(!i&&!s||t.remove(i,s))&&(t.scope&&this.router.Ui(t.scope),Reflect.deleteProperty(this.Fi,t.name)),Object.keys(this.Fi).length}Ui(){for(const t of this.children)t.Ui();for(const t in this.Fi)this.router.Mi(this.Fi[t],null,null)}qi(t){return t.ti().then(()=>t.ei())}Di(t){0>this.children.indexOf(t)&&this.children.push(t)}removeChild(t){this.children.splice(this.children.indexOf(t),1)}Wi(t=0,i=0){const s=[];for(const e in this.Fi){const h=this.Fi[e];(h.options.Xt||h.options.Kt&&!t)&&!i||s.push(h.di(t))}for(const i of this.children)s.push(...i.Wi(t));return s.filter(value=>value&&value.length)}Gi(){const t=[];for(const i in this.Fi)t.push(this.Fi[i]);for(const i of this.children)t.push(...i.Gi());return t}mi(t=0){if(!this.It||!this.parent)return"";const i=[];this.viewport&&i.unshift(this.viewport.description(t));let s=this.parent.Ki(this.context.get(IContainer).parent);for(;s&&s.Lt===this.parent;)i.unshift(s.description(t)),s=this.Ki(s.context.get(IContainer).parent);return i.unshift(this.parent.mi(t)),i.filter(value=>value&&value.length).join(this.router.kt.scope)}Ki(t){const i=Object.values(this.Fi);for(;t;){const s=i.find(i=>i.context.get(IContainer)===t);if(s)return s;t=t.parent}return null}}class Router{constructor(t){this.bt=t,this.Fi={},this.zi=[],this.Xi={},this.Ht=[],this.Yi=[],this.W=0,this.Zi=0,this.ts=[],this.ss=null,this.es=(t=>{let i=t.href;if(i.startsWith("#")&&(i=i.substring(1)),!i.startsWith("/")){const s=this.hs(t.anchor).mi();s&&(i=`/${s}${this.kt.scope}${i}`)}this.ns.st(i)}),this.ns=new HistoryBrowser,this.os=new LinkHandler}G(t){if(this.W)throw Error("Router has already been activated.");return this.W=1,this.options=Object.assign({U:t=>{this.rs(t)}},t),this.kt=Object.assign({viewport:"@",Pt:"+",scope:"/",ci:"!",t:"=",add:"+",clear:"-",action:"."},this.options.kt),this.os.G({U:this.es}),this.ns.G(this.options).catch(t=>{throw t})}X(){if(!this.W)throw Error("Router has not been activated.");this.os.X(),this.ns.X()}rs(t){this.ts.push(t),this.ls().catch(t=>{throw t})}async ls(){if(null!==this.ss||!this.ts.length)return Promise.resolve();const t=this.ts.shift();if(this.ss=t,this.options.as&&this.options.as(t),t.N)return this.ss=null,Promise.resolve();let i=0,s=0;(t.D||t.A)&&t.J&&(t.path=t.J,s=1);let e=t.path;this.options.cs&&!s&&(e=this.options.cs(e,this),Array.isArray(e)&&(e=this.us(e))),(e===this.kt.clear||e.startsWith(this.kt.clear+this.kt.add))&&(i=1,e.startsWith(this.kt.clear)&&(e=e.substring(1)));const h=parseQuery(t.T);t.t=h.t,t.h=h.list;const n=this.fs(e);if(!n&&!Object.keys(n).length&&!i)return this.ss=null,Promise.resolve();this.ds();const o=i?this.ms.Gi().filter(value=>null!==value.component):[],r=this.ms.Gi().filter(value=>value.options.default&&null===value.component),l=[];let{Ji:a,Qi:c}=this.ms.fi(n),u=100;for(;a.length||c||r.length;){if(!u--)throw Error("Failed to resolve all viewports");const i=[];for(const s of a){const{component,viewport:e}=s;e.zt(component,t)&&i.push(e);const h=o.findIndex(value=>value===e);0>h||o.splice(h,1);const n=r.findIndex(value=>value===e);0>n||r.splice(n,1)}for(const s of o)s.zt(this.kt.clear,t)&&i.push(s);let s;for(;s=r.shift();)s.zt(s.options.default,t)&&i.push(s);!i.length&&this.Zi&&(this.ns.cancel(),this.Zi=0);let e=await Promise.all(i.map(value=>value.Zt()));if(e.findIndex(value=>0==value)>=0)return this.ns.cancel(),this.ss=null,Promise.resolve();if((e=await Promise.all(i.map(async value=>{const t=await value.ti();return"boolean"==typeof t?t?value.ii():0:1}))).some(t=>0==t))return this.ns.cancel(),this.ss=null,Promise.resolve();await Promise.all(i.map(value=>value.ei())),l.push(...i);const h=this.ms.fi();let n;for(a=[];n=this.Yi.shift();)h.Ji.find(value=>value.viewport===n.viewport)||a.push(n);a=[...a,...h.Ji],c=h.Qi}this.ps(t),!t.B&&l.every(t=>t.options.Xt)&&this.ns.pop().catch(t=>{throw t}),l.forEach(t=>{t.li()}),this.ss=null,this.ts.length&&this.ls().catch(t=>{throw t})}Yt(t,component){this.ss&&this.Yi.push({viewport:t,component})}fs(t){const i={};t.startsWith("/")&&(t=t.substring(1));const s=t.split(this.kt.Pt);let e=0;for(;s.length;){const t=s.shift().split(this.kt.scope),parts=t.pop().split(this.kt.viewport),component=parts[0];t.push(parts.length?parts.join(this.kt.viewport):`?${e++}`);const name=t.join(this.kt.scope);component&&(i[name]=component)}return i}vs(t){return this.ds(),this.hs(t)}Ti(name,t,i,s){return this.vs(t).Ti(name,t,i,s)}Mi(t,i,s){const e=t.Lt;e.Mi(t,i,s)||this.Ui(e)}Ui(t){if(t!==this.ms){t.Ui();const i=this.zi.indexOf(t);0>i||this.zi.splice(i,1)}}Y(t,i,s){"string"==typeof t&&this.ns.Y(t,i,s)}replace(t,i,s){"string"==typeof t&&this.ns.replace(t,i,s)}refresh(){this.ns.refresh()}back(){this.ns.back()}forward(){this.ns.forward()}us(t){const i=[];for(const s of t){let t=s.component;if(s.viewport&&(t+=this.kt.viewport+s.viewport),s.t)for(const i in s.t)t+=this.kt.t+s.t[i];i.push(t)}return i.join(this.kt.Pt)}ws(t){const i=[],s=t.split(this.kt.Pt);for(const t of s){let component,s,e;const[h,n]=t.split(this.kt.viewport);void 0===n?[component,e]=h.split(this.kt.t):(component=h,[s,e]=n.split(this.kt.t));const o={component};s&&(o.viewport=s),e&&(o.t={id:e}),i.push(o)}return i}bs(name,t){const i=this.ys(name);i&&(i.St=[]),this.gs(name,t)}gs(name,t){let i=this.Xi[name];i||(i=this.Xi[name]=new Nav(this,name)),i._t(t)}ys(name){return this.Xi[name]}ds(){if(!this.ms){const t=this.bt.get(Aurelia).root();this.ms=new Scope(this,t.Cs,t.$context,null),this.zi.push(this.ms)}}hs(t){let i=closestCustomElement(t).$customElement.$context.get(IContainer);for(;i;){const t=this.zi.find(t=>t.context.get(IContainer)===i);if(t)return t;i=i.parent}}Es(t){let i=t.slice().sort((t,i)=>i.split(this.kt.scope).length-t.split(this.kt.scope).length),s=[];if((i=i.map(value=>`${this.kt.scope}${value}${this.kt.scope}`)).length)for(s.push(i.shift());i.length;){const t=i.shift();s.find(value=>-1===value.indexOf(t))&&s.push(t)}return(s=s.map(value=>value.substring(1,value.length-1))).sort((t,i)=>t.split(this.kt.scope).length-i.split(this.kt.scope).length),s}ps(t){this.Ht=this.ms.Wi(1,1),this.Ht=this.Es(this.Ht);let i=this.ms.Wi(),s=(i=this.Es(i)).join(this.kt.Pt);this.options.$s&&(s=this.options.$s(this.ws(s),this));let e=this.ms.Wi(1);(e=this.Es(e)).unshift(this.kt.clear);const h=t.T&&t.T.length?`?${t.T}`:"";this.ns.it(s+h,e.join(this.kt.Pt)+h,t)}}Router.inject=[IContainer];class ViewportCustomElement{constructor(router,t,i){this.router=router,this.It=t,this.Rs=i,this.name="default",this.scope=null,this.Gt=null,this.default=null,this.Kt=null,this.Xt=null,this.viewport=null}Os(t,host,parts,i){const s=this.constructor,dom=i.get(IDOM),template=this.Rs.ks(dom,s.description,i,s);template.Hs=createRenderContext(dom,i,s.description.dependencies,s),template.Os(this,host,parts)}bound(){const t={scope:this.It.hasAttribute("scope")};this.Gt&&this.Gt.length&&(t.Gt=this.Gt),this.default&&this.default.length&&(t.default=this.default),this.It.hasAttribute("no-link")&&(t.Kt=1),this.It.hasAttribute("no-history")&&(t.Xt=1),this.viewport=this.router.Ti(this.name,this.It,this.$context,t)}Vs(){this.router.Mi(this.viewport,this.It,this.$context)}wi(t){this.viewport&&this.viewport.wi(t)}yi(t){this.viewport&&this.viewport.yi(t)}Ci(t){this.viewport&&this.viewport.Ci(t)}$i(t){this.viewport&&this.viewport.$i(t)}}ViewportCustomElement.inject=[Router,INode,IRenderingEngine],__decorate([bindable],ViewportCustomElement.prototype,"name",void 0),__decorate([bindable],ViewportCustomElement.prototype,"scope",void 0),__decorate([bindable],ViewportCustomElement.prototype,"usedBy",void 0),__decorate([bindable],ViewportCustomElement.prototype,"default",void 0),__decorate([bindable],ViewportCustomElement.prototype,"noLink",void 0),__decorate([bindable],ViewportCustomElement.prototype,"noHistory",void 0),CustomElementResource.Ns({name:"au-viewport",template:'<template><div class="viewport-header"> Viewport: <b>${name}</b> </div></template>'},ViewportCustomElement);let NavCustomElement=class{constructor(router){this.router=router,this.name=null,this.St=null,this.level=0}get Ps(){const t=this.router.ys(this.name);return t?t.St:[]}active(t){return"Active"}};__decorate([bindable],NavCustomElement.prototype,"name",void 0),__decorate([bindable],NavCustomElement.prototype,"routes",void 0),__decorate([bindable],NavCustomElement.prototype,"level",void 0),NavCustomElement=__decorate([inject(Router,Element),customElement({name:"au-nav",template:'<template>\n  <nav if.bind="name" class="${name}">\n    <au-nav routes.bind="navRoutes" containerless></au-nav>\n  </nav>\n  <ul if.bind="routes" class="nav-level-${level}">\n    <li repeat.for="route of routes" class="${route.active} ${route.hasChildren}">\n      <a if.bind="route.link && route.link.length" href="${route.link}">${route.title}</a>\n      <a if.bind="!route.link || !route.link.length" click.delegate="route.toggleActive()" href="">${route.title}</a>\n      <au-nav if.bind="route.children" routes.bind="route.children" level.bind="level + 1" containerless></au-nav>\n    </li>\n  </ul>\n</template>'})],NavCustomElement);export{HistoryBrowser,LinkHandler,Nav,Router,Scope,Viewport,ViewportCustomElement,NavCustomElement};
