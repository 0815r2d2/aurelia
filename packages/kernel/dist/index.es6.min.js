function $noop(){}function createContainer(...e){return 0===arguments.length?new Container:(new Container).register(...e)}function createResolver(e){return function(t){const Key=function Key(e,t,n){DI.inject(Key)(e,t,n)};return Key.resolve=function(n,i){return e(t,n,i)},Key}}function transientDecorator(e){return DI.transient(e)}function transient(e){return void 0===e?transientDecorator:transientDecorator(e)}function singletonDecorator(e){return DI.singleton(e)}function singleton(e){return void 0===e?singletonDecorator:singletonDecorator(e)}function isRegistry(e){return"function"==typeof e.register}function validateKey(e){if(null==e||e===Object)throw Reporter.error(5)}function buildAllResponse(e,t,n){if(e instanceof Resolver&&4===e.strategy){const i=e.state;let r=i.length;const s=Array(r);for(;r--;)s[r]=i[r].resolve(t,n);return s}return[e.resolve(t,n)]}function invokeWithDynamicDependencies(e,t,n,i){let r,s=n.length,o=Array(s);for(;s--;){if(null==(r=n[s]))throw Reporter.error(7,`Index ${s}.`);o[s]=e.get(r)}return void 0!==i&&(o=o.concat(i)),Reflect.construct(t,o)}const $global=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(e){return{}}})(),$now=(function(){let e,t,n,i,r;if(null!=$global.performance&&$global.performance.now){const e=$global.performance;return function(){return e.now()}}if(null!=$global.process&&$global.process.t){const s=function(){return(e()-i)/1e6};return t=$global.process.t,n=(e=function(){let e;return 1e9*(e=t())[0]+e[1]})(),r=1e9*$global.process.i(),i=n-r,s}})(),{s:$mark,o:$measure,l:$getEntriesByName,u:$getEntriesByType,h:$clearMarks,$:$clearMeasures}=(function(){if(null!=$global.performance&&$global.performance.mark&&$global.performance.measure&&$global.performance.getEntriesByName&&$global.performance.getEntriesByType&&$global.performance.clearMarks&&$global.performance.clearMeasures){const e=$global.performance;return{s(name){e.mark(name)},o(name,t,n){e.measure(name,t,n)},l:name=>e.getEntriesByName(name),u:type=>e.getEntriesByType(type),h(name){e.clearMarks(name)},$(name){e.clearMeasures(name)}}}if(null!=$global.process&&$global.process.t){const e=[],t={},n=function(t,value){let n=0;const i=e.length,r=[];for(;i>n;n++)e[n][t]===value&&r.push(e[n]);return r},i=function(type,name){let t,n=e.length;for(;n--;)(t=e[n]).entryType!==type||void 0!==name&&t.name!==name||e.splice(n,1)};return{s(name){const n={name,entryType:"mark",startTime:$now(),duration:0};e.push(n),t[name]=n},o(name,n,i){let r,s;if(void 0!==i&&void 0===t[i])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${i}' does not exist.`);if(void 0!==n&&void 0===t[n])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${n}' does not exist.`);r=t[n]?t[n].startTime:0,s=t[i]?t[i].startTime:$now(),e.push({name,entryType:"measure",startTime:r,duration:s-r})},l:name=>n("name",name),u:type=>n("entryType",type),h(name){i("mark",name)},$(name){i("measure",name)}}}})(),{v:$raf,k:$caf}=(function(){const e=["moz","webkit"],t="AnimationFrame";let n=$global[`request${t}`],i=$global[`cancel${t}`]||$global[`cancelRequest${t}`];for(let r=0;!n&&2>r;++r)n=$global[`${e[r]}Request${t}`],i=$global[`${e[r]}Cancel${t}`]||$global[`${e[r]}CancelRequest${t}`];if(!n||!i){let e=0,t=0;const r=[],s=1e3/60;n=function(n){let i,o;return 0===r.length&&(i=$now(),e=(o=Math.max(0,s-(i-e)))+i,setTimeout(function(){const t=r.slice(0);r.length=0;for(let n=0;t.length>n;++n)if(!t[n].m)try{t[n].R(e)}catch(e){setTimeout(function(){throw e},0)}},Math.round(o))),r.push({g:++t,R:n,m:0}),t},i=function(e){for(let t=0;r.length>t;++t)r[t].g===e&&(r[t].m=1)}}const r=function(e){return n.call($global,e)};return r.cancel=function(){i.apply($global,arguments)},$global.requestAnimationFrame=n,$global.cancelAnimationFrame=i,{v:r,k:i}})();class Notifier{constructor(e,t=null){this.D=e,this.context=t,this.next=null,this.p=null,this.C=0}I(e,t){return this.D===e&&this.context===(t||null)}L(e){null!==this.D&&(null!==this.context?this.D.call(this.context,e):this.D(e));const t=this.next;return this.C&&(this.next=null),t}connect(e){this.p=e,null!==e.next&&(e.next.p=this),this.next=e.next,e.next=this}disconnect(e=0){this.C=1,this.D=null,this.context=null,null!==this.p&&(this.p.next=this.next),null!==this.next&&(this.next.p=this.p);const t=this.next;return this.next=e?null:t,this.p=null,t}}class Ticker{constructor(){this.head=new Notifier(null,null),this.M=-1,this.A=1,this.W=-1,this.F=0,this.T=null,this.resolve=$noop,this.O=(e=>{this.M=-1,this.F&&(this.update(e),this.F&&-1===this.M&&null!==this.head.next&&(this.M=$raf(this.O))),this.resolve(e),this.resolve=$noop,this.T=null})}add(e,t){const n=new Notifier(e,t);let i=this.head.next,r=this.head;if(null===i)n.connect(r);else{for(;null!==i;)r=i,i=i.next;null===n.p&&n.connect(r)}return this.F?this.B():this.start(),this}remove(e,t){let n=this.head.next;for(;null!==n;)n=n.I(e,t)?n.disconnect():n.next;return null===this.head.next&&this.N(),this}start(){this.F||(this.F=1,this.B())}stop(){this.F&&(this.F=0,this.N())}update(e=$now()){let t;if(e>this.W){this.A=~~(60*(t=e-this.W)+.5)/1e3;const n=this.head;let i=n.next;for(;null!==i;)i=i.L(this.A);null===n.next&&this.N()}else this.A=0;this.W=e}q(){return null===this.T&&(this.T=new Promise(e=>{this.resolve=e})),this.T}B(){-1===this.M&&null!==this.head.next&&(this.W=$now(),this.M=$raf(this.O))}N(){-1!==this.M&&($caf(this.M),this.M=-1)}}const camelCaseLookup={},kebabCaseLookup={},PLATFORM={global:$global,S:new Ticker,K:Object.freeze([]),P:Object.freeze({}),j:$noop,now:$now,mark:$mark,measure:$measure,getEntriesByName:$getEntriesByName,getEntriesByType:$getEntriesByType,clearMarks:$clearMarks,clearMeasures:$clearMeasures,_(e){let value=camelCaseLookup[e];if(void 0!==value)return value;value="";let t,n=1,i=0;for(let r=0,s=e.length;s>r;++r)"-"===(t=e.charAt(r))||"."===t||"_"===t?i=1:(value+=n?t.toLowerCase():i?t.toUpperCase():t,i=0),n=0;return camelCaseLookup[e]=value},G(e){let value=kebabCaseLookup[e];if(void 0!==value)return value;value="";let t,n,i=1;for(let r=0,s=e.length;s>r;++r)n=(t=e.charAt(r)).toLowerCase(),value+=i?n:t!==n?`-${n}`:n,i=0;return kebabCaseLookup[e]=value},toArray(e){const t=e.length,n=Array(t);for(let i=0;t>i;++i)n[i]=e[i];return n},requestAnimationFrame:e=>$raf(e),clearInterval(e){$global.clearInterval(e)},clearTimeout(e){$global.clearTimeout(e)},setInterval:(e,t,...n)=>$global.setInterval(e,t,...n),setTimeout:(e,t,...n)=>$global.setTimeout(e,t,...n)},Reporter={write(e,...t){},error:e=>Error(`Code ${e}`)},Tracer={enabled:0,H:0,J:null,U(name,e){},V(){},X(e){},Y(e){},Z(e){},ee(){}};"getOwnMetadata"in Reflect||(Reflect.te=function(e,t){return t[e]},Reflect.ne=function(e,t){return function(n){n[e]=t}});const DI={ie:createContainer,re:e=>Reflect.te("design:paramtypes",e)||PLATFORM.K,se(e){let dependencies;if(void 0===e.inject)dependencies=DI.re(e);else{dependencies=[];let t=e;for(;"function"==typeof t;)t.hasOwnProperty("inject")&&dependencies.push(...t.inject),t=Object.getPrototypeOf(t)}return dependencies},oe(e){const Key=function(t,n,i){if(Key.le=e||"Interface",void 0===t)throw Reporter.error(16,Key.le,Key);return(t.inject||(t.inject=[]))[i]=Key,t};return Key.ue=function(){return Key},Key.ae=function(e){return Key.ae=function(){throw Reporter.error(17,Key)},Key.register=function(t,n){const i=n||Key;return e({ce:value=>t.he(i,new Resolver(i,0,value)),singleton:value=>t.he(i,new Resolver(i,1,value)),transient:value=>t.he(i,new Resolver(i,2,value)),R:value=>t.he(i,new Resolver(i,3,value)),fe:e=>t.he(i,new Resolver(i,5,e))})},Key},Key},inject:(...dependencies)=>(function(e,t,n){if("number"==typeof n){if(!e.hasOwnProperty("inject")){const t=DI.re(e);e.inject=t.slice()}1===dependencies.length&&(e.inject[n]=dependencies[0])}else if(t){const n=e.constructor;(n.inject||(n.inject={}))[t]=dependencies[0]}else if(n)n.value.inject=dependencies;else if(0===dependencies.length){const t=DI.re(e);e.inject=t.slice()}else e.inject=dependencies}),transient:e=>(e.register=function(t){return Registration.transient(e,e).register(t,e)},e),singleton:e=>(e.register=function(t){return Registration.singleton(e,e).register(t,e)},e)},IContainer=DI.oe("IContainer").ue(),IServiceLocator=IContainer,inject=DI.inject,all=createResolver((e,t,n)=>n.getAll(e)),lazy=createResolver((e,t,n)=>{let i=null;return()=>(null===i&&(i=n.get(e)),i)}),optional=createResolver((e,t,n)=>n.has(e,1)?n.get(e):null);var ResolverStrategy;(function(e){e[e.ce=0]="instance",e[e.singleton=1]="singleton",e[e.transient=2]="transient",e[e.R=3]="callback",e[e.$e=4]="array",e[e.ve=5]="alias"})(ResolverStrategy||(ResolverStrategy={}));class Resolver{constructor(e,strategy,t){this.key=e,this.strategy=strategy,this.state=t}register(e,t){return e.he(t||this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const t=e.be(this.state);return this.state=t.construct(e)}case 2:return e.be(this.state).construct(t);case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return e.get(this.state);default:throw Reporter.error(6,this.strategy)}}be(e){switch(this.strategy){case 1:case 2:return e.be(this.state);default:return null}}}class Factory{constructor(e,t,dependencies){this.ke=e,this.me=t,this.dependencies=dependencies,this.Re=null}static create(e){const dependencies=DI.se(e);return new Factory(e,classInvokers[dependencies.length]||fallbackInvoker,dependencies)}construct(e,t){const n=this.Re;let i=void 0!==t?this.me.we(e,this.ke,this.dependencies,t):this.me.ge(e,this.ke,this.dependencies);if(null===n)return i;for(let e=0,t=n.length;t>e;++e)i=n[e](i);return i}ye(e){return null===this.Re&&(this.Re=[]),this.Re.push(e),1}}const containerResolver={resolve:(e,t)=>t};class Container{constructor(e={}){this.parent=null,this.de=new Map,this.De=e,this.pe=e.pe||(e.pe=new Map),this.Ce=e.Ce||(e.Ce=Object.create(null)),this.de.set(IContainer,containerResolver)}register(...e){for(let t=0,n=e.length;n>t;++t){const n=e[t];if(isRegistry(n))n.register(this);else{const e=Object.keys(n);for(let t=0,i=e.length;i>t;++t){const value=n[e[t]];isRegistry(value)?value.register(this):this.register(value)}}}return this}he(e,t){validateKey(e);const n=this.de,i=n.get(e);return void 0===i?(n.set(e,t),"string"==typeof e&&(this.Ce[e]=t)):i instanceof Resolver&&4===i.strategy?i.state.push(t):n.set(e,new Resolver(e,4,[i,t])),t}ye(e,t){const n=this.Ie(e);if(null===n)return 0;if(n.be){const e=n.be(this);return null===e?0:e.ye(t)}return 0}Ie(e,t=1){if(validateKey(e),e.resolve)return e;let n=this;for(;null!==n;){const i=n.de.get(e);if(void 0!==i)return i;if(null===n.parent)return t?this.Le(e,n):null;n=n.parent}return null}has(e,t=0){return this.de.has(e)?1:t&&null!==this.parent?this.parent.has(e,1):0}get(e){if(validateKey(e),e.resolve)return e.resolve(this,this);let t=this;for(;null!==t;){let n=t.de.get(e);if(void 0!==n)return n.resolve(t,this);if(null===t.parent)return(n=this.Le(e,t)).resolve(t,this);t=t.parent}}getAll(e){validateKey(e);let t=this;for(;null!==t;){const n=t.de.get(e);if(void 0!==n)return buildAllResponse(n,t,this);if(null===this.parent)return PLATFORM.K;t=t.parent}return PLATFORM.K}be(e){let t=this.pe.get(e);return void 0===t&&(t=Factory.create(e),this.pe.set(e,t)),t}Me(){const e=this.De,t={pe:e.pe,Ce:Object.assign({},e.Ce)},n=new Container(t);return n.parent=this,n}Le(e,t){if(e.register){const n=e.register(t,e);if(!n||!n.resolve)throw Reporter.error(40);return n}const n=new Resolver(e,1,e);return t.de.set(e,n),n}}const Registration={ce:(e,value)=>new Resolver(e,0,value),singleton:(e,value)=>new Resolver(e,1,value),transient:(e,value)=>new Resolver(e,2,value),R:(e,t)=>new Resolver(e,3,t),ve:(e,t)=>new Resolver(t,5,e),Ae:(e,...t)=>({register(n){const i=n.Ie(e);if(null!==i){let e=null;if(i.be){const r=i.be(n);null!==r&&(e=r.construct(n,t))}else e=i.resolve(n,n);null!==e&&e.register(n)}}})},classInvokers=[{ge:(e,t)=>new t,we:invokeWithDynamicDependencies},{ge:(e,t,n)=>new t(e.get(n[0])),we:invokeWithDynamicDependencies},{ge:(e,t,n)=>new t(e.get(n[0]),e.get(n[1])),we:invokeWithDynamicDependencies},{ge:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2])),we:invokeWithDynamicDependencies},{ge:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3])),we:invokeWithDynamicDependencies},{ge:(e,t,n)=>new t(e.get(n[0]),e.get(n[1]),e.get(n[2]),e.get(n[3]),e.get(n[4])),we:invokeWithDynamicDependencies}],fallbackInvoker={ge:invokeWithDynamicDependencies,we:invokeWithDynamicDependencies},Profiler=(function(){const e=PLATFORM.now,t=[];let n;const i={We(name){t.push(name);let i=0,r=0;return{U(){1==++i&&(r=e(),++n[name].Ee),++n[name].Fe},V(){0==--i&&(n[name].duration+=e()-r)}}},enable(){n={};for(const e of t)n[e]={name:e,duration:0,Ee:0,Fe:0};i.enabled=1},disable(){i.enabled=0},Te(e){Object.keys(n).map(e=>n[e]).sort((e,t)=>t.duration-e.duration).forEach(t=>{e(t.name,t.duration,t.Ee,t.Fe)})},enabled:0};return i})();class RuntimeCompilationResources{constructor(e){this.context=e}find(e,name){const t=e.Oe(name),n=this.context.Ce;let i=n[t];if(void 0===i&&(i=n[t]=this.context.Ie(t,0)),null!==i&&i.be){const e=i.be(this.context);if(null!==e){const t=e.ke.description;return void 0===t?null:t}}return null}create(e,name){const t=e.Oe(name),n=this.context.Ce;let i=n[t];if(void 0===i&&(i=n[t]=this.context.Ie(t,0)),null!==i){const e=i.resolve(this.context,this.context);return void 0===e?null:e}return null}}export{all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton,transient,PLATFORM,Reporter,Tracer,Profiler,RuntimeCompilationResources};
