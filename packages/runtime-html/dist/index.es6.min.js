function __decorate(t,e,s,i){var r,n,o=arguments.length,h=3>o?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,e,s,i);else for(n=t.length-1;n>=0;n--)(r=t[n])&&(h=(3>o?r(h):o>3?r(e,s,h):r(e,s))||h);return o>3&&h&&Object.defineProperty(e,s,h),h}function findOriginalEventTarget(t){return t.t&&t.t()[0]||t.s&&t.s()[0]||t.path&&t.path[0]||t.target}function stopPropagation(){this.i(),this.o=1}function handleCapturedEvent(t){t.o=0;let e=findOriginalEventTarget(t);const s=[];for(;e;){if(e.h){const i=e.h[t.type];i&&(t.stopPropagation!==stopPropagation&&(t.i=t.stopPropagation,t.stopPropagation=stopPropagation),s.push(i))}e=e.parentNode}for(let e=s.length-1;e>=0&&!t.o;e--){const i=s[e];"handleEvent"in i?i.l(t):i(t)}}function handleDelegatedEvent(t){t.o=0;let e=findOriginalEventTarget(t);for(;e&&!t.o;){if(e.u){const s=e.u[t.type];s&&(t.stopPropagation!==stopPropagation&&(t.i=t.stopPropagation,t.stopPropagation=stopPropagation),"handleEvent"in s?s.l(t):s(t))}e=e.parentNode}}function defaultMatcher$1(t,e){return t===e}function isDataAttribute(t,e,s){if(1==IsDataAttribute[e])return 1;const i=e.slice(0,5);return IsDataAttribute[e]="aria-"===i||"data-"===i||s.g(t,e)}function handleSelfEvent(t){const e=findOriginalEventTarget(t);if(this.target===e)return this.p(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,e,s){return"string"==typeof t?createElementForTag(dom,t,e,s):createElementForType(dom,t,e,s)}function createElementForTag(dom,t,e,s){const instructions=[],i=[],dependencies=[],r=dom.createElement(t);let n=0;return e&&Object.keys(e).forEach(to=>{const value=e[to];isHTMLTargetedInstruction(value)?(n=1,instructions.push(value)):dom.setAttribute(r,to,value)}),n&&(dom.v(r),i.push(instructions)),s&&addChildren(dom,r,s,i,dependencies),new RenderPlan(dom,r,i,dependencies)}function createElementForType(dom,t,e,s){const i=t.description.name,instructions=[],r=[instructions],dependencies=[],n=[],bindables=t.description.bindables,o=dom.createElement(i);return dom.v(o),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(i,n)),e&&Object.keys(e).forEach(to=>{const value=e[to];isHTMLTargetedInstruction(value)?n.push(value):n.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}),s&&addChildren(dom,o,s,r,dependencies),new RenderPlan(dom,o,r,dependencies)}function addChildren(dom,t,e,s,dependencies){for(let i=0,r=e.length;r>i;++i){const r=e[i];switch(typeof r){case"string":dom.appendChild(t,dom.createTextNode(r));break;case"object":dom.A(r)?dom.appendChild(t,r):"mergeInto"in r&&r.m(t,s,dependencies)}}}function isRenderLocation(t){return"au-end"===t.textContent}var HTMLTargetedInstructionType,NodeType;import{DI,Registration,Reporter,PLATFORM}from"@aurelia/kernel";import{LifecycleFlags,hasBind,hasUnbind,targetObserver,DelegationStrategy,ITargetObserverLocator,SetterObserver,IDOM,ITargetAccessorLocator,ILifecycle,BindingBehaviorResource,BindingMode,IObserverLocator,buildTemplateDefinition,HydrateElementInstruction,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator,bindable,CustomElementResource,DOM,INode,ITemplateFactory,CompiledTemplate,NodeSequence,IExpressionParser,instructionRenderer,ensureExpression,MultiInterpolationBinding,InterpolationBinding,addBinding,Binding,IProjectorLocator,RuntimeBasicConfiguration}from"@aurelia/runtime";class Listener{constructor(dom,t,e,s,i,preventDefault,r,n){this.dom=dom,this.T=null,this.B=null,this.$state=0,this.R=e,this.S=n,this.preventDefault=preventDefault,this.O=s,this.target=i,this.L=t,this.I=r}C(t){const e=this.$scope.M;e.D=t;const s=this.O.evaluate(LifecycleFlags.P,this.$scope,this.S);return Reflect.deleteProperty(e,"$event"),1!=s&&this.preventDefault&&t.preventDefault(),s}l(t){this.C(t)}F(t,e){if(2&this.$state){if(this.$scope===e)return;this.N(t|LifecycleFlags.V)}this.$state|=1,this.$scope=e;const s=this.O;hasBind(s)&&s.bind(t,e,this),this.k=this.I.addEventListener(this.dom,this.target,this.L,this,this.R),this.$state|=2,this.$state&=-2}N(t){if(!(2&this.$state))return;this.$state|=64;const e=this.O;hasUnbind(e)&&e._(t,this.$scope,this),this.$scope=null,this.k.j(),this.k=null,this.$state&=-67}H(t,e,s){}$(t,e,s){}}let AttributeNSAccessor=class{constructor(t,e,s,i,r){this.U=1,this.attributeName=i,this.q=t,this.G=e,this.oldValue=this.X=this.Z(),this.J=s,this.K=r}Z(){return this.G.getAttributeNS(this.K,this.attributeName)}W(t){this.G.setAttributeNS(this.K,this.attributeName,t)}};AttributeNSAccessor=__decorate([targetObserver("")],AttributeNSAccessor);const handleEventFlags=LifecycleFlags.Y|LifecycleFlags.tt,defaultHandleBatchedChangeFlags=LifecycleFlags.et|LifecycleFlags.st,defaultMatcher=(t,e)=>t===e;let CheckedObserver=class{constructor(t,e,s,i,r){this.it=t&LifecycleFlags.rt,this.U=1,this.k=i,this.q=e,this.G=s,this.nt=r}Z(){return this.X}W(t,e){this.ot||(this.ot=this.G.ht&&(this.G.ht.ct||this.G.ht.value),this.ot&&this.ot.subscribe(this)),this.at&&(this.at.lt(this),this.at=null),"checkbox"===this.G.type&&Array.isArray(t)&&(this.at=this.nt.ut(this.it|e,t),this.at.dt(this)),this.gt()}bt(){this.gt(),this.pt(defaultHandleBatchedChangeFlags)}$(t,e,s){this.gt(),this.pt(s)}gt(){const value=this.X,t=this.G,e=t.hasOwnProperty("model")?t.ct:t.value,s=t.ft||defaultMatcher;t.checked="radio"===t.type?!!s(value,e):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!s(t,e)):0}pt(t){t&LifecycleFlags.V||this.X!==this.oldValue&&this.vt(this.X,this.oldValue,this.it|t)}l(){let value=this.X;const t=this.G,e=t.hasOwnProperty("model")?t.ct:t.value;let s;const i=t.ft||defaultMatcher;if("checkbox"===t.type){if(Array.isArray(value))return s=value.findIndex(t=>!!i(t,e)),void(t.checked&&-1===s?value.push(e):t.checked||-1===s||value.splice(s,1));value=t.checked}else{if(!t.checked)return;value=e}this.oldValue=this.X,this.X=value,this.pt(handleEventFlags)}subscribe(t){this.At()||this.k.subscribe(this.G,this),this.Tt(t)}unsubscribe(t){this.yt(t)&&!this.At()&&this.k.j()}_(){this.at&&(this.at.lt(this),this.at=null),this.ot&&this.ot.unsubscribe(this)}};CheckedObserver=__decorate([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,e){this.U=1,this.Bt=1,this.q=t,this.Rt=null,this.G=e,this.version=0}Z(){return this.X}W(t){const e=this.Rt||{};let s,name,i=this.version;if(t.length){const r=this.G;for(let n=0,o=(s=t.split(/\s+/)).length;o>n;n++)(name=s[n]).length&&(e[name]=i,r.classList.add(name))}if(this.Rt=e,this.version+=1,0!==i)for(name in i-=1,e)e.hasOwnProperty(name)&&e[name]===i&&this.G.classList.remove(name)}};ClassAttributeAccessor=__decorate([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,e,s){this.U=1,this.q=t,this.G=e,this.oldValue=this.X=this.Z(),this.J=s}Z(){return this.G.getAttribute(this.J)}W(t){null===t?this.G.removeAttribute(this.J):this.G.setAttribute(this.J,t)}};DataAttributeAccessor=__decorate([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,e,s){this.U=1,this.q=t,this.G=e,this.J=s}Z(){return this.G[this.J]}W(value){this.G[this.J]=value}};ElementPropertyAccessor=__decorate([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,e,s){this.dom=dom,this.St=s,this.count=0,this.Ot=t,this.listener=e}Lt(){this.count++,1===this.count&&this.dom.addEventListener(this.Ot,this.listener,null,this.St)}Et(){this.count--,0===this.count&&this.dom.removeEventListener(this.Ot,this.listener,null,this.St)}j(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.Ot,this.listener,null,this.St))}}class DelegateOrCaptureSubscription{constructor(t,e,s,i){this.It=t,this.wt=e,this.L=s,e[s]=i}j(){this.It.Et(),this.wt[this.L]=null}}class TriggerSubscription{constructor(dom,t,e,s){this.dom=dom,this.target=t,this.L=e,this.Ct=s,dom.addEventListener(e,s,t)}j(){this.dom.removeEventListener(this.L,this.Ct,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.Mt=t,this.target=null,this.k=null}subscribe(t,e){this.target=t,this.k=e;const s=this.dom.addEventListener,i=this.Mt;for(let r=0,n=i.length;n>r;++r)s(i[r],e,t)}j(){const t=this.target,e=this.k,s=this.Mt,i=this.dom.removeEventListener;for(let r=0,n=s.length;n>r;++r)i(s[r],e,t);this.target=this.k=null}}const IEventManager=DI.Pt("IEventManager").Dt(t=>t.singleton(EventManager));class EventManager{constructor(){this.Ft={},this.xt={},this.Ft={},this.xt={}}addEventListener(dom,t,e,s,strategy){let i,r,n;if(strategy===DelegationStrategy.Nt){(n=(i=this.Ft)[e]||(i[e]=new ListenerTracker(dom,e,handleDelegatedEvent,0))).Lt();const r=t.u||(t.u={});return new DelegateOrCaptureSubscription(n,r,e,s)}if(strategy===DelegationStrategy.Vt){(n=(r=this.xt)[e]||(r[e]=new ListenerTracker(dom,e,handleCapturedEvent,1))).Lt();const i=t.h||(t.h={});return new DelegateOrCaptureSubscription(n,i,e,s)}return new TriggerSubscription(dom,t,e,s)}j(){let t;const{Ft:e,xt:s}=this;for(t in e)e[t].j();for(t in s)s[t].j()}}const handleEventFlags$1=LifecycleFlags.Y|LifecycleFlags.tt,childObserverOptions={kt:1,_t:1,jt:1};let SelectValueObserver=class{constructor(t,e,s,i,r,dom){this.it=t&LifecycleFlags.rt,this.U=1,this.q=e,this.G=s,this.k=i,this.nt=r,this.dom=dom}Z(){return this.X}W(t,e){const s=Array.isArray(t);if(!s&&null!=t&&this.G.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.at&&(this.at.lt(this),this.at=null),s&&(this.at=this.nt.ut(this.it|e,t),this.at.dt(this)),this.Ht(),this.pt(e)}bt(t){this.Ht(t)}$(t,e,s){this.$t(t,this.it|s)}pt(t){if(t&LifecycleFlags.V)return;const e=this.oldValue,s=this.X;s!==e&&this.vt(s,e,this.it|t)}l(){this.Ut()&&this.pt(handleEventFlags$1)}Ht(t){const e=this.X,s=Array.isArray(e),i=this.G,r=i.ft||defaultMatcher$1,n=i.options;let o=n.length;for(;o--;){const t=n[o],i=t.hasOwnProperty("model")?t.ct:t.value;t.selected=s?-1!==e.findIndex(t=>!!r(i,t)):!!r(i,e)}}Ut(){const t=this.G,e=t.options,s=e.length,i=this.X;let r=0;if(t.multiple){if(!Array.isArray(i))return 1;let n;const o=t.ft||defaultMatcher$1,h=[];for(;s>r;)(n=e[r]).selected&&h.push(n.hasOwnProperty("model")?n.ct:n.value),++r;for(r=0;i.length>r;){const t=i[r];-1===h.findIndex(e=>!!o(t,e))?i.splice(r,1):++r}for(r=0;h.length>r;){const t=h[r];-1===i.findIndex(e=>!!o(t,e))&&i.push(t),++r}return 0}let value=null;for(;s>r;){const t=e[r];if(t.selected){value=t.hasOwnProperty("model")?t.ct:t.value;break}++r}return this.oldValue=this.X,this.X=value,1}subscribe(t){this.At()||this.k.subscribe(this.G,this),this.Tt(t)}unsubscribe(t){this.yt(t)&&!this.At()&&this.k.j()}bind(){this.qt=this.dom.zt(this.G,this.Gt.bind(this),childObserverOptions)}_(){this.qt.disconnect(),this.qt=null,this.at&&(this.at.lt(this),this.at=null)}Gt(){this.Ht(),this.Ut()&&this.pt(handleEventFlags$1)}};SelectValueObserver=__decorate([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,e){this.U=1,this.oldValue=this.X=e.style.cssText,this.q=t,this.G=e,this.Xt=null,this.version=0}Z(){return this.G.style.cssText}Zt(t,value){let e="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(e="important",value=value.replace("!important","")),this.G.style.setProperty(t,value,e)}W(t){const e=this.Xt||{};let s,i=this.version;if(null!==t)if(t instanceof Object){let value;for(s in t)t.hasOwnProperty(s)&&(value=t[s],e[s=s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=i,this.Zt(s,value))}else if(t.length){const r=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let n;for(;null!==(n=r.exec(t));)(s=n[1])&&(e[s]=i,this.Zt(s,n[2]))}if(this.Xt=e,this.version+=1,0!==i)for(s in i-=1,e)e.hasOwnProperty(s)&&e[s]===i&&this.G.style.removeProperty(s)}};StyleAttributeAccessor=__decorate([targetObserver()],StyleAttributeAccessor);const ISVGAnalyzer=DI.Pt("ISVGAnalyzer").Dt(t=>t.singleton(class{g(t,e){return 0}})),inputValueDefaults={button:"",Jt:"on",color:"#000000",Kt:"",Qt:"",email:"",Wt:"",hidden:"",Yt:"",te:"",number:"",password:"",ee:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",se:""},handleEventFlags$2=LifecycleFlags.Y|LifecycleFlags.tt;let ValueAttributeObserver=class{constructor(t,e,s,i){if(this.U=1,this.k=i,this.q=t,this.G=e,this.J=s,"value"===s){const t=e.type;this.defaultValue=inputValueDefaults[t||"text"],"file"===t&&(this.flush=this.ie)}else this.defaultValue="";this.oldValue=this.X=e[s]}Z(){return this.G[this.J]}W(t,e){this.G[this.J]=t,e&LifecycleFlags.V||this.vt(this.X,this.oldValue,e)}l(){const t=this.oldValue=this.X,e=this.X=this.Z();t!==e&&(this.vt(e,t,handleEventFlags$2),this.oldValue=e)}subscribe(t){this.At()||(this.oldValue=this.Z(),this.k.subscribe(this.G,this)),this.Tt(t)}unsubscribe(t){this.yt(t)&&!this.At()&&this.k.j()}ie(){const t=this.X;this.oldValue!==t&&""===t&&(this.W(t,this.re),this.oldValue=this.X)}};ValueAttributeObserver=__decorate([targetObserver("")],ValueAttributeObserver);const xlinkNS="http://www.w3.org/1999/xlink",xmlNS="http://www.w3.org/XML/1998/namespace",xmlnsNS="http://www.w3.org/2000/xmlns/",nsAttributes=(function(t){return t["ne"]=["actuate",xlinkNS],t["oe"]=["arcrole",xlinkNS],t["he"]=["href",xlinkNS],t["ce"]=["role",xlinkNS],t["ae"]=["show",xlinkNS],t["le"]=["title",xlinkNS],t["ue"]=["type",xlinkNS],t["de"]=["lang",xmlNS],t["ge"]=["space",xmlNS],t.be=["xmlns",xmlnsNS],t["pe"]=["xlink",xmlnsNS],t})(Object.create(null)),inputEvents=["change","input"],selectEvents=["change"],contentEvents=["change","input","blur","keyup","paste"],scrollEvents=["scroll"],overrideProps=(function(t){return t.fe=1,t.style=1,t.ve=1,t.checked=1,t.value=1,t.ct=1,t["ne"]=1,t["oe"]=1,t["he"]=1,t["ce"]=1,t["ae"]=1,t["le"]=1,t["ue"]=1,t["de"]=1,t["ge"]=1,t.be=1,t["pe"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom,t){this.dom=dom,this.Ae=t}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}me(t,e,s,i,r){switch(r){case"checked":return new CheckedObserver(t,e,i,new EventSubscriber(this.dom,inputEvents),s);case"value":return"SELECT"===i.tagName?new SelectValueObserver(t,e,i,new EventSubscriber(this.dom,selectEvents),s,this.dom):new ValueAttributeObserver(e,i,r,new EventSubscriber(this.dom,inputEvents));case"files":return new ValueAttributeObserver(e,i,r,new EventSubscriber(this.dom,inputEvents));case"textContent":case"innerHTML":return new ValueAttributeObserver(e,i,r,new EventSubscriber(this.dom,contentEvents));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(e,i,r,new EventSubscriber(this.dom,scrollEvents));case"class":return new ClassAttributeAccessor(e,i);case"style":case"css":return new StyleAttributeAccessor(e,i);case"model":return new SetterObserver(t,i,r);case"role":return new DataAttributeAccessor(e,i,r);default:if(void 0!==nsAttributes[r]){const t=nsAttributes[r];return new AttributeNSAccessor(e,i,r,t[0],t[1])}if(isDataAttribute(i,r,this.Ae))return new DataAttributeAccessor(e,i,r)}return null}Te(t,e,s){return 1==overrideProps[s]}ye(t,e){return this.dom.A(e)}}TargetObserverLocator.inject=[IDOM,ISVGAnalyzer];class TargetAccessorLocator{constructor(dom,t){this.dom=dom,this.Ae=t}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}Be(t,e,s,i){switch(i){case"textContent":return new ElementPropertyAccessor(e,s,i);case"class":return new ClassAttributeAccessor(e,s);case"style":case"css":return new StyleAttributeAccessor(e,s);case"src":case"href":case"role":return new DataAttributeAccessor(e,s,i);default:if(void 0!==nsAttributes[i]){const t=nsAttributes[i];return new AttributeNSAccessor(e,s,i,t[0],t[1])}return isDataAttribute(s,i,this.Ae)?new DataAttributeAccessor(e,s,i):new ElementPropertyAccessor(e,s,i)}}ye(t,e){return this.dom.A(e)}}TargetAccessorLocator.inject=[IDOM,ISVGAnalyzer];const IsDataAttribute={};class AttrBindingBehavior{bind(t,e,s){s.targetObserver=new DataAttributeAccessor(s.S.get(ILifecycle),s.target,s.Re)}_(t,e,s){}}BindingBehaviorResource.Se("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,e,s){if(!s.C||!s.L)throw Reporter.error(8);s.p=s.C,s.C=handleSelfEvent}_(t,e,s){s.C=s.p,s.p=null}}BindingBehaviorResource.Se("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.nt=t}bind(t,e,s,...i){if(0===i.length)throw Reporter.error(9);if(s.mode!==BindingMode.Oe&&s.mode!==BindingMode.Le)throw Reporter.error(10);this.it=t&LifecycleFlags.rt;const r=this.nt.me(this.it|t,s.target,s.Re);if(!r.k)throw Reporter.error(10);s.targetObserver=r,r.Ee=s.targetObserver.k,r.k=new EventSubscriber(s.S.get(IDOM),i)}_(t,e,s){s.targetObserver.k.j(),s.targetObserver.k=s.targetObserver.Ee,s.targetObserver.Ee=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Se("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.Ie="ha",HTMLTargetedInstructionType.we="hb",HTMLTargetedInstructionType.Ce="hc",HTMLTargetedInstructionType.setAttribute="hd"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.Me,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Nt,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Vt,this.to=to}}class StylePropertyBindingInstruction{constructor(from,to){this.type="hc",this.from=from,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.De=t}get Pe(){return this.Fe||(this.Fe=buildTemplateDefinition(null,null,this.De,null,"string"==typeof this.De,null,this.instructions,this.dependencies))}xe(t,e){return t.xe(this.dom,this.Pe,null,e)}Ne(t,e,s){return this.Ve(e,s).create()}Ve(t,e){return t.Ve(this.dom,this.Pe,e)}m(t,instructions,dependencies){this.dom.appendChild(t,this.De),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const composeSource={name:"au-compose",containerless:1},composeProps=["subject","composing"];class Compose{constructor(dom,t,e,s,i){this.dom=dom,this.subject=null,this.ke=0,this._e=i,this.je=null,this.He=t,this.$e=s,this._e.Ue=(()=>{this.ke=0}),this.properties=e.instructions.filter(t=>!composeProps.includes(t.to)).reduce((t,e)=>(e.to&&(t[e.to]=e),t),{})}qe(t){this.ze(this.subject,null,t),this._e.qe(t,this.$scope)}Ge(t){this._e.Ge(t)}Xe(t){this._e.Xe(t)}Ze(t){this.je=null,this._e.Ze(t)}Je(t){this._e.Je(t)}Ke(t,e,s){this.ze(t,e,s)}ze(t,e,s){this.je!==t&&(this.je=t,t=t instanceof Promise?t.then(t=>this.Qe(t,s)):this.Qe(t,s),this.ke=1,this._e.We(t,s))}Qe(t,e){const s=this.Ye(t,e);return s?(s.ts(this.es.host),s.ss(this.He.$scope),s):null}Ye(t,e){return t?"lockScope"in t?t:"createView"in t?t.Ne(e,this.$e,this.He.$context):"create"in t?t.create():"template"in t?this.$e.Ve(this.dom,t,this.He.$context).create():createElement(this.dom,t,this.properties,this.es.children).Ne(e,this.$e,this.He.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],__decorate([bindable],Compose.prototype,"subject",void 0),__decorate([bindable],Compose.prototype,"composing",void 0),CustomElementResource.Se(composeSource,Compose),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,e,s,i,r,n){this.window=t,this.document=e,this.Node=s,this.Element=i,this.HTMLElement=r,this.CustomEvent=n,DOM.rs&&(Reporter.write(1001),DOM.ns()),DOM.initialize(this)}static register(t){return Registration.os(IDOM,this).register(t)}addEventListener(t,e,s,i){(s||this.document).addEventListener(t,e,i)}appendChild(t,e){t.appendChild(e)}cloneNode(t,e){return t.cloneNode(0!=e)}hs(t){if(this.cs(t))return t;if(null===t.parentNode)throw Reporter.error(52);const e=this.document.createComment("au-end"),s=this.document.createComment("au-start");return t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(s,e),e.as=s,s.$nodes=null,e}createDocumentFragment(t){if(null==t)return this.document.createDocumentFragment();if(this.A(t)){if(void 0!==t.content)return t.content;const e=this.document.createDocumentFragment();return e.appendChild(t),e}return this.ls(t).content}createElement(name){return this.document.createElement(name)}fetch(t,e){return this.window.fetch(t,e)}us(t,e){return new this.CustomEvent(t,e)}dispatchEvent(t){this.document.dispatchEvent(t)}zt(t,e,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.ds};const i=new MutationObserver(e);return i.observe(t,s),i}ls(t){if(null==t)return this.document.createElement("template");const template=this.document.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.document.createTextNode(t)}insertBefore(t,e){e.parentNode.insertBefore(t,e)}gs(t){return"AU-M"===t.nodeName}A(t){return null!=t&&t.nodeType>0}cs(t){return"au-end"===t.textContent}v(t){t.className="au"}bs(t,e){t.ps(INode,e),t.ps(this.Node,e),t.ps(this.Element,e),t.ps(this.HTMLElement,e)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,e,s,i){(s||this.document).removeEventListener(t,e,i)}setAttribute(t,name,value){t.setAttribute(name,value)}}const $DOM=DOM;class TextNodeSequence{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new AuMarker(t)]}fs(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}vs(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class FragmentNodeSequence{constructor(dom,t){this.dom=dom,this.As=t;const e=t.querySelectorAll(".au");let s=0,i=e.length;const targets=this.targets=Array(i);for(;i>s;){const t=e[s];targets[s]="AU-M"===t.nodeName?this.dom.hs(t):t,++s}const r=t.childNodes;s=0;const childNodes=this.childNodes=Array(i=r.length);for(;i>s;)childNodes[s]=r[s],++s;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}fs(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.As,t),isRenderLocation(t)){this.end=t;const e=this.start=t.as;e.$nodes=null===e.$nodes?this:PLATFORM.ms}}vs(t){t.appendChild(this.As),this.start=this.end=null}remove(){const t=this.As;if(null!==this.start&&this.start.$nodes===this){const e=this.end;let s,i=this.start.nextSibling;for(;i!==e;)s=i.nextSibling,t.appendChild(i),i=s;this.start.$nodes=null,this.start=this.end=null}else{let e=this.firstChild;if(e.parentNode!==t){const s=this.lastChild;let i;for(;null!==e&&(i=e.nextSibling,t.appendChild(e),e!==s);)e=i}}}}class NodeSequenceFactory{constructor(dom,t){this.dom=dom;const e=dom.createDocumentFragment(t),childNodes=e.childNodes;switch(childNodes.length){case 0:return void(this.Ts=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.ys=0,this.De=t,void(this.Bs=TextNodeSequence)}default:this.ys=1,this.De=e,this.Bs=FragmentNodeSequence}}Ts(){return new this.Bs(this.dom,this.De.cloneNode(this.ys))}}class AuMarker{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.ds,t.nodeName="AU-M",t.nodeType=1})(AuMarker.prototype);class HTMLTemplateFactory{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,e){return new CompiledTemplate(this.dom,e,new NodeSequenceFactory(this.dom,e.template),t)}}HTMLTemplateFactory.inject=[IDOM];let TextBindingRenderer=class{constructor(t,e){this.Rs=t,this.nt=e}Ss(t,dom,e,s,i,r){const n=i.nextSibling;let o;dom.gs(i)&&dom.remove(i);const h=ensureExpression(this.Rs,r.from,2048);o=h.Os?new MultiInterpolationBinding(this.nt,h,n,"textContent",BindingMode.Ls,e):new InterpolationBinding(h.Es,h,n,"textContent",BindingMode.Ls,this.nt,e,1),addBinding(s,o)}};TextBindingRenderer.inject=[IExpressionParser,IObserverLocator],TextBindingRenderer=__decorate([instructionRenderer("ha")],TextBindingRenderer);let ListenerBindingRenderer=class{constructor(t,e){this.Rs=t,this.I=e}Ss(t,dom,e,s,i,r){const n=ensureExpression(this.Rs,r.from,80|r.strategy+6),o=new Listener(dom,r.to,r.strategy,n,i,r.preventDefault,this.I,e);addBinding(s,o)}};ListenerBindingRenderer.inject=[IExpressionParser,IEventManager],ListenerBindingRenderer=__decorate([instructionRenderer("hb")],ListenerBindingRenderer);let SetAttributeRenderer=class{Ss(t,dom,e,s,i,r){i.setAttribute(r.to,r.value)}};SetAttributeRenderer=__decorate([instructionRenderer("hd")],SetAttributeRenderer);let StylePropertyBindingRenderer=class{constructor(t,e){this.Rs=t,this.nt=e}Ss(t,dom,e,s,i,r){const n=ensureExpression(this.Rs,r.from,48|BindingMode.Ls),o=new Binding(n,i.style,r.to,BindingMode.Ls,this.nt,e);addBinding(s,o)}};StylePropertyBindingRenderer.inject=[IExpressionParser,IObserverLocator],StylePropertyBindingRenderer=__decorate([instructionRenderer("hc")],StylePropertyBindingRenderer);const defaultShadowOptions={mode:"open"};class HTMLProjectorLocator{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Is(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new ShadowDOMProjector(dom,t,host,def)}return def.containerless?new ContainerlessProjector(dom,t,host):new HostProjector(t,host)}}const childObserverOptions$1={kt:1};class ShadowDOMProjector{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.ws(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:defaultShadowOptions),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}Cs(t){this.dom.zt(this.shadowRoot,t,childObserverOptions$1)}Ms(){return this.shadowRoot}Ds(t){t.vs(this.shadowRoot)}Ps(t){t.remove()}}class ContainerlessProjector{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.ds,this.host=dom.hs(host),this.host.$customElement=$customElement}get children(){return this.childNodes}Cs(t){new MutationObserver(t).observe(this.host,childObserverOptions$1)}Ms(){return this.host.Fs()}Ds(t){t.insertBefore(this.host)}Ps(t){t.remove()}}class HostProjector{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}Cs(t){}Ms(){return this.host.Fs()}Ds(t){t.vs(this.host)}Ps(t){t.remove()}}const IProjectorLocatorRegistration=HTMLProjectorLocator,ITargetAccessorLocatorRegistration=TargetAccessorLocator,ITargetObserverLocatorRegistration=TargetObserverLocator,ITemplateFactoryRegistration=HTMLTemplateFactory,DefaultComponents=[HTMLProjectorLocator,TargetAccessorLocator,TargetObserverLocator,HTMLTemplateFactory],AttrBindingBehaviorRegistration=AttrBindingBehavior,SelfBindingBehaviorRegistration=SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration=UpdateTriggerBindingBehavior,ComposeRegistration=Compose,DefaultResources=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],ListenerBindingRendererRegistration=ListenerBindingRenderer,SetAttributeRendererRegistration=SetAttributeRenderer,StylePropertyBindingRendererRegistration=StylePropertyBindingRenderer,TextBindingRendererRegistration=TextBindingRenderer,DefaultRenderers=[ListenerBindingRenderer,SetAttributeRenderer,StylePropertyBindingRenderer,TextBindingRenderer],BasicConfiguration={register:t=>RuntimeBasicConfiguration.register(t).register(...DefaultComponents,...DefaultResources,...DefaultRenderers),xs(){return this.register(DI.xs())}};export{Listener,AttributeNSAccessor,CheckedObserver,ClassAttributeAccessor,DataAttributeAccessor,ElementPropertyAccessor,ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,TargetAccessorLocator,TargetObserverLocator,SelectValueObserver,StyleAttributeAccessor,ISVGAnalyzer,ValueAttributeObserver,AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration,ITargetAccessorLocatorRegistration,ITargetObserverLocatorRegistration,ITemplateFactoryRegistration,DefaultComponents,AttrBindingBehaviorRegistration,SelfBindingBehaviorRegistration,UpdateTriggerBindingBehaviorRegistration,ComposeRegistration,DefaultResources,ListenerBindingRendererRegistration,SetAttributeRendererRegistration,StylePropertyBindingRendererRegistration,TextBindingRendererRegistration,DefaultRenderers,BasicConfiguration,createElement,RenderPlan,HTMLTargetedInstructionType,isHTMLTargetedInstruction,NodeType,HTMLDOM,$DOM as DOM,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction,TextBindingInstruction,TriggerBindingInstruction};
