System.register("runtimeHtml",["@aurelia/kernel","@aurelia/runtime"],function(t){"use strict";var DI,Reporter,PLATFORM,Registration,IContainer,LifecycleFlags,hasBind,hasUnbind,targetObserver,DelegationStrategy,SetterObserver,IDOM,ILifecycle,BindingBehaviorResource,BindingMode,IObserverLocator,buildTemplateDefinition,HydrateElementInstruction,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator,bindable,CustomElementResource,INode,CompiledTemplate,NodeSequence,IExpressionParser,instructionRenderer,ensureExpression,MultiInterpolationBinding,InterpolationBinding,addBindable,Binding,RuntimeConfiguration,IDOMInitializer,IProjectorLocator,ITargetAccessorLocator,ITargetObserverLocator,ITemplateFactory;return{t:[function(t){DI=t.DI,Reporter=t.Reporter,PLATFORM=t.PLATFORM,Registration=t.Registration,IContainer=t.IContainer},function(t){LifecycleFlags=t.LifecycleFlags,hasBind=t.hasBind,hasUnbind=t.hasUnbind,targetObserver=t.targetObserver,DelegationStrategy=t.DelegationStrategy,SetterObserver=t.SetterObserver,IDOM=t.IDOM,ILifecycle=t.ILifecycle,BindingBehaviorResource=t.BindingBehaviorResource,BindingMode=t.BindingMode,IObserverLocator=t.IObserverLocator,buildTemplateDefinition=t.buildTemplateDefinition,HydrateElementInstruction=t.HydrateElementInstruction,IRenderable=t.IRenderable,ITargetedInstruction=t.ITargetedInstruction,IRenderingEngine=t.IRenderingEngine,CompositionCoordinator=t.CompositionCoordinator,bindable=t.bindable,CustomElementResource=t.CustomElementResource,INode=t.INode,CompiledTemplate=t.CompiledTemplate,NodeSequence=t.NodeSequence,IExpressionParser=t.IExpressionParser,instructionRenderer=t.instructionRenderer,ensureExpression=t.ensureExpression,MultiInterpolationBinding=t.MultiInterpolationBinding,InterpolationBinding=t.InterpolationBinding,addBindable=t.addBindable,Binding=t.Binding,RuntimeConfiguration=t.RuntimeConfiguration,IDOMInitializer=t.IDOMInitializer,IProjectorLocator=t.IProjectorLocator,ITargetAccessorLocator=t.ITargetAccessorLocator,ITargetObserverLocator=t.ITargetObserverLocator,ITemplateFactory=t.ITemplateFactory}],s(){function s(t,s,i,h){var e,n,r=arguments.length,o=3>r?s:null===h?h=Object.getOwnPropertyDescriptor(s,i):h;if("object"==typeof Reflect&&"function"==typeof Reflect.i)o=Reflect.i(t,s,i,h);else for(n=t.length-1;n>=0;n--)(e=t[n])&&(o=(3>r?e(o):r>3?e(s,i,o):e(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function i(t){return t.h&&t.h()[0]||t.o&&t.o()[0]||t.path&&t.path[0]||t.target}function h(){this.u(),this.l=1}function e(t){t.l=0;let s=i(t);const e=[];for(;s;){if(s.g){const i=s.g[t.type];i&&(t.stopPropagation!==h&&(t.u=t.stopPropagation,t.stopPropagation=h),e.push(i))}s=s.parentNode}for(let s=e.length-1;s>=0&&!t.l;s--){const i=e[s];"handleEvent"in i?i.m(t):i(t)}}function n(t){t.l=0;let s=i(t);for(;s&&!t.l;){if(s.p){const i=s.p[t.type];i&&(t.stopPropagation!==h&&(t.u=t.stopPropagation,t.stopPropagation=h),"handleEvent"in i?i.m(t):i(t))}s=s.parentNode}}function r(t,s){return t===s}function o(t){const s=i(t);if(this.target===s)return this.A(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,s,i){return"string"==typeof t?(function(dom,s,i,h){const instructions=[],e=[],dependencies=[],n=dom.createElement(t);let r=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(r=1,instructions.push(value)):dom.setAttribute(n,to,value)}),r&&(dom.v(n),e.push(instructions)),h&&c(dom,n,h,e,dependencies),new RenderPlan(dom,n,e,dependencies)})(dom,0,s,i):(function(dom,t,s,i){const h=t.description.name,instructions=[],e=[instructions],dependencies=[],n=[],bindables=t.description.bindables,r=dom.createElement(h);return dom.v(r),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(h,n)),s&&Object.keys(s).forEach(to=>{const value=s[to];if(isHTMLTargetedInstruction(value))n.push(value);else{n.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),i&&c(dom,r,i,e,dependencies),new RenderPlan(dom,r,e,dependencies)})(dom,t,s,i)}function c(dom,t,s,i,dependencies){for(let h=0,e=s.length;e>h;++h){const e=s[h];switch(typeof e){case"string":dom.appendChild(t,dom.createTextNode(e));break;case"object":dom.C(e)?dom.appendChild(t,e):"mergeInto"in e&&e.T(t,i,dependencies)}}}var u,l;t({createElement,isHTMLTargetedInstruction});class Listener{constructor(dom,t,s,i,h,preventDefault,e,n){this.dom=dom,this.S=null,this.O=null,this.$state=0,this.L=s,this.M=n,this.preventDefault=preventDefault,this.B=i,this.target=h,this.j=t,this.V=e}k(t){const s=this.$scope.I;s.N=t;const i=this.B.evaluate(LifecycleFlags.R,this.$scope,this.M);return delete s.N,1!=i&&this.preventDefault&&t.preventDefault(),i}m(t){this.k(t)}H(t,s){if(2&this.$state){if(this.$scope===s)return;this.D(t|LifecycleFlags.U)}this.$state|=1,this.$scope=s;const i=this.B;hasBind(i)&&i.bind(t,s,this),this.P=this.V.addEventListener(this.dom,this.target,this.j,this,this.L),this.$state|=2,this.$state&=-2}D(t){if(!(2&this.$state))return;this.$state|=64;const s=this.B;hasUnbind(s)&&s.G(t,this.$scope,this),this.$scope=null,this.P.F(),this.P=null,this.$state&=-67}q(t,s){}X(t,s,i){}}t("Listener",Listener);let AttributeNSAccessor=t("AttributeNSAccessor",class{constructor(t,s,i,h,e){this.Z=1,this.attributeName=h,this.$=t,this.J=s,this.oldValue=this.K=this.W(),this.Y=i,this._=e}W(){return this.J.getAttributeNS(this._,this.attributeName)}tt(t){this.J.setAttributeNS(this._,this.attributeName,t)}});AttributeNSAccessor=t("AttributeNSAccessor",s([targetObserver("")],AttributeNSAccessor));const a=LifecycleFlags.st|LifecycleFlags.it,f=LifecycleFlags.ht|LifecycleFlags.et,b=(t,s)=>t===s;let CheckedObserver=t("CheckedObserver",class{constructor(t,s,i,h){this.Z=1,this.P=i,this.$=t,this.J=s,this.nt=h}W(){return this.K}tt(t,s){this.rt||(this.rt=this.J.ot&&(this.J.ot.ct||this.J.ot.value),this.rt&&this.rt.subscribe(this)),this.ut&&(this.ut.lt(this),this.ut=null),"checkbox"===this.J.type&&Array.isArray(t)&&(this.ut=this.nt.at(t),this.ut.ft(this)),this.bt()}dt(){this.bt(),this.wt(f)}X(t,s,i){this.bt(),this.wt(i)}bt(){const value=this.K,t=this.J,s=t.hasOwnProperty("model")?t.ct:t.value,i=t.gt||b;t.checked="radio"===t.type?!!i(value,s):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,s)):0}wt(t){t&LifecycleFlags.U||this.K!==this.oldValue&&this.pt(this.K,this.oldValue,t)}m(){let value=this.K;const t=this.J,s=t.hasOwnProperty("model")?t.ct:t.value;let i;const h=t.gt||b;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!h(t,s)),void(t.checked&&-1===i?value.push(s):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=s}this.oldValue=this.K,this.K=value,this.wt(a)}subscribe(t){this.At()||this.P.subscribe(this.J,this),this.vt(t)}unsubscribe(t){this.Ct(t)&&!this.At()&&this.P.F()}G(){this.ut&&(this.ut.lt(this),this.ut=null),this.rt&&this.rt.unsubscribe(this)}});CheckedObserver=t("CheckedObserver",s([targetObserver()],CheckedObserver));let ClassAttributeAccessor=t("ClassAttributeAccessor",class{constructor(t,s){this.Z=1,this.Et=1,this.$=t,this.Tt=null,this.J=s,this.version=0}W(){return this.K}tt(t){const s=this.Tt||{};let i,name,h=this.version;if(t.length){const e=this.J;for(let n=0,r=(i=t.split(/\s+/)).length;r>n;n++)(name=i[n]).length&&(s[name]=h,e.classList.add(name))}if(this.Tt=s,this.version+=1,0!==h)for(name in h-=1,s)s.hasOwnProperty(name)&&s[name]===h&&this.J.classList.remove(name)}});ClassAttributeAccessor=t("ClassAttributeAccessor",s([targetObserver("")],ClassAttributeAccessor));let DataAttributeAccessor=t("DataAttributeAccessor",class{constructor(t,s,i){this.Z=1,this.$=t,this.J=s,this.oldValue=this.K=this.W(),this.Y=i}W(){return this.J.getAttribute(this.Y)}tt(t){null===t?this.J.removeAttribute(this.Y):this.J.setAttribute(this.Y,t)}});DataAttributeAccessor=t("DataAttributeAccessor",s([targetObserver()],DataAttributeAccessor));let ElementPropertyAccessor=t("ElementPropertyAccessor",class{constructor(t,s,i){this.Z=1,this.$=t,this.J=s,this.Y=i}W(){return this.J[this.Y]}tt(value){this.J[this.Y]=value}});ElementPropertyAccessor=t("ElementPropertyAccessor",s([targetObserver("")],ElementPropertyAccessor));class ListenerTracker{constructor(dom,t,s,i){this.dom=dom,this.St=i,this.count=0,this.Ot=t,this.listener=s}Lt(){this.count++,1===this.count&&this.dom.addEventListener(this.Ot,this.listener,null,this.St)}Mt(){this.count--,0===this.count&&this.dom.removeEventListener(this.Ot,this.listener,null,this.St)}}t("ListenerTracker",ListenerTracker);class DelegateOrCaptureSubscription{constructor(t,s,i,h){this.Bt=t,this.jt=s,this.j=i,s[i]=h}F(){this.Bt.Mt(),this.jt[this.j]=null}}t("DelegateOrCaptureSubscription",DelegateOrCaptureSubscription);class TriggerSubscription{constructor(dom,t,s,i){this.dom=dom,this.target=t,this.j=s,this.Vt=i,dom.addEventListener(s,i,t)}F(){this.dom.removeEventListener(this.j,this.Vt,this.target)}}t("TriggerSubscription",TriggerSubscription);class EventSubscriber{constructor(dom,t){this.dom=dom,this.kt=t,this.target=null,this.P=null}subscribe(t,s){this.target=t,this.P=s;const i=this.dom.addEventListener,h=this.kt;for(let e=0,n=h.length;n>e;++e)i(h[e],s,t)}F(){const t=this.target,s=this.P,i=this.kt,h=this.dom.removeEventListener;for(let e=0,n=i.length;n>e;++e)h(i[e],s,t);this.target=this.P=null}}t("EventSubscriber",EventSubscriber);const IEventManager=t("IEventManager",DI.It("IEventManager").yt(t=>t.singleton(d)));class d{constructor(){this.Nt={},this.Rt={},this.Ht={}}addEventListener(dom,t,s,i,strategy){let h,r,o;if(strategy===DelegationStrategy.zt){(o=(h=this.Rt)[s]||(h[s]=new ListenerTracker(dom,s,n,0))).Lt();const e=t.p||(t.p={});return new DelegateOrCaptureSubscription(o,e,s,i)}if(strategy===DelegationStrategy.Dt){(o=(r=this.Ht)[s]||(r[s]=new ListenerTracker(dom,s,e,1))).Lt();const h=t.g||(t.g={});return new DelegateOrCaptureSubscription(o,h,s,i)}return new TriggerSubscription(dom,t,s,i)}}const w=LifecycleFlags.st|LifecycleFlags.it,g={Ut:1,Pt:1,Gt:1};let SelectValueObserver=t("SelectValueObserver",class{constructor(t,s,i,h){this.Z=1,this.$=t,this.J=s,this.P=i,this.nt=h}W(){return this.K}tt(t,s){const i=Array.isArray(t);if(!i&&null!=t&&this.J.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.ut&&(this.ut.lt(this),this.ut=null),i&&(this.ut=this.nt.at(t),this.ut.ft(this)),this.Ft(),this.wt(s)}dt(t){this.Ft(t)}X(t,s,i){this.qt(t,i)}wt(t){if(t&LifecycleFlags.U)return;const s=this.oldValue,i=this.K;i!==s&&this.pt(i,s,t)}m(){this.Xt()&&this.wt(w)}Ft(t){const s=this.K,i=Array.isArray(s),h=this.J,e=h.gt||r,n=h.options;let o=n.length;for(;o--;){const t=n[o],h=t.hasOwnProperty("model")?t.ct:t.value;t.selected=i?-1!==s.findIndex(t=>!!e(h,t)):!!e(h,s)}}Xt(){const t=this.J,s=t.options,i=s.length,h=this.K;let e=0;if(t.multiple){if(!Array.isArray(h))return 1;let n;const o=t.gt||r,c=[];for(;i>e;)(n=s[e]).selected&&c.push(n.hasOwnProperty("model")?n.ct:n.value),++e;for(e=0;h.length>e;){const t=h[e];-1===c.findIndex(s=>!!o(t,s))?h.splice(e,1):++e}for(e=0;c.length>e;){const t=c[e];-1===h.findIndex(s=>!!o(t,s))&&h.push(t),++e}return 0}let value=null;for(;i>e;){const t=s[e];if(t.selected){value=t.hasOwnProperty("model")?t.ct:t.value;break}++e}return this.oldValue=this.K,this.K=value,1}subscribe(t){this.At()||this.P.subscribe(this.J,this),this.vt(t)}unsubscribe(t){this.Ct(t)&&!this.At()&&this.P.F()}bind(){this.Zt=new MutationObserver(this.$t.bind(this)),this.Zt.observe(this.J,g)}G(){this.Zt.disconnect(),this.Zt=null,this.ut&&(this.ut.lt(this),this.ut=null)}$t(){this.Ft(),this.Xt()&&this.wt(w)}});SelectValueObserver=t("SelectValueObserver",s([targetObserver()],SelectValueObserver));let StyleAttributeAccessor=t("StyleAttributeAccessor",class{constructor(t,s){this.Z=1,this.oldValue=this.K=s.style.cssText,this.$=t,this.J=s,this.Jt=null,this.version=0}W(){return this.J.style.cssText}Kt(t,value){let s="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(s="important",value=value.replace("!important","")),this.J.style.setProperty(t,value,s)}tt(t){const s=this.Jt||{};let i,h=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],s[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=h,this.Kt(i,value))}else if(t.length){const e=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let n;for(;null!==(n=e.exec(t));)(i=n[1])&&(s[i]=h,this.Kt(i,n[2]))}if(this.Jt=s,this.version+=1,0!==h)for(i in h-=1,s)s.hasOwnProperty(i)&&s[i]===h&&this.J.style.removeProperty(i)}});StyleAttributeAccessor=t("StyleAttributeAccessor",s([targetObserver()],StyleAttributeAccessor));const m={button:"",Qt:"on",color:"#000000",Wt:"",Yt:"",email:"",_t:"",hidden:"",xt:"",ts:"",number:"",password:"",ss:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",hs:""},p=LifecycleFlags.st|LifecycleFlags.it;let ValueAttributeObserver=t("ValueAttributeObserver",class{constructor(t,s,i,h){if(this.Z=1,this.P=h,this.$=t,this.J=s,this.Y=i,"value"===i){const t=s.type;this.defaultValue=m[t||"text"],"file"===t&&(this.flush=this.es)}else this.defaultValue="";this.oldValue=this.K=s[i]}W(){return this.J[this.Y]}tt(t,s){this.J[this.Y]=t,s&LifecycleFlags.U||this.pt(this.K,this.oldValue,s)}m(){const t=this.oldValue=this.K,s=this.K=this.W();t!==s&&(this.pt(s,t,p),this.oldValue=s)}subscribe(t){this.At()||(this.oldValue=this.W(),this.P.subscribe(this.J,this)),this.vt(t)}unsubscribe(t){this.Ct(t)&&!this.At()&&this.P.F()}es(){const t=this.K;this.oldValue!==t&&""===t&&(this.tt(t,this.ns),this.oldValue=this.K)}});ValueAttributeObserver=t("ValueAttributeObserver",s([targetObserver("")],ValueAttributeObserver));const A="http://www.w3.org/1999/xlink",v="http://www.w3.org/XML/1998/namespace",C="http://www.w3.org/2000/xmlns/",E=((u=Object.create(null))["rs"]=["actuate",A],u["os"]=["arcrole",A],u["cs"]=["href",A],u["us"]=["role",A],u["ls"]=["show",A],u["as"]=["title",A],u["fs"]=["type",A],u["bs"]=["lang",v],u["ds"]=["space",v],u.ws=["xmlns",C],u["gs"]=["xlink",C],u),T=["change","input"],S=["change"],O=["change","input","blur","keyup","paste"],L=["scroll"],M=(function(t){return t.ms=1,t.style=1,t.ps=1,t.checked=1,t.value=1,t.ct=1,t["rs"]=1,t["os"]=1,t["cs"]=1,t["us"]=1,t["ls"]=1,t["as"]=1,t["fs"]=1,t["bs"]=1,t["ds"]=1,t.ws=1,t["gs"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom){this.dom=dom}As(t,s,i,h){switch(h){case"checked":return new CheckedObserver(t,i,new EventSubscriber(this.dom,T),s);case"value":return"SELECT"===i.tagName?new SelectValueObserver(t,i,new EventSubscriber(this.dom,S),s):new ValueAttributeObserver(t,i,h,new EventSubscriber(this.dom,T));case"files":return new ValueAttributeObserver(t,i,h,new EventSubscriber(this.dom,T));case"textContent":case"innerHTML":return new ValueAttributeObserver(t,i,h,new EventSubscriber(this.dom,O));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(t,i,h,new EventSubscriber(this.dom,L));case"class":return new ClassAttributeAccessor(t,i);case"style":case"css":return new StyleAttributeAccessor(t,i);case"model":return new SetterObserver(i,h);case"role":return new DataAttributeAccessor(t,i,h);default:if(void 0!==E[h]){const s=E[h];return new AttributeNSAccessor(t,i,h,s[0],s[1])}const e=h.slice(0,5);if("aria-"===e||"data-"===e)return new DataAttributeAccessor(t,i,h)}return null}vs(t,s){return 1==M[s]}Cs(t){return this.dom.C(t)}}t("TargetObserverLocator",TargetObserverLocator),TargetObserverLocator.inject=[IDOM];class TargetAccessorLocator{constructor(dom){this.dom=dom}Es(t,s,i){switch(i){case"textContent":return new ElementPropertyAccessor(t,s,i);case"class":return new ClassAttributeAccessor(t,s);case"style":case"css":return new StyleAttributeAccessor(t,s);case"src":case"href":case"role":return new DataAttributeAccessor(t,s,i);default:if(void 0!==E[i]){const h=E[i];return new AttributeNSAccessor(t,s,i,h[0],h[1])}const h=i.slice(0,5);return"aria-"===h||"data-"===h?new DataAttributeAccessor(t,s,i):new ElementPropertyAccessor(t,s,i)}}Cs(t){return this.dom.C(t)}}t("TargetAccessorLocator",TargetAccessorLocator),TargetAccessorLocator.inject=[IDOM],t("ISVGAnalyzer",DI.It("ISVGAnalyzer").yt(t=>t.singleton(class{Ts(t,s){return 0}})));class AttrBindingBehavior{bind(t,s,i){i.targetObserver=new DataAttributeAccessor(i.M.get(ILifecycle),i.target,i.Ss)}G(t,s,i){}}t("AttrBindingBehavior",AttrBindingBehavior),BindingBehaviorResource.Os("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,s,i){if(!i.k||!i.j)throw Reporter.error(8);i.A=i.k,i.k=o}G(t,s,i){i.k=i.A,i.A=null}}t("SelfBindingBehavior",SelfBindingBehavior),BindingBehaviorResource.Os("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.nt=t}bind(t,s,i,...h){if(0===h.length)throw Reporter.error(9);if(i.mode!==BindingMode.Ls&&i.mode!==BindingMode.Ms)throw Reporter.error(10);const e=this.nt.As(i.target,i.Ss);if(!e.P)throw Reporter.error(10);i.targetObserver=e,e.Bs=i.targetObserver.P,e.P=new EventSubscriber(i.M.get(IDOM),h)}G(t,s,i){i.targetObserver.P.F(),i.targetObserver.P=i.targetObserver.Bs,i.targetObserver.Bs=null}}t("UpdateTriggerBindingBehavior",UpdateTriggerBindingBehavior),UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Os("updateTrigger",UpdateTriggerBindingBehavior),t("TextBindingInstruction",class{constructor(from){this.type="ha",this.from=from}}),t("TriggerBindingInstruction",class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.js,this.to=to}}),t("DelegateBindingInstruction",class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.zt,this.to=to}}),t("CaptureBindingInstruction",class{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.Dt,this.to=to}}),t("StylePropertyBindingInstruction",class{constructor(from,to){this.type="hc",this.from=from,this.to=to}});class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}t("SetAttributeInstruction",SetAttributeInstruction);class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.Vs=t}get ks(){return this.ys||(this.ys=buildTemplateDefinition(null,null,this.Vs,null,"string"==typeof this.Vs,null,this.instructions,this.dependencies))}Is(t,s){return t.Is(this.dom,this.ks,null,s)}Ns(t,s){return this.Rs(t,s).create()}Rs(t,s){return t.Rs(this.dom,this.ks,s)}T(t,instructions,dependencies){this.dom.appendChild(t,this.Vs),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}t("RenderPlan",RenderPlan);const B=["subject","composing"];class Compose{constructor(dom,t,s,i,h){this.dom=dom,this.subject=null,this.Hs=0,this.zs=h,this.Ds=null,this.Us=t,this.Ps=i,this.zs.Gs=(()=>{this.Hs=0}),this.properties=s.instructions.filter(t=>!B.includes(t.to)).reduce((t,s)=>(s.to&&(t[s.to]=s),t),{})}Fs(t){this.qs(this.subject,null,t),this.zs.Fs(t,this.$scope)}Xs(t){this.zs.Xs(t)}Zs(t){this.zs.Zs(t)}$s(t){this.Ds=null,this.zs.$s(t)}Js(t){this.zs.Js(t)}Ks(t,s,i){this.qs(t,s,i)}qs(t,s,i){this.Ds!==t&&(this.Ds=t,t=t instanceof Promise?t.then(t=>this.Qs(t,i)):this.Qs(t,i),this.Hs=1,this.zs.Ws(t,i))}Qs(t,s){const i=this.Ys(t);return i?(i._s(this.xs.host),i.ti(this.Us.$scope),i):null}Ys(t){return t?"lockScope"in t?t:"createView"in t?t.Ns(this.Ps,this.Us.$context):"create"in t?t.create():"template"in t?this.Ps.Rs(this.dom,t,this.Us.$context).create():createElement(this.dom,t,this.properties,this.xs.children).Ns(this.Ps,this.Us.$context):null}}t("Compose",Compose),Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],s([bindable],Compose.prototype,"subject",void 0),s([bindable],Compose.prototype,"composing",void 0),CustomElementResource.Os({name:"au-compose",containerless:1},Compose);class HTMLDOM{constructor(t){this.si=t}addEventListener(t,s,i,h){(i||this.si).addEventListener(t,s,h)}appendChild(t,s){t.appendChild(s)}cloneNode(t,s){return t.cloneNode(0!=s)}ii(t){if(this.hi(t))return t;if(null===t.parentNode)throw Reporter.error(52);const s=this.si.createComment("au-end"),i=this.si.createComment("au-start");return t.parentNode.replaceChild(s,t),s.parentNode.insertBefore(i,s),s.ei=i,i.$nodes=null,s}createDocumentFragment(t){if(null==t)return this.si.createDocumentFragment();if(this.C(t)){if(void 0!==t.content)return t.content;const s=this.si.createDocumentFragment();return s.appendChild(t),s}return this.ni(t).content}createElement(name){return this.si.createElement(name)}ni(t){if(null==t)return this.si.createElement("template");const template=this.si.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.si.createTextNode(t)}insertBefore(t,s){s.parentNode.insertBefore(t,s)}ri(t){return"AU-M"===t.nodeName}C(t){return t.nodeType>0}hi(t){return"au-end"===t.textContent}v(t){t.className="au"}oi(t,s){t.ci(INode,s),t.ci(Node,s),t.ci(Element,s),t.ci(HTMLElement,s),t.ci(SVGElement,s)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,s,i,h){(i||this.si).removeEventListener(t,s,h)}setAttribute(t,name,value){t.setAttribute(name,value)}}t("HTMLDOM",HTMLDOM);class j{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new y(t)]}ui(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}li(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class V{constructor(dom,t){this.dom=dom,this.ai=t;const s=t.querySelectorAll(".au");let i=0,h=s.length;const targets=this.targets=Array(h);for(;h>i;){const t=s[i];targets[i]="AU-M"===t.nodeName?this.dom.ii(t):t,++i}const e=t.childNodes;i=0;const childNodes=this.childNodes=Array(h=e.length);for(;h>i;)childNodes[i]=e[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}ui(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.ai,t),"au-end"===t.textContent){this.end=t;const s=this.start=t.ei;s.$nodes=null===s.$nodes?this:PLATFORM.fi}}li(t){t.appendChild(this.ai),this.start=this.end=null}remove(){const t=this.ai;if(null!==this.start&&this.start.$nodes===this){const s=this.end;let i,h=this.start.nextSibling;for(;h!==s;)i=h.nextSibling,t.appendChild(h),h=i;this.start.$nodes=null,this.start=this.end=null}else{let s=this.firstChild;if(s.parentNode!==t){const i=this.lastChild;let h;for(;null!==s&&(h=s.nextSibling,t.appendChild(s),s!==i);)s=h}}}}class k{constructor(dom,t){this.dom=dom;const s=dom.createDocumentFragment(t),childNodes=s.childNodes;switch(childNodes.length){case 0:return void(this.bi=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.di=0,this.Vs=t,void(this.wi=j)}default:this.di=1,this.Vs=s,this.wi=V}}bi(){return new this.wi(this.dom,this.Vs.cloneNode(this.di))}}class y{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(l=y.prototype).previousSibling=null,l.childNodes=PLATFORM.gi,l.nodeName="AU-M",l.nodeType=1;class I{constructor(t){this.mi=t}initialize(t){if(this.mi.has(IDOM,0))return this.mi.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(null!==t.host.ownerDocument?t.host.ownerDocument:document):new HTMLDOM(document),Registration.pi(IDOM,dom).register(this.mi,IDOM),dom}}I.inject=[IContainer];class N{constructor(dom){this.dom=dom}create(t,s){return new CompiledTemplate(this.dom,s,new k(this.dom,s.template),t)}}N.inject=[IDOM];let R=class{constructor(t,s){this.Ai=t,this.nt=s}vi(dom,t,s,i,h){const e=i.nextSibling;let n;dom.ri(i)&&dom.remove(i);const r=ensureExpression(this.Ai,h.from,2048);n=r.Ci?new MultiInterpolationBinding(this.nt,r,e,"textContent",BindingMode.Ei,t):new InterpolationBinding(r.Ti,r,e,"textContent",BindingMode.Ei,this.nt,t,1),addBindable(s,n)}};R.inject=[IExpressionParser,IObserverLocator],R=s([instructionRenderer("ha")],R);let H=class{constructor(t,s){this.Ai=t,this.V=s}vi(dom,t,s,i,h){const e=ensureExpression(this.Ai,h.from,80|h.strategy+6),n=new Listener(dom,h.to,h.strategy,e,i,h.preventDefault,this.V,t);addBindable(s,n)}};H.inject=[IExpressionParser,IEventManager],H=s([instructionRenderer("hb")],H);let z=class{vi(dom,t,s,i,h){i.setAttribute(h.to,h.value)}};z=s([instructionRenderer("hd")],z);let D=class{constructor(t,s){this.Ai=t,this.nt=s}vi(dom,t,s,i,h){const e=ensureExpression(this.Ai,h.from,48|BindingMode.Ei),n=new Binding(e,i.style,h.to,BindingMode.Ei,this.nt,t);addBindable(s,n)}};D.inject=[IExpressionParser,IObserverLocator],D=s([instructionRenderer("hc")],D);const HTMLRenderer=t("HTMLRenderer",{register(t){t.register(R,H,z,D)}}),U={mode:"open"};class P{Si(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new F(t,host,def)}return def.containerless?new q(dom,t,host):new X(t,host)}}const G={Ut:1};class F{constructor($customElement,host,t){let shadowOptions;this.host=host,this.shadowRoot=host.Oi(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:U),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}Li(t){new MutationObserver(t).observe(this.shadowRoot,G)}Mi(){return this.shadowRoot}Bi(t){t.li(this.shadowRoot)}ji(t){t.remove()}}class q{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.gi,this.host=dom.ii(host),this.host.$customElement=$customElement}get children(){return this.childNodes}Li(t){new MutationObserver(t).observe(this.host,G)}Mi(){return this.host.Vi()}Bi(t){t.insertBefore(this.host)}ji(t){t.remove()}}class X{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}Li(t){}Mi(){return this.host.Vi()}Bi(t){t.li(this.host)}ji(t){t.remove()}}const Z=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],HTMLRuntimeConfiguration=t("HTMLRuntimeConfiguration",{register(t){t.register(...Z,RuntimeConfiguration,HTMLRenderer,Registration.singleton(IDOMInitializer,I),Registration.singleton(IProjectorLocator,P),Registration.singleton(ITargetAccessorLocator,TargetAccessorLocator),Registration.singleton(ITargetObserverLocator,TargetObserverLocator),Registration.singleton(ITemplateFactory,N))},ki(){const t=DI.ki();return t.register(HTMLRuntimeConfiguration),t}})}}});
