var au=(function(t){"use strict";function i(){}function s(t){return function(i){const s=function(t,i,e){DI.inject(s)(t,i,e)};return s.resolve=function(s,e){return t(i,s,e)},s}}function e(t){return DI.transient(t)}function n(t){return DI.singleton(t)}function r(t){return"function"==typeof t.register}function h(t){if(null==t||t===Object)throw Reporter.error(5)}function o(t,i,s){if(t instanceof Ei&&4===t.strategy){const e=t.state;let n=e.length;const r=Array(n);for(;n--;)r[n]=e[n].resolve(i,s);return r}return[t.resolve(i,s)]}function l(t,i,s,e){let n,r=s.length,h=Array(r);for(;r--;){if(null==(n=s[r]))throw Reporter.error(7,`Index ${r}.`);h[r]=t.get(n)}return void 0!==e&&(h=h.concat(e)),Reflect.construct(i,h)}function attributePattern(...t){return function(i){const s=i.prototype;return(function(t,i){for(const def of i)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def):Reporter.write(401,def)})(s,t),s.t=t,i.register=function(t){return Registration.singleton(IAttributePattern,i).register(t,IAttributePattern)},i}}function c(t,i,s,e){var n,r,h=arguments.length,o=3>h?i:null===e?e=Object.getOwnPropertyDescriptor(i,s):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,i,s,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(o=(3>h?n(o):h>3?n(i,s,o):n(i,s))||o);return h>3&&o&&Object.defineProperty(i,s,o),o}function subscriberCollection(t){return function(i){const s=i.prototype;switch(s.i=0,s.s=null,s.h=null,s.o=null,s.l=null,s.u=u,s.g=a,s.p=b,s.m=p,t){case MutationKind.v:s.C=f;break;case MutationKind.T:s.C=d;break;case MutationKind.A:s.C=g}}}function u(t){if(this.p(t))return 0;const i=this.i;return 1&i?2&i?4&i?8&i?(this.l.push(t),1):(this.l=[t],this.i|=8,1):(this.o=t,this.i|=4,1):(this.h=t,this.i|=2,1):(this.s=t,this.i|=1,1)}function a(t){const i=this.i;if(1&i&&this.s===t)return this.s=null,this.i&=-2,1;if(2&i&&this.h===t)return this.h=null,this.i&=-3,1;if(4&i&&this.o===t)return this.o=null,this.i&=-5,1;if(8&i){const i=this.l;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.i&=-9),1}return 0}function f(t,i,s){const e=this.s,n=this.h,r=this.o;let h=this.l;null!==h&&(h=h.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==r&&r.B(t,i,s);const o=h&&h.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=h[e];null!==n&&n.B(t,i,s)}}function d(t,i,s){const e=this.s,n=this.h,r=this.o;let h=this.l;null!==h&&(h=h.slice()),null!==e&&e.B(t,i,s),null!==n&&n.B(t,i,s),null!==r&&r.B(t,i,s);const o=h&&h.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=h[e];null!==n&&n.B(t,i,s)}this.R.O(this).catch(t=>{throw t})}function g(t,i,s,e){const n=this.s,r=this.h,h=this.o;let o=this.l;null!==o&&(o=o.slice()),null!==n&&n.B(t,i,s,e),null!==r&&r.B(t,i,s,e),null!==h&&h.B(t,i,s,e);const l=o&&o.length;if(void 0!==l&&l>0)for(let n=0;l>n;++n){const r=o[n];null!==r&&r.B(t,i,s,e)}}function p(){return 0!==this.i}function b(t){const i=this.i;if(1&i&&this.s===t)return 1;if(2&i&&this.h===t)return 1;if(4&i&&this.o===t)return 1;if(8&i){const i=this.l;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const i=t.prototype;i.k=0,i.I=null,i.S=null,i.P=null,i.L=null,i.j=m,i.D=w,i.$=C,i.M=y,i.V=v}}function m(t){if(this.$(t))return 0;const i=this.k;return 1&i?2&i?4&i?8&i?(this.L.push(t),1):(this.L=[t],this.k|=8,1):(this.P=t,this.k|=4,1):(this.S=t,this.k|=2,1):(this.I=t,this.k|=1,1)}function w(t){const i=this.k;if(1&i&&this.I===t)return this.I=null,this.k&=-2,1;if(2&i&&this.S===t)return this.S=null,this.k&=-3,1;if(4&i&&this.P===t)return this.P=null,this.k&=-5,1;if(8&i){const i=this.L;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return i.splice(s,1),1===e&&(this.k&=-9),1}return 0}function v(t,i){const s=this.I,e=this.S,n=this.P;let r=this.L;null!==r&&(r=r.slice()),null!==s&&s.F(t,i),null!==e&&e.F(t,i),null!==n&&n.F(t,i);const h=r&&r.length;if(void 0!==h&&h>0)for(let s=0;h>s;++s){const e=r[s];null!==e&&e.F(t,i)}}function y(){return 0!==this.k}function C(t){const i=this.k;if(1&i&&this.I===t)return 1;if(2&i&&this.S===t)return 1;if(4&i&&this.P===t)return 1;if(8&i){const i=this.L;for(let s=0,e=i.length;e>s;++s)if(i[s]===t)return 1}return 0}function T(t){if(0==this.U){this.U=1;const{N:t,q:i}=this;this.H=t[i],Gi.get=(()=>this.W()),Gi.set=(value=>{this.K(value,LifecycleFlags.G)}),Qi(t,i,Gi)||Reporter.write(1,i,t)}this.u(t)}function A(){Reflect.deleteProperty(this.N,this.q),this.N=null,this.q=null,this.H=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.v)(t);const i=t.prototype;i.U=0,i.N=null,i.q=null,i.H=Symbol(),i.subscribe=i.subscribe||T,i.unsubscribe=i.unsubscribe||i.g,i.Z=i.Z||A}}function B(t){const i=BindingBehaviorResource._(this.description.name);t.register(Registration.singleton(i,this))}function O(t){const i=this.kind._(this.description.name);t.register(Registration.singleton(i,this))}function hasBind(t){return 2048==(2048&t.X)}function hasUnbind(t){return 4096==(4096&t.X)}function isLiteral(t){return 16384==(16384&t.X)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let i=0;t.length>i;++i)if(!isPureLiteral(t[i]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.X){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.J);case 17925:return 1}return 0}function R(t,i,s,e){const n=e.length,r=Array(n);for(let h=0;n>h;++h)r[h]=e[h].evaluate(t,i,s);return r}function k(t,i,name){const s=null==i?null:i[name];if("function"==typeof s)return s;if(!(t&LifecycleFlags.Y)&&null==s)return null;throw Reporter.error(207,i,name,s)}function I(t){if(t===rs){const i=es.length=ns.length=(rs+=5)+1;for(let s=t+1;i>s;++s)es[s]=`_observer${s}`,ns[s]=`_observerVersion${s}`}}function S(t){const i=void 0===this.tt?0:this.tt;let s=i;for(;s--&&this[es[s]]!==t;);if(-1===s){for(s=0;this[es[s]];)s++;this[es[s]]=t,t.subscribe(this),s===i&&(this.tt=s+1)}void 0===this.version&&(this.version=0),this[ns[s]]=this.version,I(s)}function P(t,i,s){const e=this.st.it(t,i,s);this.et(e)}function L(t){const i=this.tt;let s,e;if(1==t)for(let t=0;i>t;++t)null!=(e=this[s=es[t]])&&(this[s]=null,e.unsubscribe(this));else{const t=this.version;for(let n=0;i>n;++n)this[ns[n]]!==t&&null!=(e=this[s=es[n]])&&(this[s]=null,e.unsubscribe(this))}}function E(t){const i=t.prototype;return i.hasOwnProperty("observeProperty")||(i.nt=P),i.hasOwnProperty("unobserve")||(i.unobserve=L),i.hasOwnProperty("addObserver")||(i.et=S),t}function connectable(t){return void 0===t?E:E(t)}function j(t,i){if(this.H!==(t=null==t?this.defaultValue:t)){if(this.H=t,!(i&(LifecycleFlags.rt|LifecycleFlags.ht))||this.ot&&i&LifecycleFlags.lt)return this.ct=i,this.R.O(this);this.ut(t,i)}return Promise.resolve()}function D(t){if(this.ot&&t&LifecycleFlags.lt)return void this.R.O(this).catch(t=>{throw t});const i=this.H;this.oldValue!==i&&(this.ut(i,this.ct|t|LifecycleFlags.G),this.oldValue=this.H)}function $(){this.H=null,this.oldValue=null,this.defaultValue=null,this.N=null,this.q=""}function targetObserver(t=null){return function(i){subscriberCollection(MutationKind.v)(i);const s=i.prototype;s.at=null,s.H=t,s.oldValue=t,s.defaultValue=t,s.N=null,s.q="",s.K=s.K||j,s.flush=s.flush||D,s.Z=s.Z||$}}function M(t){this.V(this.ft,t|this.dt),this.gt&&this.gt.pt(LifecycleFlags.rt|LifecycleFlags.G|this.dt),this.bt()}function x(){this.T.wt=void 0,this.T=null,this.ft=null}function V(){const t=this.T.length,i=this.ft=Array(t);let s=0;for(;t>s;)i[s]=s++;i.vt=[]}function F(){const t=this.T.size,i=this.ft=Array(t);let s=0;for(;t>s;)i[s]=s++;i.vt=[]}function U(){return void 0===this.gt?this.gt=new CollectionLengthObserver(this,this.yt):this.gt}function collectionObserver(t){return function(i){subscriberCollection(MutationKind.T)(i),batchedSubscriberCollection()(i);const s=i.prototype;s.at=null,s.T=null,s.ft=null,s.Ct=0,s.yt=8&t?"length":"size",s.Tt=t,s.bt=8&t?V:F,s.flush=M,s.Z=x,s.At=U,s.subscribe=s.subscribe||s.u,s.unsubscribe=s.unsubscribe||s.g,s.Bt=s.Bt||s.j,s.Ot=s.Ot||s.D}}function N(t,i){return t===i?0:(i=null===i?"null":""+i)>(t=null===t?"null":""+t)?-1:1}function q(t,i){return void 0===t?void 0===i?0:1:void 0===i?-1:0}function H(t,i,from,to,s){let e,n,r,h,o,l,c;for(l=from+1;to>l;l++){for(e=t[l],n=i[l],c=l-1;c>=from&&(h=i[c],(o=s(r=t[c],e))>0);c--)t[c+1]=r,i[c+1]=h;t[c+1]=e,i[c+1]=n}}function z(t,i,from,to,s){let e,n,r,h,o,l,c,u,a,f,d,g,p,b,m,w,v,y,C,T=0,A=0;for(;;){if(10>=to-from)return void H(t,i,from,to,s);h=i[from],o=i[to-1],r=t[T=from+(to-from>>1)],l=i[T],(c=s(e=t[from],n=t[to-1]))>0&&(f=e,d=h,e=n,h=o,n=f,o=d),0>(u=s(e,r))?(a=s(n,r))>0&&(f=n,d=o,n=r,o=l,r=f,l=d):(f=e,d=h,e=r,h=l,r=n,l=o,n=f,o=d),t[from]=e,i[from]=h,t[to-1]=r,i[to-1]=l,g=n,p=o,m=to-1,t[T]=t[b=from+1],i[T]=i[b],t[b]=g,i[b]=p;t:for(A=b+1;m>A;A++)if(v=i[A],0>(y=s(w=t[A],g)))t[A]=t[b],i[A]=i[b],t[b]=w,i[b]=v,b++;else if(y>0){do{if(--m==A)break t;y=s(C=t[m],g)}while(y>0);t[A]=t[m],i[A]=i[m],t[m]=w,i[m]=v,0>y&&(w=t[A],v=i[A],t[A]=t[b],i[A]=i[b],t[b]=w,i[b]=v,b++)}b-from>to-m?(z(t,i,m,to,s),to=b):(z(t,i,from,b,s),from=m)}}function enableArrayObservation(){for(const t of Cs)1!=fs[t].U&&def(fs,t,Object.assign({},As,{value:Ts[t]}))}function W(t,i,s){return s.wt||new ArrayObserver(t,i,s)}function enableMapObservation(){for(const t of Ss)1!=Bs[t].U&&Es(Bs,t,Object.assign({},Ls,{value:Ps[t]}))}function K(t,i,s){return s.wt||new MapObserver(t,i,s)}function enableSetObservation(){for(const t of Vs)1!=js[t].U&&Ns(js,t,Object.assign({},Us,{value:Fs[t]}))}function Q(t,i,s){return s.wt||new SetObserver(t,i,s)}function getCollectionObserver(t,i,s){switch(Ks.call(s)){case"[object Array]":return W(t,i,s);case"[object Map]":return K(t,i,s);case"[object Set]":return Q(t,i,s)}return null}function G(t,i,s){const e=this.Rt;PLATFORM.global.clearTimeout(e.kt),e.kt=PLATFORM.global.setTimeout(()=>{this.It(t,i,s)},e.St)}function Z(t,i,s){const e=this.Rt;if(PLATFORM.global.clearTimeout(e.kt),!(s&e.Pt))return e.oldValue=Ys,void this.It(t,i,s);e.oldValue===Ys&&(e.oldValue=i);const n=PLATFORM.global.setTimeout(()=>{const i=e.oldValue;e.oldValue=Ys,this.It(t,i,s)},e.St);e.kt=n}function _(t){const i=this.Lt,s=+new Date-i.Et;if(s>=i.St)return PLATFORM.global.clearTimeout(i.kt),i.kt=-1,i.Et=+new Date,void this.jt(t);if(i.newValue=t,-1===i.kt){const t=PLATFORM.global.setTimeout(()=>{i.kt=-1,i.Et=+new Date,this.jt(i.newValue)},i.St-s);i.kt=t}}function X(name){return`${ie}:${name}`}function J(t){return void 0===t.$customElement?null:t.$customElement}function Y(name){return`${se}:${name}`}function buildTemplateDefinition(t,i,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,s){const def=new re,e=arguments.length;switch(e){case 13:null!==s&&(def.Dt=s);case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?ee:0==build?ne:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof i?i.length>0&&(def.name=i):null!==i&&(he.forEach(t=>{i[t]&&(def[t]=i[t])}),oe.forEach(t=>{i[t]&&(def[t]=PLATFORM.toArray(i[t]))}),i.bindables&&(def.bindables===PLATFORM.$t?def.bindables=Object.assign({},i.bindables):Object.assign(def.bindables,i.bindables)))}return 2!==e||null===t||"string"!=typeof i&&"build"in i||(def.build=ee),def}function tt(t){if(8&this.$state)return;const i=this.$lifecycle;i.Mt(),this.$state|=4,t|=LifecycleFlags.xt;const s=this.$hooks;16&s&&this.Vt(t),this.$state|=8,this.$state&=-5,32&s&&i.Ft(this),i.Ut(t)}function it(t){if(8&this.$state)return;const i=this.$lifecycle;i.Mt(),this.$state|=4,t|=LifecycleFlags.xt;const s=this.$hooks;16&s&&this.Vt(t);let e=this.Nt;for(;null!==e;)e.qt(t),e=e.Ht;i.zt(this),this.$state|=8,this.$state&=-5,32&s&&i.Ft(this),i.Ut(t)}function st(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.xt;let i=this.Nt;for(;null!==i;)i.qt(t),i=i.Ht;this.$lifecycle.zt(this),this.$state|=8,this.$state&=-5}function et(t){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,t|=LifecycleFlags.Kt;const s=this.$hooks;64&s&&this.Qt(t),this.$state&=-41,128&s&&i.Gt(this),i.Zt(t)}}function nt(t){if(8&this.$state){const i=this.$lifecycle;i.Wt(),this.$state|=32,(t|=LifecycleFlags.Kt)&LifecycleFlags._t^LifecycleFlags._t|t&LifecycleFlags.Xt&&(i.Jt(this),t|=LifecycleFlags._t);const s=this.$hooks;64&s&&this.Qt(t);let e=this.Yt;for(;null!==e;)e.ti(t),e=e.ii;this.$state&=-41,128&s&&i.Gt(this),i.Zt(t)}}function rt(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.Kt)&LifecycleFlags._t^LifecycleFlags._t|t&LifecycleFlags.Xt&&(this.$lifecycle.Jt(this),t|=LifecycleFlags._t);let i=this.Yt;for(;null!==i;)i.ti(t),i=i.ii;this.$state&=-41}}function ht(t){2048&this.$hooks&&this.si(t|=LifecycleFlags.ei)}function ot(t){t|=LifecycleFlags.ei,2048&this.$hooks&&this.si(t);let i=this.Yt;for(;null!==i;)i.ni(t),i=i.ii}function lt(t){t|=LifecycleFlags.ei;let i=this.Yt;for(;null!==i;)i.ni(t),i=i.ii}function ct(){16&this.$state||(this.$state|=16,this.hi.ri(this.$nodes))}function ut(){16&this.$state&&(this.$state&=-17,this.hi.oi(this.$nodes))}function at(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ft(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.li&&(this.li=0,this.cache.ci(this))?(this.$state|=128,1):0):0}function dt(t,i){if(t|=LifecycleFlags.ht,2&this.$state){if(this.$scope===i)return;this.ui(t)}const s=this.$lifecycle;s.ai(),this.$state|=1;const e=this.$hooks;8&e&&s.fi(this),this.$scope=i,4&e&&this.di(t),this.$state|=2,this.$state&=-2,s.gi(t)}function gt(t,i){if(2&this.$state)return;const s=this.$scope;s.pi=i;const e=this.$lifecycle;e.ai(),this.$state|=1;const n=this.$hooks;t|=LifecycleFlags.ht,8&n&&e.fi(this);let r=this.bi;for(;null!==r;)r.mi(t,s),r=r.wi;4&n&&this.di(t);let component=this.Nt;for(;null!==component;)component.mi(t,s),component=component.Ht;this.$state|=2,this.$state&=-2,e.gi(t)}function pt(t,i){if(t|=LifecycleFlags.ht,2&this.$state){if(this.$scope===i)return;this.ui(t)}this.$state|=1,this.$scope=i;let s=this.bi;for(;null!==s;)s.mi(t,i),s=s.wi;let component=this.Nt;for(;null!==component;)component.mi(t,i),component=component.Ht;this.$state|=2,this.$state&=-2}function bt(t){if(t|=LifecycleFlags.ht,2&this.$state)return;this.$state|=1;const i=this.$scope;let s=this.bi;for(;null!==s;)s.mi(t,i),s=s.wi;let component=this.Nt;for(;null!==component;)component.mi(t,i),component=component.Ht;this.$state|=2,this.$state&=-2}function mt(t){if(2&this.$state){const i=this.$lifecycle;i.vi(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.yi,512&s&&i.Ci(this),256&s&&this.Ti(t),this.$state&=-67,i.Ai(t)}}function wt(t){if(2&this.$state){const i=this.$lifecycle;i.vi(),this.$state|=64;const s=this.$hooks;t|=LifecycleFlags.yi,512&s&&i.Ci(this),256&s&&this.Ti(t);let component=this.Yt;for(;null!==component;)component.ui(t),component=component.ii;let e=this.Bi;for(;null!==e;)e.ui(t),e=e.Oi;this.$scope.pi=null,this.$state&=-67,i.Ai(t)}}function vt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.yi;let component=this.Yt;for(;null!==component;)component.ui(t),component=component.ii;let i=this.Bi;for(;null!==i;)i.ui(t),i=i.Oi;this.$state&=-67,this.$scope=null}}function yt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.yi;let component=this.Yt;for(;null!==component;)component.ui(t),component=component.ii;let i=this.Bi;for(;null!==i;)i.ui(t),i=i.Oi;this.$state&=-67}}function createRenderContext(dom,t,dependencies,i){const s=t.Ri(),e=new de,n=new de,r=new de,h=new ge,o=new de,l=s.get(IRenderer);return dom.ki(s,n),s.Ii(IViewFactory,h),s.Ii(IRenderable,e),s.Ii(ITargetedInstruction,r),s.Ii(IRenderLocation,o),dependencies&&s.register(...dependencies),i&&i.register(s),s.Si=function(t,i,targets,s,host,parts){l.Si(t,dom,this,i,targets,s,host,parts)},s.Pi=function(t,i,l,c,parts,u){return e.Li(t),n.Li(i),r.Li(l),c&&h.Li(c,parts),u&&o.Li(u),s},s.Z=function(){h.Z(),e.Z(),r.Z(),n.Z(),o.Z()},s}function Ct(t){const i=[];for(let s=0,e=t.length;e>s;++s){const component=J(t[s]);null!==component&&i.push(component)}return i}function Tt(t,i,name){Reflect.defineProperty(i,name,{Ei:1,get(){return this.ji[name].W()},set(value){this.ji[name].K(value,t&LifecycleFlags.Di|LifecycleFlags.G)}})}function At(t){const i=this.kind._(this.description.name);t.register(Registration.transient(i,this))}function Bt(t){return t.containerless=1,t}function Ot(t,i){const s=this.constructor;i.get(IRenderingEngine).$i(t,s,this),2&this.$hooks&&this.Mi(t)}function Rt(t,i,host,s=PLATFORM.$t){const e=this.constructor,n=e.description,r=i.get(IProjectorLocator),h=i.get(IRenderingEngine),dom=i.get(IDOM);let o;if(o=t&LifecycleFlags.Dt?ProxyObserver.xi(this).A:this,this.$scope=Scope.create(t,o,null),this.Vi=host,this.hi=r.Fi(dom,this,host,n),h.$i(t,e,this),1024&this.$hooks){const n=this.Si(t,host,s.parts,i);n&&"getElementTemplate"in n&&n.Ui(h,e,i).Si(this,host,s.parts)}else h.Ui(dom,n,i,e).Si(this,host,s.parts);2&this.$hooks&&this.Mi(t)}function kt(t){const i=this.description,s=this.kind._(i.name),aliases=i.aliases;t.register(Registration.transient(s,this));for(let i=0,e=aliases.length;e>i;++i){const e=this.kind._(aliases[i]);t.register(Registration.Ni(s,e))}}function It(t){return t.qi=1,t}function bindable(t,i){let s;const e=function(t,i){const e=t.constructor;let bindables=e.bindables;void 0===bindables&&(bindables=e.bindables={}),s.Hi||(s.Hi=PLATFORM.zi(i)),s.Wi||(s.Wi=`${i}Changed`),void 0===s.mode&&(s.mode=BindingMode.Ki),void 0===s.Dt&&(s.Dt=0),arguments.length>1&&(s.Qi=i),bindables[s.Qi]=s};return arguments.length>1?(s={},void e(t,i)):"string"==typeof t?(s={},e):(s=t||{},e)}function instructionRenderer(t){return function(i){const s=function(...s){const e=new i(...s);return e.Gi=t,e};s.register=function(t){return Registration.singleton(IInstructionRenderer,s).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(i);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(s,t,e[t])}),s}}function ensureExpression(t,i,s){return"string"==typeof i?t.parse(i,s):i}function addBinding(t,i){i.Oi=t.Bi,i.wi=null,null===t.Bi?t.bi=i:t.Bi.wi=i,t.Bi=i}function addComponent(t,component){component.ii=t.Yt,component.Ht=null,null===t.Yt?t.Nt=component:t.Yt.Ht=component,t.Yt=component}function St(t){const i=BindingCommandResource._(this.description.name);t.register(Registration.singleton(i,this))}function getTarget(t,i){return 256&t.flags?t.bindable.Zi:i?PLATFORM._i(t.Xi.target):t.Xi.target}function getMode(t){return 256&t.flags?t.bindable.mode:Ee[t.Xi.command]}function Pt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,i){return $state.input=t,$state.length=t.length,$state.index=0,$state.Ji=t.charCodeAt(0),Lt($state,0,61,void 0===i?53:i)}function Lt(t,i,s,e){if(0===t.index){if(2048&e)return(function(t){const parts=[],i=[],s=t.length;let e="";for(;s>t.index;){switch(t.Ji){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(e),e="",t.index+=2,t.Ji=t.input.charCodeAt(t.index),jt(t);const s=Lt(t,0,61,2048);i.push(s);continue}e+="$";break;case 92:e+=String.fromCharCode(Pt(Dt(t)));break;default:e+=String.fromCharCode(t.Ji)}Dt(t)}return i.length?(parts.push(e),new Interpolation(parts,i)):null})(t);if(jt(t),1048576&t.Yi)throw Reporter.error(100,{state:t})}t.ts=448>s;let n=void 0;if(32768&t.Yi){const s=Fe[63&t.Yi];jt(t),n=new Unary(s,Lt(t,i,449,e)),t.ts=0}else{t:switch(t.Yi){case 3077:t.ts=0;do{if(jt(t),i++,!Vt(t,16392)){if(524288&t.Yi){const t=511&i;n=0===t?xe:1===t?Ve:new AccessThis(t),i=512;break t}throw Reporter.error(103,{state:t})}if(16392===t.Yi)throw Reporter.error(102,{state:t});if(1572864===t.Yi)throw Reporter.error(105,{state:t})}while(3077===t.Yi);case 1024:512&e?n=new BindingIdentifier(t.ss):(n=new AccessScope(t.ss,511&i),i=1024),t.ts=1,jt(t);break;case 3076:t.ts=0,jt(t),n=xe,i=512;break;case 671750:jt(t),n=Lt(t,0,62,e),Ft(t,1835018),i=0;break;case 671756:n=(function(t,i,s){jt(t);const e=[];for(;1835021!==t.Yi;)if(Vt(t,1572875)){if(e.push(Me),1835021===t.Yi)break}else{if(e.push(Lt(t,i,62,-513&s)),!Vt(t,1572875))break;if(1835021===t.Yi)break}return Ft(t,1835021),512&s?new ArrayBindingPattern(e):(t.ts=0,new ArrayLiteral(e))})(t,i,e),i=0;break;case 131079:n=(function(t,i){const s=[],e=[];for(jt(t);1835017!==t.Yi;){if(s.push(t.ss),12288&t.Yi)jt(t),Ft(t,1572878),e.push(Lt(t,0,62,-513&i));else{if(!(3072&t.Yi))throw Reporter.error(107,{state:t});{const{Ji:s,Yi:n,index:r}=t;jt(t),Vt(t,1572878)?e.push(Lt(t,0,62,-513&i)):(t.Ji=s,t.Yi=n,t.index=r,e.push(Lt(t,0,450,-513&i)))}}1835017!==t.Yi&&Ft(t,1572875)}return Ft(t,1835017),512&i?new ObjectBindingPattern(s,e):(t.ts=0,new ObjectLiteral(s,e))})(t,e),i=0;break;case 540713:n=new Template([t.ss]),t.ts=0,jt(t),i=0;break;case 540714:n=Et(t,i,e,n,0),i=0;break;case 4096:case 8192:n=new PrimitiveLiteral(t.ss),t.ts=0,jt(t),i=0;break;case 2050:case 2051:case 2049:case 2048:n=Fe[63&t.Yi],t.ts=0,jt(t),i=0;break;default:throw Reporter.error(t.length>t.index?101:104,{state:t})}if(512&e)return(function(t,i){if(0==(65536&i.X))throw Reporter.error(106,{state:t});if(1051179!==t.Yi)throw Reporter.error(106,{state:t});jt(t);const s=i,e=Lt(t,0,61,0);return new ForOfStatement(s,e)})(t,n);if(s>449)return n;let name=t.ss;for(;(16384&t.Yi)>0;)switch(t.Yi){case 16392:if(t.ts=1,jt(t),0==(3072&t.Yi))throw Reporter.error(105,{state:t});if(name=t.ss,jt(t),i=(1536&i)<<1|2048&i|(4096&i)>>1,671750===t.Yi){0===i&&(i=2048);continue}n=1024&i?new AccessScope(name,n.es):new AccessMember(n,name);continue;case 671756:t.ts=1,jt(t),i=4096,n=new AccessKeyed(n,Lt(t,0,62,e)),Ft(t,1835021);break;case 671750:t.ts=0,jt(t);const s=[];for(;1835018!==t.Yi&&(s.push(Lt(t,0,62,e)),Vt(t,1572875)););Ft(t,1835018),n=1024&i?new CallScope(name,s,n.es):2048&i?new CallMember(n,name,s):new CallFunction(n,s),i=0;break;case 540713:t.ts=0;const r=[t.ss];n=new TaggedTemplate(r,r,n),jt(t);break;case 540714:n=Et(t,i,e,n,1)}}if(s>448)return n;for(;(65536&t.Yi)>0;){const r=t.Yi;if(s>=(448&r))break;jt(t),n=new Binary(Fe[63&r],n,Lt(t,i,448&r,e)),t.ts=0}if(s>63)return n;if(Vt(t,1572879)){const s=Lt(t,i,62,e);Ft(t,1572878),n=new Conditional(n,s,Lt(t,i,62,e)),t.ts=0}if(s>62)return n;if(Vt(t,1048615)){if(!t.ts)throw Reporter.error(150,{state:t});n=new Assign(n,Lt(t,i,62,e))}if(s>61)return n;for(;Vt(t,1572883);){if(1572864===t.Yi)throw Reporter.error(112);const name=t.ss;jt(t);const s=[];for(;Vt(t,1572878);)s.push(Lt(t,i,62,e));n=new ValueConverter(n,name,s)}for(;Vt(t,1572880);){if(1572864===t.Yi)throw Reporter.error(113);const name=t.ss;jt(t);const s=[];for(;Vt(t,1572878);)s.push(Lt(t,i,62,e));n=new BindingBehavior(n,name,s)}if(1572864!==t.Yi){if(2048&e)return n;if("of"===t.ns)throw Reporter.error(151,{state:t});throw Reporter.error(101,{state:t})}return n}function Et(t,i,s,e,n){const r=[t.ss];Ft(t,540714);const h=[Lt(t,i,62,s)];for(;540713!==(t.Yi=xt(t));)r.push(t.ss),Ft(t,540714),h.push(Lt(t,i,62,s));return r.push(t.ss),t.ts=0,n?(jt(t),new TaggedTemplate(r,r,e,h)):(jt(t),new Template(r,h))}function jt(t){for(;t.length>t.index;)if(t.rs=t.index,null!==(t.Yi=We[t.Ji](t)))return;t.Yi=1572864}function Dt(t){return t.Ji=t.input.charCodeAt(++t.index)}function $t(t,i){let s=t.Ji;if(0==i){do{s=Dt(t)}while(57>=s&&s>=48);if(46!==s)return t.ss=parseInt(t.ns,10),8192;if(s=Dt(t),t.index>=t.length)return t.ss=parseInt(t.ns.slice(0,-1),10),8192}if(s>57||48>s)t.Ji=t.input.charCodeAt(--t.index);else do{s=Dt(t)}while(57>=s&&s>=48);return t.ss=parseFloat(t.ns),8192}function Mt(t){let i=1,s="";for(;96!==Dt(t);)if(36===t.Ji){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,i=0;break}s+="$"}else if(92===t.Ji)s+=String.fromCharCode(Pt(Dt(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});s+=String.fromCharCode(t.Ji)}return Dt(t),t.ss=s,i?540713:540714}function xt(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,Mt(t)}function Vt(t,i){return t.Yi===i?(jt(t),1):0}function Ft(t,i){if(t.Yi!==i)throw Reporter.error(110,{state:t,hs:i});jt(t)}function Ut(t,i,s,value){const e=s.length;for(let n=0;e>n;n+=2){const e=s[n];let r=s[n+1];if(r=r>0?r:e+1,t&&t.fill(value,e,r),i)for(let t=e;r>t;t++)i.add(t)}}function Nt(t){return i=>(Dt(i),t)}function qt(dom){const t=dom.createElement("au-m");return dom.os(t),t}function Ht(t){return t.ls&&t.ls()[0]||t.cs&&t.cs()[0]||t.path&&t.path[0]||t.target}function zt(){this.us(),this.as=1}function Wt(t){t.as=0;let i=Ht(t);const s=[];for(;i;){if(i.fs){const e=i.fs[t.type];e&&(t.stopPropagation!==zt&&(t.us=t.stopPropagation,t.stopPropagation=zt),s.push(e))}i=i.parentNode}for(let i=s.length-1;i>=0&&!t.as;i--){const e=s[i];"handleEvent"in e?e.ds(t):e(t)}}function Kt(t){t.as=0;let i=Ht(t);for(;i&&!t.as;){if(i.gs){const s=i.gs[t.type];s&&(t.stopPropagation!==zt&&(t.us=t.stopPropagation,t.stopPropagation=zt),"handleEvent"in s?s.ds(t):s(t))}i=i.parentNode}}function Qt(t,i){return t===i}function Gt(t){const i=Ht(t);if(this.target===i)return this.ps(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,i,s){return"string"==typeof t?(function(dom,i,s,e){const instructions=[],n=[],dependencies=[],r=dom.createElement(t);let h=0;return s&&Object.keys(s).forEach(to=>{const value=s[to];isHTMLTargetedInstruction(value)?(h=1,instructions.push(value)):dom.setAttribute(r,to,value)}),h&&(dom.os(r),n.push(instructions)),e&&Zt(dom,r,e,n,dependencies),new RenderPlan(dom,r,n,dependencies)})(dom,0,i,s):(function(dom,t,i,s){const e=t.description.name,instructions=[],n=[instructions],dependencies=[],r=[],bindables=t.description.bindables,h=dom.createElement(e);return dom.os(h),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(e,r)),i&&Object.keys(i).forEach(to=>{const value=i[to];if(isHTMLTargetedInstruction(value))r.push(value);else{r.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),s&&Zt(dom,h,s,n,dependencies),new RenderPlan(dom,h,n,dependencies)})(dom,t,i,s)}function Zt(dom,t,i,s,dependencies){for(let e=0,n=i.length;n>e;++e){const n=i[e];switch(typeof n){case"string":dom.appendChild(t,dom.createTextNode(n));break;case"object":dom.bs(n)?dom.appendChild(t,n):"mergeInto"in n&&n.ms(t,s,dependencies)}}}function _t(t){const i=t.index,{length:s,input:e}=t;for(;s>t.index&&58!==e.charCodeAt(++t.index););return e.slice(i,t.index).trim()}function Xt(t){++t.index;const{length:i,input:s}=t;let e="",n=0;for(;i>t.index;){switch(n=s.charCodeAt(t.index)){case 59:return++t.index,e.trim();case 47:n=s.charCodeAt(++t.index),e+=`\\${Dn(n)}`;break;case 39:e+="'";break;default:e+=Dn(n)}++t.index}return e.trim()}function stringifyDOM(t,i){let s=" ".repeat(i);if(s+=`Node: ${t.nodeName}`,3===t.nodeType&&(s+=` "${t.textContent}"`),1===t.nodeType){let i,e=0;const n=t.attributes,r=n.length;for(;r>e;++e)s+=` ${(i=n[e]).name}=${i.value}`}if(s+="\n",1===t.nodeType){let e=0,childNodes=t.childNodes,n=childNodes.length;for(;n>e;++e)s+=stringifyDOM(childNodes[e],i+1);if("TEMPLATE"===t.nodeName)for(e=0,n=(childNodes=t.content.childNodes).length;n>e;++e)s+=stringifyDOM(childNodes[e],i+1)}return s}function stringifyInstructions(t,i){let s=" ".repeat(i);switch(t.type){case"ha":s+="textBinding\n";break;case"rh":s+="callBinding\n";break;case"rk":s+="iteratorBinding\n";break;case"hb":s+="listenerBinding\n";break;case"rg":s+="propertyBinding\n";break;case"rj":s+="refBinding\n";break;case"hc":s+="stylePropertyBinding\n";break;case"re":s+="setProperty\n";break;case"hd":s+="setAttribute\n";break;case"rf":s+="interpolation\n";break;case"rd":s+="hydrateLetElement\n",t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rb":s+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"ra":s+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)});break;case"rc":s+=`hydrateTemplateController: ${t.res}\n`,s+=stringifyTemplateDefinition(t.def,i+1),t.instructions.forEach(t=>{s+=stringifyInstructions(t,i+1)})}return s}function stringifyTemplateDefinition(def,t){const i=" ".repeat(t);let s=i;return s+=`TemplateDefinition: ${def.name}\n`,s+=stringifyDOM(def.template,t+1),s+=`${i} Instructions:\n`,def.instructions.forEach(e=>{s+=`${i}  Row:\n`,e.forEach(i=>{s+=stringifyInstructions(i,t+3)})}),s}var Jt,Yt,BindingMode,ti,Hooks,LifecycleFlags,ExpressionKind,ii,DelegationStrategy,MutationKind,CollectionKind,si,ei,ni,BindingType,TargetedInstructionType,ViewCompileFlags,ri,hi,oi,li,ci,ui,ai,SymbolFlags,fi,HTMLTargetedInstructionType,NodeType,di,gi,pi,bi,mi,wi;class AttrSyntax{constructor(t,i,s,e){this.ws=t,this.vs=i,this.target=s,this.command=e}}const vi=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),yi=(function(){let t,i,s,e,n;if(null!=vi.performance&&vi.performance.now){const t=vi.performance;return function(){return t.now()}}if(null!=vi.process&&vi.process.ys){const r=function(){return(t()-e)/1e6};return i=vi.process.ys,s=(t=function(){let t;return 1e9*(t=i())[0]+t[1]})(),n=1e9*vi.process.Cs(),e=s-n,r}})(),{Ts:Ci,As:Ti,Bs:Ai,Os:Bi,Rs:Oi,ks:Ri}=(function(){if(null!=vi.performance&&vi.performance.mark&&vi.performance.measure&&vi.performance.getEntriesByName&&vi.performance.getEntriesByType&&vi.performance.clearMarks&&vi.performance.clearMeasures){const t=vi.performance;return{Ts(name){t.mark(name)},As(name,i,s){t.measure(name,i,s)},Bs:name=>t.getEntriesByName(name),Os:type=>t.getEntriesByType(type),Rs(name){t.clearMarks(name)},ks(name){t.clearMeasures(name)}}}if(null!=vi.process&&vi.process.ys){const t=[],i={},s=function(i,value){let s=0;const e=t.length,n=[];for(;e>s;s++)t[s][i]===value&&n.push(t[s]);return n},e=function(type,name){let i,s=t.length;for(;s--;)(i=t[s]).entryType!==type||void 0!==name&&i.name!==name||t.splice(s,1)};return{Ts(name){const s={name,entryType:"mark",startTime:yi(),duration:0};t.push(s),i[name]=s},As(name,s,e){let n,r;if(void 0!==e&&void 0===i[e])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${e}' does not exist.`);if(void 0!==s&&void 0===i[s])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${s}' does not exist.`);n=i[s]?i[s].startTime:0,r=i[e]?i[e].startTime:yi(),t.push({name,entryType:"measure",startTime:n,duration:r-n})},Bs:name=>s("name",name),Os:type=>s("entryType",type),Rs(name){e("mark",name)},ks(name){e("measure",name)}}}})(),{Is:ki,Ss:Ii}=(function(){const t=["moz","webkit"],i="AnimationFrame";let s=vi[`request${i}`],e=vi[`cancel${i}`]||vi[`cancelRequest${i}`];for(let n=0;!s&&2>n;++n)s=vi[`${t[n]}Request${i}`],e=vi[`${t[n]}Cancel${i}`]||vi[`${t[n]}CancelRequest${i}`];if(!s||!e){let t=0,i=0;const n=[],r=1e3/60;s=function(s){let e,h;return 0===n.length&&(e=yi(),t=(h=Math.max(0,r-(e-t)))+e,setTimeout(function(){const i=n.slice(0);n.length=0;for(let s=0;i.length>s;++s)if(!i[s].Ps)try{i[s].Wi(t)}catch(t){setTimeout(function(){throw t},0)}},Math.round(h))),n.push({Ls:++i,Wi:s,Ps:0}),i},e=function(t){for(let i=0;n.length>i;++i)n[i].Ls===t&&(n[i].Ps=1)}}const n=function(t){return s.call(vi,t)};return n.cancel=function(){e.apply(vi,arguments)},vi.requestAnimationFrame=s,vi.cancelAnimationFrame=e,{Is:n,Ss:e}})();class Si{constructor(t,i=null){this.Es=t,this.context=i,this.next=null,this.js=null,this.Ds=0}$s(t,i){return this.Es===t&&this.context===(void 0===i?null:i)}Ms(t){null!==this.Es&&(null!==this.context?this.Es.call(this.context,t):this.Es(t));const i=this.next;return this.Ds&&(this.next=null),i}connect(t){this.js=t,null!==t.next&&(t.next.js=this),this.next=t.next,t.next=this}disconnect(t=0){this.Ds=1,this.Es=null,this.context=null,null!==this.js&&(this.js.next=this.next),null!==this.next&&(this.next.js=this.js);const i=this.next;return this.next=t?null:i,this.js=null,i}}const Pi={},Li={},PLATFORM={global:vi,xs:new class{constructor(){this.head=new Si(null,null),this.Vs=-1,this.Fs=1,this.Us=-1,this.Ns=0,this.qs=null,this.resolve=i,this.Hs=(t=>{this.Vs=-1,this.Ns&&(this.update(t),this.Ns&&-1===this.Vs&&null!==this.head.next&&(this.Vs=ki(this.Hs))),this.resolve(t),this.resolve=i,this.qs=null})}add(t,i){const s=new Si(t,i);let e=this.head.next,n=this.head;if(null===e)s.connect(n);else{for(;null!==e;)n=e,e=e.next;null===s.js&&s.connect(n)}return this.Ns?this.zs():this.start(),this}remove(t,i){let s=this.head.next;for(;null!==s;)s=s.$s(t,i)?s.disconnect():s.next;return null===this.head.next&&this.Ws(),this}start(){this.Ns||(this.Ns=1,this.zs())}stop(){this.Ns&&(this.Ns=0,this.Ws())}update(t=yi()){let i;if(t>this.Us){this.Fs=~~(60*(i=t-this.Us)+.5)/1e3;const s=this.head;let e=s.next;for(;null!==e;)e=e.Ms(this.Fs);null===s.next&&this.Ws()}else this.Fs=0;this.Us=t}Ks(){return null===this.qs&&(this.qs=new Promise(t=>{this.resolve=t})),this.qs}zs(){-1===this.Vs&&null!==this.head.next&&(this.Us=yi(),this.Vs=ki(this.Hs))}Ws(){-1!==this.Vs&&(Ii(this.Vs),this.Vs=-1)}},Qs:Object.freeze([]),$t:Object.freeze({}),Gs:i,now:yi,mark:Ci,measure:Ti,getEntriesByName:Ai,getEntriesByType:Bi,clearMarks:Oi,clearMeasures:Ri,_i(t){let value=Pi[t];if(void 0!==value)return value;value="";let i,s=1,e=0;for(let n=0,r=t.length;r>n;++n)"-"===(i=t.charAt(n))||"."===i||"_"===i?e=1:(value+=s?i.toLowerCase():e?i.toUpperCase():i,e=0),s=0;return Pi[t]=value},zi(t){let value=Li[t];if(void 0!==value)return value;value="";let i,s,e=1;for(let n=0,r=t.length;r>n;++n)s=(i=t.charAt(n)).toLowerCase(),value+=e?s:i!==s?`-${s}`:s,e=0;return Li[t]=value},toArray(t){const i=t.length,s=Array(i);for(let e=0;i>e;++e)s[e]=t[e];return s},requestAnimationFrame:t=>ki(t),clearInterval(t){vi.clearInterval(t)},clearTimeout(t){vi.clearTimeout(t)},setInterval:(t,i,...s)=>vi.setInterval(t,i,...s),setTimeout:(t,i,...s)=>vi.setTimeout(t,i,...s)},Reporter={write(t,...i){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,Zs:0,_s:null,Xs(name,t){},Js(){},Ys(t){},te(t){},ie(t){},se(){}};"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(t,i){return i[t]},Reflect.metadata=function(t,i){return function(s){s[t]=i}});const DI={ee(...t){return 0===arguments.length?new $i:(new $i).register(...t)},ne:t=>Reflect.getOwnMetadata("design:paramtypes",t)||PLATFORM.Qs,re(t){let dependencies;if(void 0===t.inject)dependencies=DI.ne(t);else{dependencies=[];let i=t;for(;"function"==typeof i;)i.hasOwnProperty("inject")&&dependencies.push(...i.inject),i=Object.getPrototypeOf(i)}return dependencies},he(t){const i=function(t,s,e){if(void 0===t)throw Reporter.error(16,i.oe,i);return(t.inject||(t.inject=[]))[e]=i,t};return i.oe=t||"Interface",i.le=function(){return i},i.ce=function(t){return i.ce=function(){throw Reporter.error(17,i)},i.register=function(s,e){const n=e||i;return t({v:value=>s.Ii(n,new Ei(n,0,value)),singleton:value=>s.Ii(n,new Ei(n,1,value)),transient:value=>s.Ii(n,new Ei(n,2,value)),Wi:value=>s.Ii(n,new Ei(n,3,value)),ue:t=>s.Ii(n,new Ei(n,5,t))})},i},i},inject:(...dependencies)=>(function(t,i,s){if("number"==typeof s){if(!t.hasOwnProperty("inject")){const i=DI.ne(t);t.inject=i.slice()}1===dependencies.length&&(t.inject[s]=dependencies[0])}else if(i){const s=t.constructor;(s.inject||(s.inject={}))[i]=dependencies[0]}else if(s)s.value.inject=dependencies;else if(0===dependencies.length){const i=DI.ne(t);t.inject=i.slice()}else t.inject=dependencies}),transient:t=>(t.register=function(i){return Registration.transient(t,t).register(i,t)},t),singleton:t=>(t.register=function(i){return Registration.singleton(t,t).register(i,t)},t)},IContainer=DI.he("IContainer").le(),IServiceLocator=IContainer,inject=DI.inject,all=s((t,i,s)=>s.getAll(t)),lazy=s((t,i,s)=>{let e=null;return()=>(null===e&&(e=s.get(t)),e)}),optional=s((t,i,s)=>s.has(t,1)?s.get(t):null);(function(t){t[t.v=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.Wi=3]="callback",t[t.ae=4]="array",t[t.Ni=5]="alias"})(Jt||(Jt={}));class Ei{constructor(t,strategy,i){this.key=t,this.strategy=strategy,this.state=i}register(t,i){return t.Ii(i||this.key,this)}resolve(t,i){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const i=t.fe(this.state);return this.state=i.construct(t)}case 2:return t.fe(this.state).construct(i);case 3:return this.state(t,i,this);case 4:return this.state[0].resolve(t,i);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}fe(t){switch(this.strategy){case 1:case 2:return t.fe(this.state);default:return null}}}class ji{constructor(t,i,dependencies){this.de=t,this.ge=i,this.dependencies=dependencies,this.pe=null}static create(t){const dependencies=DI.re(t);return new ji(t,Mi[dependencies.length]||xi,dependencies)}construct(t,i){const s=this.pe;let e=void 0!==i?this.ge.be(t,this.de,this.dependencies,i):this.ge.me(t,this.de,this.dependencies);if(null===s)return e;for(let t=0,i=s.length;i>t;++t)e=s[t](e);return e}we(t){return null===this.pe&&(this.pe=[]),this.pe.push(t),1}}const Di={resolve:(t,i)=>i};class $i{constructor(t={}){this.parent=null,this.ve=0,this.ye=new Map,this.Ce=t,this.Te=t.Te||(t.Te=new Map),this.Ae=t.Ae||(t.Ae=Object.create(null)),this.ye.set(IContainer,Di)}register(...t){if(100==++this.ve)throw Error("Unable to autoregister dependency");let i,s,value,e,n;for(let h=0,o=t.length;o>h;++h)if(r(i=t[h]))i.register(this);else if(void 0!==i.prototype)Registration.singleton(i,i).register(this);else for(e=0,n=(s=Object.keys(i)).length;n>e;++e)r(value=i[s[e]])?value.register(this):this.register(value);return--this.ve,this}Ii(t,i){h(t);const s=this.ye,e=s.get(t);return void 0===e?(s.set(t,i),"string"==typeof t&&(this.Ae[t]=i)):e instanceof Ei&&4===e.strategy?e.state.push(i):s.set(t,new Ei(t,4,[e,i])),i}we(t,i){const s=this.Be(t);if(null===s)return 0;if(s.fe){const t=s.fe(this);return null===t?0:t.we(i)}return 0}Be(t,i=1){if(h(t),t.resolve)return t;let s,e=this;for(;null!==e;){if(void 0!==(s=e.ye.get(t)))return s;if(null===e.parent)return i?this.Oe(t,e):null;e=e.parent}return null}has(t,i=0){return this.ye.has(t)?1:i&&null!==this.parent?this.parent.has(t,1):0}get(t){if(h(t),t.resolve)return t.resolve(this,this);let i,s=this;for(;null!==s;){if(void 0!==(i=s.ye.get(t)))return i.resolve(s,this);if(null===s.parent)return(i=this.Oe(t,s)).resolve(s,this);s=s.parent}}getAll(t){h(t);let i,s=this;for(;null!==s;){if(void 0!==(i=s.ye.get(t)))return o(i,s,this);if(null===this.parent)return PLATFORM.Qs;s=s.parent}return PLATFORM.Qs}fe(t){let i=this.Te.get(t);return void 0===i&&(i=ji.create(t),this.Te.set(t,i)),i}Ri(){const t=this.Ce,i={Te:t.Te,Ae:Object.assign({},t.Ae)},s=new $i(i);return s.parent=this,s}Oe(t,i){if(t.register){const s=t.register(i,t);if(!s||!s.resolve)throw Reporter.error(40);return s}const s=new Ei(t,1,t);return i.ye.set(t,s),s}}const Registration={v:(t,value)=>new Ei(t,0,value),singleton:(t,value)=>new Ei(t,1,value),transient:(t,value)=>new Ei(t,2,value),Wi:(t,i)=>new Ei(t,3,i),Ni:(t,i)=>new Ei(i,5,t),Re:(t,...i)=>({register(s){const e=s.Be(t);if(null!==e){let t=null;if(e.fe){const n=e.fe(s);null!==n&&(t=n.construct(s,i))}else t=e.resolve(s,s);null!==t&&t.register(s)}}})},Mi=[{me:(t,i)=>new i,be:l},{me:(t,i,s)=>new i(t.get(s[0])),be:l},{me:(t,i,s)=>new i(t.get(s[0]),t.get(s[1])),be:l},{me:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2])),be:l},{me:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3])),be:l},{me:(t,i,s)=>new i(t.get(s[0]),t.get(s[1]),t.get(s[2]),t.get(s[3]),t.get(s[4])),be:l}],xi={me:l,be:l},Profiler=(function(){const t=PLATFORM.now,i=[];let s;const e={ke(name){i.push(name);let e=0,n=0;return{Xs(){1==++e&&(n=t(),++s[name].Ie),++s[name].Se},Js(){0==--e&&(s[name].duration+=t()-n)}}},enable(){s={};for(const t of i)s[t]={name:t,duration:0,Ie:0,Se:0};e.enabled=1},disable(){e.enabled=0},Pe(t){Object.keys(s).map(t=>s[t]).sort((t,i)=>i.duration-t.duration).forEach(i=>{t(i.name,i.duration,i.Ie,i.Se)})},enabled:0};return e})();class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const i=t._(name),s=this.context.Ae;let e=s[i];if(void 0===e&&(e=s[i]=this.context.Be(i,0)),null!==e&&e.fe){const t=e.fe(this.context);if(null!==t){const i=t.de.description;return void 0===i?null:i}}return null}create(t,name){const i=t._(name),s=this.context.Ae;let e=s[i];if(void 0===e&&(e=s[i]=this.context.Be(i,0)),null!==e){const t=e.resolve(this.context,this.context);return void 0===t?null:t}return null}}Yt=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>void 0===t?n:n(t),transient:t=>void 0===t?e:e(t),PLATFORM,Reporter,Tracer,Profiler,RuntimeCompilationResources});class Vi{constructor(t,i,s,e){if(this.Le=t,this.repeat=i,this.Ee=s,this.je=e,e)switch(t.length){case 0:this.has=this.De;break;case 1:this.has=this.$e;break;default:this.has=this.Me}else switch(t.length){case 0:this.has=this.xe;break;case 1:this.has=this.Ve;break;default:this.has=this.Fe}}$s(t){return this.Le===t.Le&&this.repeat===t.repeat&&this.Ee===t.Ee&&this.je===t.je}Fe(t){return-1!==this.Le.indexOf(t)}Ve(t){return this.Le===t}xe(t){return 0}Me(t){return-1===this.Le.indexOf(t)}$e(t){return this.Le!==t}De(t){return 1}}class Interpretation{get pattern(){const value=this.Ue;return""===value?null:value}set pattern(value){null===value?(this.Ue="",this.parts=PLATFORM.Qs):(this.Ue=value,this.parts=this.Ne[value])}constructor(){this.Ue="",this.parts=PLATFORM.Qs,this.qe={},this.Ne={}}append(t,i){const{qe:s}=this;void 0===s[t]?s[t]=i:s[t]+=i}next(t){const{qe:i}=this;if(void 0!==i[t]){const{Ne:s}=this;void 0===s[t]?s[t]=[i[t]]:s[t].push(i[t]),i[t]=void 0}}}class State{get pattern(){return this.He?this.ze[0]:null}constructor(t,...i){this.We=t,this.Ke=[],this.types=null,this.ze=i,this.He=0}Qe(t){const i=this.Ke,s=i.length;let e=null;for(let n=0;s>n;++n)if(t.$s((e=i[n]).We))return e;return null}append(t,i){const{ze:s}=this;-1===s.indexOf(i)&&s.push(i);let e=this.Qe(t);return null===e&&(e=new State(t,i),this.Ke.push(e),t.repeat&&e.Ke.push(e)),e}Ge(t,i){const s=[],e=this.Ke,n=e.length;let r=0,h=null,o=0,l=0;for(;n>o;++o)if((h=e[o]).We.has(t))if(s.push(h),r=h.ze.length,l=0,h.We.Ee)for(;r>l;++l)i.next(h.ze[l]);else for(;r>l;++l)i.append(h.ze[l],t);return s}}class Fi{constructor(t){this.text=t;const i=this.Ze=t.length,s=this._e=[];for(let e=0;i>e;++e)s.push(new Vi(t[e],0,0,0))}Xe(t){const{Ze:i,_e:s}=this;for(let e=0;i>e;++e)t(s[e])}}class Ui{constructor(t){this.text="PART",this.Je=new Vi(t,1,0,1)}Xe(t){t(this.Je)}}class Ni{constructor(t){this.text=t,this.Je=new Vi(t,0,1,0)}Xe(t){t(this.Je)}}class qi{constructor(){this.Ye=0,this.tn=0,this.symbols=0}}const ISyntaxInterpreter=DI.he("ISyntaxInterpreter").ce(t=>t.singleton(Hi));class Hi{constructor(){this.in=new State(null),this.sn=[this.in]}add(t){let i=0;if(Array.isArray(t)){const s=t.length;for(;s>i;++i)this.add(t[i]);return}let s=this.in;const def=t,e=def.pattern,n=new qi,r=this.parse(def,n),h=r.length,o=t=>{s=s.append(t,e)};for(i=0;h>i;++i)r[i].Xe(o);s.types=n,s.He=1}Re(name){const t=new Interpretation;let i=this.sn;const s=name.length;for(let e=0;s>e&&0!==(i=this.en(i,name.charAt(e),t)).length;++e);if(i.sort((t,i)=>{if(!t.He)return i.He?1:0;if(!i.He)return-1;const s=t.types,e=i.types;return s.Ye!==e.Ye?e.Ye-s.Ye:s.tn!==e.tn?e.tn-s.tn:s.symbols!==e.symbols?e.symbols-s.symbols:0}),i.length>0){const s=i[0];s.We.Ee||t.next(s.pattern),t.pattern=s.pattern}return t}en(t,i,s){const e=[];let n=null;const r=t.length;for(let h=0;r>h;++h)e.push(...(n=t[h]).Ge(i,s));return e}parse(def,t){const i=[],s=def.pattern,e=s.length;let n=0,r=0,h="";for(;e>n;)h=s.charAt(n),-1===def.symbols.indexOf(h)?n===r&&"P"===h&&"PART"===s.slice(n,n+4)?(r=n+=4,i.push(new Ui(def.symbols)),++t.tn):++n:n!==r?(i.push(new Fi(s.slice(r,n))),++t.Ye,r=n):(i.push(new Ni(s.slice(r,n+1))),++t.symbols,r=++n);return r!==n&&(i.push(new Fi(s.slice(r,n))),++t.Ye),i}}const IAttributePattern=DI.he("IAttributePattern").le();class DotSeparatedAttributePattern{nn(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[1])}rn(t,i,parts){return new AttrSyntax(t,i,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{hn(t,i,parts){return new AttrSyntax(t,i,"ref",null)}on(t,i,parts){return new AttrSyntax(t,i,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{ln(t,i,parts){return new AttrSyntax(t,i,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{cn(t,i,parts){return new AttrSyntax(t,i,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.he("IAttributeParser").ce(t=>t.singleton(zi));Profiler.ke("AttributeParser");class zi{constructor(t,i){this.un=t,this.cache={};const s=this.ze={};i.forEach(i=>{const e=i.t;t.add(e),e.forEach(def=>{s[def.pattern]=i})})}parse(name,value){let t=this.cache[name];void 0===t&&(t=this.cache[name]=this.un.Re(name));const i=t.pattern;return null===i?new AttrSyntax(name,value,name,null):this.ze[i][i](name,value,t.parts)}}zi.inject=[ISyntaxInterpreter,all(IAttributePattern)],(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Ki=2]="toView",BindingMode[BindingMode.an=4]="fromView",BindingMode[BindingMode.fn=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(State){State[State.dn=0]="none",State[State.gn=1]="isBinding",State[State.pn=2]="isBound",State[State.bn=4]="isAttaching",State[State.mn=8]="isAttached",State[State.wn=16]="isMounted",State[State.vn=32]="isDetaching",State[State.yn=64]="isUnbinding",State[State.Cn=128]="isCached",State[State.Tn=256]="isContainerless"})(ti||(ti={})),(function(Hooks){Hooks[Hooks.dn=1]="none",Hooks[Hooks.An=2]="hasCreated",Hooks[Hooks.Bn=4]="hasBinding",Hooks[Hooks.On=8]="hasBound",Hooks[Hooks.Rn=16]="hasAttaching",Hooks[Hooks.kn=32]="hasAttached",Hooks[Hooks.In=64]="hasDetaching",Hooks[Hooks.Sn=128]="hasDetached",Hooks[Hooks.Pn=256]="hasUnbinding",Hooks[Hooks.Ln=512]="hasUnbound",Hooks[Hooks.En=1024]="hasRender",Hooks[Hooks.jn=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.dn=0]="none",LifecycleFlags[LifecycleFlags.Y=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.Dn=3]="mutation",LifecycleFlags[LifecycleFlags.$n=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Mn=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.xn=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.G=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Vn=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.rt=224]="fromFlush",LifecycleFlags[LifecycleFlags.Fn=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Un=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Nn=128]="fromTick",LifecycleFlags[LifecycleFlags.qn=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Xt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.ht=1024]="fromBind",LifecycleFlags[LifecycleFlags.yi=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.xt=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Kt=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ei=16384]="fromCache",LifecycleFlags[LifecycleFlags.Hn=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.zn=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Wn=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Kn=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags._t=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.lt=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Qn=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags.Di=58720256]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Gn=8388608]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Dt=16777216]="useProxies",LifecycleFlags[LifecycleFlags.Zn=33554432]="keyedMode"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind._n=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.de=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=6199]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(t){t[t.Xn=0]="None",t[t.Jn=1]="Subscriber0",t[t.Yn=2]="Subscriber1",t[t.tr=4]="Subscriber2",t[t.ir=8]="SubscribersRest",t[t.sr=15]="Any"})(ii||(ii={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.dn=0]="none",DelegationStrategy[DelegationStrategy.er=1]="capturing",DelegationStrategy[DelegationStrategy.nr=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(MutationKind){MutationKind[MutationKind.v=1]="instance",MutationKind[MutationKind.T=2]="collection",MutationKind[MutationKind.A=4]="proxy"})(MutationKind||(MutationKind={})),(function(CollectionKind){CollectionKind[CollectionKind.rr=8]="indexed",CollectionKind[CollectionKind.hr=4]="keyed",CollectionKind[CollectionKind.ae=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));const Wi=new WeakMap;let Ki=class{constructor(t,i,s){this.raw=i,this.key=s,this.A=t,this.subscribe=this.u,this.unsubscribe=this.g}K(value,t){const i=this.raw[this.key];i!==value&&(this.raw[this.key]=value,this.C(value,i,t|LifecycleFlags.Dt|LifecycleFlags.G))}W(){return this.raw[this.key]}};Ki=c([subscriberCollection(MutationKind.v)],Ki);let ProxyObserver=si=class{constructor(t){this.raw=t,this.A=new Proxy(t,this),Wi.set(t,this.A),this.or={}}static lr(t){if(void 0===t.cr){const i=Wi.get(t);return void 0===i?t:i}return t}static ur(t){const i=t.cr;return void 0===i?t:i}static xi(t,i){let s;if(void 0===t.cr){const i=Wi.get(t);s=void 0===i?new si(t):i.wt}else s=t.wt;if(1===arguments.length)return s;let e=s.or[i];if(void 0===e){const n=this.ur(t);e=s.or[i]=new Ki(s.A,n,i)}return e}static ar(t){return void 0!==t.cr}get(t,i,s){return"$observer"===i?this:"$raw"===i?t:t[i]}set(t,i,value,s){const e=t[i];return e!==value&&(Reflect.set(t,i,value,t),this.dr(value,e,i),this.C(i,value,e,LifecycleFlags.Dt|LifecycleFlags.G)),1}deleteProperty(t,i){const s=t[i];return Reflect.deleteProperty(t,i)?(void 0!==s&&(this.dr(void 0,s,i),this.C(i,void 0,s,LifecycleFlags.Dt|LifecycleFlags.G)),1):0}defineProperty(t,i,s){const e=t[i];return Reflect.defineProperty(t,i,s)?(s.value!==e&&(this.dr(s.value,e,i),this.C(i,s.value,e,LifecycleFlags.Dt|LifecycleFlags.G)),1):0}apply(t,i,s){return Reflect.apply(t,t,s)}subscribe(t,i){if(1===arguments.length)this.u(t);else{let s=this.or[i];void 0===s&&(s=this.or[i]=new Ki(this.A,this.raw,i)),s.u(t)}}unsubscribe(t,i){if(1===arguments.length)this.g(t);else{const s=this.or[i];void 0!==s&&s.g(t)}}dr(t,i,s){const e=this.or[s];void 0!==e&&e.C(t,i,LifecycleFlags.Dt|LifecycleFlags.G)}};ProxyObserver=si=c([subscriberCollection(MutationKind.A)],ProxyObserver);const Qi=Reflect.defineProperty,Gi={get:void 0,set:void 0,Ei:1,gr:1};let SetterObserver=class{constructor(t,i,s){this.dt=t&LifecycleFlags.Di,this.N=i,this.q=s}W(){return this.H}K(t,i){const s=this.H;s!==t&&(this.H=t,i&LifecycleFlags.ht||this.C(t,s,this.dt|i),this.U||(this.N[this.q]=t))}};SetterObserver=c([propertyObserver()],SetterObserver),(function(t){t[t.pr=250]="UndefinedScope",t[t.br=251]="NullScope",t[t.mr=252]="NilOverrideContext",t[t.wr=253]="NilParentScope"})(ei||(ei={}));class Zi{xi(t,i,s){return void 0===this[s]&&(this[s]=new SetterObserver(t,i,s)),this[s]}}class BindingContext{constructor(t,value){if(this.vr=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const i in t)t.hasOwnProperty(i)&&(this[i]=t[i])}static create(t,i,value){const s=new BindingContext(i,value);return t&LifecycleFlags.Dt?ProxyObserver.xi(s).A:s}static get(t,name,i,s){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let e=t.yr;if(i>0){for(;i>0;){if(null===e.Cr)return;i--,e=e.Cr}return name in e?e:e.Tr}for(;e&&!(name in e)&&!(e.Tr&&name in e.Tr);)e=e.Cr;if(e)return name in e?e:e.Tr;if(s&LifecycleFlags.Gn&&null!==t.pi){const e=this.get(t.pi,name,i,s&~LifecycleFlags.Gn|LifecycleFlags.Qn);if(null!==e)return e}return s&LifecycleFlags.Qn?null:t.Tr||t.yr}Ar(t){return void 0===this.ji&&(this.ji=new Zi),this.ji}}class Scope{constructor(t,i){this.Tr=t,this.yr=i,this.pi=null}static create(t,i,s){return new Scope(i,null==s?OverrideContext.create(t,i,s):s)}static Br(t,i){if(null==i)throw Reporter.error(252);return new Scope(i.Tr,i)}static Or(t,i,s){if(null==i)throw Reporter.error(253);return new Scope(s,OverrideContext.create(t,s,i.yr))}}class OverrideContext{constructor(t,i){this.vr=1,this.Tr=t,this.Cr=i}static create(t,i,s){return new OverrideContext(i,void 0===s?null:s)}Ar(){return void 0===this.ji&&(this.ji=new Zi),this.ji}}const ISignaler=DI.he("ISignaler").ce(t=>t.singleton(_i));class _i{constructor(){this.Rr=Object.create(null)}kr(name,t){const i=this.Rr[name];if(void 0!==i)for(const s of i.keys())s.B(void 0,void 0,t|LifecycleFlags.G)}Ir(name,t){const i=this.Rr,s=i[name];void 0===s?i[name]=new Set([t]):s.add(t)}Sr(name,t){const i=this.Rr[name];i&&i.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",_(name){return`${this.name}:${name}`},Pr(t){return t.kind===this},Lr(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=BindingBehaviorResource,s.description=e,s.register=B,s}},ValueConverterResource={name:"value-converter",_(name){return`${this.name}:${name}`},Pr(t){return t.kind===this},Lr(t,i){const s=i,e="string"==typeof t?{name:t}:t;return s.kind=ValueConverterResource,s.description=e,s.register=O,s}};(function(t){t[t.Er=202]="NoLocator",t[t.jr=203]="NoBehaviorFound",t[t.Dr=204]="BehaviorAlreadyApplied",t[t.$r=205]="NoConverterFound",t[t.Mr=206]="NoBinding",t[t.xr=207]="NotAFunction",t[t.Vr=208]="UnknownOperator",t[t.pr=250]="UndefinedScope",t[t.br=251]="NullScope"})(ni||(ni={}));class BindingBehavior{constructor(t,name,i){this.X=38962,this.Fr=t,this.name=name,this.Ur=i,this.Nr=BindingBehaviorResource._(this.name)}evaluate(t,i,s){return this.Fr.evaluate(t,i,s)}assign(t,i,s,value){return this.Fr.assign(t,i,s,value)}connect(t,i,s){this.Fr.connect(t,i,s)}bind(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.qr;if(!e)throw Reporter.error(202,this);hasBind(this.Fr)&&this.Fr.bind(t,i,s);const n=this.Nr,r=e.get(n);if(!r)throw Reporter.error(203,this);null==s[n]?(s[n]=r,r.bind.apply(r,[t,i,s].concat(R(t,i,e,this.Ur)))):Reporter.write(204,this)}Hr(t,i,s){const e=this.Nr;null!=s[e]?(s[e].Hr(t,i,s),s[e]=null):Reporter.write(204,this),hasUnbind(this.Fr)&&this.Fr.Hr(t,i,s)}accept(t){return t.zr(this)}}class ValueConverter{constructor(t,name,i){this.X=36913,this.Fr=t,this.name=name,this.Ur=i,this.Wr=ValueConverterResource._(this.name)}evaluate(t,i,s){if(!s)throw Reporter.error(202,this);const e=s.get(this.Wr);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Ur,r=n.length,h=Array(r+1);h[0]=this.Fr.evaluate(t,i,s);for(let e=0;r>e;++e)h[e+1]=n[e].evaluate(t,i,s);return e.Ki.apply(e,h)}return this.Fr.evaluate(t,i,s)}assign(t,i,s,value){if(!s)throw Reporter.error(202,this);const e=s.get(this.Wr);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.an.apply(e,[value].concat(R(t,i,s,this.Ur)))),this.Fr.assign(t,i,s,value)}connect(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);if(!s)throw Reporter.error(206,this);const e=s.qr;if(!e)throw Reporter.error(202,this);this.Fr.connect(t,i,s);const n=this.Ur;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,i,s);const r=e.get(this.Wr);if(!r)throw Reporter.error(205,this);const h=r.Rr;if(void 0===h)return;const o=e.get(ISignaler);for(let t=0,i=h.length;i>t;++t)o.Ir(h[t],s)}Hr(t,i,s){const e=s.qr,n=e.get(this.Wr).Rr;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,i=n.length;i>t;++t)r.Sr(n[t],s)}accept(t){return t.Kr(this)}}class Assign{constructor(t,value){this.X=8208,this.target=t,this.value=value}evaluate(t,i,s){return this.target.assign(t,i,s,this.value.evaluate(t,i,s))}connect(t,i,s){}assign(t,i,s,value){return this.value.assign(t,i,s,value),this.target.assign(t,i,s,value)}accept(t){return t.Qr(this)}}class Conditional{constructor(t,i,s){this.X=63,this.assign=PLATFORM.Gs,this.Gr=t,this.Zr=i,this._r=s}evaluate(t,i,s){return this.Gr.evaluate(t,i,s)?this.Zr.evaluate(t,i,s):this._r.evaluate(t,i,s)}connect(t,i,s){this.Gr.evaluate(t,i,null)?(this.Gr.connect(t,i,s),this.Zr.connect(t,i,s)):(this.Gr.connect(t,i,s),this._r.connect(t,i,s))}accept(t){return t.Xr(this)}}class AccessThis{constructor(t=0){this.X=1793,this.assign=PLATFORM.Gs,this.connect=PLATFORM.Gs,this.es=t}evaluate(t,i,s){if(void 0===i)throw Reporter.error(250,this);if(null===i)throw Reporter.error(251,this);let e=i.yr,n=this.es;for(;n--&&e;)e=e.Cr;return 1>n&&e?e.Tr:void 0}accept(t){return t.Jr(this)}}AccessThis.Yr=new AccessThis(0),AccessThis.th=new AccessThis(1);class AccessScope{constructor(name,t=0){this.X=10082,this.name=name,this.es=t}evaluate(t,i,s){return BindingContext.get(i,this.name,this.es,t)[this.name]}assign(t,i,s,value){const e=BindingContext.get(i,this.name,this.es,t);return e?e[this.name]=value:void 0}connect(t,i,s){const e=BindingContext.get(i,this.name,this.es,t);s.nt(t,e,this.name)}accept(t){return t.ih(this)}}class AccessMember{constructor(t,name){this.X=9323,this.object=t,this.name=name}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);return null==e?e:e[this.name]}assign(t,i,s,value){let e=this.object.evaluate(t,i,s);return null!==e&&"object"==typeof e||this.object.assign(t,i,s,e={}),e[this.name]=value,value}connect(t,i,s){const e=this.object.evaluate(t,i,null);this.object.connect(t,i,s),e&&s.nt(t,e,this.name)}accept(t){return t.sh(this)}}class AccessKeyed{constructor(t,i){this.X=9324,this.object=t,this.key=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s);if(null!=e)return e[this.key.evaluate(t,i,s)]}assign(t,i,s,value){return this.object.evaluate(t,i,s)[this.key.evaluate(t,i,s)]=value}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),"object"==typeof e&&null!==e){this.key.connect(t,i,s);const n=this.key.evaluate(t,i,null);Array.isArray(e)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const i=value.length;if(0===i)return 0;let s;for(let t=0;i>t;++t)if(48>(s=value.charCodeAt(t))||s>57)return 0;return 1})(n)||s.nt(t,e,n)}}accept(t){return t.eh(this)}}class CallScope{constructor(name,t,i=0){this.X=1448,this.assign=PLATFORM.Gs,this.name=name,this.Ur=t,this.es=i}evaluate(t,i,s){const e=R(t,i,s,this.Ur),n=BindingContext.get(i,this.name,this.es,t),r=k(t,n,this.name);if(r)return r.apply(n,e)}connect(t,i,s){const e=this.Ur;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.nh(this)}}class CallMember{constructor(t,name,i){this.X=1161,this.assign=PLATFORM.Gs,this.object=t,this.name=name,this.Ur=i}evaluate(t,i,s){const e=this.object.evaluate(t,i,s),n=R(t,i,s,this.Ur),r=k(t,e,this.name);if(r)return r.apply(e,n)}connect(t,i,s){const e=this.object.evaluate(t,i,null);if(this.object.connect(t,i,s),k(t&~LifecycleFlags.Y,e,this.name)){const e=this.Ur;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.rh(this)}}class CallFunction{constructor(t,i){this.X=1162,this.assign=PLATFORM.Gs,this.hh=t,this.Ur=i}evaluate(t,i,s){const e=this.hh.evaluate(t,i,s);if("function"==typeof e)return e.apply(null,R(t,i,s,this.Ur));if(t&LifecycleFlags.Y||null!=e)throw Reporter.error(207,this)}connect(t,i,s){const e=this.hh.evaluate(t,i,null);if(this.hh.connect(t,i,s),"function"==typeof e){const e=this.Ur;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}}accept(t){return t.oh(this)}}class Binary{constructor(t,i,s){this.X=46,this.assign=PLATFORM.Gs,this.lh=t,this.left=i,this.right=s,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){const e=this.left.evaluate(t,i,null);this.left.connect(t,i,s),"&&"===this.lh&&!e||"||"===this.lh&&e||this.right.connect(t,i,s)}uh(t,i,s){return this.left.evaluate(t,i,s)&&this.right.evaluate(t,i,s)}ah(t,i,s){return this.left.evaluate(t,i,s)||this.right.evaluate(t,i,s)}fh(t,i,s){return this.left.evaluate(t,i,s)==this.right.evaluate(t,i,s)}dh(t,i,s){return this.left.evaluate(t,i,s)===this.right.evaluate(t,i,s)}gh(t,i,s){return this.left.evaluate(t,i,s)!=this.right.evaluate(t,i,s)}ph(t,i,s){return this.left.evaluate(t,i,s)!==this.right.evaluate(t,i,s)}bh(t,i,s){const e=this.right.evaluate(t,i,s);return"function"==typeof e?this.left.evaluate(t,i,s)instanceof e:0}mh(t,i,s){const e=this.right.evaluate(t,i,s);return null!==e&&"object"==typeof e?this.left.evaluate(t,i,s)in e:0}wh(t,i,s){return this.left.evaluate(t,i,s)+this.right.evaluate(t,i,s)}vh(t,i,s){return this.left.evaluate(t,i,s)-this.right.evaluate(t,i,s)}yh(t,i,s){return this.left.evaluate(t,i,s)*this.right.evaluate(t,i,s)}Ch(t,i,s){return this.left.evaluate(t,i,s)/this.right.evaluate(t,i,s)}Th(t,i,s){return this.left.evaluate(t,i,s)%this.right.evaluate(t,i,s)}Ah(t,i,s){return this.left.evaluate(t,i,s)<this.right.evaluate(t,i,s)}Bh(t,i,s){return this.left.evaluate(t,i,s)>this.right.evaluate(t,i,s)}Oh(t,i,s){return this.left.evaluate(t,i,s)<=this.right.evaluate(t,i,s)}Rh(t,i,s){return this.left.evaluate(t,i,s)>=this.right.evaluate(t,i,s)}accept(t){return t.kh(this)}}class Unary{constructor(t,i){this.X=39,this.assign=PLATFORM.Gs,this.lh=t,this.Fr=i,this.evaluate=this[t]}evaluate(t,i,s){throw Reporter.error(208,this)}connect(t,i,s){this.Fr.connect(t,i,s)}Ih(t,i,s){this.Fr.evaluate(t,i,s)}Sh(t,i,s){return typeof this.Fr.evaluate(t,i,s)}Ph(t,i,s){return!this.Fr.evaluate(t,i,s)}vh(t,i,s){return-this.Fr.evaluate(t,i,s)}wh(t,i,s){return+this.Fr.evaluate(t,i,s)}accept(t){return t.Lh(this)}}class PrimitiveLiteral{constructor(value){this.X=17925,this.assign=PLATFORM.Gs,this.connect=PLATFORM.Gs,this.value=value}evaluate(t,i,s){return this.value}accept(t){return t.Eh(this)}}PrimitiveLiteral.jh=new PrimitiveLiteral(void 0),PrimitiveLiteral.Dh=new PrimitiveLiteral(null),PrimitiveLiteral.$h=new PrimitiveLiteral(1),PrimitiveLiteral.Mh=new PrimitiveLiteral(0),PrimitiveLiteral.xh=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.X=17955,this.assign=PLATFORM.Gs,this.elements=t}evaluate(t,i,s){const e=this.elements,n=e.length,r=Array(n);for(let h=0;n>h;++h)r[h]=e[h].evaluate(t,i,s);return r}connect(t,i,s){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Vh(this)}}ArrayLiteral.xh=new ArrayLiteral(PLATFORM.Qs);class ObjectLiteral{constructor(t,i){this.X=17956,this.assign=PLATFORM.Gs,this.keys=t,this.values=i}evaluate(t,i,s){const e={},n=this.keys,r=this.values;for(let h=0,o=n.length;o>h;++h)e[n[h]]=r[h].evaluate(t,i,s);return e}connect(t,i,s){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,i,s)}accept(t){return t.Fh(this)}}ObjectLiteral.xh=new ObjectLiteral(PLATFORM.Qs,PLATFORM.Qs);class Template{constructor(t,i){this.X=17958,this.assign=PLATFORM.Gs,this.Uh=t,this.J=void 0===i?PLATFORM.Qs:i}evaluate(t,i,s){const e=this.J,n=this.Uh;let r=n[0];for(let h=0,o=e.length;o>h;++h)r+=e[h].evaluate(t,i,s),r+=n[h+1];return r}connect(t,i,s){const e=this.J;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s),n++}accept(t){return t.Nh(this)}}Template.xh=new Template([""]);class TaggedTemplate{constructor(t,i,s,e){this.X=1197,this.assign=PLATFORM.Gs,this.Uh=t,this.Uh.raw=i,this.hh=s,this.J=void 0===e?PLATFORM.Qs:e}evaluate(t,i,s){const e=this.J,n=e.length,r=Array(n);for(let h=0,o=n;o>h;++h)r[h]=e[h].evaluate(t,i,s);const h=this.hh.evaluate(t,i,s);if("function"!=typeof h)throw Reporter.error(207,this);return h.apply(null,[this.Uh].concat(r))}connect(t,i,s){const e=this.J;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,i,s);this.hh.connect(t,i,s)}accept(t){return t.qh(this)}}class ArrayBindingPattern{constructor(t){this.X=65556,this.elements=t}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.Hh(this)}}class ObjectBindingPattern{constructor(t,i){this.X=65557,this.keys=t,this.values=i}evaluate(t,i,s){}assign(t,i,s,e){}connect(t,i,s){}accept(t){return t.zh(this)}}class BindingIdentifier{constructor(name){this.X=65558,this.name=name}evaluate(t,i,s){return this.name}connect(t,i,s){}accept(t){return t.Wh(this)}}const Xi={}.toString;class ForOfStatement{constructor(t,i){this.X=6199,this.assign=PLATFORM.Gs,this.Kh=t,this.Qh=i}evaluate(t,i,s){return this.Qh.evaluate(t,i,s)}count(t){return Yi[Xi.call(t)](t)}Gh(t,i){Ji[Xi.call(t)](t,i)}connect(t,i,s){this.Kh.connect(t,i,s),this.Qh.connect(t,i,s)}bind(t,i,s){hasBind(this.Qh)&&this.Qh.bind(t,i,s)}Hr(t,i,s){hasUnbind(this.Qh)&&this.Qh.Hr(t,i,s)}accept(t){return t.Zh(this)}}class Interpolation{constructor(parts,t){this.X=24,this.assign=PLATFORM.Gs,this.parts=parts,this.J=void 0===t?PLATFORM.Qs:t,this._h=this.J.length>1,this.Xh=this.J[0]}evaluate(t,i,s){if(this._h){const e=this.J,parts=this.parts;let n=parts[0];for(let r=0,h=e.length;h>r;++r)n+=e[r].evaluate(t,i,s),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.Xh.evaluate(t,i,s)+parts[1]}}connect(t,i,s){}accept(t){return t.Jh(this)}}const Ji={Yh(t,i){for(let s=0,e=t.length;e>s;++s)i(t,s,t[s])},io(t,i){const s=Array(t.size);let e=-1;for(const i of t.entries())s[++e]=i;Ji["Yh"](s,i)},so(t,i){const s=Array(t.size);let e=-1;for(const i of t.keys())s[++e]=i;Ji["Yh"](s,i)},eo(t,i){const s=Array(t);for(let i=0;t>i;++i)s[i]=i;Ji["Yh"](s,i)},no(t,i){},ro(t,i){}},Yi={Yh:t=>t.length,io:t=>t.size,so:t=>t.size,eo:t=>t,no:()=>0,ro:()=>0},IRenderable=DI.he("IRenderable").le(),IViewFactory=DI.he("IViewFactory").le(),ts=Object.freeze(Object.create(null)),ILifecycle=DI.he("ILifecycle").ce(t=>t.singleton(is));class is{constructor(){this.ho=0,this.oo=0,this.lo=0,this.co=0,this.uo=this,this.ao=this,this.fo=this,this.do=this,this.po=this,this.bo=this,this.mo=this,this.wo=this,this.vo=this,this.yo=this,this.Co=this,this.To=this,this.Ao=this,this.Bo=this,this.Oo=this,this.Ro=this,this.ko=this,this.Io=this,this.So=this,this.Po=this,this.Lo=null,this.qs=Promise.resolve(),this.Eo=0,this.jo=0,this.Do=0,this.$o=0,this.Mo=0,this.xo=0,this.Vo=0,this.Fo=0,this.Uo=0,this.No=0,this.at=ts,this.flush=PLATFORM.Gs,this.qo=ts,this.connect=PLATFORM.Gs,this.Ho=ts,this.pt=PLATFORM.Gs,this.zo=ts,this.bound=PLATFORM.Gs,this.Wo=ts,this.Ko=PLATFORM.Gs,this.Qo=ts,this.Go=PLATFORM.Gs,this.Zo=ts,this._o=PLATFORM.Gs,this.Xo=ts,this.Jo=PLATFORM.Gs,this.Yo=ts,this.ui=PLATFORM.Gs,this.tl=ts,this.il=PLATFORM.Gs,this.sl=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}el(t){null===this.sl&&(this.sl=new AggregateLifecycleTask),this.sl.nl(t)}rl(t){null!==this.sl&&(this.sl===t?this.sl=null:this.sl.hl(t))}O(t){return this.uo===this&&(this.Lo=this.qs.then(()=>{this.ol(LifecycleFlags.Fn)})),null===t.at&&(t.at=ts,this.ao.at=t,this.ao=t,++this.Eo),this.Lo}ol(t){for(t|=LifecycleFlags.Un;this.Eo>0;){let i,s=this.uo.at;this.uo=this.ao=this,this.Eo=0;do{i=s.at,s.at=null,s.flush(t),s=i}while(s!==ts);if(t&LifecycleFlags.lt)break}}ai(){++this.ho}fi(t){null===t.zo&&(t.zo=ts,this.wo.zo=t,this.wo=t,++this.$o)}ll(t){null===t.qo&&(t.qo=ts,this.do.qo=t,this.do=t,++this.jo),null===t.Ho&&(t.Ho=ts,this.bo.Ho=t,this.bo=t,++this.Do)}cl(t){if(this.jo>0){this.jo=0;let i,s=this.fo.qo;this.fo=this.do=this;do{s.connect(t),i=s.qo,s.qo=null,s=i}while(s!==ts)}}ul(t){for(t&LifecycleFlags.qn&&this.ol(t|LifecycleFlags.Un);this.Do>0;){this.Do=0;let i,s=this.po.Ho;this.po=this.bo=this;do{s.pt(t),i=s.Ho,s.Ho=null,s=i}while(s!==ts)}}gi(t){if(0==--this.ho)return null===this.sl||this.sl.done?(this.al(t),LifecycleTask.done):(this.sl.fl=this,this.sl)}al(t){for(t&LifecycleFlags.qn&&this.ol(t|LifecycleFlags.Un);this.$o>0;){this.$o=0;let i,s=this.mo.zo;this.mo=this.wo=this;do{s.bound(t),i=s.zo,s.zo=null,s=i}while(s!==ts)}}vi(){++this.co}Ci(t){null===t.tl&&(t.tl=ts,this.Po.tl=t,this.Po=t,++this.No)}Ai(t){if(0==--this.co)return null===this.sl||this.sl.done?(this.dl(t),LifecycleTask.done):(this.sl.fl=this,this.sl)}dl(t){for(;this.No>0;){this.No=0;let i,s=this.So.tl;this.So=this.Po=this;do{s.il(t),i=s.tl,s.tl=null,s=i}while(s!==ts)}}Mt(){++this.oo}zt(t){null===t.Wo&&(t.Wo=ts,this.yo.Wo=t,this.yo=t,++this.Mo)}Ft(t){null===t.Qo&&(t.Qo=ts,this.To.Qo=t,this.To=t,++this.xo)}Ut(t){if(0==--this.oo)return null===this.sl||this.sl.done?(this.gl(t),LifecycleTask.done):(this.sl.fl=this,this.sl)}gl(t){if(this.ol(t|LifecycleFlags.Un),this.Mo>0){this.Mo=0;let i,s=this.vo.Wo;this.vo=this.yo=this;do{s.Ko(t),i=s.Wo,s.Wo=null,s=i}while(s!==ts)}if(this.cl(LifecycleFlags.Y),this.xo>0){this.xo=0;let i,s=this.Co.Qo;this.Co=this.To=this;do{s.Go(t),i=s.Qo,s.Qo=null,s=i}while(s!==ts)}}Wt(){++this.lo}Jt(t){if(null===t.Zo&&(t.Zo=ts,this.Bo.Zo=t,this.Bo=t,++this.Vo),null!==t.Wo){let i=this.vo,s=i.Wo;for(;s!==t;)s=(i=s).Wo;i.Wo=s.Wo,s.Wo=null,this.yo===s&&(this.yo=this),--this.Mo}}Gt(t){null===t.Xo&&(t.Xo=ts,this.Ro.Xo=t,this.Ro=t,++this.Fo)}pl(t){null===t.Yo&&(t.Yo=ts,this.Io.Yo=t,this.Io=t,++this.Uo)}Zt(t){if(0==--this.lo)return null===this.sl||this.sl.done?(this.bl(t),LifecycleTask.done):(this.sl.fl=this,this.sl)}bl(t){if(this.ol(t|LifecycleFlags.rt|LifecycleFlags.lt),this.Vo>0){this.Vo=0;let i,s=this.Ao.Zo;this.Ao=this.Bo=this;do{s._o(t),i=s.Zo,s.Zo=null,s=i}while(s!==ts)}if(this.Fo>0){this.Fo=0;let i,s=this.Oo.Xo;this.Oo=this.Ro=this;do{s.Jo(t),i=s.Xo,s.Xo=null,s=i}while(s!==ts)}if(this.Uo>0){this.vi(),this.Uo=0;let i,s=this.ko.Yo;this.ko=this.Io=this;do{s.ui(t),i=s.Yo,s.Yo=null,s=i}while(s!==ts);this.Ai(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.ml=PLATFORM.Gs,this.currentView=null,this.mn=0,this.pn=0,this.wl=null,this.vl=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}yl(value,t){this.vl.done?value instanceof Promise?(this.Cl(new ss(this,value)),this.Tl()):this.Al(value,t):(value instanceof Promise?this.Cl(new ss(this,value)):this.Cl(value),this.vl.Bl()&&this.vl.cancel())}di(t,i){this.scope=i,this.pn=1,null!==this.currentView&&this.currentView.mi(t,i)}Vt(t){this.mn=1,null!==this.currentView&&this.currentView.qt(t)}Qt(t){this.mn=0,null!==this.currentView&&this.currentView.ti(t)}Ti(t){this.pn=0,null!==this.currentView&&this.currentView.ui(t)}si(t){this.currentView=null}Cl(t){null===this.wl&&(this.wl=[]),this.wl.push(t)}Al(t,i){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,s=new AggregateLifecycleTask;let e,n=this.currentView;null===n?e=LifecycleTask.done:($lifecycle.pl(n),$lifecycle.Wt(),n.ti(i),e=$lifecycle.Zt(i)),s.nl(e),null===(n=this.currentView=t)?e=LifecycleTask.done:(this.pn&&($lifecycle.ai(),n.mi(i,this.scope),$lifecycle.gi(i)),this.mn?($lifecycle.Mt(),n.qt(i),e=$lifecycle.Ut(i)):e=LifecycleTask.done),s.nl(e),s.done?(this.vl=LifecycleTask.done,this.ml()):(this.vl=s,this.vl.Ol().then(()=>{this.ml(),this.Tl()}).catch(t=>{throw t}))}Tl(){if(null!==this.wl&&this.wl.length>0){const t=this.wl.pop();this.wl.length=0,ss.is(t)?this.vl=t.start():this.Al(t,LifecycleFlags.Kn)}else this.vl=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,Bl:()=>0,cancel(){},Ol:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.fl=null,this.resolve=null,this.Rl=[],this.kl=null}nl(t){t.done||(this.done=0,this.Rl.push(t),t.Ol().then(()=>{this.Il()}).catch(t=>{throw t}))}hl(t){if(t.done){const i=this.Rl.indexOf(t);-1!==i&&this.Rl.splice(i,1)}0===this.Rl.length&&null!==this.fl&&(this.fl.rl(this),this.fl=null)}Bl(){return this.done?0:this.Rl.every(t=>t.Bl())}cancel(){this.Bl()&&(this.Rl.forEach(t=>{t.cancel()}),this.done=0)}Ol(){return null===this.kl&&(this.kl=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.kl}Il(){this.done||this.Rl.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.fl&&(this.fl.bl(LifecycleFlags.Kn),this.fl.dl(LifecycleFlags.Kn),this.fl.al(LifecycleFlags.Kn),this.fl.gl(LifecycleFlags.Kn)),this.fl.rl(this),null!==this.resolve&&this.resolve()}}class ss{constructor(t,i){this.Sl=t,this.done=0,this.Pl=0,this.qs=i}static is(t){return"start"in t}start(){return this.Pl?LifecycleTask.done:(this.qs=this.qs.then(t=>(this.Ll(t),t)),this)}Bl(){return!this.done}cancel(){this.Bl()&&(this.Pl=1)}Ol(){return this.qs}Ll(value){this.Pl||(this.done=1,this.Sl.yl(value,LifecycleFlags.Kn))}}const es=[],ns=[];let rs=-1;I(-1);const{oneTime,Ki:hs,an:os}=BindingMode,ls=hs|oneTime;let Binding=class{constructor(t,i,s,mode,e,n){this.wi=null,this.Oi=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.qo=null,this.Ho=null,this.$scope=null,this.qr=n,this.mode=mode,this.st=e,this.El=t,this.target=i,this.jl=s,this.dt=LifecycleFlags.dn}Dl(value,t){this.targetObserver.K(value,(t|=this.dt)|LifecycleFlags.G)}$l(value,t){this.El.assign((t|=this.dt)|LifecycleFlags.Vn,this.$scope,this.qr,value)}B(t,i,s){if(2&this.$state){if(s|=this.dt,this.mode===BindingMode.an&&(s&=~LifecycleFlags.G,s|=LifecycleFlags.Vn),s&LifecycleFlags.G){const i=this.targetObserver.W();return(10082!==this.El.X||this.tt>1)&&(t=this.El.evaluate(s,this.$scope,this.qr)),t!==i&&this.Dl(t,s),void(0==(this.mode&oneTime)&&(this.version++,this.El.connect(s,this.$scope,this),this.unobserve(0)))}if(!(s&LifecycleFlags.Vn))throw Reporter.error(15,LifecycleFlags[s]);t!==this.El.evaluate(s,this.$scope,this.qr)&&this.$l(t,s)}}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t|LifecycleFlags.ht)}this.$state|=1,this.dt=t&LifecycleFlags.Di,this.$scope=i;let s=this.El;hasBind(s)&&s.bind(t,i,this);let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=this.mode&os?this.st.it(t,this.target,this.jl):this.st.Ml(t,this.target,this.jl)),targetObserver.bind&&targetObserver.bind(t),s=this.El,this.mode&ls&&this.Dl(s.evaluate(t,i,this.qr),t),this.mode&hs&&s.connect(t,i,this),this.mode&os&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}ui(t){2&this.$state&&(this.$state|=64,this.dt=LifecycleFlags.dn,hasUnbind(this.El)&&this.El.Hr(t,this.$scope,this),this.$scope=null,this.targetObserver.Hr&&this.targetObserver.Hr(t),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67)}connect(t){2&this.$state&&this.El.connect((t|=this.dt)|LifecycleFlags.Y,this.$scope,this)}pt(t){2&this.$state&&this.Dl(this.El.evaluate((t|=this.dt)|LifecycleFlags.Y,this.$scope,this.qr),t)}};Binding=c([connectable()],Binding);class Call{constructor(t,i,s,e,n){this.wi=null,this.Oi=null,this.$state=0,this.qr=n,this.El=t,this.targetObserver=e.it(LifecycleFlags.dn,i,s)}xl(t){const i=this.$scope.yr;Object.assign(i,t);const s=this.El.evaluate(LifecycleFlags.Y,this.$scope,this.qr);for(const s in t)Reflect.deleteProperty(i,s);return s}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=i,hasBind(this.El)&&this.El.bind(t,i,this),this.targetObserver.K(t=>this.xl(t),t),this.$state|=2,this.$state&=-2}ui(t){2&this.$state&&(this.$state|=64,hasUnbind(this.El)&&this.El.Hr(t,this.$scope,this),this.$scope=null,this.targetObserver.K(null,t),this.$state&=-67)}nt(t,i,s){}B(t,i,s){}}const IExpressionParser=DI.he("IExpressionParser").ce(t=>t.singleton(cs));class cs{constructor(){this.Vl=Object.create(null),this.Fl=Object.create(null),this.Ul=Object.create(null)}parse(t,i){switch(i){case 2048:{let s=this.Ul[t];return void 0===s&&(s=this.Ul[t]=this.Nl(t,i)),s}case 539:{let s=this.Fl[t];return void 0===s&&(s=this.Fl[t]=this.Nl(t,i)),s}default:{if(0===t.length&&55&i)return PrimitiveLiteral.xh;let s=this.Vl[t];return void 0===s&&(s=this.Vl[t]=this.Nl(t,i)),s}}}cache(t){const{Fl:i,Vl:s,Ul:e}=this;for(const n in t){const r=t[n];switch(r.X){case 24:e[n]=r;break;case 6199:i[n]=r;break;default:s[n]=r}}}Nl(t,i){try{const parts=t.split("."),i=parts[0];let s;s=i.endsWith("()")?new CallScope(i.replace("()",""),PLATFORM.Qs):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];s=t.endsWith("()")?new CallMember(s,t.replace("()",""),PLATFORM.Qs):new AccessMember(s,parts[e]),e++}return s}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Xn=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.ql=1280]="IsRef",BindingType[BindingType.Hl=512]="IsIterator",BindingType[BindingType.zl=256]="IsCustom",BindingType[BindingType.Wl=128]="IsFunction",BindingType[BindingType.Kl=64]="IsEvent",BindingType[BindingType.Ql=32]="IsProperty",BindingType[BindingType.Gl=16]="IsCommand",BindingType[BindingType.Zl=48]="IsPropertyCommand",BindingType[BindingType._l=80]="IsEventCommand",BindingType[BindingType.Xl=6]="DelegationStrategyDelta",BindingType[BindingType.Jl=15]="Command",BindingType[BindingType.Yl=49]="OneTimeCommand",BindingType[BindingType.tc=50]="ToViewCommand",BindingType[BindingType.ic=51]="FromViewCommand",BindingType[BindingType.sc=52]="TwoWayCommand",BindingType[BindingType.ec=53]="BindCommand",BindingType[BindingType.nc=86]="TriggerCommand",BindingType[BindingType.rc=87]="CaptureCommand",BindingType[BindingType.hc=88]="DelegateCommand",BindingType[BindingType.oc=153]="CallCommand",BindingType[BindingType.lc=26]="OptionsCommand",BindingType[BindingType.cc=539]="ForCommand",BindingType[BindingType.uc=284]="CustomCommand"})(BindingType||(BindingType={}));const{Ki:us,oneTime:as}=BindingMode;class MultiInterpolationBinding{constructor(t,i,s,e,mode,n){this.wi=null,this.Oi=null,this.$state=0,this.$scope=null,this.ac=i,this.qr=n,this.mode=mode,this.st=t,this.target=s,this.jl=e;const r=i.J,parts=this.parts=Array(r.length);for(let h=0,o=r.length;o>h;++h)parts[h]=new InterpolationBinding(r[h],i,s,e,mode,t,n,0===h)}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t)}this.$state|=2,this.$scope=i;const parts=this.parts;for(let s=0,e=parts.length;e>s;++s)parts[s].mi(t,i)}ui(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let i=0,s=parts.length;s>i;++i)parts[i].ui(t)}}let InterpolationBinding=class{constructor(t,i,s,e,mode,n,r,h){this.$state=0,this.ac=i,this.fc=h,this.mode=mode,this.qr=r,this.st=n,this.El=t,this.target=s,this.jl=e,this.targetObserver=n.Ml(LifecycleFlags.dn,s,e)}Dl(value,t){this.targetObserver.K(value,t|LifecycleFlags.G)}B(t,i,s){if(!(2&this.$state))return;const e=this.targetObserver.W(),n=this.ac.evaluate(s,this.$scope,this.qr);n!==e&&this.Dl(n,s),0==(this.mode&as)&&(this.version++,this.El.connect(s,this.$scope,this),this.unobserve(0))}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t)}this.$state|=2,this.$scope=i;const s=this.El;s.bind&&s.bind(t,i,this),this.fc&&this.Dl(this.ac.evaluate(t,i,this.qr),t),this.mode&us&&s.connect(t,i,this)}ui(t){if(!(2&this.$state))return;this.$state&=-3;const i=this.El;i.Hr&&i.Hr(t,this.$scope,this),this.$scope=null,this.unobserve(1)}};InterpolationBinding=c([connectable()],InterpolationBinding);let LetBinding=class{constructor(t,i,s,e,toViewModel=0){this.wi=null,this.Oi=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=null,this.qr=e,this.st=s,this.El=t,this.target=null,this.jl=i,this.toViewModel=toViewModel}B(t,i,s){if(2&this.$state){if(!(s&LifecycleFlags.G))throw Reporter.error(15,s);{const{target:t,jl:i}=this,e=t[i],n=this.El.evaluate(s,this.$scope,this.qr);n!==e&&(t[i]=n)}}}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=i,this.target=this.toViewModel?i.Tr:i.yr;const s=this.El;s.bind&&s.bind(t,i,this),this.target[this.jl]=this.El.evaluate(LifecycleFlags.ht,i,this.qr),this.El.connect(t,i,this),this.$state|=2,this.$state&=-2}ui(t){if(!(2&this.$state))return;this.$state|=64;const i=this.El;i.Hr&&i.Hr(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}};LetBinding=c([connectable()],LetBinding);class Ref{constructor(t,i,s){this.wi=null,this.Oi=null,this.$state=0,this.qr=s,this.El=t,this.target=i}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=i,hasBind(this.El)&&this.El.bind(t,i,this),this.El.assign(t,this.$scope,this.qr,this.target),this.$state|=2,this.$state&=-2}ui(t){if(!(2&this.$state))return;this.$state|=64,this.El.evaluate(t,this.$scope,this.qr)===this.target&&this.El.assign(t,this.$scope,this.qr,null);const i=this.El;hasUnbind(i)&&i.Hr(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,i,s){}B(t,i,s){}}let CollectionLengthObserver=class{constructor(t,i){this.N=t,this.q=i,this.H=t[i]}W(){return this.N[this.q]}ut(t){this.N[this.q]=t}pt(t){this.C(this.N[this.q],this.H,t),this.H=this.N[this.q]}subscribe(t){this.u(t)}unsubscribe(t){this.g(t)}};CollectionLengthObserver=c([targetObserver()],CollectionLengthObserver);const fs=Array.prototype,ds=fs.push,gs=fs.unshift,ps=fs.pop,bs=fs.shift,ms=fs.splice,ws=fs.reverse,vs=fs.sort,ys={push:ds,unshift:gs,pop:ps,shift:bs,splice:ms,reverse:ws,sort:vs},Cs=["push","unshift","pop","shift","splice","reverse","sort"],Ts={push(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return ds.apply(t,arguments);const s=t.length,e=arguments.length;if(0===e)return s;t.length=i.ft.length=s+e;let n=s;for(;t.length>n;)t[n]=arguments[n-s],i.ft[n]=-2,n++;return i.C("push",arguments,i.dt|LifecycleFlags.$n),t.length},unshift(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return gs.apply(t,arguments);const s=arguments.length,e=Array(s);let n=0;for(;s>n;)e[n++]=-2;gs.apply(i.ft,e);const r=gs.apply(t,arguments);return i.C("unshift",arguments,i.dt|LifecycleFlags.$n),r},pop(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return ps.call(t);const s=i.ft,e=ps.call(t),n=s.length-1;return s[n]>-1&&s.vt.push(s[n]),ps.call(s),i.C("pop",arguments,i.dt|LifecycleFlags.$n),e},shift(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return bs.call(t);const s=i.ft,e=bs.call(t);return s[0]>-1&&s.vt.push(s[0]),bs.call(s),i.C("shift",arguments,i.dt|LifecycleFlags.$n),e},splice(t,i){let s=this;void 0!==s.cr&&(s=s.cr);const e=s.wt;if(void 0===e)return ms.apply(s,arguments);const n=e.ft;if(i>0){let s=isNaN(t)?0:t;const to=s+i;for(;to>s;)n[s]>-1&&n.vt.push(n[s]),s++}const r=arguments.length;if(r>2){const s=r-2,e=Array(s);let h=0;for(;s>h;)e[h++]=-2;ms.call(n,t,i,...e)}else 2===r&&ms.call(n,t,i);const h=ms.apply(s,arguments);return e.C("splice",arguments,e.dt|LifecycleFlags.$n),h},reverse(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return ws.call(t),this;const s=t.length,e=s/2|0;let n=0;for(;n!==e;){const e=s-n-1,r=t[n],h=i.ft[n],o=i.ft[e];t[n]=t[e],i.ft[n]=o,t[e]=r,i.ft[e]=h,n++}return i.C("reverse",arguments,i.dt|LifecycleFlags.$n),this},sort(t){let i=this;void 0!==i.cr&&(i=i.cr);const s=i.wt;if(void 0===s)return vs.call(i,t),this;const e=i.length;if(2>e)return this;z(i,s.ft,0,e,q);let n=0;for(;e>n&&void 0!==i[n];)n++;return void 0!==t&&"function"==typeof t||(t=N),z(i,s.ft,0,n,t),s.C("sort",arguments,s.dt|LifecycleFlags.$n),this}},As={dc:1,Ei:0,gr:1},def=Reflect.defineProperty;for(const t of Cs)def(Ts[t],"observing",{value:1,dc:0,gr:0,Ei:0});enableArrayObservation();let ArrayObserver=class{constructor(t,i,s){this.R=i,s.wt=this,this.T=s,this.flags=t&LifecycleFlags.Di,this.bt()}};ArrayObserver=c([collectionObserver(9)],ArrayObserver);const Bs=Map.prototype,Os=Bs.set,Rs=Bs.clear,ks=Bs.delete,Is={set:Os,clear:Rs,delete:ks},Ss=["set","clear","delete"],Ps={set(t,value){let i=this;void 0!==i.cr&&(i=i.cr);const s=i.wt;if(void 0===s)return Os.call(i,t,value),this;const e=i.size;if(Os.call(i,t,value),i.size===e){let e=0;for(const n of i.entries()){if(n[0]===t)return n[1]!==value&&(s.ft[e]=-2),this;e++}return this}return s.ft[e]=-2,s.C("set",arguments,s.dt|LifecycleFlags.$n),this},clear(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return Rs.call(t);if(t.size>0){const s=i.ft;let e=0;for(const i of t.keys())s[e]>-1&&s.vt.push(s[e]),e++;Rs.call(t),s.length=0,i.C("clear",arguments,i.dt|LifecycleFlags.$n)}},delete(value){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return ks.call(t,value);if(0===t.size)return 0;let s=0;const e=i.ft;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.vt.push(e[s]),e.splice(s,1),ks.call(t,value);s++}return i.C("delete",arguments,i.dt|LifecycleFlags.$n),0}},Ls={dc:1,Ei:0,gr:1},Es=Reflect.defineProperty;for(const t of Ss)Es(Ps[t],"observing",{value:1,dc:0,gr:0,Ei:0});enableMapObservation();let MapObserver=class{constructor(t,i,s){this.R=i,s.wt=this,this.T=s,this.flags=t&LifecycleFlags.Di,this.bt()}};MapObserver=c([collectionObserver(6)],MapObserver);const js=Set.prototype,Ds=js.add,$s=js.clear,Ms=js.delete,xs={add:Ds,clear:$s,delete:Ms},Vs=["add","clear","delete"],Fs={add(value){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return Ds.call(t,value),this;const s=t.size;return Ds.call(t,value),t.size===s?this:(i.ft[s]=-2,i.C("add",arguments,i.dt|LifecycleFlags.$n),this)},clear(){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return $s.call(t);if(t.size>0){const s=i.ft;let e=0;for(const i of t.keys())s[e]>-1&&s.vt.push(s[e]),e++;$s.call(t),s.length=0,i.C("clear",arguments,i.dt|LifecycleFlags.$n)}},delete(value){let t=this;void 0!==t.cr&&(t=t.cr);const i=t.wt;if(void 0===i)return Ms.call(t,value);if(0===t.size)return 0;let s=0;const e=i.ft;for(const i of t.keys()){if(i===value)return e[s]>-1&&e.vt.push(e[s]),e.splice(s,1),Ms.call(t,value);s++}return i.C("delete",arguments,i.dt|LifecycleFlags.$n),0}},Us={dc:1,Ei:0,gr:1},Ns=Reflect.defineProperty;for(const t of Vs)Ns(Fs[t],"observing",{value:1,dc:0,gr:0,Ei:0});enableSetObservation();let SetObserver=class{constructor(t,i,s){this.R=i,s.wt=this,this.T=s,this.flags=t&LifecycleFlags.Di,this.bt()}};SetObserver=c([collectionObserver(7)],SetObserver);const qs={gc:0,pc:0};let CustomSetterObserver=class{constructor(t,i,s){this.N=t,this.q=i,this.H=this.oldValue=void 0,this.bc=s,this.U=0}K(t){this.bc.set.call(this.N,t),this.H!==t&&(this.oldValue=this.H,this.H=t,this.C(t,this.oldValue,LifecycleFlags.G))}subscribe(t){this.U||this.mc(),this.u(t)}unsubscribe(t){this.g(t)}mc(){this.U=1,this.H=this.N[this.q],Reflect.defineProperty(this.N,this.q,{set:t=>{this.K(t)}})}};CustomSetterObserver=c([subscriberCollection(MutationKind.v)],CustomSetterObserver);let GetterObserver=class{constructor(t,i,s,e,n,r,h){this.N=s,this.q=e,this.wc=0,this.H=this.oldValue=void 0,this.vc=[],this.yc=[],this.Cc=i,this.Tc=0,this.bc=n,this.A=new Proxy(s,(function t(i,s,e){return{get(n,r,h){if(e.Ac(r))return Reflect.get(n,r,h);switch(Hs.call(n)){case"[object Array]":if(e.Bc(s.Oc(i,n)),"length"===r)return Reflect.get(n,r,n);case"[object Map]":if(e.Bc(s.Rc(i,n)),"size"===r)return Reflect.get(n,r,n);case"[object Set]":if(e.Bc(s.kc(i,n)),"size"===r)return Reflect.get(n,r,n);default:e.Ic(s.it(i,n,r))}return(function(i,s,e,n,r){const value=Reflect.get(s,e,s);return"function"==typeof value?s[e].bind(s):"object"!=typeof value||null===value?value:new Proxy(value,t(i,n,r))})(i,n,r,s,e)}}})(t,r,this)),Reflect.defineProperty(s,e,{get:()=>this.W()})}Ic(t){-1===this.vc.indexOf(t)&&this.vc.push(t)}Bc(t){-1===this.yc.indexOf(t)&&this.yc.push(t)}W(){return this.H=0===this.Tc||this.wc?Reflect.apply(this.bc.get,this.A,PLATFORM.Qs):Reflect.apply(this.bc.get,this.N,PLATFORM.Qs),this.H}subscribe(t){this.u(t),1==++this.Tc&&this.Sc(1)}unsubscribe(t){this.g(t),0==--this.Tc&&this.Pc()}B(){const t=this.H,i=this.Sc(0);t!==i&&this.C(i,t,LifecycleFlags.G)}F(){const t=this.H,i=this.Sc(0);t!==i&&this.C(i,t,LifecycleFlags.rt|LifecycleFlags.G)}Sc(t){const i=!this.Cc.gc||t;return i&&(this.Pc(),this.wc=1),this.H=this.W(),i&&(this.vc.forEach(t=>{t.subscribe(this)}),this.yc.forEach(t=>{t.Bt(this)}),this.wc=0),this.H}Ac(t){return!this.wc||"$observers"===t}Pc(){this.vc.forEach(t=>{t.unsubscribe(this)}),this.vc.length=0,this.yc.forEach(t=>{t.Ot(this)}),this.yc.length=0}};GetterObserver=c([subscriberCollection(MutationKind.v)],GetterObserver);const Hs={}.toString,IDirtyChecker=DI.he("IDirtyChecker").ce(t=>t.singleton(zs)),DirtyCheckSettings={Lc:6,disabled:0,warn:1,Ec:0,jc(){this.Lc=6,this.disabled=0,this.warn=1,this.Ec=0}};class zs{constructor(){this.Dc=0,this.$c=[]}Mc(t,i){if(DirtyCheckSettings.Ec)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,i)}xc(t){this.$c.push(t),1===this.$c.length&&PLATFORM.xs.add(this.Vc,this)}removeProperty(t){this.$c.splice(this.$c.indexOf(t),1),0===this.$c.length&&PLATFORM.xs.remove(this.Vc,this)}Vc(t){if(DirtyCheckSettings.disabled)return;if(++this.Dc<DirtyCheckSettings.Lc)return;this.Dc=0;const i=this.$c,s=i.length;let e,n=0;for(;s>n;++n)(e=i[n]).Fc()&&e.flush(LifecycleFlags.Nn)}}let DirtyCheckProperty=class{constructor(t,i,s){this.N=i,this.q=s,this.Uc=t}Fc(){return this.oldValue!==this.N[this.q]}flush(t){const i=this.N[this.q];this.C(i,this.oldValue,t|LifecycleFlags.G),this.oldValue=i}subscribe(t){this.m()||(this.oldValue=this.N[this.q],this.Uc.xc(this)),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.Uc.removeProperty(this)}};DirtyCheckProperty=c([propertyObserver()],DirtyCheckProperty);const Ws=PLATFORM.Gs;class PrimitiveObserver{constructor(t,i){this.Nc=1,"length"===i?(this.N=t,this.W=this.qc):this.W=this.Hc}qc(){return this.N.length}Hc(){}}PrimitiveObserver.prototype.K=Ws,PrimitiveObserver.prototype.subscribe=Ws,PrimitiveObserver.prototype.unsubscribe=Ws,PrimitiveObserver.prototype.Z=Ws;class PropertyAccessor{constructor(t,i){this.N=t,this.q=i}W(){return this.N[this.q]}K(value){this.N[this.q]=value}}const Ks={}.toString,IObserverLocator=DI.he("IObserverLocator").le(),ITargetObserverLocator=DI.he("ITargetObserverLocator").le(),ITargetAccessorLocator=DI.he("ITargetAccessorLocator").le();class Qs{constructor(t,i,s,e){this.zc=[],this.Uc=i,this.R=t,this.Wc=s,this.Kc=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}it(t,i,s){if(t&LifecycleFlags.Dt&&"object"==typeof i)return ProxyObserver.xi(i,s);if((function(t){return 1==t.vr})(i))return i.Ar(t).xi(t,i,s);let e,n=i.ji;return n&&s in n?n[s]:((e=this.Qc(t,i,s)).Nc||(void 0===n&&(n=this.Gc(i)),n[s]=e),e)}Zc(t){this.zc.push(t)}Ml(t,i,s){return this.Kc._c(t,i)?this.Wc.Xc(t,i,s)?this.it(t,i,s):this.Kc.Ml(t,this.R,i,s):t&LifecycleFlags.Dt?ProxyObserver.xi(i,s):new PropertyAccessor(i,s)}Oc(t,i){return W(t,this.R,i)}Rc(t,i){return K(t,this.R,i)}kc(t,i){return Q(t,this.R,i)}Gc(t){return t.ji||this.Jc(t)}Jc(t){const value={};return Reflect.defineProperty(t,"$observers",{Ei:0,gr:0,dc:0,value})||Reporter.write(0,t),value}Yc(t,i,s,e){for(let n=0,r=this.zc.length;r>n;n++){const r=this.zc[n].it(t,i,s,e);if(r)return r}return null}Qc(t,i,s){if(!(i instanceof Object))return new PrimitiveObserver(i,s);let e=0;if(this.Wc._c(t,i)){const n=this.Wc.it(t,this.R,this,i,s);if(null!==n)return n;if(null!==n)return n;e=1}switch(Ks.call(i)){case"[object Array]":return"length"===s?this.Oc(t,i).At(t):this.Uc.Mc(i,s);case"[object Map]":return"size"===s?this.Rc(t,i).At(t):this.Uc.Mc(i,s);case"[object Set]":return"size"===s?this.kc(t,i).At(t):this.Uc.Mc(i,s)}const n=(function(t,name){let i=Object.getOwnPropertyDescriptor(t,name),s=Object.getPrototypeOf(t);for(;void 0===i&&null!==s;)i=Object.getOwnPropertyDescriptor(s,name),s=Object.getPrototypeOf(s);return i})(i,s);if(n&&(n.get||n.set)){if(n.get&&n.get.it)return n.get.it(i);return this.Yc(t,i,s,n)||(e?this.Uc.Mc(i,s):(function(t,i,s,e,n,r,h){if(0==h.gr)return s.Mc(n,r);if(h.get){const s=n.constructor.computed&&n.constructor.computed[r]||qs;return h.set?s.pc?new GetterObserver(t,s,n,r,h,i,e):new CustomSetterObserver(n,r,h):new GetterObserver(t,s,n,r,h,i,e)}throw Reporter.error(18,r)})(t,this,this.Uc,this.R,i,s,n))}return new SetterObserver(t,i,s)}}Qs.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Gs=PLATFORM.Gs;let SelfObserver=class{constructor(t,i,s,e){this.dt=t&LifecycleFlags.Di,ProxyObserver.ar(i)?(i.wt.subscribe(this,s),this.N=i.cr,this.q=s,this.H=i.cr[s],this.Wi=e in i.cr?i[e].bind(i):Gs):(this.N=i,this.q=s,this.H=i[s],this.Wi=e in i?i[e].bind(i):Gs)}B(t,i,s){this.K(t,s)}W(){return this.H}K(t,i){const s=this.H;if(s!==t&&(this.H=t,!(i&LifecycleFlags.ht))){const e=this.Wi(t,s,i);void 0!==e&&(this.H=t=e),this.C(t,s,i)}}};SelfObserver=c([propertyObserver()],SelfObserver);const{oneTime:Zs,Ki:_s,an:Xs,fn:Js}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,i,s){s.tu=s.mode,s.mode=this.mode}Hr(t,i,s){s.mode=s.tu,s.tu=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Zs)}}BindingBehaviorResource.Lr("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(_s)}}BindingBehaviorResource.Lr("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Xs)}}BindingBehaviorResource.Lr("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Js)}}BindingBehaviorResource.Lr("twoWay",TwoWayBindingBehavior);const Ys={},te=BindingMode.an;class DebounceBindingBehavior{bind(t,i,s,e=200){let n,r,h;s instanceof Binding?(n="handleChange",h=Z,r=s.mode&te?LifecycleFlags.Vn:LifecycleFlags.G):(n="callSource",h=G,r=LifecycleFlags.G),s.It=s[n],s.It.iu=n,s[n]=h,s.Rt={Pt:r,St:e,kt:0,oldValue:Ys}}Hr(t,i,s){s[s.It.iu]=s.It,s.It=null,PLATFORM.global.clearTimeout(s.Rt.kt),s.Rt=null}}BindingBehaviorResource.Lr("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.su=t}bind(t,i,s,...e){if(!s.Dl)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.su.Ir(name,s),s.eu=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let i=t.length;for(;i--;)this.su.Ir(t[i],s);s.eu=t}}}Hr(t,i,s){const name=s.eu;if(s.eu=null,Array.isArray(name)){const t=name;let i=t.length;for(;i--;)this.su.Sr(t[i],s)}else this.su.Sr(name,s)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Lr("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,i,s,e=200){let n;s.jt=s[n=s instanceof Binding?s.mode===BindingMode.fn?"updateSource":"updateTarget":"callSource"],s.jt.iu=n,s[n]=_,s.Lt={St:e,Et:0,kt:-1}}Hr(t,i,s){s[s.jt.iu]=s.jt,s.jt=null,PLATFORM.global.clearTimeout(s.Lt.kt),s.Lt=null}}BindingBehaviorResource.Lr("throttle",ThrottleBindingBehavior);const ie="custom-element",se="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.nu="ra",TargetedInstructionType.ru="rb",TargetedInstructionType.hu="rc",TargetedInstructionType.ou="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.ac="rf",TargetedInstructionType.lu="rg",TargetedInstructionType.cu="rh",TargetedInstructionType.uu="ri",TargetedInstructionType.fu="rj",TargetedInstructionType.du="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.he("createInterface").le(),ee=Object.freeze({required:1,compiler:"default"}),ne=Object.freeze({required:0,compiler:"default"});class re{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=ne,this.bindables=PLATFORM.$t,this.instructions=PLATFORM.Qs,this.dependencies=PLATFORM.Qs,this.surrogates=PLATFORM.Qs,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.Dt=0}}const he=["name","template","cache","build","containerless","shadowOptions","hasSlots","useProxies"],oe=["instructions","dependencies","surrogates"],INode=(Profiler.ke("AttachLifecycle"),Profiler.ke("BindLifecycle"),DI.he("INode").le()),IRenderLocation=DI.he("IRenderLocation").le(),IDOM=DI.he("IDOM").le(),NodeSequence={empty:{childNodes:PLATFORM.Qs,firstChild:null,lastChild:null,gu:()=>PLATFORM.Qs,insertBefore(t){},pu(t){},remove(){}}};class le{constructor($lifecycle,cache){this.bi=null,this.Bi=null,this.Nt=null,this.Yt=null,this.Nt=null,this.Yt=null,this.Ht=null,this.ii=null,this.Wo=null,this.Zo=null,this.Yo=null,this.$state=0,this.$scope=null,this.li=0,this.$lifecycle=$lifecycle,this.cache=cache}bu(t){this.li=0,this.location=t}release(t){return this.li=1,8&this.$state?this.cache.mu(this):!!this._o(t)}wu(t){this.$scope=t,this.mi=bt,this.ui=yt}}class ce{constructor(name,template,t){this.vu=0,this.yu=-1,this.cache=null,this.R=t,this.name=name,this.template=template}Cu(t,i){t&&("*"===t?t=ce.Tu:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.yu&&i||(this.yu=t)),this.cache=this.yu>0?[]:null,this.vu=this.yu>0}mu(t){return null!==this.cache&&this.yu>this.cache.length}ci(t){return this.mu(t)?(t.ni(LifecycleFlags.dn),this.cache.push(t),1):0}create(t){const cache=this.cache;let i;if(null!==cache&&cache.length>0)return(i=cache.pop()).$state&=-129,i;if(i=new le(this.R,this),this.template.Si(i,null,null,t),!i.$nodes)throw Reporter.error(90);return i}}ce.Tu=65535,(t=>{t.mi=pt,t.ui=vt,t.qt=st,t.ti=rt,t.ni=lt,t.Ko=at,t._o=ft})(le.prototype);const ITemplateCompiler=DI.he("ITemplateCompiler").le();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.dn=1]="none",ViewCompileFlags[ViewCompileFlags.Au=2]="surrogate",ViewCompileFlags[ViewCompileFlags.Bu=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.he("ITemplateFactory").le();class CompiledTemplate{constructor(dom,t,i,s){this.dom=dom,this.Ou=t,this.Ru=i,this.ku=s}Si(t,host,parts,i=LifecycleFlags.dn){const s=t.$nodes=this.Ru.Iu();t.$context=this.ku,this.Ou.Dt&&(i|=LifecycleFlags.Dt),this.ku.Si(i,t,s.gu(),this.Ou,host,parts)}}const ue={ku:null,dom:null,Si(t){t.$nodes=NodeSequence.empty,t.$context=null}},ae="default",IInstructionRenderer=DI.he("IInstructionRenderer").le(),IRenderer=DI.he("IRenderer").le(),IRenderingEngine=DI.he("IRenderingEngine").ce(t=>t.singleton(fe));class fe{constructor(t,i,s,e){this.Su=new Map,this.Pu=t,this.Lu=i,this.Eu=new Map,this.R=s,this.ju=new Map,this.Du=e.reduce((t,i)=>(t[i.name]=i,t),Object.create(null))}Ui(dom,t,i,s){if(!t)return null;let e=this.ju.get(t);return e||(e=this.$u(dom,t,i,s),this.ju.set(t,e)),e}Mu(dom,t,i){if(!t)return null;let s=this.Eu.get(t);if(!s){const e=buildTemplateDefinition(null,t),template=this.$u(dom,e,i,null);(s=new ce(e.name,template,this.R)).Cu(e.cache,1),this.Eu.set(t,s)}return s}$i(t,i,s){let e=this.Su.get(i);e||(e=be.create(i),this.Su.set(i,e)),e.xu(t,s,this.R)}$u(dom,t,i,s){if(null===i&&(i=this.Pu),null!==t.template){const e=createRenderContext(dom,i,t.dependencies,s);if(t.build.required){const i=t.build.compiler||ae,compiler=this.Du[i];if(void 0===compiler)throw Reporter.error(20,i);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.Au)}return this.Lu.create(e,t)}return ue}}fe.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class de{constructor(){this.v=null}Li(t){this.v=t}resolve(t,i){if(void 0===this.v)throw Reporter.error(50);return this.v}Z(){this.v=null}}class ge{Li(t,parts){this.Ru=t,this.Vu=parts||PLATFORM.$t}resolve(t,i){const s=this.Ru;if(null==s)throw Reporter.error(50);if(!s.name||!s.name.length)throw Reporter.error(51);const e=this.Vu[s.name];if(e){const s=t.get(IRenderingEngine),dom=t.get(IDOM);return s.Mu(dom,e,i)}return s}Z(){this.Ru=null,this.Vu=PLATFORM.$t}}let pe=class{constructor(t,customElement){this.Ct=0,this.children=null,this.customElement=customElement,this.R=t,this.U=0}W(){return this.U||(this.U=1,this.customElement.hi.Fu(()=>{this.Uu()}),this.children=Ct(this.customElement.hi.children)),this.children}K(t){}flush(t){this.C(this.children,void 0,t|LifecycleFlags.G),this.Ct=0}subscribe(t){this.u(t)}unsubscribe(t){this.g(t)}Uu(){this.children=Ct(this.customElement.hi.children),"$childrenChanged"in this.customElement&&this.customElement.Nu(),this.R.O(this).catch(t=>{throw t}),this.Ct=1}};pe=c([subscriberCollection(MutationKind.v)],pe);class be{constructor(){}static create(t){const i=new be;return i.bindables=t.description.bindables,i}xu(t,i,s){i.$lifecycle=s,"$projector"in i?this.qu(t,s,i):this.Hu(t,i)}qu(t,i,s){this.Hu(t,s).zu=new pe(i,s),Reflect.defineProperty(s,"$children",{Ei:0,get(){return this.ji.zu.W()}})}Hu(t,i){const s={},bindables=this.bindables,e=Object.getOwnPropertyNames(bindables);if(t&LifecycleFlags.Dt)for(let n=0,r=e.length;r>n;++n){const name=e[n];s[name]=new SelfObserver(t,ProxyObserver.xi(i).A,name,bindables[name].Wi)}else{for(let n=0,r=e.length;r>n;++n){const name=e[n];s[name]=new SelfObserver(t,i,name,bindables[name].Wi),Tt(t,i,name)}Reflect.defineProperty(i,"$observers",{Ei:0,value:s})}return s}}const IProjectorLocator=DI.he("IProjectorLocator").le(),CustomElementResource={name:ie,_:X,Pr(t){return t.kind===this},Wu:J,Lr(t,i=null){if(!t)throw Reporter.error(70);const s=null===i?class{}:i,e=buildTemplateDefinition(s,t),n=s.prototype;return s.kind=CustomElementResource,s.description=e,s.register=At,n.Ku=Rt,n.mi=gt,n.qt=it,n.ti=nt,n.ui=wt,n.ni=ot,n.ii=null,n.Ht=null,n.Yo=null,n.$scope=null,n.$hooks=0,n.bi=null,n.Bi=null,n.Nt=null,n.Yt=null,n.Ko=ct,n._o=ut,n.Wo=null,n.Zo=null,n.hi=null,"flush"in n&&(n.at=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.zo=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.tl=null),"render"in n&&(n.$hooks|=1024),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.Qo=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Xo=null),s}},me={mode:"open"},CustomAttributeResource=(Profiler.ke("RenderLifecycle"),{name:se,_:Y,Pr(t){return t.kind===this},Lr(t,i){const s=i,e=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Qs:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Ki:defaultBindingMode,qi:void 0===def.qi?0:def.qi,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},t.bindables,def.bindables),Dt:void 0===def.Dt?0:def.Dt}})("string"==typeof t?{name:t}:t,s),n=s.prototype;return s.kind=CustomAttributeResource,s.description=e,s.register=kt,n.Ku=Ot,n.mi=dt,n.qt=tt,n.ti=et,n.ui=mt,n.ni=ht,n.ii=null,n.Ht=null,n.Yo=null,n.$scope=null,n.$hooks=0,n.$state=0,"flush"in n&&(n.at=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.zo=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.tl=null),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n.Qo=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.Xo=null),s}});class If{constructor(t,i,s){this.value=0,this.Sl=s,this.Qu=null,this.Gu=null,this.Zu=t,this._u=null,this.location=i}di(t){const i=this.Xu(t);this.Sl.yl(i,t),this.Sl.di(t,this.$scope)}Vt(t){this.Sl.Vt(t)}Qt(t){this.Sl.Qt(t)}Ti(t){this.Sl.Ti(t)}si(t){null!==this._u&&this._u.release(t)&&(this._u=null),null!==this.Gu&&this.Gu.release(t)&&(this.Gu=null),this.Sl.si(t)}Ju(t,i,s){if(3&this.$state)if(ProxyObserver.ar(this)&&(s|=LifecycleFlags.Dt),s&LifecycleFlags.rt){const t=this.Xu(s);this.Sl.yl(t,s)}else this.$lifecycle.O(this).catch(t=>{throw t})}flush(t){ProxyObserver.ar(this)&&(t|=LifecycleFlags.Dt);const i=this.Xu(t);this.Sl.yl(i,t)}Xu(t){return this.value?this._u=this.Yu(this._u,this.Zu,t):null!==this.Qu?this.Gu=this.Yu(this.Gu,this.Qu,t):null}Yu(t,i,s){return null===t&&(t=i.create(s)),t.bu(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],c([bindable],If.prototype,"value",void 0),CustomAttributeResource.Lr({name:"if",isTemplateController:1},If);class Else{constructor(t){this.Ru=t}link(t){t.Qu=this.Ru}}Else.inject=[IViewFactory],CustomAttributeResource.Lr({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,i,s){this.Ru=s,this.ta=0,this.location=t,this.ia=null,this.sa=i,this.ea=[],this.key=null,this.hr=0}di(t){this.na(t);let i=this.sa.bi;for(;null!==i;){if(ProxyObserver.ur(i.target)===ProxyObserver.ur(this)&&"items"===i.jl){this.ra=i.El;break}i=i.wi}this.ha=this.ra.Kh.evaluate(t,this.$scope,null),this.hr||(t&LifecycleFlags.Zn)>0?this.oa(null,t):this.la(null,t)}Vt(t){const{ea:i,location:s}=this;let e;for(let n=0,r=i.length;r>n;++n)(e=i[n]).bu(s),e.qt(t)}Qt(t){const{ea:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).ti(t),s.release(t)}Ti(t){this.na(t);const{ea:i}=this;let s;for(let e=0,n=i.length;n>e;++e)(s=i[e]).ui(t)}ca(t,i,s){this.na(s),s|=LifecycleFlags.G,this.hr||(s&LifecycleFlags.Zn)>0?this.oa(null,s):this.la(null,s)}F(t,i){i|=LifecycleFlags.rt|LifecycleFlags.G,this.hr||(i&LifecycleFlags.Zn)>0?this.oa(t,i):this.la(t,i)}la(t,i){ProxyObserver.ar(this)&&(i|=LifecycleFlags.Dt);const{ea:s,$lifecycle}=this;let e;if(3&this.$state){const{ha:n,$scope,Ru:r,ra:h,ua:o}=this,l=s.length,c=h.count(o);if(c>l){s.length=c;for(let t=l;c>t;++t)s[t]=r.create(i)}else if(l>c){$lifecycle.Wt();for(let t=c;l>t;++t)(e=s[t]).release(i),e.ti(i);$lifecycle.Zt(i),$lifecycle.vi();for(let t=c;l>t;++t)(e=s[t]).ui(i);if($lifecycle.Ai(i),s.length=c,0===c)return}else if(0===c)return;$lifecycle.ai(),h.Gh(o,null===t?(t,r,h)=>{(e=s[r]).mi(i,Scope.Or(i,$scope,e.$scope&&e.$scope.Tr[n]===h?e.$scope.Tr:BindingContext.create(i,n,h)))}:(r,h,o)=>{(e=s[h]).mi(i,Scope.Or(i,$scope,!e.$scope||t[h]!==h&&e.$scope.Tr[n]!==o?BindingContext.create(i,n,o):e.$scope.Tr))}),$lifecycle.gi(i)}if(12&this.$state){const{location:n}=this;if($lifecycle.Mt(),null===t)for(let t=0,r=s.length;r>t;++t)(e=s[t]).bu(n),e.qt(i);else for(let r=0,h=s.length;h>r;++r)t[r]!==r&&((e=s[r]).bu(n),e.qt(i));$lifecycle.Ut(i)}}oa(t,i){ProxyObserver.ar(this)&&(i|=LifecycleFlags.Dt);const{$lifecycle,ha:s,$scope,Ru:e,ra:n,ua:r}=this;let h=this.ea;if(null===t){if(3&this.$state){$lifecycle.Wt();const t=h.length;let o;for(let s=0;t>s;++s)(o=h[s]).release(i),o.ti(i);$lifecycle.Zt(i),$lifecycle.vi();for(let s=0;t>s;++s)(o=h[s]).ui(i);$lifecycle.Ai(i);const l=n.count(r);h=this.ea=Array(l),$lifecycle.ai(),n.Gh(r,(t,n,r)=>{(o=h[n]=e.create(i)).mi(i,Scope.Or(i,$scope,BindingContext.create(i,s,r)))}),$lifecycle.gi(i)}if(12&this.$state){const{location:t}=this;let s;$lifecycle.Mt();const e=h.length;for(let n=0;e>n;++n)(s=h[n]).bu(t),s.qt(i);$lifecycle.Ut(i)}}else{const n=t.length;let o;const l=t.vt,c=l.length;let u=0;if(3&this.$state){if(c>0){for($lifecycle.Wt(),u=0;c>u;++u)(o=h[l[u]]).release(i),o.ti(i);for($lifecycle.Zt(i),$lifecycle.vi(),u=0;c>u;++u)(o=h[l[u]]).ui(i);$lifecycle.Ai(i),u=0;let s=0,e=0;for(l.sort();c>u;++u)for(h.splice(s=l[u]-u,1),e=0;n>e;++e)s>t[e]||--t[e]}for($lifecycle.ai(),u=0;n>u;++u)-2===t[u]&&((o=e.create(i)).mi(i,Scope.Or(i,$scope,BindingContext.create(i,s,r[u]))),h.splice(u,0,o));if($lifecycle.gi(i),h.length!==n)throw Error(`viewsLen=${h.length}, mapLen=${n}`)}if(12&this.$state){const{location:s}=this,e=(function(t){const i=t.length,s=i+(t.vt&&t.vt.length||0);let e;const n=new(e=255>s?Uint8Array:65535>s?Uint16Array:Uint32Array)(i),r=new e(i);let h=0,o=0,l=0,c=0,u=0,a=0,f=0,d=0;for(;i>c;c++)if(-2!==(o=t[c])){if(-2!==(l=t[u=r[h]])&&o>l){n[c]=u,r[++h]=c;continue}for(a=0,f=h;f>a;)-2!==(l=t[r[d=a+f>>1]])&&o>l?a=d+1:f=d;((l=t[r[a]])>o||-2===l)&&(a>0&&(n[c]=r[a-1]),r[a]=c)}const g=new e(++h);for(o=r[h-1];h-- >0;)g[h]=o,o=n[o];return g})(t),n=e.length;$lifecycle.Wt(),$lifecycle.Mt(),$lifecycle.zt({Ko(){let r=s,l=n-1;for(u=t.length-1;u>=0;--u)if(-2===t[u]){(o=h[u]).$state|=4;let t=o.Nt;for(;null!==t;)t.qt(i|LifecycleFlags.xt),t=t.Ht;o.$nodes.insertBefore(r),o.$state|=24,o.$state&=-5,r=o.$nodes.firstChild}else if(0>l||1===n||u!==e[l]){(o=h[t[u]]).$state|=32;let s=o.Yt;for(;null!==s;)s.ti(i|LifecycleFlags.Kt),s=s.ii;for(o.$nodes.remove(),o.$state&=-57,o.$state|=4,s=o.Nt;null!==s;)s.qt(i|LifecycleFlags.xt),s=s.Ht;o.$nodes.insertBefore(r),o.$state|=24,o.$state&=-5,r=o.$nodes.firstChild}else r=(o=h[u]).$nodes.firstChild,--l},Wo:null}),$lifecycle.Zt(i),$lifecycle.Ut(i)}}}na(t){const i=this.ia;if(3&this.$state){const s=this.ia=getCollectionObserver(t,this.$lifecycle,this.ua);i!==s&&i&&i.Ot(this),s&&s.Bt(this)}else i&&i.Ot(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],c([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.Lr({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,i){this.Ru=t,this.currentView=this.Ru.create(),this.currentView.bu(i)}di(t){this.currentView.mi(t|LifecycleFlags.Gn,this.$scope)}Vt(t){this.currentView.qt(t)}Qt(t){this.currentView.ti(t)}Ti(t){this.currentView.ui(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.Lr({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,i){this.value=null,this.Ru=t,this.currentView=this.Ru.create(),this.currentView.bu(i)}Ju(){3&this.$state&&this.aa(LifecycleFlags.Wn)}di(t){this.aa(t)}Vt(t){this.currentView.qt(t)}Qt(t){this.currentView.ti(t)}Ti(t){this.currentView.ui(t)}aa(t){const i=Scope.Or(t,this.$scope,this.value);this.currentView.mi(t,i)}}With.inject=[IViewFactory,IRenderLocation],c([bindable],With.prototype,"value",void 0),CustomAttributeResource.Lr({name:"with",isTemplateController:1},With);const ISanitizer=DI.he("ISanitizer").ce(t=>t.singleton(class{fa(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.da=t}Ki(t){return null==t?null:this.da.fa(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Lr("sanitize",SanitizeValueConverter),Profiler.ke("Aurelia.start"),Profiler.ke("Aurelia.stop");class Aurelia{constructor(t=DI.ee()){this.Pu=t,this.ga=[],this.pa=[],this.ba=[],this.ma=0,this.wa=null,Registration.v(Aurelia,this).register(t,Aurelia)}register(...t){return this.Pu.register(...t),this}app(t){const host=t.host;this.Pu.get(IDOMInitializer).initialize(t);let component,i=LifecycleFlags.qn,s=LifecycleFlags.Xt;t.Dt&&(i|=LifecycleFlags.Dt,s|=LifecycleFlags.Dt);const e=t.component;CustomElementResource.Pr(e)?(this.Pu.register(e),component=this.Pu.get(CustomElementResource._(e.description.name))):component=e,component=ProxyObserver.ur(component);const n=()=>{host.$au=this,this.ga.includes(component)||(this.wa=component,this.ga.push(component),component.Ku(i,this.Pu,host)),component.mi(i|LifecycleFlags.ht,null),component.qt(i|LifecycleFlags.xt)};return this.pa.push(n),this.ba.push(()=>{component.ti(s|LifecycleFlags.Kt),component.ui(s|LifecycleFlags.yi),host.$au=null}),this.ma&&n(),this}root(){return ProxyObserver.lr(this.wa)}start(){for(const t of this.pa)t();return this.ma=1,this}stop(){this.ma=0;for(const t of this.ba)t();return this}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.he("IDOMInitializer").le();class we{constructor(t){const i=this.va={};t.forEach(t=>{i[t.Gi]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Si(t,dom,i,s,targets,e,host,parts){const n=e.instructions,r=this.va;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);let instructions,h,o;for(let e=0,l=targets.length;l>e;++e){h=targets[e];for(let l=0,c=(instructions=n[e]).length;c>l;++l)r[(o=instructions[l]).type].Si(t,dom,i,s,h,o,parts)}if(host){const n=e.surrogates;for(let e=0,h=n.length;h>e;++e)r[(o=n[e]).type].Si(t,dom,i,s,host,o,parts)}}}we.inject=[all(IInstructionRenderer)];let ve=class{Si(t,dom,i,s,e,n){e[n.to]=n.value}};ve=c([instructionRenderer("re")],ve);let ye=class{Si(t,dom,i,s,e,n){const r=i.Pi(s,e,n,null,null,e,1),component=i.get(X(n.res)),h=i.get(IRenderer).va,o=n.instructions;let l;component.Ku(t,i,e,n);for(let e=0,n=o.length;n>e;++e)h[(l=o[e]).type].Si(t,dom,i,s,component,l);addComponent(s,component),r.Z()}};ye=c([instructionRenderer("ra")],ye);let Ce=class{Si(t,dom,i,s,e,n){const r=i.Pi(s,e,n),component=i.get(Y(n.res)),h=i.get(IRenderer).va,o=n.instructions;let l;component.Ku(t,i);for(let e=0,n=o.length;n>e;++e)h[(l=o[e]).type].Si(t,dom,i,s,component,l);addComponent(s,component),r.Z()}};Ce=c([instructionRenderer("rb")],Ce);let Te=class{constructor(t){this.ya=t}Si(t,dom,i,s,e,n,parts){const r=this.ya.Mu(dom,n.def,i),h=i.Pi(s,e,n,r,parts,dom.Ca(e),0),component=i.get(Y(n.res)),o=i.get(IRenderer).va,l=n.instructions;let c;component.Ku(t,i),n.link&&component.link(s.Yt);for(let e=0,n=l.length;n>e;++e)o[(c=l[e]).type].Si(t,dom,i,s,component,c);addComponent(s,component),h.Z()}};Te.inject=[IRenderingEngine],Te=c([instructionRenderer("rc")],Te);let Ae=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){dom.remove(e);const r=n.instructions,toViewModel=n.toViewModel;let h,o,l;for(let t=0,e=r.length;e>t;++t)o=ensureExpression(this.Ta,(h=r[t]).from,48),addBinding(s,l=new LetBinding(o,h.to,this.st,i,toViewModel))}};Ae.inject=[IExpressionParser,IObserverLocator],Ae=c([instructionRenderer("rd")],Ae);let Be=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,153);addBinding(s,new Call(r,e,n.to,this.st,i))}};Be.inject=[IExpressionParser,IObserverLocator],Be=c([instructionRenderer("rh")],Be);let Oe=class{constructor(t){this.Ta=t}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,1280);addBinding(s,new Ref(r,e,i))}};Oe.inject=[IExpressionParser],Oe=c([instructionRenderer("rj")],Oe);let Re=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){let r;const h=ensureExpression(this.Ta,n.from,2048);addBinding(s,r=h._h?new MultiInterpolationBinding(this.st,h,e,n.to,BindingMode.Ki,i):new InterpolationBinding(h.Xh,h,e,n.to,BindingMode.Ki,this.st,i,1))}};Re.inject=[IExpressionParser,IObserverLocator],Re=c([instructionRenderer("rf")],Re);let ke=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,48|n.mode);addBinding(s,new Binding(r,e,n.to,n.mode,this.st,i))}};ke.inject=[IExpressionParser,IObserverLocator],ke=c([instructionRenderer("rg")],ke);let Ie=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,539);addBinding(s,new Binding(r,e,n.to,BindingMode.Ki,this.st,i))}};Ie.inject=[IExpressionParser,IObserverLocator],Ie=c([instructionRenderer("rk")],Ie);class Se{bind(t,i,s,e){s.target.key=e,s.target.hr=1}Hr(t,i,s){s.target.key=null,s.target.hr=0}}BindingBehaviorResource.Lr("keyed",Se);const DefaultComponents=[Qs,is,we],DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,Se,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],DefaultRenderers=[ke,Ie,Be,Oe,Re,ve,ye,Ce,Te,Ae],Pe={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),ee(){return this.register(DI.ee())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Ki,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.an,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.fn,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}ri=Object.freeze({CallFunction,connects:t=>32==(32&t.X),observes:t=>64==(64&t.X),callsFunction:t=>128==(128&t.X),hasAncestor:t=>256==(256&t.X),isAssignable:t=>8192==(8192&t.X),isLeftHandSide:t=>1024==(1024&t.X),isPrimary:t=>512==(512&t.X),isResource:t=>32768==(32768&t.X),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral:class{constructor(parts){this.X=51,this.assign=PLATFORM.Gs,this.parts=parts}evaluate(t,i,s){const e=this.parts;let value,n="";for(let r=0,h=e.length;h>r;++r)null!=(value=e[r].evaluate(t,i,s))&&(n+=value);return n}connect(t,i,s){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,i,s)}accept(t){return t.Aa(this)}},ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of Cs)1==fs[t].U&&def(fs,t,Object.assign({},As,{value:ys[t]}))},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of Ss)1==Bs[t].U&&Es(Bs,t,Object.assign({},Ls,{value:Is[t]}))},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of Vs)1==js[t].U&&Ns(js,t,Object.assign({},Us,{value:xs[t]}))},BindingContext,Scope,OverrideContext,collectionObserver,get CollectionLengthObserver(){return CollectionLengthObserver},computed:t=>(function(i,s){(i.computed||(i.computed={}))[s]=t}),get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,get DirtyCheckProperty(){return DirtyCheckProperty},DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,PrimitiveObserver,PropertyAccessor,propertyObserver,get ProxyObserver(){return ProxyObserver},get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>i=>BindingBehaviorResource.Lr(t,i),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>i=>CustomAttributeResource.Lr(t,i),CustomAttributeResource,dynamicOptions:t=>void 0===t?It:It(t),templateController:t=>i=>CustomAttributeResource.Lr("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),i),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?Bt:Bt(t),customElement:t=>i=>CustomElementResource.Lr(t,i),CustomElementResource,IProjectorLocator,useShadowDOM(t){function i(t){return t.shadowOptions=s,t}const s="function"!=typeof t&&t?t:me;return"function"==typeof t?i(t):i},valueConverter:t=>i=>ValueConverterResource.Lr(t,i),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable,Aurelia,IDOMInitializer,IfRegistration:If,ElseRegistration:Else,RepeatRegistration:Repeat,ReplaceableRegistration:Replaceable,WithRegistration:With,SanitizeValueConverterRegistration:SanitizeValueConverter,DebounceBindingBehaviorRegistration:DebounceBindingBehavior,OneTimeBindingBehaviorRegistration:OneTimeBindingBehavior,ToViewBindingBehaviorRegistration:ToViewBindingBehavior,FromViewBindingBehaviorRegistration:FromViewBindingBehavior,SignalBindingBehaviorRegistration:SignalBindingBehavior,ThrottleBindingBehaviorRegistration:ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration:TwoWayBindingBehavior,BasicResources:DefaultResources,ObserverLocatorRegistration:Qs,LifecycleRegistration:is,RendererRegistration:we,BasicConfiguration:Pe,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},INode,IRenderLocation,IDOM,NodeSequence,get BindingMode(){return BindingMode},get ExpressionKind(){return ExpressionKind},get Hooks(){return Hooks},get LifecycleFlags(){return LifecycleFlags},get State(){return ti},stringifyLifecycleFlags(t){const i=[];return t&LifecycleFlags.Y&&i.push("mustEvaluate"),t&LifecycleFlags.$n&&i.push("isCollectionMutation"),t&LifecycleFlags.Mn&&i.push("isInstanceMutation"),t&LifecycleFlags.xn&&i.push("updateTargetObserver"),t&LifecycleFlags.G&&i.push("updateTargetInstance"),t&LifecycleFlags.Vn&&i.push("updateSourceExpression"),t&LifecycleFlags.Fn&&i.push("fromAsyncFlush"),t&LifecycleFlags.Un&&i.push("fromSyncFlush"),t&LifecycleFlags.qn&&i.push("fromStartTask"),t&LifecycleFlags.Xt&&i.push("fromStopTask"),t&LifecycleFlags.ht&&i.push("fromBind"),t&LifecycleFlags.yi&&i.push("fromUnbind"),t&LifecycleFlags.xt&&i.push("fromAttach"),t&LifecycleFlags.Kt&&i.push("fromDetach"),t&LifecycleFlags.ei&&i.push("fromCache"),t&LifecycleFlags.Hn&&i.push("fromDOMEvent"),t&LifecycleFlags.zn&&i.push("fromObserverSetter"),t&LifecycleFlags.Wn&&i.push("fromBindableHandler"),t&LifecycleFlags.Kn&&i.push("fromLifecycleTask"),t&LifecycleFlags._t&&i.push("parentUnmountQueued"),t&LifecycleFlags.lt&&i.push("doNotUpdateDOM"),t&LifecycleFlags.Qn&&i.push("isTraversingParentScope"),t&LifecycleFlags.Gn&&i.push("allowParentScopeTraversal"),t&LifecycleFlags.Dt&&i.push("useProxies"),i.join("|")},CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,AggregateLifecycleTask,CompositionCoordinator,ILifecycle,IRenderable,IViewFactory,LifecycleTask,PromiseTask:class{constructor(t,i){this.done=0,this.Pl=0,this.Wi=i,this.qs=t.then(value=>{if(1!=this.Pl)return this.done=1,this.Wi(value),value})}Bl(){return!this.done}cancel(){this.Bl()&&(this.Pl=1)}Ol(){return this.qs}},get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},get MutationKind(){return MutationKind},instructionRenderer,ensureExpression,addComponent,addBinding,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",_(name){return`${this.name}:${name}`},Pr(t){return t.kind===this},Lr(t,i){const s=i,e="string"==typeof t?{name:t,target:null}:t;return s.kind=BindingCommandResource,s.description=e,s.register=St,s}};class OneTimeBindingCommand{constructor(){this.Ba=49}compile(t){return new OneTimeBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.Ba=50}compile(t){return new ToViewBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.Ba=51}compile(t){return new FromViewBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.Ba=52}compile(t){return new TwoWayBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("two-way",TwoWayBindingCommand);const Le=["","$1","$2","","$4","","$6"],Ee={bind:BindingMode.Ki,Oa:BindingMode.oneTime,Ra:BindingMode.Ki,ka:BindingMode.an,Ia:BindingMode.fn};class DefaultBindingCommand{constructor(){this.Ba=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[Le[getMode(t)]](t)}}BindingCommandResource.Lr("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.Ba=153}compile(t){return new CallBindingInstruction(t.Fr,getTarget(t,1))}}BindingCommandResource.Lr("call",CallBindingCommand);class ForBindingCommand{constructor(){this.Ba=539}compile(t){return new IteratorBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("for",ForBindingCommand),(function(t){t[t.Sa=0]="Reset",t[t.Pa=511]="Ancestor",t[t.La=512]="This",t[t.Scope=1024]="Scope",t[t.Ea=2048]="Member",t[t.ja=4096]="Keyed"})(hi||(hi={})),(function(t){t[t.Da=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.$a=64]="LogicalOR",t[t.Ma=128]="LogicalAND",t[t.xa=192]="Equality",t[t.Va=256]="Relational",t[t.Fa=320]="Additive",t[t.Ua=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.Na=449]="LeftHandSide",t[t.qa=450]="Primary",t[t.Unary=451]="Unary"})(oi||(oi={})),(function(t){t[t.Ha=1572864]="EOF",t[t.za=1048576]="ExpressionTerminal",t[t.Wa=524288]="AccessScopeTerminal",t[t.Ka=262144]="ClosingToken",t[t.Qa=131072]="OpeningToken",t[t.Ga=65536]="BinaryOp",t[t.Za=32768]="UnaryOp",t[t.Na=16384]="LeftHandSide",t[t._a=12288]="StringOrNumericLiteral",t[t.Xa=8192]="NumericLiteral",t[t.Ja=4096]="StringLiteral",t[t.Ya=3072]="IdentifierName",t[t.tf=2048]="Keyword",t[t.if=1024]="Identifier",t[t.sf=512]="Contextual",t[t.ef=448]="Precedence",t[t.de=63]="Type",t[t.nf=2048]="FalseKeyword",t[t.rf=2049]="TrueKeyword",t[t.hf=2050]="NullKeyword",t[t.lf=2051]="UndefinedKeyword",t[t.cf=3076]="ThisScope",t[t.uf=3077]="ParentScope",t[t.af=671750]="OpenParen",t[t.ff=131079]="OpenBrace",t[t.df=16392]="Dot",t[t.gf=1835017]="CloseBrace",t[t.pf=1835018]="CloseParen",t[t.bf=1572875]="Comma",t[t.mf=671756]="OpenBracket",t[t.wf=1835021]="CloseBracket",t[t.vf=1572878]="Colon",t[t.yf=1572879]="Question",t[t.Cf=1572880]="Ampersand",t[t.Tf=1572883]="Bar",t[t.Af=1638548]="BarBar",t[t.Bf=1638613]="AmpersandAmpersand",t[t.Of=1638678]="EqualsEquals",t[t.Rf=1638679]="ExclamationEquals",t[t.kf=1638680]="EqualsEqualsEquals",t[t.Sf=1638681]="ExclamationEqualsEquals",t[t.Pf=1638746]="LessThan",t[t.Lf=1638747]="GreaterThan",t[t.Ef=1638748]="LessThanEquals",t[t.jf=1638749]="GreaterThanEquals",t[t.Df=1640798]="InKeyword",t[t.$f=1640799]="InstanceOfKeyword",t[t.Mf=623008]="Plus",t[t.xf=623009]="Minus",t[t.Vf=34850]="TypeofKeyword",t[t.Ff=34851]="VoidKeyword",t[t.Uf=1638884]="Asterisk",t[t.Nf=1638885]="Percent",t[t.qf=1638886]="Slash",t[t.Hf=1048615]="Equals",t[t.zf=32808]="Exclamation",t[t.Wf=540713]="TemplateTail",t[t.Kf=540714]="TemplateContinuation",t[t.Qf=1051179]="OfKeyword"})(li||(li={})),(function(t){t[t.Gf=0]="Null",t[t.Zf=8]="Backspace",t[t._f=9]="Tab",t[t.Xf=10]="LineFeed",t[t.Jf=11]="VerticalTab",t[t.Yf=12]="FormFeed",t[t.td=13]="CarriageReturn",t[t.sd=32]="Space",t[t.zf=33]="Exclamation",t[t.ed=34]="DoubleQuote",t[t.nd=36]="Dollar",t[t.Nf=37]="Percent",t[t.Cf=38]="Ampersand",t[t.rd=39]="SingleQuote",t[t.af=40]="OpenParen",t[t.pf=41]="CloseParen",t[t.Uf=42]="Asterisk",t[t.Mf=43]="Plus",t[t.bf=44]="Comma",t[t.xf=45]="Minus",t[t.df=46]="Dot",t[t.qf=47]="Slash",t[t.hd=59]="Semicolon",t[t.od=96]="Backtick",t[t.mf=91]="OpenBracket",t[t.ld=92]="Backslash",t[t.wf=93]="CloseBracket",t[t.ud=94]="Caret",t[t.ad=95]="Underscore",t[t.ff=123]="OpenBrace",t[t.Tf=124]="Bar",t[t.gf=125]="CloseBrace",t[t.vf=58]="Colon",t[t.Pf=60]="LessThan",t[t.Hf=61]="Equals",t[t.Lf=62]="GreaterThan",t[t.yf=63]="Question",t[t.fd=48]="Zero",t[t.dd=49]="One",t[t.gd=50]="Two",t[t.pd=51]="Three",t[t.bd=52]="Four",t[t.md=53]="Five",t[t.wd=54]="Six",t[t.vd=55]="Seven",t[t.yd=56]="Eight",t[t.Cd=57]="Nine",t[t.Td=65]="UpperA",t[t.Ad=66]="UpperB",t[t.Bd=67]="UpperC",t[t.Od=68]="UpperD",t[t.Rd=69]="UpperE",t[t.kd=70]="UpperF",t[t.Id=71]="UpperG",t[t.Sd=72]="UpperH",t[t.Pd=73]="UpperI",t[t.Ld=74]="UpperJ",t[t.Ed=75]="UpperK",t[t.jd=76]="UpperL",t[t.Dd=77]="UpperM",t[t.$d=78]="UpperN",t[t.Md=79]="UpperO",t[t.xd=80]="UpperP",t[t.Vd=81]="UpperQ",t[t.Fd=82]="UpperR",t[t.Ud=83]="UpperS",t[t.Nd=84]="UpperT",t[t.qd=85]="UpperU",t[t.Hd=86]="UpperV",t[t.zd=87]="UpperW",t[t.Wd=88]="UpperX",t[t.Kd=89]="UpperY",t[t.Qd=90]="UpperZ",t[t.Gd=97]="LowerA",t[t.Zd=98]="LowerB",t[t._d=99]="LowerC",t[t.Xd=100]="LowerD",t[t.Jd=101]="LowerE",t[t.Yd=102]="LowerF",t[t.tg=103]="LowerG",t[t.ig=104]="LowerH",t[t.sg=105]="LowerI",t[t.eg=106]="LowerJ",t[t.ng=107]="LowerK",t[t.rg=108]="LowerL",t[t.hg=109]="LowerM",t[t.og=110]="LowerN",t[t.lg=111]="LowerO",t[t.cg=112]="LowerP",t[t.ug=113]="LowerQ",t[t.ag=114]="LowerR",t[t.fg=115]="LowerS",t[t.dg=116]="LowerT",t[t.gg=117]="LowerU",t[t.pg=118]="LowerV",t[t.bg=119]="LowerW",t[t.mg=120]="LowerX",t[t.wg=121]="LowerY",t[t.vg=122]="LowerZ"})(ci||(ci={})),Profiler.ke("ExpressionParser");const je=PrimitiveLiteral.Mh,De=PrimitiveLiteral.$h,$e=PrimitiveLiteral.Dh,Me=PrimitiveLiteral.jh,xe=AccessThis.Yr,Ve=AccessThis.th,$state=new class{get ns(){return this.input.slice(this.rs,this.index)}constructor(t){this.index=0,this.rs=0,this.lastIndex=0,this.input=t,this.length=t.length,this.Yi=1572864,this.ss="",this.Ji=t.charCodeAt(0),this.ts=1}}("");(function(t){t[t.yg=100]="InvalidExpressionStart",t[t.Cg=101]="UnconsumedToken",t[t.Tg=102]="DoubleDot",t[t.Ag=103]="InvalidMemberExpression",t[t.Bg=104]="UnexpectedEndOfExpression",t[t.Og=105]="ExpectedIdentifier",t[t.Rg=106]="InvalidForDeclaration",t[t.kg=107]="InvalidObjectLiteralPropertyDefinition",t[t.Ig=108]="UnterminatedQuote",t[t.Sg=109]="UnterminatedTemplate",t[t.Pg=110]="MissingExpectedToken",t[t.Lg=111]="UnexpectedCharacter",t[t.Eg=112]="MissingValueConverter",t[t.jg=113]="MissingBindingBehavior"})(ui||(ui={})),(function(t){t[t.Dg=150]="NotAssignable",t[t.$g=151]="UnexpectedForOf"})(ai||(ai={}));const Fe=[je,De,$e,Me,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],Ue=Object.create(null);Ue.true=2049,Ue.null=2050,Ue.false=2048,Ue.undefined=2051,Ue.Yr=3076,Ue.th=3077,Ue.mh=1640798,Ue.bh=1640799,Ue.Sh=34850,Ue.Ih=34851,Ue.of=1051179;const Ne=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],qe=[48,58],He=t=>{throw Reporter.error(111,{state:t})};He.Mg=1,Ut(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const ze=new Uint8Array(65535);Ut(ze,null,Ne,1),Ut(ze,null,qe,1);const We=Array(65535);We.fill(He,0,65535),Ut(We,null,[0,33,127,161],t=>(Dt(t),null)),Ut(We,null,Ne,function(t){for(;ze[Dt(t)];);const i=Ue[t.ss=t.ns];return void 0===i?1024:i}),Ut(We,null,qe,t=>$t(t,0)),We[34]=We[39]=(t=>(function(t){const i=t.Ji;Dt(t);let s=0;const e=[];let n=t.index;for(;t.Ji!==i;)if(92===t.Ji)e.push(t.input.slice(n,t.index)),Dt(t),s=Pt(t.Ji),Dt(t),e.push(String.fromCharCode(s)),n=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});Dt(t)}const r=t.input.slice(n,t.index);Dt(t),e.push(r);const h=e.join("");return t.ss=h,4096})(t)),We[96]=(t=>Mt(t)),We[33]=(t=>61!==Dt(t)?32808:61!==Dt(t)?1638679:(Dt(t),1638681)),We[61]=(t=>61!==Dt(t)?1048615:61!==Dt(t)?1638678:(Dt(t),1638680)),We[38]=(t=>38!==Dt(t)?1572880:(Dt(t),1638613)),We[124]=(t=>124!==Dt(t)?1572883:(Dt(t),1638548)),We[46]=(t=>Dt(t)>57||48>t.Ji?16392:$t(t,1)),We[60]=(t=>61!==Dt(t)?1638746:(Dt(t),1638748)),We[62]=(t=>61!==Dt(t)?1638747:(Dt(t),1638749)),We[37]=Nt(1638885),We[40]=Nt(671750),We[41]=Nt(1835018),We[42]=Nt(1638884),We[43]=Nt(623008),We[44]=Nt(1572875),We[45]=Nt(623009),We[47]=Nt(1638886),We[58]=Nt(1572878),We[63]=Nt(1572879),We[91]=Nt(671756),We[93]=Nt(1835021),We[123]=Nt(131079),We[125]=Nt(1835017);const IExpressionParserRegistration={register(t){t.we(IExpressionParser,t=>(t.Nl=parseExpression,t))}},Ke=[IExpressionParserRegistration],AtPrefixedTriggerAttributePatternRegistration=AtPrefixedTriggerAttributePattern,ColonPrefixedBindAttributePatternRegistration=ColonPrefixedBindAttributePattern,RefAttributePatternRegistration=RefAttributePattern,DotSeparatedAttributePatternRegistration=DotSeparatedAttributePattern,DefaultBindingSyntax=[RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration],ShortHandBindingSyntax=[AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration],CallBindingCommandRegistration=CallBindingCommand,DefaultBindingCommandRegistration=DefaultBindingCommand,ForBindingCommandRegistration=ForBindingCommand,FromViewBindingCommandRegistration=FromViewBindingCommand,OneTimeBindingCommandRegistration=OneTimeBindingCommand,ToViewBindingCommandRegistration=ToViewBindingCommand,TwoWayBindingCommandRegistration=TwoWayBindingCommand,DefaultBindingLanguage=[DefaultBindingCommandRegistration,OneTimeBindingCommandRegistration,FromViewBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,CallBindingCommandRegistration,ForBindingCommandRegistration],Qe={register:t=>Pe.register(t).register(...Ke,...DefaultBindingSyntax,...DefaultBindingLanguage),ee(){return this.register(DI.ee())}};class ResourceModel{constructor(t){this.xg=t,this.Vg={},this.Fg={},this.Ug={}}Ng(name){let t=this.Vg[name];if(void 0===t){const def=this.xg.find(CustomElementResource,name);t=null===def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.Ki;let i,s,e,mode;for(s in bindables)void 0!==(i=bindables[s]).Qi&&(s=i.Qi),e=void 0!==i.Hi?i.Hi:PLATFORM.zi(s),t.bindables[e]=new BindableInfo(s,mode=void 0!==i.mode&&i.mode!==BindingMode.default?i.mode:defaultBindingMode);return t})(def),this.Vg[name]=t}return t}qg(t){const name=PLATFORM._i(t.target);let i=this.Fg[name];if(void 0===i){const def=this.xg.find(CustomAttributeResource,name);i=null===def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.Ki;let i,s,mode,e=0;for(s in bindables)++e,void 0!==(i=bindables[s]).Qi&&(s=i.Qi),t.bindables[s]=new BindableInfo(s,mode=void 0!==i.mode&&i.mode!==BindingMode.default?i.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[s]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.qi||e>1)&&(t.qi=1),t})(def),this.Fg[name]=i}return i}Hg(t){const name=t.command;if(null===name)return null;let i=this.Ug[name];if(void 0===i){if(null===(i=this.xg.create(BindingCommandResource,name)))throw Reporter.error(0);this.Ug[name]=i}return i}}class BindableInfo{constructor(t,mode){this.Zi=t,this.mode=mode}}class ElementInfo{constructor(name,t){this.name=name,this.containerless=t,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.qi=0}}(function(SymbolFlags){SymbolFlags[SymbolFlags.type=511]="type",SymbolFlags[SymbolFlags.isTemplateController=1]="isTemplateController",SymbolFlags[SymbolFlags.zg=2]="isReplacePart",SymbolFlags[SymbolFlags.Wg=4]="isCustomAttribute",SymbolFlags[SymbolFlags.Kg=8]="isPlainAttribute",SymbolFlags[SymbolFlags.Qg=16]="isCustomElement",SymbolFlags[SymbolFlags.Gg=32]="isLetElement",SymbolFlags[SymbolFlags.Zg=64]="isPlainElement",SymbolFlags[SymbolFlags._g=128]="isText",SymbolFlags[SymbolFlags.gn=256]="isBinding",SymbolFlags[SymbolFlags.Xg=512]="hasMarker",SymbolFlags[SymbolFlags.Jg=1024]="hasTemplate",SymbolFlags[SymbolFlags.hasAttributes=2048]="hasAttributes",SymbolFlags[SymbolFlags.Yg=4096]="hasBindings",SymbolFlags[SymbolFlags.hasChildNodes=8192]="hasChildNodes",SymbolFlags[SymbolFlags.tp=16384]="hasParts"})(SymbolFlags||(SymbolFlags={}));class TemplateControllerSymbol{get ip(){return null===this.sp&&(this.sp=[],this.flags|=4096),this.sp}constructor(dom,t,i,s){this.flags=513,this.res=i.name,this.ep=s,this.np=null,this.Xi=t,this.template=null,this.templateController=null,this.marker=qt(dom),this.sp=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.np=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get ip(){return null===this.sp&&(this.sp=[],this.flags|=4096),this.sp}constructor(t,i){this.flags=4,this.res=i.name,this.Xi=t,this.sp=null}}class PlainAttributeSymbol{constructor(t,i,s){this.flags=8,this.Xi=t,this.command=i,this.Fr=s}}class BindingSymbol{constructor(t,bindable,i,s,e){this.flags=256,this.command=t,this.bindable=bindable,this.Fr=i,this.vs=s,this.target=e}}class CustomElementSymbol{get attributes(){return null===this.rp&&(this.rp=[],this.flags|=2048),this.rp}get ip(){return null===this.sp&&(this.sp=[],this.flags|=4096),this.sp}get childNodes(){return null===this.hp&&(this.hp=[],this.flags|=8192),this.hp}get parts(){return null===this.op&&(this.op=[],this.flags|=16384),this.op}constructor(dom,t,i){this.flags=16,this.res=i.name,this.np=t,this.bindables=i.bindables,this.lp=1,this.templateController=null,i.containerless?(this.Tn=1,this.marker=qt(dom),this.flags|=512):(this.Tn=0,this.marker=null),this.rp=null,this.sp=null,this.hp=null,this.op=null}}class LetElementSymbol{get ip(){return null===this.sp&&(this.sp=[],this.flags|=4096),this.sp}constructor(dom,t){this.flags=544,this.np=t,this.toViewModel=0,this.marker=qt(dom),this.sp=null}}class PlainElementSymbol{get attributes(){return null===this.rp&&(this.rp=[],this.flags|=2048),this.rp}get childNodes(){return null===this.hp&&(this.hp=[],this.flags|=8192),this.hp}constructor(t){this.flags=64,this.np=t,this.lp=0,this.templateController=null,this.rp=null,this.hp=null}}class TextSymbol{constructor(dom,t,i){this.flags=640,this.np=t,this.ac=i,this.marker=qt(dom)}}fi=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>i=>BindingCommandResource.Lr(t,i),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,IExpressionParserRegistration,DefaultComponents:Ke,RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration,DefaultBindingSyntax,AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration,ShortHandBindingSyntax,CallBindingCommandRegistration,DefaultBindingCommandRegistration,ForBindingCommandRegistration,FromViewBindingCommandRegistration,OneTimeBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,DefaultBindingLanguage,BasicConfiguration:Qe,parseExpression,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,get SymbolFlags(){return SymbolFlags},TemplateControllerSymbol,TextSymbol});class Listener{constructor(dom,t,i,s,e,preventDefault,n,r){this.dom=dom,this.wi=null,this.Oi=null,this.$state=0,this.cp=i,this.qr=r,this.preventDefault=preventDefault,this.El=s,this.target=e,this.up=t,this.ap=n}xl(t){const i=this.$scope.yr;i.fp=t;const s=this.El.evaluate(LifecycleFlags.Y,this.$scope,this.qr);return Reflect.deleteProperty(i,"$event"),1!=s&&this.preventDefault&&t.preventDefault(),s}ds(t){this.xl(t)}mi(t,i){if(2&this.$state){if(this.$scope===i)return;this.ui(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=i;const s=this.El;hasBind(s)&&s.bind(t,i,this),this.dp=this.ap.addEventListener(this.dom,this.target,this.up,this,this.cp),this.$state|=2,this.$state&=-2}ui(t){if(!(2&this.$state))return;this.$state|=64;const i=this.El;hasUnbind(i)&&i.Hr(t,this.$scope,this),this.$scope=null,this.dp.Z(),this.dp=null,this.$state&=-67}nt(t,i,s){}B(t,i,s){}}let AttributeNSAccessor=class{constructor(t,i,s,e,n){this.ot=1,this.attributeName=e,this.R=t,this.N=i,this.oldValue=this.H=this.W(),this.q=s,this.gp=n}W(){return this.N.getAttributeNS(this.gp,this.attributeName)}ut(t){this.N.setAttributeNS(this.gp,this.attributeName,t)}};AttributeNSAccessor=c([targetObserver("")],AttributeNSAccessor);const Ge=LifecycleFlags.Hn|LifecycleFlags.Vn,Ze=LifecycleFlags.rt|LifecycleFlags.G,_e=(t,i)=>t===i;let CheckedObserver=class{constructor(t,i,s,e,n){this.dt=t&LifecycleFlags.Di,this.ot=1,this.dp=e,this.R=i,this.N=s,this.st=n}W(){return this.H}ut(t,i){this.pp||(this.pp=this.N.ji&&(this.N.ji.bp||this.N.ji.value),this.pp&&this.pp.subscribe(this)),this.mp&&(this.mp.Ot(this),this.mp=null),"checkbox"===this.N.type&&Array.isArray(t)&&(this.mp=this.st.Oc(this.dt|i,t),this.mp.Bt(this)),this.wp()}F(){this.wp(),this.Ms(Ze)}B(t,i,s){this.wp(),this.Ms(s)}wp(){const value=this.H,t=this.N,i=t.hasOwnProperty("model")?t.bp:t.value,s=t.vp||_e;t.checked="radio"===t.type?!!s(value,i):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!s(t,i)):0}Ms(t){t&LifecycleFlags.ht||this.H!==this.oldValue&&this.C(this.H,this.oldValue,this.dt|t)}ds(){let value=this.H;const t=this.N,i=t.hasOwnProperty("model")?t.bp:t.value;let s;const e=t.vp||_e;if("checkbox"===t.type){if(Array.isArray(value))return s=value.findIndex(t=>!!e(t,i)),void(t.checked&&-1===s?value.push(i):t.checked||-1===s||value.splice(s,1));value=t.checked}else{if(!t.checked)return;value=i}this.oldValue=this.H,this.H=value,this.Ms(Ge)}subscribe(t){this.m()||this.dp.subscribe(this.N,this),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.dp.Z()}Hr(){this.mp&&(this.mp.Ot(this),this.mp=null),this.pp&&this.pp.unsubscribe(this)}};CheckedObserver=c([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,i){this.ot=1,this.Nc=1,this.R=t,this.yp=null,this.N=i,this.version=0}W(){return this.H}ut(t){const i=this.yp||{};let s,name,e=this.version;if(t.length){const n=this.N;for(let r=0,h=(s=t.split(/\s+/)).length;h>r;r++)(name=s[r]).length&&(i[name]=e,n.classList.add(name))}if(this.yp=i,this.version+=1,0!==e)for(name in e-=1,i)i.hasOwnProperty(name)&&i[name]===e&&this.N.classList.remove(name)}};ClassAttributeAccessor=c([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,i,s){this.ot=1,this.R=t,this.N=i,this.oldValue=this.H=this.W(),this.q=s}W(){return this.N.getAttribute(this.q)}ut(t){null===t?this.N.removeAttribute(this.q):this.N.setAttribute(this.q,t)}};DataAttributeAccessor=c([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,i,s){this.ot=1,this.R=t,this.N=i,this.q=s}W(){return this.N[this.q]}ut(value){this.N[this.q]=value}};ElementPropertyAccessor=c([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,i,s){this.dom=dom,this.Cp=s,this.count=0,this.Tp=t,this.listener=i}Ap(){this.count++,1===this.count&&this.dom.addEventListener(this.Tp,this.listener,null,this.Cp)}Bp(){this.count--,0===this.count&&this.dom.removeEventListener(this.Tp,this.listener,null,this.Cp)}Z(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.Tp,this.listener,null,this.Cp))}}class DelegateOrCaptureSubscription{constructor(t,i,s,e){this.Op=t,this.Rp=i,this.up=s,i[s]=e}Z(){this.Op.Bp(),this.Rp[this.up]=null}}class TriggerSubscription{constructor(dom,t,i,s){this.dom=dom,this.target=t,this.up=i,this.Wi=s,dom.addEventListener(i,s,t)}Z(){this.dom.removeEventListener(this.up,this.Wi,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.kp=t,this.target=null,this.dp=null}subscribe(t,i){this.target=t,this.dp=i;const s=this.dom.addEventListener,e=this.kp;for(let n=0,r=e.length;r>n;++n)s(e[n],i,t)}Z(){const t=this.target,i=this.dp,s=this.kp,e=this.dom.removeEventListener;for(let n=0,r=s.length;r>n;++n)e(s[n],i,t);this.target=this.dp=null}}const IEventManager=DI.he("IEventManager").ce(t=>t.singleton(Xe));class Xe{constructor(){this.Ip={},this.Sp={},this.Ip={},this.Sp={}}addEventListener(dom,t,i,s,strategy){let e,n,r;if(strategy===DelegationStrategy.nr){(r=(e=this.Ip)[i]||(e[i]=new ListenerTracker(dom,i,Kt,0))).Ap();const n=t.gs||(t.gs={});return new DelegateOrCaptureSubscription(r,n,i,s)}if(strategy===DelegationStrategy.er){(r=(n=this.Sp)[i]||(n[i]=new ListenerTracker(dom,i,Wt,1))).Ap();const e=t.fs||(t.fs={});return new DelegateOrCaptureSubscription(r,e,i,s)}return new TriggerSubscription(dom,t,i,s)}Z(){let t;const{Ip:i,Sp:s}=this;for(t in i)i[t].Z();for(t in s)s[t].Z()}}const Je=LifecycleFlags.Hn|LifecycleFlags.Vn,Ye={Pp:1,Lp:1,Ep:1};let SelectValueObserver=class{constructor(t,i,s,e,n,dom){this.dt=t&LifecycleFlags.Di,this.ot=1,this.R=i,this.N=s,this.dp=e,this.st=n,this.dom=dom}W(){return this.H}ut(t,i){const s=Array.isArray(t);if(!s&&null!=t&&this.N.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.mp&&(this.mp.Ot(this),this.mp=null),s&&(this.mp=this.st.Oc(this.dt|i,t),this.mp.Bt(this)),this.jp(),this.Ms(i)}F(t){this.jp(t)}B(t,i,s){this.K(t,this.dt|s)}Ms(t){if(t&LifecycleFlags.ht)return;const i=this.oldValue,s=this.H;s!==i&&this.C(s,i,this.dt|t)}ds(){this.Dp()&&this.Ms(Je)}jp(t){const i=this.H,s=Array.isArray(i),e=this.N,n=e.vp||Qt,r=e.options;let h=r.length;for(;h--;){const t=r[h],e=t.hasOwnProperty("model")?t.bp:t.value;t.selected=s?-1!==i.findIndex(t=>!!n(e,t)):!!n(e,i)}}Dp(){const t=this.N,i=t.options,s=i.length,e=this.H;let n=0;if(t.multiple){if(!Array.isArray(e))return 1;let r;const h=t.vp||Qt,o=[];for(;s>n;)(r=i[n]).selected&&o.push(r.hasOwnProperty("model")?r.bp:r.value),++n;for(n=0;e.length>n;){const t=e[n];-1===o.findIndex(i=>!!h(t,i))?e.splice(n,1):++n}for(n=0;o.length>n;){const t=o[n];-1===e.findIndex(i=>!!h(t,i))&&e.push(t),++n}return 0}let value=null;for(;s>n;){const t=i[n];if(t.selected){value=t.hasOwnProperty("model")?t.bp:t.value;break}++n}return this.oldValue=this.H,this.H=value,1}subscribe(t){this.m()||this.dp.subscribe(this.N,this),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.dp.Z()}bind(){this.$p=this.dom.Mp(this.N,this.xp.bind(this),Ye)}Hr(){this.$p.disconnect(),this.$p=null,this.mp&&(this.mp.Ot(this),this.mp=null)}xp(){this.jp(),this.Dp()&&this.Ms(Je)}};SelectValueObserver=c([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,i){this.ot=1,this.oldValue=this.H=i.style.cssText,this.R=t,this.N=i,this.Vp=null,this.version=0}W(){return this.N.style.cssText}Fp(t,value){let i="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(i="important",value=value.replace("!important","")),this.N.style.setProperty(t,value,i)}ut(t){const i=this.Vp||{};let s,e=this.version;if(null!==t)if(t instanceof Object){let value;for(s in t)t.hasOwnProperty(s)&&(value=t[s],i[s=s.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=e,this.Fp(s,value))}else if(t.length){const n=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let r;for(;null!==(r=n.exec(t));)(s=r[1])&&(i[s]=e,this.Fp(s,r[2]))}if(this.Vp=i,this.version+=1,0!==e)for(s in e-=1,i)i.hasOwnProperty(s)&&i[s]===e&&this.N.style.removeProperty(s)}};StyleAttributeAccessor=c([targetObserver()],StyleAttributeAccessor);const tn={button:"",Up:"on",color:"#000000",Np:"",qp:"",email:"",Hp:"",hidden:"",zp:"",Wp:"",number:"",password:"",Kp:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",Qp:""},sn=LifecycleFlags.Hn|LifecycleFlags.Vn;let ValueAttributeObserver=class{constructor(t,i,s,e){if(this.ot=1,this.dp=e,this.R=t,this.N=i,this.q=s,"value"===s){const t=i.type;this.defaultValue=tn[t||"text"],"file"===t&&(this.flush=this.Gp)}else this.defaultValue="";this.oldValue=this.H=i[s]}W(){return this.N[this.q]}ut(t,i){this.N[this.q]=t,i&LifecycleFlags.ht||this.C(this.H,this.oldValue,i)}ds(){const t=this.oldValue=this.H,i=this.H=this.W();t!==i&&(this.C(i,t,sn),this.oldValue=i)}subscribe(t){this.m()||(this.oldValue=this.W(),this.dp.subscribe(this.N,this)),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.dp.Z()}Gp(){const t=this.H;this.oldValue!==t&&""===t&&(this.ut(t,this.ct),this.oldValue=this.H)}};ValueAttributeObserver=c([targetObserver("")],ValueAttributeObserver);const en="http://www.w3.org/1999/xlink",nn="http://www.w3.org/XML/1998/namespace",rn="http://www.w3.org/2000/xmlns/",hn=((wi=Object.create(null))["Zp"]=["actuate",en],wi["_p"]=["arcrole",en],wi["Xp"]=["href",en],wi["Jp"]=["role",en],wi["Yp"]=["show",en],wi["tb"]=["title",en],wi["ib"]=["type",en],wi["sb"]=["lang",nn],wi["eb"]=["space",nn],wi.nb=["xmlns",rn],wi["rb"]=["xlink",rn],wi),on=["change","input"],ln=["change"],cn=["change","input","blur","keyup","paste"],un=["scroll"],an=(function(t){return t.hb=1,t.style=1,t.ob=1,t.checked=1,t.value=1,t.bp=1,t["Zp"]=1,t["_p"]=1,t["Xp"]=1,t["Jp"]=1,t["Yp"]=1,t["tb"]=1,t["ib"]=1,t["sb"]=1,t["eb"]=1,t.nb=1,t["rb"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}it(t,i,s,e,n){switch(n){case"checked":return new CheckedObserver(t,i,e,new EventSubscriber(this.dom,on),s);case"value":return"SELECT"===e.tagName?new SelectValueObserver(t,i,e,new EventSubscriber(this.dom,ln),s,this.dom):new ValueAttributeObserver(i,e,n,new EventSubscriber(this.dom,on));case"files":return new ValueAttributeObserver(i,e,n,new EventSubscriber(this.dom,on));case"textContent":case"innerHTML":return new ValueAttributeObserver(i,e,n,new EventSubscriber(this.dom,cn));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(i,e,n,new EventSubscriber(this.dom,un));case"class":return new ClassAttributeAccessor(i,e);case"style":case"css":return new StyleAttributeAccessor(i,e);case"model":return new SetterObserver(t,e,n);case"role":return new DataAttributeAccessor(i,e,n);default:if(void 0!==hn[n]){const t=hn[n];return new AttributeNSAccessor(i,e,n,t[0],t[1])}const r=n.slice(0,5);if("aria-"===r||"data-"===r)return new DataAttributeAccessor(i,e,n)}return null}Xc(t,i,s){return 1==an[s]}_c(t,i){return this.dom.bs(i)}}TargetObserverLocator.inject=[IDOM];class TargetAccessorLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}Ml(t,i,s,e){switch(e){case"textContent":return new ElementPropertyAccessor(i,s,e);case"class":return new ClassAttributeAccessor(i,s);case"style":case"css":return new StyleAttributeAccessor(i,s);case"src":case"href":case"role":return new DataAttributeAccessor(i,s,e);default:if(void 0!==hn[e]){const t=hn[e];return new AttributeNSAccessor(i,s,e,t[0],t[1])}const t=e.slice(0,5);return"aria-"===t||"data-"===t?new DataAttributeAccessor(i,s,e):new ElementPropertyAccessor(i,s,e)}}_c(t,i){return this.dom.bs(i)}}TargetAccessorLocator.inject=[IDOM];const ISVGAnalyzer=DI.he("ISVGAnalyzer").ce(t=>t.singleton(class{lb(t,i){return 0}}));class AttrBindingBehavior{bind(t,i,s){s.targetObserver=new DataAttributeAccessor(s.qr.get(ILifecycle),s.target,s.jl)}Hr(t,i,s){}}BindingBehaviorResource.Lr("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,i,s){if(!s.xl||!s.up)throw Reporter.error(8);s.ps=s.xl,s.xl=Gt}Hr(t,i,s){s.xl=s.ps,s.ps=null}}BindingBehaviorResource.Lr("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.st=t}bind(t,i,s,...e){if(0===e.length)throw Reporter.error(9);if(s.mode!==BindingMode.fn&&s.mode!==BindingMode.an)throw Reporter.error(10);this.dt=t&LifecycleFlags.Di;const n=this.st.it(this.dt|t,s.target,s.jl);if(!n.dp)throw Reporter.error(10);s.targetObserver=n,n.cb=s.targetObserver.dp,n.dp=new EventSubscriber(s.qr.get(IDOM),e)}Hr(t,i,s){s.targetObserver.dp.Z(),s.targetObserver.dp=s.targetObserver.cb,s.targetObserver.cb=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Lr("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.ub="ha",HTMLTargetedInstructionType.ab="hb",HTMLTargetedInstructionType.fb="hc",HTMLTargetedInstructionType.setAttribute="hd"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.dn,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.nr,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.er,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.gb=t}get Ou(){return this.pb||(this.pb=buildTemplateDefinition(null,null,this.gb,null,"string"==typeof this.gb,null,this.instructions,this.dependencies))}Ui(t,i){return t.Ui(this.dom,this.Ou,null,i)}bb(t,i,s){return this.Mu(i,s).create()}Mu(t,i){return t.Mu(this.dom,this.Ou,i)}ms(t,instructions,dependencies){this.dom.appendChild(t,this.gb),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const fn=["subject","composing"];class Compose{constructor(dom,t,i,s,e){this.dom=dom,this.subject=null,this.mb=0,this.Sl=e,this.wb=null,this.sa=t,this.ya=s,this.Sl.ml=(()=>{this.mb=0}),this.properties=i.instructions.filter(t=>!fn.includes(t.to)).reduce((t,i)=>(i.to&&(t[i.to]=i),t),{})}di(t){this.vb(this.subject,null,t),this.Sl.di(t,this.$scope)}Vt(t){this.Sl.Vt(t)}Qt(t){this.Sl.Qt(t)}Ti(t){this.wb=null,this.Sl.Ti(t)}si(t){this.Sl.si(t)}yb(t,i,s){this.vb(t,i,s)}vb(t,i,s){this.wb!==t&&(this.wb=t,t=t instanceof Promise?t.then(t=>this.Cb(t,s)):this.Cb(t,s),this.mb=1,this.Sl.yl(t,s))}Cb(t,i){const s=this.Tb(t,i);return s?(s.bu(this.hi.host),s.wu(this.sa.$scope),s):null}Tb(t,i){return t?"lockScope"in t?t:"createView"in t?t.bb(i,this.ya,this.sa.$context):"create"in t?t.create():"template"in t?this.ya.Mu(this.dom,t,this.sa.$context).create():createElement(this.dom,t,this.properties,this.hi.children).bb(i,this.ya,this.sa.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],c([bindable],Compose.prototype,"subject",void 0),c([bindable],Compose.prototype,"composing",void 0),CustomElementResource.Lr({name:"au-compose",containerless:1},Compose),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,i,s,e,n){this.Ab=t,this.Bb=i,this.Node=s,this.Element=e,this.HTMLElement=n}addEventListener(t,i,s,e){(s||this.Bb).addEventListener(t,i,e)}appendChild(t,i){t.appendChild(i)}cloneNode(t,i){return t.cloneNode(0!=i)}Ca(t){if(this.Ob(t))return t;if(null===t.parentNode)throw Reporter.error(52);const i=this.Bb.createComment("au-end"),s=this.Bb.createComment("au-start");return t.parentNode.replaceChild(i,t),i.parentNode.insertBefore(s,i),i.Rb=s,s.$nodes=null,i}createDocumentFragment(t){if(null==t)return this.Bb.createDocumentFragment();if(this.bs(t)){if(void 0!==t.content)return t.content;const i=this.Bb.createDocumentFragment();return i.appendChild(t),i}return this.kb(t).content}createElement(name){return this.Bb.createElement(name)}Mp(t,i,s){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.Qs};const e=new MutationObserver(i);return e.observe(t,s),e}kb(t){if(null==t)return this.Bb.createElement("template");const template=this.Bb.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.Bb.createTextNode(t)}insertBefore(t,i){i.parentNode.insertBefore(t,i)}Ib(t){return"AU-M"===t.nodeName}bs(t){return null!=t&&t.nodeType>0}Ob(t){return"au-end"===t.textContent}os(t){t.className="au"}ki(t,i){t.Ii(INode,i),t.Ii(this.Node,i),t.Ii(this.Element,i),t.Ii(this.HTMLElement,i)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,i,s,e){(s||this.Bb).removeEventListener(t,i,e)}setAttribute(t,name,value){t.setAttribute(name,value)}}class dn{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new bn(t)]}gu(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}pu(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class gn{constructor(dom,t){this.dom=dom,this.Sb=t;const i=t.querySelectorAll(".au");let s=0,e=i.length;const targets=this.targets=Array(e);for(;e>s;){const t=i[s];targets[s]="AU-M"===t.nodeName?this.dom.Ca(t):t,++s}const n=t.childNodes;s=0;const childNodes=this.childNodes=Array(e=n.length);for(;e>s;)childNodes[s]=n[s],++s;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}gu(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.Sb,t),"au-end"===t.textContent){this.end=t;const i=this.start=t.Rb;i.$nodes=null===i.$nodes?this:PLATFORM.$t}}pu(t){t.appendChild(this.Sb),this.start=this.end=null}remove(){const t=this.Sb;if(null!==this.start&&this.start.$nodes===this){const i=this.end;let s,e=this.start.nextSibling;for(;e!==i;)s=e.nextSibling,t.appendChild(e),e=s;this.start.$nodes=null,this.start=this.end=null}else{let i=this.firstChild;if(i.parentNode!==t){const s=this.lastChild;let e;for(;null!==i&&(e=i.nextSibling,t.appendChild(i),i!==s);)i=e}}}}class pn{constructor(dom,t){this.dom=dom;const i=dom.createDocumentFragment(t),childNodes=i.childNodes;switch(childNodes.length){case 0:return void(this.Iu=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.Pb=0,this.gb=t,void(this.de=dn)}default:this.Pb=1,this.gb=i,this.de=gn}}Iu(){return new this.de(this.dom,this.gb.cloneNode(this.Pb))}}class bn{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.Qs,t.nodeName="AU-M",t.nodeType=1})(bn.prototype);class mn{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,i){return new CompiledTemplate(this.dom,i,new pn(this.dom,i.template),t)}}mn.inject=[IDOM];let wn=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){const r=e.nextSibling;let h;dom.Ib(e)&&dom.remove(e);const o=ensureExpression(this.Ta,n.from,2048);addBinding(s,h=o._h?new MultiInterpolationBinding(this.st,o,r,"textContent",BindingMode.Ki,i):new InterpolationBinding(o.Xh,o,r,"textContent",BindingMode.Ki,this.st,i,1))}};wn.inject=[IExpressionParser,IObserverLocator],wn=c([instructionRenderer("ha")],wn);let vn=class{constructor(t,i){this.Ta=t,this.ap=i}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,80|n.strategy+6);addBinding(s,new Listener(dom,n.to,n.strategy,r,e,n.preventDefault,this.ap,i))}};vn.inject=[IExpressionParser,IEventManager],vn=c([instructionRenderer("hb")],vn);let yn=class{Si(t,dom,i,s,e,n){e.setAttribute(n.to,n.value)}};yn=c([instructionRenderer("hd")],yn);let Cn=class{constructor(t,i){this.Ta=t,this.st=i}Si(t,dom,i,s,e,n){const r=ensureExpression(this.Ta,n.from,48|BindingMode.Ki);addBinding(s,new Binding(r,e.style,n.to,BindingMode.Ki,this.st,i))}};Cn.inject=[IExpressionParser,IObserverLocator],Cn=c([instructionRenderer("hc")],Cn);const Tn={mode:"open"},An={Pp:1};class Bn{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.Lb(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:Tn),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}Fu(t){this.dom.Mp(this.shadowRoot,t,An)}Eb(){return this.shadowRoot}ri(t){t.pu(this.shadowRoot)}oi(t){t.remove()}}class On{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.Qs,this.host=dom.Ca(host),this.host.$customElement=$customElement}get children(){return this.childNodes}Fu(t){new MutationObserver(t).observe(this.host,An)}Eb(){return this.host.jb()}ri(t){t.insertBefore(this.host)}oi(t){t.remove()}}class Rn{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}Fu(t){}Eb(){return this.host.jb()}ri(t){t.pu(this.host)}oi(t){t.remove()}}const IProjectorLocatorRegistration=class{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}Fi(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new Bn(dom,t,host,def)}return def.containerless?new On(dom,t,host):new Rn(t,host)}},kn=[IProjectorLocatorRegistration,TargetAccessorLocator,TargetObserverLocator,mn],In=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],Sn=[vn,yn,Cn,wn],Pn={register:t=>Pe.register(t).register(...kn,...In,...Sn),ee(){return this.register(DI.ee())}};di=Object.freeze({Listener,get AttributeNSAccessor(){return AttributeNSAccessor},get CheckedObserver(){return CheckedObserver},get ClassAttributeAccessor(){return ClassAttributeAccessor},get DataAttributeAccessor(){return DataAttributeAccessor},get ElementPropertyAccessor(){return ElementPropertyAccessor},ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},get StyleAttributeAccessor(){return StyleAttributeAccessor},ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration,ITargetAccessorLocatorRegistration:TargetAccessorLocator,ITargetObserverLocatorRegistration:TargetObserverLocator,ITemplateFactoryRegistration:mn,DefaultComponents:kn,AttrBindingBehaviorRegistration:AttrBindingBehavior,SelfBindingBehaviorRegistration:SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration:UpdateTriggerBindingBehavior,ComposeRegistration:Compose,DefaultResources:In,ListenerBindingRendererRegistration:vn,SetAttributeRendererRegistration:yn,StylePropertyBindingRendererRegistration:Cn,TextBindingRendererRegistration:wn,DefaultRenderers:Sn,BasicConfiguration:Pn,createElement,RenderPlan,get HTMLTargetedInstructionType(){return HTMLTargetedInstructionType},isHTMLTargetedInstruction,get NodeType(){return NodeType},HTMLDOM,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hc",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction});class TriggerBindingCommand{constructor(){this.Ba=86}compile(t){return new TriggerBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.Ba=88}compile(t){return new DelegateBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.Ba=87}compile(t){return new CaptureBindingInstruction(t.Fr,getTarget(t,0))}}BindingCommandResource.Lr("capture",CaptureBindingCommand),Profiler.ke("TemplateBinder");const Ln={id:1,Db:1,$b:1},En={Mb:1,Db:1,$b:1};class TemplateBinder{constructor(dom,t,i,s){this.dom=dom,this.xg=t,this.xb=i,this.Vb=s,this.Au=null,this.manifest=null,this.Fb=null,this.Ub=null,this.ep=null}bind(t){const i=this.Au,s=this.Ub,e=this.Fb,n=this.manifest,r=this.Au=this.manifest=new PlainElementSymbol(t),h=t.attributes;let o=0;for(;h.length>o;){const t=h[o],i=this.xb.parse(t.name,t.value);if(1==Ln[i.target])throw Error(`Invalid surrogate attribute: ${i.target}`);const s=this.xg.qg(i);if(null===s)this.Nb(i);else{if(s.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.qb(i,s)}++o}return this.Hb(t),this.Au=i,this.Ub=s,this.Fb=e,this.manifest=n,r}zb(t,i){switch(i.nodeName){case"LET":return void this.Wb(t,i);case"SLOT":return void(this.Au.hasSlots=1)}const s=this.Ub,e=this.Fb,n=this.manifest;let r;this.ep=i.getAttribute("part");let name=i.getAttribute("as-element");null===name&&(name=i.nodeName.toLowerCase());const h=this.xg.Ng(name);null===h?this.manifest=new PlainElementSymbol(i):(this.Ub=this.Fb,r=this.Fb=this.manifest=new CustomElementSymbol(this.dom,i,h)),this.Hb(i),this.Kb(i,t),void 0!==r&&r.Tn?i.parentNode.replaceChild(r.marker,i):this.manifest.lp&&i.classList.add("au"),this.Ub=s,this.Fb=e,this.manifest=n}Wb(t,i){const s=new LetElementSymbol(this.dom,i);t.childNodes.push(s);const e=i.attributes;let n=0;for(;e.length>n;){const t=e[n];if("to-view-model"===t.name){i.removeAttribute("to-view-model"),s.toViewModel=1;continue}const r=this.xb.parse(t.name,t.value),h=this.xg.Hg(r),o=this.Vb.parse(r.vs,null===h?2048:h.Ba),to=PLATFORM._i(r.target),l=new BindableInfo(to,BindingMode.Ki);s.ip.push(new BindingSymbol(h,l,o,r.vs,to)),++n}i.parentNode.replaceChild(s.marker,i)}Kb(t,i){const{Ub:s,Fb:e,manifest:n}=this;let r=n;const h=this.Qb(t);let o,l;const c=t.attributes;let u=0;for(;c.length>u;){const t=c[u];if(++u,1==En[t.name])continue;const i=this.xb.parse(t.name,t.value),s=this.xg.qg(i);null===s?this.Nb(i):s.isTemplateController?(l=n.templateController=this.Gb(i,s),r===n?(l.template=n,r=l):(l.templateController=o,l.template=o.template,o.template=l),o=l):this.qb(i,s)}(function(dom,t,i){const s=i.np;let e,n=t;for(;n!==i;)n.template===i?(s.parentNode.replaceChild(n.marker,s),"TEMPLATE"===s.nodeName?(n.np=s,s.remove()):(e=n.np=dom.kb()).content.appendChild(s)):(e=n.np=dom.kb()).content.appendChild(n.marker),s.removeAttribute(n.Xi.ws),n=n.template})(this.dom,r,n),null===h?i.childNodes.push(r):(h.parent=i,h.template=r,(n===e?s:e).parts.push(h),(function(dom,t,i){let s,e;"TEMPLATE"===(s=512&i.flags?i.marker:i.np).nodeName?t.np=s:(e=t.np=dom.kb()).content.appendChild(s)})(this.dom,h,r))}Hb(t){let i,s;for(i="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==i;)switch(i.nodeType){case 1:s=i.nextSibling,this.zb(this.manifest,i),i=s;break;case 3:i=this.Zb(i).nextSibling;break;case 4:case 7:case 8:case 10:i=i.nextSibling;break;case 9:case 11:i=i.firstChild}}Zb(t){const i=this.Vb.parse(t.wholeText,2048);if(null!==i){const s=new TextSymbol(this.dom,t,i);this.manifest.childNodes.push(s),(function(t){const i=t.np,s=i.parentNode;for(;null!==i.nextSibling&&3===i.nextSibling.nodeType;)s.removeChild(i.nextSibling);i.textContent="",s.insertBefore(t.marker,i)})(s)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}Gb(t,i){let s;const e=this.xg.Hg(t);if(null===e&&i.qi)s=new TemplateControllerSymbol(this.dom,t,i,this.ep),this.ep=null,this._b(s,i,t.vs);else{s=new TemplateControllerSymbol(this.dom,t,i,this.ep);const n=this.Vb.parse(t.vs,null===e?2048:e.Ba);s.ip.push(new BindingSymbol(e,i.bindable,n,t.vs,t.target)),this.ep=null}return s}qb(t,i){const s=this.xg.Hg(t);let e;if(null===s&&i.qi)e=new CustomAttributeSymbol(t,i),this._b(e,i,t.vs);else{e=new CustomAttributeSymbol(t,i);const n=this.Vb.parse(t.vs,null===s?2048:s.Ba);e.ip.push(new BindingSymbol(s,i.bindable,n,t.vs,t.target))}this.manifest.attributes.push(e),this.manifest.lp=1}_b(t,i,value){const s=(function(t){const i=[],s=new jn(t),e=s.length;let name,value;for(;e>s.index;){if(0===(name=_t(s)).length)return i;value=Xt(s),i.push({name,value})}return i})(value);let e;for(let n=0,r=s.length;r>n;++n){const r=this.xb.parse((e=s[n]).name,e.value),h=this.xg.Hg(r),o=this.Vb.parse(r.vs,null===h?2048:h.Ba);let l=i.bindables[r.target];void 0===l&&(l=i.bindables[r.target]=new BindableInfo(r.target,BindingMode.Ki)),t.ip.push(new BindingSymbol(h,l,o,r.vs,r.target))}}Nb(t){if(0===t.vs.length)return;const i=this.xg.Hg(t),s=this.manifest,e=this.Vb.parse(t.vs,null===i?2048:i.Ba);if(16&s.flags){const n=s.bindables[t.target];void 0!==n?(s.ip.push(new BindingSymbol(i,n,e,t.vs,t.target)),s.lp=1):null===e&&"ref"!==t.target||(s.attributes.push(new PlainAttributeSymbol(t,i,e)),s.lp=1)}else null!==e||"ref"===t.target?(s.attributes.push(new PlainAttributeSymbol(t,i,e)),s.lp=1):s===this.Au&&s.attributes.push(new PlainAttributeSymbol(t,i,e))}Qb(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}class jn{constructor(t){this.input=t,this.index=0,this.length=t.length}}const Dn=String.fromCharCode;(function(t){t[t.ed=34]="DoubleQuote",t[t.rd=39]="SingleQuote",t[t.qf=47]="Slash",t[t.hd=59]="Semicolon",t[t.vf=58]="Colon"})(gi||(gi={}));const ITemplateElementFactory=DI.he("ITemplateElementFactory").le();Profiler.ke("TemplateElementFactory");class $n{constructor(dom){this.dom=dom,this.template=dom.kb()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}kb(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const i=template.content.firstElementChild;return null===i||"TEMPLATE"!==i.nodeName||null!==i.nextElementSibling?(this.template=this.dom.kb(),template):(template.content.removeChild(i),i)}if("TEMPLATE"!==t.nodeName){const template=this.dom.kb();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}$n.inject=[IDOM];const Mn=Object.freeze({required:0,compiler:"default"});Profiler.ke("TemplateCompiler");class xn{constructor(t,i,s){this.Ru=t,this.xb=i,this.Vb=s,this.Xb=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,i){const s=new TemplateBinder(dom,new ResourceModel(i),this.xb,this.Vb),template=t.template=this.Ru.kb(t.template),e=s.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.Qs||(t.instructions=[]),1==e.hasSlots&&(t.hasSlots=1),this.Xb=t.instructions;const n=e.attributes,r=n.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.Qs||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.Jb(n[t])}return this.Yb(e),this.Xb=null,t}Yb(t){if(8192&t.flags){const{childNodes}=t;let i;const s=childNodes.length;for(let t=0;s>t;++t)if(128&(i=childNodes[t]).flags)this.Xb.push([new TextBindingInstruction(i.ac)]);else if(32&i.flags){const t=i.ip,instructions=[];let s;const e=t.length;for(let i=0;e>i;++i)instructions[i]=new LetBindingInstruction((s=t[i]).Fr,s.target);this.Xb.push([new LetElementInstruction(instructions,i.toViewModel)])}else this.tm(i)}}im(t){const i=this.sm(t,1);i[0]=new HydrateElementInstruction(t.res,this.em(t),this.nm(t)),this.Xb.push(i)}rm(t){const i=this.sm(t,0);i.length>0&&this.Xb.push(i),this.Yb(t)}tm(t){switch(511&t.flags){case 16:this.im(t);break;case 64:this.rm(t);break;case 1:this.hm(t)}}hm(t){const i=this.em(t),s=this.Xb,e=this.Xb=[];this.tm(t.template),this.Xb=s,this.Xb.push([new HydrateTemplateController({name:null===t.ep?t.res:t.ep,template:t.np,instructions:e,build:Mn},t.res,i,"else"===t.res)])}em(t){let i;if(4096&t.flags){const{ip:s}=t,e=s.length;i=Array(e);let n=0;for(;e>n;++n)i[n]=this.om(s[n])}else i=PLATFORM.Qs;return i}om(t){return null===t.command?null===t.Fr?new SetPropertyInstruction(t.vs,t.bindable.Zi):new InterpolationInstruction(t.Fr,t.bindable.Zi):t.command.compile(t)}sm(t,i){let s;if(2048&t.flags){const{attributes:e}=t,n=e.length;s=Array(i+n);for(let t=0;n>t;++t)s[t+i]=this.Jb(e[t])}else s=i>0?Array(i):PLATFORM.Qs;return s}lm(t){const i=this.em(t);return new HydrateAttributeInstruction(t.res,i)}cm(t){return null===t.command?null===t.Fr?new SetAttributeInstruction(t.Xi.vs,t.Xi.target):new InterpolationInstruction(t.Fr,t.Xi.target):t.command.compile(t)}Jb(t){return"ref"===t.Xi.target?new RefBindingInstruction(t.Xi.vs):4&t.flags?this.lm(t):this.cm(t)}nm(t){let parts;if(16384&t.flags){parts={};const i=t.parts,s=i.length;let e,n,r;for(let t=0;s>t;++t)r=i[t],e=this.Xb,n=this.Xb=[],this.tm(r.template),parts[r.name]={name:r.name,template:r.np,instructions:n,build:Mn},this.Xb=e}else parts=PLATFORM.$t;return parts}}xn.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const Vn=[xn,$n],Fn=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand];pi=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,ITemplateCompilerRegistration:xn,ITemplateElementFactoryRegistration:$n,DefaultComponents:Vn,TriggerBindingCommandRegistration:TriggerBindingCommand,DelegateBindingCommandRegistration:DelegateBindingCommand,CaptureBindingCommandRegistration:CaptureBindingCommand,DefaultBindingLanguage:Fn,BasicConfiguration:{register:t=>Pn.register(t).register(...Ke,...DefaultBindingSyntax,...DefaultBindingLanguage,...Vn,...Fn),ee(){return this.register(DI.ee())}},stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory});class Un{constructor(t){this.Pu=t}static register(t){return Registration.singleton(IDOMInitializer,this).register(t)}initialize(t){if(this.Pu.has(IDOM,0))return this.Pu.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(window,null!==t.host.ownerDocument?t.host.ownerDocument:document,Node,Element,HTMLElement):new HTMLDOM(window,document,Node,Element,HTMLElement),Registration.v(IDOM,dom).register(this.Pu),dom}}Un.inject=[IContainer];const Nn=[Un],qn={register:t=>Pn.register(t).register(...Nn),ee(){return this.register(DI.ee())}};return bi=Object.freeze({um:Un,DefaultComponents:Nn,BasicConfiguration:qn}),Profiler.ke("BasicConfiguration"),mi=Object.freeze({BasicConfiguration:{register:t=>(qn.register(t).register(...DefaultBindingLanguage,...DefaultBindingSyntax,...Ke,...Fn,...Vn),t),ee(){return this.register(DI.ee())}}}),t.kernel=Yt,t.runtime=ri,t.runtimeHtml=di,t.runtimeHtmlBrowser=bi,t.jit=fi,t.jitHtml=pi,t.jitHtmlBrowser=mi,t})({});
