var au=(function(t){"use strict";function s(){}function i(t){return function(s){const i=function(t,s,e){DI.inject(i)(t,s,e)};return i.resolve=function(i,e){return t(s,i,e)},i}}function e(t){return DI.transient(t)}function n(t){return DI.singleton(t)}function r(t){return"function"==typeof t.register}function h(t){if(null==t||t===Object)throw Reporter.error(5)}function o(t,s,i){if(t instanceof Es&&4===t.strategy){const e=t.state;let n=e.length;const r=Array(n);for(;n--;)r[n]=e[n].resolve(s,i);return r}return[t.resolve(s,i)]}function l(t,s,i,e){let n,r=i.length,h=Array(r);for(;r--;){if(null==(n=i[r]))throw Reporter.error(7,`Index ${r}.`);h[r]=t.get(n)}return void 0!==e&&(h=h.concat(e)),Reflect.construct(s,h)}function attributePattern(...t){return function(s){const i=s.prototype;return(function(t,s){for(const def of s)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def):Reporter.write(401,def)})(i,t),i.t=t,s.register=function(t){return Registration.singleton(IAttributePattern,s).register(t,IAttributePattern)},s}}function c(t,s,i,e){var n,r,h=arguments.length,o=3>h?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,s,i,e);else for(r=t.length-1;r>=0;r--)(n=t[r])&&(o=(3>h?n(o):h>3?n(s,i,o):n(s,i))||o);return h>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(t){return function(s){const i=s.prototype;switch(i.s=0,i.i=null,i.h=null,i.o=null,i.l=null,i.u=u,i.g=a,i.p=b,i.m=p,t){case MutationKind.v:i.C=f;break;case MutationKind.T:i.C=d;break;case MutationKind.A:i.C=g}}}function u(t){if(this.p(t))return 0;const s=this.s;return 1&s?2&s?4&s?8&s?(this.l.push(t),1):(this.l=[t],this.s|=8,1):(this.o=t,this.s|=4,1):(this.h=t,this.s|=2,1):(this.i=t,this.s|=1,1)}function a(t){const s=this.s;if(1&s&&this.i===t)return this.i=null,this.s&=-2,1;if(2&s&&this.h===t)return this.h=null,this.s&=-3,1;if(4&s&&this.o===t)return this.o=null,this.s&=-5,1;if(8&s){const s=this.l;for(let i=0,e=s.length;e>i;++i)if(s[i]===t)return s.splice(i,1),1===e&&(this.s&=-9),1}return 0}function f(t,s,i){const e=this.i,n=this.h,r=this.o;let h=this.l;null!==h&&(h=h.slice()),null!==e&&e.B(t,s,i),null!==n&&n.B(t,s,i),null!==r&&r.B(t,s,i);const o=h&&h.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=h[e];null!==n&&n.B(t,s,i)}}function d(t,s,i){const e=this.i,n=this.h,r=this.o;let h=this.l;null!==h&&(h=h.slice()),null!==e&&e.B(t,s,i),null!==n&&n.B(t,s,i),null!==r&&r.B(t,s,i);const o=h&&h.length;if(void 0!==o&&o>0)for(let e=0;o>e;++e){const n=h[e];null!==n&&n.B(t,s,i)}this.R.O(this).catch(t=>{throw t})}function g(t,s,i,e){const n=this.i,r=this.h,h=this.o;let o=this.l;null!==o&&(o=o.slice()),null!==n&&n.B(t,s,i,e),null!==r&&r.B(t,s,i,e),null!==h&&h.B(t,s,i,e);const l=o&&o.length;if(void 0!==l&&l>0)for(let n=0;l>n;++n){const r=o[n];null!==r&&r.B(t,s,i,e)}}function p(){return 0!==this.s}function b(t){const s=this.s;if(1&s&&this.i===t)return 1;if(2&s&&this.h===t)return 1;if(4&s&&this.o===t)return 1;if(8&s){const s=this.l;for(let i=0,e=s.length;e>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.I=0,s.k=null,s.S=null,s.P=null,s.L=null,s.j=m,s.D=w,s.M=C,s.$=y,s.V=v}}function m(t){if(this.M(t))return 0;const s=this.I;return 1&s?2&s?4&s?8&s?(this.L.push(t),1):(this.L=[t],this.I|=8,1):(this.P=t,this.I|=4,1):(this.S=t,this.I|=2,1):(this.k=t,this.I|=1,1)}function w(t){const s=this.I;if(1&s&&this.k===t)return this.k=null,this.I&=-2,1;if(2&s&&this.S===t)return this.S=null,this.I&=-3,1;if(4&s&&this.P===t)return this.P=null,this.I&=-5,1;if(8&s){const s=this.L;for(let i=0,e=s.length;e>i;++i)if(s[i]===t)return s.splice(i,1),1===e&&(this.I&=-9),1}return 0}function v(t,s){const i=this.k,e=this.S,n=this.P;let r=this.L;null!==r&&(r=r.slice()),null!==i&&i.F(t,s),null!==e&&e.F(t,s),null!==n&&n.F(t,s);const h=r&&r.length;if(void 0!==h&&h>0)for(let i=0;h>i;++i){const e=r[i];null!==e&&e.F(t,s)}}function y(){return 0!==this.I}function C(t){const s=this.I;if(1&s&&this.k===t)return 1;if(2&s&&this.S===t)return 1;if(4&s&&this.P===t)return 1;if(8&s){const s=this.L;for(let i=0,e=s.length;e>i;++i)if(s[i]===t)return 1}return 0}function T(t){if(0==this.U){this.U=1;const{N:t,q:s}=this;this.H=t[s],Gs.get=(()=>this.W()),Gs.set=(value=>{this.K(value,LifecycleFlags.G)}),Qs(t,s,Gs)||Reporter.write(1,s,t)}this.u(t)}function A(){delete this.N[this.q],this.N=null,this.q=null,this.H=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.v)(t);const s=t.prototype;s.U=0,s.N=null,s.q=null,s.H=Symbol(),s.subscribe=s.subscribe||T,s.unsubscribe=s.unsubscribe||s.g,s.Z=s.Z||A}}function B(t){const s=BindingBehaviorResource._(this.description.name);t.register(Registration.singleton(s,this))}function O(t){const s=this.kind._(this.description.name);t.register(Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t.X)}function hasUnbind(t){return 4096==(4096&t.X)}function isLiteral(t){return 16384==(16384&t.X)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t.X){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.J);case 17925:return 1}return 0}function R(t,s,i,e){const n=e.length,r=Array(n);for(let h=0;n>h;++h)r[h]=e[h].evaluate(t,s,i);return r}function I(t,s,name){const i=null==s?null:s[name];if("function"==typeof i)return i;if(!(t&LifecycleFlags.Y)&&null==i)return null;throw Reporter.error(207,s,name,i)}function k(t){if(t===ri){const s=ei.length=ni.length=(ri+=5)+1;for(let i=t+1;s>i;++i)ei[i]=`_observer${i}`,ni[i]=`_observerVersion${i}`}}function S(t){const s=void 0===this.tt?0:this.tt;let i=s;for(;i--&&this[ei[i]]!==t;);if(-1===i){for(i=0;this[ei[i]];)i++;this[ei[i]]=t,t.subscribe(this),i===s&&(this.tt=i+1)}void 0===this.version&&(this.version=0),this[ni[i]]=this.version,k(i)}function P(t,s,i){const e=this.it.st(t,s,i);this.et(e)}function L(t){const s=this.tt;let i,e;if(1==t)for(let t=0;s>t;++t)null!=(e=this[i=ei[t]])&&(this[i]=null,e.unsubscribe(this));else{const t=this.version;for(let n=0;s>n;++n)this[ni[n]]!==t&&null!=(e=this[i=ei[n]])&&(this[i]=null,e.unsubscribe(this))}}function E(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.nt=P),s.hasOwnProperty("unobserve")||(s.unobserve=L),s.hasOwnProperty("addObserver")||(s.et=S),t}function connectable(t){return void 0===t?E:E(t)}function j(t,s){if(this.H!==(t=null==t?this.defaultValue:t)){if(this.H=t,!(s&(LifecycleFlags.rt|LifecycleFlags.ht))||this.ot&&s&LifecycleFlags.lt)return this.ct=s,this.R.O(this);this.ut(t,s)}return Promise.resolve()}function D(t){if(this.ot&&t&LifecycleFlags.lt)return void this.R.O(this).catch(t=>{throw t});const s=this.H;this.oldValue!==s&&(this.ut(s,this.ct|t|LifecycleFlags.G),this.oldValue=this.H)}function M(){this.H=null,this.oldValue=null,this.defaultValue=null,this.N=null,this.q=""}function targetObserver(t=null){return function(s){subscriberCollection(MutationKind.v)(s);const i=s.prototype;i.at=null,i.H=t,i.oldValue=t,i.defaultValue=t,i.N=null,i.q="",i.K=i.K||j,i.flush=i.flush||D,i.Z=i.Z||M}}function $(t){this.V(this.ft,t|this.dt),this.gt&&this.gt.pt(LifecycleFlags.rt|LifecycleFlags.G|this.dt),this.bt()}function x(){this.T.wt=void 0,this.T=null,this.ft=null}function V(){const t=this.T.length,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.vt=[]}function F(){const t=this.T.size,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.vt=[]}function U(){return void 0===this.gt?this.gt=new CollectionLengthObserver(this,this.yt):this.gt}function collectionObserver(t){return function(s){subscriberCollection(MutationKind.T)(s),batchedSubscriberCollection()(s);const i=s.prototype;i.at=null,i.T=null,i.ft=null,i.Ct=0,i.yt=8&t?"length":"size",i.Tt=t,i.bt=8&t?V:F,i.flush=$,i.Z=x,i.At=U,i.subscribe=i.subscribe||i.u,i.unsubscribe=i.unsubscribe||i.g,i.Bt=i.Bt||i.j,i.Ot=i.Ot||i.D}}function N(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function q(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function H(t,s,from,to,i){let e,n,r,h,o,l,c;for(l=from+1;to>l;l++){for(e=t[l],n=s[l],c=l-1;c>=from&&(h=s[c],(o=i(r=t[c],e))>0);c--)t[c+1]=r,s[c+1]=h;t[c+1]=e,s[c+1]=n}}function z(t,s,from,to,i){let e,n,r,h,o,l,c,u,a,f,d,g,p,b,m,w,v,y,C,T=0,A=0;for(;;){if(10>=to-from)return void H(t,s,from,to,i);h=s[from],o=s[to-1],r=t[T=from+(to-from>>1)],l=s[T],(c=i(e=t[from],n=t[to-1]))>0&&(f=e,d=h,e=n,h=o,n=f,o=d),0>(u=i(e,r))?(a=i(n,r))>0&&(f=n,d=o,n=r,o=l,r=f,l=d):(f=e,d=h,e=r,h=l,r=n,l=o,n=f,o=d),t[from]=e,s[from]=h,t[to-1]=r,s[to-1]=l,g=n,p=o,m=to-1,t[T]=t[b=from+1],s[T]=s[b],t[b]=g,s[b]=p;t:for(A=b+1;m>A;A++)if(v=s[A],0>(y=i(w=t[A],g)))t[A]=t[b],s[A]=s[b],t[b]=w,s[b]=v,b++;else if(y>0){do{if(--m==A)break t;y=i(C=t[m],g)}while(y>0);t[A]=t[m],s[A]=s[m],t[m]=w,s[m]=v,0>y&&(w=t[A],v=s[A],t[A]=t[b],s[A]=s[b],t[b]=w,s[b]=v,b++)}b-from>to-m?(z(t,s,m,to,i),to=b):(z(t,s,from,b,i),from=m)}}function enableArrayObservation(){for(const t of Ci)1!=fi[t].U&&def(fi,t,Object.assign({},Ai,{value:Ti[t]}))}function W(t,s,i){return i.wt||new ArrayObserver(t,s,i)}function enableMapObservation(){for(const t of Si)1!=Bi[t].U&&Ei(Bi,t,Object.assign({},Li,{value:Pi[t]}))}function K(t,s,i){return i.wt||new MapObserver(t,s,i)}function enableSetObservation(){for(const t of Vi)1!=ji[t].U&&Ni(ji,t,Object.assign({},Ui,{value:Fi[t]}))}function Q(t,s,i){return i.wt||new SetObserver(t,s,i)}function getCollectionObserver(t,s,i){switch(Ki.call(i)){case"[object Array]":return W(t,s,i);case"[object Map]":return K(t,s,i);case"[object Set]":return Q(t,s,i)}return null}function G(t,s,i){const e=this.Rt;PLATFORM.global.clearTimeout(e.It),e.It=PLATFORM.global.setTimeout(()=>{this.kt(t,s,i)},e.St)}function Z(t,s,i){const e=this.Rt;if(PLATFORM.global.clearTimeout(e.It),!(i&e.Pt))return e.oldValue=Yi,void this.kt(t,s,i);e.oldValue===Yi&&(e.oldValue=s);const n=PLATFORM.global.setTimeout(()=>{const s=e.oldValue;e.oldValue=Yi,this.kt(t,s,i)},e.St);e.It=n}function _(t){const s=this.Lt,i=+new Date-s.Et;if(i>=s.St)return PLATFORM.global.clearTimeout(s.It),s.It=-1,s.Et=+new Date,void this.jt(t);if(s.newValue=t,-1===s.It){const t=PLATFORM.global.setTimeout(()=>{s.It=-1,s.Et=+new Date,this.jt(s.newValue)},s.St-i);s.It=t}}function X(name){return`${se}:${name}`}function J(t){return void 0===t.$customElement?null:t.$customElement}function Y(name){return`${ie}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots,i){const def=new re,e=arguments.length;switch(e){case 13:null!==i&&(def.Dt=i);case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?ee:0==build?ne:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(he.forEach(t=>{s[t]&&(def[t]=s[t])}),oe.forEach(t=>{s[t]&&(def[t]=PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===PLATFORM.Mt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==e||null===t||"string"!=typeof s&&"build"in s||(def.build=ee),def}function tt(t){if(8&this.$state)return;const s=this.$lifecycle;s.$t(),this.$state|=4,t|=LifecycleFlags.xt;const i=this.$hooks;16&i&&this.Vt(t),this.$state|=8,this.$state&=-5,32&i&&s.Ft(this),s.Ut(t)}function st(t){if(8&this.$state)return;const s=this.$lifecycle;s.$t(),this.$state|=4,t|=LifecycleFlags.xt;const i=this.$hooks;16&i&&this.Vt(t);let e=this.Nt;for(;null!==e;)e.qt(t),e=e.Ht;s.zt(this),this.$state|=8,this.$state&=-5,32&i&&s.Ft(this),s.Ut(t)}function it(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.xt;let s=this.Nt;for(;null!==s;)s.qt(t),s=s.Ht;this.$lifecycle.zt(this),this.$state|=8,this.$state&=-5}function et(t){if(8&this.$state){const s=this.$lifecycle;s.Wt(),this.$state|=32,t|=LifecycleFlags.Kt;const i=this.$hooks;64&i&&this.Qt(t),this.$state&=-41,128&i&&s.Gt(this),s.Zt(t)}}function nt(t){if(8&this.$state){const s=this.$lifecycle;s.Wt(),this.$state|=32,(t|=LifecycleFlags.Kt)&LifecycleFlags._t^LifecycleFlags._t|t&LifecycleFlags.Xt&&(s.Jt(this),t|=LifecycleFlags._t);const i=this.$hooks;64&i&&this.Qt(t);let e=this.Yt;for(;null!==e;)e.ts(t),e=e.ss;this.$state&=-41,128&i&&s.Gt(this),s.Zt(t)}}function rt(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.Kt)&LifecycleFlags._t^LifecycleFlags._t|t&LifecycleFlags.Xt&&(this.$lifecycle.Jt(this),t|=LifecycleFlags._t);let s=this.Yt;for(;null!==s;)s.ts(t),s=s.ss;this.$state&=-41}}function ht(t){2048&this.$hooks&&this.es(t|=LifecycleFlags.ns)}function ot(t){t|=LifecycleFlags.ns,2048&this.$hooks&&this.es(t);let s=this.Yt;for(;null!==s;)s.rs(t),s=s.ss}function lt(t){t|=LifecycleFlags.ns;let s=this.Yt;for(;null!==s;)s.rs(t),s=s.ss}function ct(){16&this.$state||(this.$state|=16,this.os.hs(this.$nodes))}function ut(){16&this.$state&&(this.$state&=-17,this.os.ls(this.$nodes))}function at(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ft(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.cs&&(this.cs=0,this.cache.us(this))?(this.$state|=128,1):0):0}function dt(t,s){if(t|=LifecycleFlags.ht,2&this.$state){if(this.$scope===s)return;this.as(t)}const i=this.$lifecycle;i.fs(),this.$state|=1;const e=this.$hooks;8&e&&i.ds(this),this.$scope=s,4&e&&this.gs(t),this.$state|=2,this.$state&=-2,i.ps(t)}function gt(t,s){if(2&this.$state)return;const i=this.$scope;i.bs=s;const e=this.$lifecycle;e.fs(),this.$state|=1;const n=this.$hooks;t|=LifecycleFlags.ht,8&n&&e.ds(this);let r=this.ms;for(;null!==r;)r.ws(t,i),r=r.vs;for(4&n&&this.gs(t),r=this.ys;null!==r;)r.ws(t,i),r=r.vs;this.$state|=2,this.$state&=-2,e.ps(t)}function pt(t,s){if(t|=LifecycleFlags.ht,2&this.$state){if(this.$scope===s)return;this.as(t)}this.$state|=1,this.$scope=s;let i=this.ms;for(;null!==i;)i.ws(t,s),i=i.vs;for(i=this.ys;null!==i;)i.ws(t,s),i=i.vs;this.$state|=2,this.$state&=-2}function bt(t){if(2&this.$state){const s=this.$lifecycle;s.Cs(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.Ts,512&i&&s.As(this),256&i&&this.Bs(t),this.$state&=-67,s.Os(t)}}function mt(t){if(2&this.$state){const s=this.$lifecycle;s.Cs(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.Ts,512&i&&s.As(this);let e=this.Rs;for(;null!==e;)e.as(t),e=e.Is;for(256&i&&this.Bs(t),e=this.ks;null!==e;)e.as(t),e=e.Is;this.$scope.bs=null,this.$state&=-67,s.Os(t)}}function wt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ts;let s=this.Rs;for(;null!==s;)s.as(t),s=s.Is;for(s=this.ks;null!==s;)s.as(t),s=s.Is;this.$state&=-67,this.$scope=null}}function vt(t,s){s.Ss(t,this.constructor,this),2&this.$hooks&&this.Ps(t)}function yt(t,dom,s,i,host,e,n=PLATFORM.Mt){const r=this.constructor,h=r.description;let o;if(o=t&LifecycleFlags.Dt?ProxyObserver.Ls(this).A:this,this.$scope=Scope.create(t,o,null),this.Es=host,this.os=s.js(dom,this,host,h),i.Ss(t,r,this),1024&this.$hooks){const s=this.Ds(t,host,n.parts,e);s&&"getElementTemplate"in s&&s.Ms(i,r,e).Ds(this,host,n.parts)}else i.Ms(dom,h,e,r).Ds(this,host,n.parts);2&this.$hooks&&this.Ps(t)}function Ct(t){const s=this.description,i=this.kind._(s.name),aliases=s.aliases;t.register(Registration.transient(i,this));for(let s=0,e=aliases.length;e>s;++s){const e=this.kind._(aliases[s]);t.register(Registration.$s(i,e))}}function Tt(t){return t.xs=1,t}function bindable(t,s){let i;const e=function(t,s){const e=t.constructor;let bindables=e.bindables;void 0===bindables&&(bindables=e.bindables={}),i.Vs||(i.Vs=PLATFORM.Fs(s)),i.Us||(i.Us=`${s}Changed`),void 0===i.mode&&(i.mode=BindingMode.Ns),void 0===i.Dt&&(i.Dt=0),arguments.length>1&&(i.qs=s),bindables[i.qs]=i};return arguments.length>1?(i={},void e(t,s)):"string"==typeof t?(i={},e):(i=t||{},e)}function At(t){const s=this.kind._(this.description.name);t.register(Registration.transient(s,this))}function Bt(t){return t.containerless=1,t}function Ot(t){if(2&this.$state)return;t|=LifecycleFlags.ht;const s=this.$scope;let i=this.ys;for(;null!==i;)i.ws(t,s),i=i.vs;this.$state|=2}function Rt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.Ts;let s=this.ks;for(;null!==s;)s.as(t),s=s.Is;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.Hs(),e=new ge,n=new ge,r=new ge,h=new pe,o=new ge,l=i.get(IRenderer);return dom.zs(i,n),i.Ws(IViewFactory,h),i.Ws(IRenderable,e),i.Ws(ITargetedInstruction,r),i.Ws(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.Ds=function(t,s,targets,i,host,parts){l.Ds(t,dom,this,s,targets,i,host,parts)},i.Ks=function(t,s,l,c,parts,u){return e.Qs(t),n.Qs(s),r.Qs(l),c&&h.Qs(c,parts),u&&o.Qs(u),i},i.Z=function(){h.Z(),e.Z(),r.Z(),n.Z(),o.Z()},i}function It(t){const s=[];for(let i=0,e=t.length;e>i;++i){const component=J(t[i]);null!==component&&s.push(component)}return s}function kt(t,s,name){Reflect.defineProperty(s,name,{Gs:1,get(){return this.Zs[name].W()},set(value){this.Zs[name].K(value,t&LifecycleFlags._s|LifecycleFlags.G)}})}function instructionRenderer(t){return function(s){const i=function(...i){const e=new s(...i);return e.Xs=t,e};i.register=function(t){return Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const e=Object.getOwnPropertyDescriptors(s);return Object.keys(e).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,e[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addEarlyBindable(t,bindable){bindable.Is=t.Rs,bindable.vs=null,null===t.Rs?t.ms=bindable:t.Rs.vs=bindable,t.Rs=bindable}function addBindable(t,bindable){bindable.Is=t.ks,bindable.vs=null,null===t.ks?t.ys=bindable:t.ks.vs=bindable,t.ks=bindable}function addAttachable(t,s){s.ss=t.Yt,s.Ht=null,null===t.Yt?t.Nt=s:t.Yt.Ht=s,t.Yt=s}function St(t){const s=BindingCommandResource._(this.description.name);t.register(Registration.singleton(s,this))}function getTarget(t,s){return 256&t.flags?t.bindable.Js:s?PLATFORM.Ys(t.ti.target):t.ti.target}function getMode(t){return 256&t.flags?t.bindable.mode:Le[t.ti.command]}function Pt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,s){return $state.input=t,$state.length=t.length,$state.index=0,$state.si=t.charCodeAt(0),Lt($state,0,61,void 0===s?53:s)}function Lt(t,s,i,e){if(0===t.index){if(2048&e)return(function(t){const parts=[],s=[],i=t.length;let e="";for(;i>t.index;){switch(t.si){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(e),e="",t.index+=2,t.si=t.input.charCodeAt(t.index),jt(t);const i=Lt(t,0,61,2048);s.push(i);continue}e+="$";break;case 92:e+=String.fromCharCode(Pt(Dt(t)));break;default:e+=String.fromCharCode(t.si)}Dt(t)}return s.length?(parts.push(e),new Interpolation(parts,s)):null})(t);if(jt(t),1048576&t.ii)throw Reporter.error(100,{state:t})}t.ei=448>i;let n=void 0;if(32768&t.ii){const i=Ve[63&t.ii];jt(t),n=new Unary(i,Lt(t,s,449,e)),t.ei=0}else{t:switch(t.ii){case 3077:t.ei=0;do{if(jt(t),s++,!Vt(t,16392)){if(524288&t.ii){const t=511&s;n=0===t?$e:1===t?xe:new AccessThis(t),s=512;break t}throw Reporter.error(103,{state:t})}if(16392===t.ii)throw Reporter.error(102,{state:t});if(1572864===t.ii)throw Reporter.error(105,{state:t})}while(3077===t.ii);case 1024:512&e?n=new BindingIdentifier(t.ni):(n=new AccessScope(t.ni,511&s),s=1024),t.ei=1,jt(t);break;case 3076:t.ei=0,jt(t),n=$e,s=512;break;case 671750:jt(t),n=Lt(t,0,62,e),Ft(t,1835018),s=0;break;case 671756:n=(function(t,s,i){jt(t);const e=[];for(;1835021!==t.ii;)if(Vt(t,1572875)){if(e.push(Me),1835021===t.ii)break}else{if(e.push(Lt(t,s,62,-513&i)),!Vt(t,1572875))break;if(1835021===t.ii)break}return Ft(t,1835021),512&i?new ArrayBindingPattern(e):(t.ei=0,new ArrayLiteral(e))})(t,s,e),s=0;break;case 131079:n=(function(t,s){const i=[],e=[];for(jt(t);1835017!==t.ii;){if(i.push(t.ni),12288&t.ii)jt(t),Ft(t,1572878),e.push(Lt(t,0,62,-513&s));else{if(!(3072&t.ii))throw Reporter.error(107,{state:t});{const{si:i,ii:n,index:r}=t;jt(t),Vt(t,1572878)?e.push(Lt(t,0,62,-513&s)):(t.si=i,t.ii=n,t.index=r,e.push(Lt(t,0,450,-513&s)))}}1835017!==t.ii&&Ft(t,1572875)}return Ft(t,1835017),512&s?new ObjectBindingPattern(i,e):(t.ei=0,new ObjectLiteral(i,e))})(t,e),s=0;break;case 540713:n=new Template([t.ni]),t.ei=0,jt(t),s=0;break;case 540714:n=Et(t,s,e,n,0),s=0;break;case 4096:case 8192:n=new PrimitiveLiteral(t.ni),t.ei=0,jt(t),s=0;break;case 2050:case 2051:case 2049:case 2048:n=Ve[63&t.ii],t.ei=0,jt(t),s=0;break;default:throw Reporter.error(t.length>t.index?101:104,{state:t})}if(512&e)return(function(t,s){if(0==(65536&s.X))throw Reporter.error(106,{state:t});if(1051179!==t.ii)throw Reporter.error(106,{state:t});jt(t);const i=s,e=Lt(t,0,61,0);return new ForOfStatement(i,e)})(t,n);if(i>449)return n;let name=t.ni;for(;(16384&t.ii)>0;)switch(t.ii){case 16392:if(t.ei=1,jt(t),0==(3072&t.ii))throw Reporter.error(105,{state:t});if(name=t.ni,jt(t),s=(1536&s)<<1|2048&s|(4096&s)>>1,671750===t.ii){0===s&&(s=2048);continue}n=1024&s?new AccessScope(name,n.ri):new AccessMember(n,name);continue;case 671756:t.ei=1,jt(t),s=4096,n=new AccessKeyed(n,Lt(t,0,62,e)),Ft(t,1835021);break;case 671750:t.ei=0,jt(t);const i=[];for(;1835018!==t.ii&&(i.push(Lt(t,0,62,e)),Vt(t,1572875)););Ft(t,1835018),n=1024&s?new CallScope(name,i,n.ri):2048&s?new CallMember(n,name,i):new CallFunction(n,i),s=0;break;case 540713:t.ei=0;const r=[t.ni];n=new TaggedTemplate(r,r,n),jt(t);break;case 540714:n=Et(t,s,e,n,1)}}if(i>448)return n;for(;(65536&t.ii)>0;){const r=t.ii;if(i>=(448&r))break;jt(t),n=new Binary(Ve[63&r],n,Lt(t,s,448&r,e)),t.ei=0}if(i>63)return n;if(Vt(t,1572879)){const i=Lt(t,s,62,e);Ft(t,1572878),n=new Conditional(n,i,Lt(t,s,62,e)),t.ei=0}if(i>62)return n;if(Vt(t,1048615)){if(!t.ei)throw Reporter.error(150,{state:t});n=new Assign(n,Lt(t,s,62,e))}if(i>61)return n;for(;Vt(t,1572883);){if(1572864===t.ii)throw Reporter.error(112);const name=t.ni;jt(t);const i=[];for(;Vt(t,1572878);)i.push(Lt(t,s,62,e));n=new ValueConverter(n,name,i)}for(;Vt(t,1572880);){if(1572864===t.ii)throw Reporter.error(113);const name=t.ni;jt(t);const i=[];for(;Vt(t,1572878);)i.push(Lt(t,s,62,e));n=new BindingBehavior(n,name,i)}if(1572864!==t.ii){if(2048&e)return n;if("of"===t.hi)throw Reporter.error(151,{state:t});throw Reporter.error(101,{state:t})}return n}function Et(t,s,i,e,n){const r=[t.ni];Ft(t,540714);const h=[Lt(t,s,62,i)];for(;540713!==(t.ii=xt(t));)r.push(t.ni),Ft(t,540714),h.push(Lt(t,s,62,i));return r.push(t.ni),t.ei=0,n?(jt(t),new TaggedTemplate(r,r,e,h)):(jt(t),new Template(r,h))}function jt(t){for(;t.length>t.index;)if(t.oi=t.index,null!==(t.ii=ze[t.si](t)))return;t.ii=1572864}function Dt(t){return t.si=t.input.charCodeAt(++t.index)}function Mt(t,s){let i=t.si;if(0==s){do{i=Dt(t)}while(57>=i&&i>=48);if(46!==i)return t.ni=parseInt(t.hi,10),8192;if(i=Dt(t),t.index>=t.length)return t.ni=parseInt(t.hi.slice(0,-1),10),8192}if(i>57||48>i)t.si=t.input.charCodeAt(--t.index);else do{i=Dt(t)}while(57>=i&&i>=48);return t.ni=parseFloat(t.hi),8192}function $t(t){let s=1,i="";for(;96!==Dt(t);)if(36===t.si){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,s=0;break}i+="$"}else if(92===t.si)i+=String.fromCharCode(Pt(Dt(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});i+=String.fromCharCode(t.si)}return Dt(t),t.ni=i,s?540713:540714}function xt(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,$t(t)}function Vt(t,s){return t.ii===s?(jt(t),1):0}function Ft(t,s){if(t.ii!==s)throw Reporter.error(110,{state:t,li:s});jt(t)}function Ut(t,s,i,value){const e=i.length;for(let n=0;e>n;n+=2){const e=i[n];let r=i[n+1];if(r=r>0?r:e+1,t&&t.fill(value,e,r),s)for(let t=e;r>t;t++)s.add(t)}}function Nt(t){return s=>(Dt(s),t)}function qt(dom){const t=dom.createElement("au-m");return dom.ci(t),t}function Ht(t){return t.ui&&t.ui()[0]||t.ai&&t.ai()[0]||t.path&&t.path[0]||t.target}function zt(){this.fi(),this.di=1}function Wt(t){t.di=0;let s=Ht(t);const i=[];for(;s;){if(s.gi){const e=s.gi[t.type];e&&(t.stopPropagation!==zt&&(t.fi=t.stopPropagation,t.stopPropagation=zt),i.push(e))}s=s.parentNode}for(let s=i.length-1;s>=0&&!t.di;s--){const e=i[s];"handleEvent"in e?e.pi(t):e(t)}}function Kt(t){t.di=0;let s=Ht(t);for(;s&&!t.di;){if(s.bi){const i=s.bi[t.type];i&&(t.stopPropagation!==zt&&(t.fi=t.stopPropagation,t.stopPropagation=zt),"handleEvent"in i?i.pi(t):i(t))}s=s.parentNode}}function Qt(t,s){return t===s}function Gt(t){const s=Ht(t);if(this.target===s)return this.mi(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,s,i){return"string"==typeof t?(function(dom,s,i,e){const instructions=[],n=[],dependencies=[],r=dom.createElement(t);let h=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(h=1,instructions.push(value)):dom.setAttribute(r,to,value)}),h&&(dom.ci(r),n.push(instructions)),e&&Zt(dom,r,e,n,dependencies),new RenderPlan(dom,r,n,dependencies)})(dom,0,s,i):(function(dom,t,s,i){const e=t.description.name,instructions=[],n=[instructions],dependencies=[],r=[],bindables=t.description.bindables,h=dom.createElement(e);return dom.ci(h),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(e,r)),s&&Object.keys(s).forEach(to=>{const value=s[to];if(isHTMLTargetedInstruction(value))r.push(value);else{r.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),i&&Zt(dom,h,i,n,dependencies),new RenderPlan(dom,h,n,dependencies)})(dom,t,s,i)}function Zt(dom,t,s,i,dependencies){for(let e=0,n=s.length;n>e;++e){const n=s[e];switch(typeof n){case"string":dom.appendChild(t,dom.createTextNode(n));break;case"object":dom.wi(n)?dom.appendChild(t,n):"mergeInto"in n&&n.vi(t,i,dependencies)}}}function _t(t){const s=t.index,{length:i,input:e}=t;for(;i>t.index&&58!==e.charCodeAt(++t.index););return e.slice(s,t.index).trim()}function Xt(t){++t.index;const{length:s,input:i}=t;let e="",n=0;for(;s>t.index;){switch(n=i.charCodeAt(t.index)){case 59:return++t.index,e.trim();case 47:n=i.charCodeAt(++t.index),e+=`\\${jn(n)}`;break;case 39:e+="'";break;default:e+=jn(n)}++t.index}return e.trim()}function stringifyDOM(t,s){let i=" ".repeat(s);if(i+=`Node: ${t.nodeName}`,3===t.nodeType&&(i+=` "${t.textContent}"`),1===t.nodeType){let s,e=0;const n=t.attributes,r=n.length;for(;r>e;++e)i+=` ${(s=n[e]).name}=${s.value}`}if(i+="\n",1===t.nodeType){let e=0,childNodes=t.childNodes,n=childNodes.length;for(;n>e;++e)i+=stringifyDOM(childNodes[e],s+1);if("TEMPLATE"===t.nodeName)for(e=0,n=(childNodes=t.content.childNodes).length;n>e;++e)i+=stringifyDOM(childNodes[e],s+1)}return i}function stringifyInstructions(t,s){let i=" ".repeat(s);switch(t.type){case"ha":i+="textBinding\n";break;case"rh":i+="callBinding\n";break;case"rk":i+="iteratorBinding\n";break;case"hb":i+="listenerBinding\n";break;case"rg":i+="propertyBinding\n";break;case"rj":i+="refBinding\n";break;case"hc":i+="stylePropertyBinding\n";break;case"re":i+="setProperty\n";break;case"hd":i+="setAttribute\n";break;case"rf":i+="interpolation\n";break;case"rd":i+="hydrateLetElement\n",t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rb":i+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"ra":i+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rc":i+=`hydrateTemplateController: ${t.res}\n`,i+=stringifyTemplateDefinition(t.def,s+1),t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)})}return i}function stringifyTemplateDefinition(def,t){const s=" ".repeat(t);let i=s;return i+=`TemplateDefinition: ${def.name}\n`,i+=stringifyDOM(def.template,t+1),i+=`${s} Instructions:\n`,def.instructions.forEach(e=>{i+=`${s}  Row:\n`,e.forEach(s=>{i+=stringifyInstructions(s,t+3)})}),i}var Jt,Yt,BindingMode,ts,Hooks,LifecycleFlags,ExpressionKind,ss,DelegationStrategy,MutationKind,CollectionKind,is,es,ns,BindingType,TargetedInstructionType,ViewCompileFlags,rs,hs,os,ls,cs,us,as,SymbolFlags,fs,HTMLTargetedInstructionType,NodeType,ds,gs,ps,bs,ms,ws;class AttrSyntax{constructor(t,s,i,e){this.yi=t,this.Ci=s,this.target=i,this.command=e}}const vs=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),ys=(function(){let t,s,i,e,n;if(null!=vs.performance&&vs.performance.now){const t=vs.performance;return function(){return t.now()}}if(null!=vs.process&&vs.process.Ti){const r=function(){return(t()-e)/1e6};return s=vs.process.Ti,i=(t=function(){let t;return 1e9*(t=s())[0]+t[1]})(),n=1e9*vs.process.Ai(),e=i-n,r}})(),{Bi:Cs,Oi:Ts,Ri:As,Ii:Bs,ki:Os,Si:Rs}=(function(){if(null!=vs.performance&&vs.performance.mark&&vs.performance.measure&&vs.performance.getEntriesByName&&vs.performance.getEntriesByType&&vs.performance.clearMarks&&vs.performance.clearMeasures){const t=vs.performance;return{Bi(name){t.mark(name)},Oi(name,s,i){t.measure(name,s,i)},Ri:name=>t.getEntriesByName(name),Ii:type=>t.getEntriesByType(type),ki(name){t.clearMarks(name)},Si(name){t.clearMeasures(name)}}}if(null!=vs.process&&vs.process.Ti){const t=[],s={},i=function(s,value){let i=0;const e=t.length,n=[];for(;e>i;i++)t[i][s]===value&&n.push(t[i]);return n},e=function(type,name){let s,i=t.length;for(;i--;)(s=t[i]).entryType!==type||void 0!==name&&s.name!==name||t.splice(i,1)};return{Bi(name){const i={name,entryType:"mark",startTime:ys(),duration:0};t.push(i),s[name]=i},Oi(name,i,e){let n,r;if(void 0!==e&&void 0===s[e])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${e}' does not exist.`);if(void 0!==i&&void 0===s[i])throw new SyntaxError(`Failed to execute 'measure' on 'Performance': The mark '${i}' does not exist.`);n=s[i]?s[i].startTime:0,r=s[e]?s[e].startTime:ys(),t.push({name,entryType:"measure",startTime:n,duration:r-n})},Ri:name=>i("name",name),Ii:type=>i("entryType",type),ki(name){e("mark",name)},Si(name){e("measure",name)}}}})(),{Pi:Is,Li:ks}=(function(){const t=["moz","webkit"],s="AnimationFrame";let i=vs[`request${s}`],e=vs[`cancel${s}`]||vs[`cancelRequest${s}`];for(let n=0;!i&&2>n;++n)i=vs[`${t[n]}Request${s}`],e=vs[`${t[n]}Cancel${s}`]||vs[`${t[n]}CancelRequest${s}`];if(!i||!e){let t=0,s=0;const n=[],r=1e3/60;i=function(i){let e,h;return 0===n.length&&(e=ys(),t=(h=Math.max(0,r-(e-t)))+e,setTimeout(function(){const s=n.slice(0);n.length=0;for(let i=0;s.length>i;++i)if(!s[i].Ei)try{s[i].Us(t)}catch(t){setTimeout(function(){throw t},0)}},Math.round(h))),n.push({ji:++s,Us:i,Ei:0}),s},e=function(t){for(let s=0;n.length>s;++s)n[s].ji===t&&(n[s].Ei=1)}}const n=function(t){return i.call(vs,t)};return n.cancel=function(){e.apply(vs,arguments)},vs.requestAnimationFrame=i,vs.cancelAnimationFrame=e,{Pi:n,Li:e}})();class Ss{constructor(t,s=null){this.Di=t,this.context=s,this.next=null,this.Mi=null,this.$i=0}xi(t,s){return this.Di===t&&this.context===(void 0===s?null:s)}Vi(t){null!==this.Di&&(null!==this.context?this.Di.call(this.context,t):this.Di(t));const s=this.next;return this.$i&&(this.next=null),s}connect(t){this.Mi=t,null!==t.next&&(t.next.Mi=this),this.next=t.next,t.next=this}disconnect(t=0){this.$i=1,this.Di=null,this.context=null,null!==this.Mi&&(this.Mi.next=this.next),null!==this.next&&(this.next.Mi=this.Mi);const s=this.next;return this.next=t?null:s,this.Mi=null,s}}const Ps={},Ls={},PLATFORM={global:vs,Fi:new class{constructor(){this.head=new Ss(null,null),this.Ui=-1,this.Ni=1,this.qi=-1,this.Hi=0,this.zi=null,this.resolve=s,this.Wi=(t=>{this.Ui=-1,this.Hi&&(this.update(t),this.Hi&&-1===this.Ui&&null!==this.head.next&&(this.Ui=Is(this.Wi))),this.resolve(t),this.resolve=s,this.zi=null})}add(t,s){const i=new Ss(t,s);let e=this.head.next,n=this.head;if(null===e)i.connect(n);else{for(;null!==e;)n=e,e=e.next;null===i.Mi&&i.connect(n)}return this.Hi?this.Ki():this.start(),this}remove(t,s){let i=this.head.next;for(;null!==i;)i=i.xi(t,s)?i.disconnect():i.next;return null===this.head.next&&this.Qi(),this}start(){this.Hi||(this.Hi=1,this.Ki())}stop(){this.Hi&&(this.Hi=0,this.Qi())}update(t=ys()){let s;if(t>this.qi){this.Ni=~~(60*(s=t-this.qi)+.5)/1e3;const i=this.head;let e=i.next;for(;null!==e;)e=e.Vi(this.Ni);null===i.next&&this.Qi()}else this.Ni=0;this.qi=t}Gi(){return null===this.zi&&(this.zi=new Promise(t=>{this.resolve=t})),this.zi}Ki(){-1===this.Ui&&null!==this.head.next&&(this.qi=ys(),this.Ui=Is(this.Wi))}Qi(){-1!==this.Ui&&(ks(this.Ui),this.Ui=-1)}},Zi:Object.freeze([]),Mt:Object.freeze({}),_i:s,now:ys,mark:Cs,measure:Ts,getEntriesByName:As,getEntriesByType:Bs,clearMarks:Os,clearMeasures:Rs,Ys(t){let value=Ps[t];if(void 0!==value)return value;value="";let s,i=1,e=0;for(let n=0,r=t.length;r>n;++n)"-"===(s=t.charAt(n))||"."===s||"_"===s?e=1:(value+=i?s.toLowerCase():e?s.toUpperCase():s,e=0),i=0;return Ps[t]=value},Fs(t){let value=Ls[t];if(void 0!==value)return value;value="";let s,i,e=1;for(let n=0,r=t.length;r>n;++n)i=(s=t.charAt(n)).toLowerCase(),value+=e?i:s!==i?`-${i}`:i,e=0;return Ls[t]=value},toArray(t){const s=t.length,i=Array(s);for(let e=0;s>e;++e)i[e]=t[e];return i},requestAnimationFrame:t=>Is(t),clearInterval(t){vs.clearInterval(t)},clearTimeout(t){vs.clearTimeout(t)},setInterval:(t,s,...i)=>vs.setInterval(t,s,...i),setTimeout:(t,s,...i)=>vs.setTimeout(t,s,...i)},Reporter={write(t,...s){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,Xi:0,Ji:null,Yi(name,t){},te(){},se(t){},ie(t){},ee(t){},ne(){}};"getOwnMetadata"in Reflect||(Reflect.getOwnMetadata=function(t,s){return s[t]},Reflect.metadata=function(t,s){return function(i){i[t]=s}});const DI={re(...t){return 0===arguments.length?new Ms:(new Ms).register(...t)},he:t=>Reflect.getOwnMetadata("design:paramtypes",t)||PLATFORM.Zi,oe(t){let dependencies;if(void 0===t.inject)dependencies=DI.he(t);else{dependencies=[];let s=t;for(;"function"==typeof s;)s.hasOwnProperty("inject")&&dependencies.push(...s.inject),s=Object.getPrototypeOf(s)}return dependencies},le(t){const s=function(t,i,e){if(void 0===t)throw Reporter.error(16,s.ce,s);return(t.inject||(t.inject=[]))[e]=s,t};return s.ce=t||"Interface",s.ue=function(){return s},s.ae=function(t){return s.ae=function(){throw Reporter.error(17,s)},s.register=function(i,e){const n=e||s;return t({v:value=>i.Ws(n,new Es(n,0,value)),singleton:value=>i.Ws(n,new Es(n,1,value)),transient:value=>i.Ws(n,new Es(n,2,value)),Us:value=>i.Ws(n,new Es(n,3,value)),fe:t=>i.Ws(n,new Es(n,5,t))})},s},s},inject:(...dependencies)=>(function(t,s,i){if("number"==typeof i){if(!t.hasOwnProperty("inject")){const s=DI.he(t);t.inject=s.slice()}1===dependencies.length&&(t.inject[i]=dependencies[0])}else if(s){const i=t.constructor;(i.inject||(i.inject={}))[s]=dependencies[0]}else if(i)i.value.inject=dependencies;else if(0===dependencies.length){const s=DI.he(t);t.inject=s.slice()}else t.inject=dependencies}),transient:t=>(t.register=function(s){return Registration.transient(t,t).register(s,t)},t),singleton:t=>(t.register=function(s){return Registration.singleton(t,t).register(s,t)},t)},IContainer=DI.le("IContainer").ue(),IServiceLocator=IContainer,inject=DI.inject,all=i((t,s,i)=>i.getAll(t)),lazy=i((t,s,i)=>{let e=null;return()=>(null===e&&(e=i.get(t)),e)}),optional=i((t,s,i)=>i.has(t,1)?i.get(t):null);(function(t){t[t.v=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.Us=3]="callback",t[t.de=4]="array",t[t.$s=5]="alias"})(Jt||(Jt={}));class Es{constructor(t,strategy,s){this.key=t,this.strategy=strategy,this.state=s}register(t,s){return t.Ws(s||this.key,this)}resolve(t,s){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const s=t.ge(this.state);return this.state=s.construct(t)}case 2:return t.ge(this.state).construct(s);case 3:return this.state(t,s,this);case 4:return this.state[0].resolve(t,s);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}ge(t){switch(this.strategy){case 1:case 2:return t.ge(this.state);default:return null}}}class js{constructor(t,s,dependencies){this.pe=t,this.be=s,this.dependencies=dependencies,this.me=null}static create(t){const dependencies=DI.oe(t);return new js(t,$s[dependencies.length]||xs,dependencies)}construct(t,s){const i=this.me;let e=void 0!==s?this.be.we(t,this.pe,this.dependencies,s):this.be.ve(t,this.pe,this.dependencies);if(null===i)return e;for(let t=0,s=i.length;s>t;++t)e=i[t](e);return e}ye(t){return null===this.me&&(this.me=[]),this.me.push(t),1}}const Ds={resolve:(t,s)=>s};class Ms{constructor(t={}){this.parent=null,this.Ce=0,this.Te=new Map,this.Ae=t,this.Be=t.Be||(t.Be=new Map),this.Oe=t.Oe||(t.Oe=Object.create(null)),this.Te.set(IContainer,Ds)}register(...t){if(100==++this.Ce)throw Error("Unable to autoregister dependency");for(let s=0,i=t.length;i>s;++s){const i=t[s];if(r(i))i.register(this);else if(void 0!==i.prototype)Registration.singleton(i,i).register(this);else{const t=Object.keys(i);for(let s=0,e=t.length;e>s;++s){const value=i[t[s]];r(value)?value.register(this):this.register(value)}}}return--this.Ce,this}Ws(t,s){h(t);const i=this.Te,e=i.get(t);return void 0===e?(i.set(t,s),"string"==typeof t&&(this.Oe[t]=s)):e instanceof Es&&4===e.strategy?e.state.push(s):i.set(t,new Es(t,4,[e,s])),s}ye(t,s){const i=this.Re(t);if(null===i)return 0;if(i.ge){const t=i.ge(this);return null===t?0:t.ye(s)}return 0}Re(t,s=1){if(h(t),t.resolve)return t;let i=this;for(;null!==i;){const e=i.Te.get(t);if(void 0!==e)return e;if(null===i.parent)return s?this.Ie(t,i):null;i=i.parent}return null}has(t,s=0){return this.Te.has(t)?1:s&&null!==this.parent?this.parent.has(t,1):0}get(t){if(h(t),t.resolve)return t.resolve(this,this);let s=this;for(;null!==s;){let i=s.Te.get(t);if(void 0!==i)return i.resolve(s,this);if(null===s.parent)return(i=this.Ie(t,s)).resolve(s,this);s=s.parent}}getAll(t){h(t);let s=this;for(;null!==s;){const i=s.Te.get(t);if(void 0!==i)return o(i,s,this);if(null===this.parent)return PLATFORM.Zi;s=s.parent}return PLATFORM.Zi}ge(t){let s=this.Be.get(t);return void 0===s&&(s=js.create(t),this.Be.set(t,s)),s}Hs(){const t=this.Ae,s={Be:t.Be,Oe:Object.assign({},t.Oe)},i=new Ms(s);return i.parent=this,i}Ie(t,s){if(t.register){const i=t.register(s,t);if(!i||!i.resolve)throw Reporter.error(40);return i}const i=new Es(t,1,t);return s.Te.set(t,i),i}}const Registration={v:(t,value)=>new Es(t,0,value),singleton:(t,value)=>new Es(t,1,value),transient:(t,value)=>new Es(t,2,value),Us:(t,s)=>new Es(t,3,s),$s:(t,s)=>new Es(s,5,t),ke:(t,...s)=>({register(i){const e=i.Re(t);if(null!==e){let t=null;if(e.ge){const n=e.ge(i);null!==n&&(t=n.construct(i,s))}else t=e.resolve(i,i);null!==t&&t.register(i)}}})},$s=[{ve:(t,s)=>new s,we:l},{ve:(t,s,i)=>new s(t.get(i[0])),we:l},{ve:(t,s,i)=>new s(t.get(i[0]),t.get(i[1])),we:l},{ve:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2])),we:l},{ve:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3])),we:l},{ve:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]),t.get(i[4])),we:l}],xs={ve:l,we:l},Profiler=(function(){const t=PLATFORM.now,s=[];let i;const e={Se(name){s.push(name);let e=0,n=0;return{Yi(){1==++e&&(n=t(),++i[name].Pe),++i[name].Le},te(){0==--e&&(i[name].duration+=t()-n)}}},enable(){i={};for(const t of s)i[t]={name:t,duration:0,Pe:0,Le:0};e.enabled=1},disable(){e.enabled=0},Ee(t){Object.keys(i).map(t=>i[t]).sort((t,s)=>s.duration-t.duration).forEach(s=>{t(s.name,s.duration,s.Pe,s.Le)})},enabled:0};return e})();class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const s=t._(name),i=this.context.Oe;let e=i[s];if(void 0===e&&(e=i[s]=this.context.Re(s,0)),null!==e&&e.ge){const t=e.ge(this.context);if(null!==t){const s=t.pe.description;return void 0===s?null:s}}return null}create(t,name){const s=t._(name),i=this.context.Oe;let e=i[s];if(void 0===e&&(e=i[s]=this.context.Re(s,0)),null!==e){const t=e.resolve(this.context,this.context);return void 0===t?null:t}return null}}Yt=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>void 0===t?n:n(t),transient:t=>void 0===t?e:e(t),PLATFORM,Reporter,Tracer,Profiler,RuntimeCompilationResources});class Vs{constructor(t,s,i,e){if(this.je=t,this.repeat=s,this.De=i,this.Me=e,e)switch(t.length){case 0:this.has=this.$e;break;case 1:this.has=this.xe;break;default:this.has=this.Ve}else switch(t.length){case 0:this.has=this.Fe;break;case 1:this.has=this.Ue;break;default:this.has=this.Ne}}xi(t){return this.je===t.je&&this.repeat===t.repeat&&this.De===t.De&&this.Me===t.Me}Ne(t){return-1!==this.je.indexOf(t)}Ue(t){return this.je===t}Fe(t){return 0}Ve(t){return-1===this.je.indexOf(t)}xe(t){return this.je!==t}$e(t){return 1}}class Interpretation{get pattern(){const value=this.qe;return""===value?null:value}set pattern(value){null===value?(this.qe="",this.parts=PLATFORM.Zi):(this.qe=value,this.parts=this.He[value])}constructor(){this.qe="",this.parts=PLATFORM.Zi,this.ze={},this.He={}}append(t,s){const{ze:i}=this;void 0===i[t]?i[t]=s:i[t]+=s}next(t){const{ze:s}=this;if(void 0!==s[t]){const{He:i}=this;void 0===i[t]?i[t]=[s[t]]:i[t].push(s[t]),s[t]=void 0}}}class State{get pattern(){return this.We?this.Ke[0]:null}constructor(t,...s){this.Qe=t,this.Ge=[],this.types=null,this.Ke=s,this.We=0}Ze(t){const s=this.Ge,i=s.length;let e=null;for(let n=0;i>n;++n)if(t.xi((e=s[n]).Qe))return e;return null}append(t,s){const{Ke:i}=this;-1===i.indexOf(s)&&i.push(s);let e=this.Ze(t);return null===e&&(e=new State(t,s),this.Ge.push(e),t.repeat&&e.Ge.push(e)),e}_e(t,s){const i=[],e=this.Ge,n=e.length;let r=0,h=null,o=0,l=0;for(;n>o;++o)if((h=e[o]).Qe.has(t))if(i.push(h),r=h.Ke.length,l=0,h.Qe.De)for(;r>l;++l)s.next(h.Ke[l]);else for(;r>l;++l)s.append(h.Ke[l],t);return i}}class Fs{constructor(t){this.text=t;const s=this.Xe=t.length,i=this.Je=[];for(let e=0;s>e;++e)i.push(new Vs(t[e],0,0,0))}Ye(t){const{Xe:s,Je:i}=this;for(let e=0;s>e;++e)t(i[e])}}class Us{constructor(t){this.text="PART",this.tn=new Vs(t,1,0,1)}Ye(t){t(this.tn)}}class Ns{constructor(t){this.text=t,this.tn=new Vs(t,0,1,0)}Ye(t){t(this.tn)}}class qs{constructor(){this.sn=0,this.in=0,this.symbols=0}}const ISyntaxInterpreter=DI.le("ISyntaxInterpreter").ae(t=>t.singleton(Hs));class Hs{constructor(){this.en=new State(null),this.nn=[this.en]}add(t){let s=0;if(Array.isArray(t)){const i=t.length;for(;i>s;++s)this.add(t[s]);return}let i=this.en;const def=t,e=def.pattern,n=new qs,r=this.parse(def,n),h=r.length,o=t=>{i=i.append(t,e)};for(s=0;h>s;++s)r[s].Ye(o);i.types=n,i.We=1}ke(name){const t=new Interpretation;let s=this.nn;const i=name.length;for(let e=0;i>e&&0!==(s=this.rn(s,name.charAt(e),t)).length;++e);if(s.sort((t,s)=>{if(!t.We)return s.We?1:0;if(!s.We)return-1;const i=t.types,e=s.types;return i.sn!==e.sn?e.sn-i.sn:i.in!==e.in?e.in-i.in:i.symbols!==e.symbols?e.symbols-i.symbols:0}),s.length>0){const i=s[0];i.Qe.De||t.next(i.pattern),t.pattern=i.pattern}return t}rn(t,s,i){const e=[];let n=null;const r=t.length;for(let h=0;r>h;++h)e.push(...(n=t[h])._e(s,i));return e}parse(def,t){const s=[],i=def.pattern,e=i.length;let n=0,r=0,h="";for(;e>n;)h=i.charAt(n),-1===def.symbols.indexOf(h)?n===r&&"P"===h&&"PART"===i.slice(n,n+4)?(r=n+=4,s.push(new Us(def.symbols)),++t.in):++n:n!==r?(s.push(new Fs(i.slice(r,n))),++t.sn,r=n):(s.push(new Ns(i.slice(r,n+1))),++t.symbols,r=++n);return r!==n&&(s.push(new Fs(i.slice(r,n))),++t.sn),s}}const IAttributePattern=DI.le("IAttributePattern").ue();class DotSeparatedAttributePattern{hn(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[1])}on(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{ln(t,s,parts){return new AttrSyntax(t,s,"ref",null)}cn(t,s,parts){return new AttrSyntax(t,s,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{un(t,s,parts){return new AttrSyntax(t,s,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{an(t,s,parts){return new AttrSyntax(t,s,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.le("IAttributeParser").ae(t=>t.singleton(zs));Profiler.Se("AttributeParser");class zs{constructor(t,s){this.fn=t,this.cache={};const i=this.Ke={};s.forEach(s=>{const e=s.t;t.add(e),e.forEach(def=>{i[def.pattern]=s})})}parse(name,value){let t=this.cache[name];void 0===t&&(t=this.cache[name]=this.fn.ke(name));const s=t.pattern;return null===s?new AttrSyntax(name,value,name,null):this.Ke[s][s](name,value,t.parts)}}zs.inject=[ISyntaxInterpreter,all(IAttributePattern)],(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Ns=2]="toView",BindingMode[BindingMode.dn=4]="fromView",BindingMode[BindingMode.gn=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(State){State[State.pn=0]="none",State[State.bn=1]="isBinding",State[State.mn=2]="isBound",State[State.wn=4]="isAttaching",State[State.vn=8]="isAttached",State[State.yn=16]="isMounted",State[State.Cn=32]="isDetaching",State[State.Tn=64]="isUnbinding",State[State.An=128]="isCached",State[State.Bn=256]="isContainerless"})(ts||(ts={})),(function(Hooks){Hooks[Hooks.pn=1]="none",Hooks[Hooks.On=2]="hasCreated",Hooks[Hooks.Rn=4]="hasBinding",Hooks[Hooks.In=8]="hasBound",Hooks[Hooks.kn=16]="hasAttaching",Hooks[Hooks.Sn=32]="hasAttached",Hooks[Hooks.Pn=64]="hasDetaching",Hooks[Hooks.Ln=128]="hasDetached",Hooks[Hooks.En=256]="hasUnbinding",Hooks[Hooks.jn=512]="hasUnbound",Hooks[Hooks.Dn=1024]="hasRender",Hooks[Hooks.Mn=2048]="hasCaching"})(Hooks||(Hooks={})),(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.pn=0]="none",LifecycleFlags[LifecycleFlags.Y=524288]="mustEvaluate",LifecycleFlags[LifecycleFlags.$n=3]="mutation",LifecycleFlags[LifecycleFlags.xn=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.Vn=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.Fn=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.G=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Un=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=524256]="from",LifecycleFlags[LifecycleFlags.rt=224]="fromFlush",LifecycleFlags[LifecycleFlags.Nn=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.qn=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Hn=128]="fromTick",LifecycleFlags[LifecycleFlags.zn=256]="fromStartTask",LifecycleFlags[LifecycleFlags.Xt=512]="fromStopTask",LifecycleFlags[LifecycleFlags.ht=1024]="fromBind",LifecycleFlags[LifecycleFlags.Ts=2048]="fromUnbind",LifecycleFlags[LifecycleFlags.xt=4096]="fromAttach",LifecycleFlags[LifecycleFlags.Kt=8192]="fromDetach",LifecycleFlags[LifecycleFlags.ns=16384]="fromCache",LifecycleFlags[LifecycleFlags.Wn=32768]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Kn=65536]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Qn=131072]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Gn=262144]="fromLifecycleTask",LifecycleFlags[LifecycleFlags._t=1048576]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.lt=2097152]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Zn=4194304]="isTraversingParentScope",LifecycleFlags[LifecycleFlags._s=25165824]="persistentBindingFlags",LifecycleFlags[LifecycleFlags._n=8388608]="allowParentScopeTraversal",LifecycleFlags[LifecycleFlags.Dt=16777216]="useProxies"})(LifecycleFlags||(LifecycleFlags={})),(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Xn=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.pe=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(t){t[t.Jn=0]="None",t[t.Yn=1]="Subscriber0",t[t.tr=2]="Subscriber1",t[t.sr=4]="Subscriber2",t[t.ir=8]="SubscribersRest",t[t.er=15]="Any"})(ss||(ss={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.pn=0]="none",DelegationStrategy[DelegationStrategy.nr=1]="capturing",DelegationStrategy[DelegationStrategy.rr=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(MutationKind){MutationKind[MutationKind.v=1]="instance",MutationKind[MutationKind.T=2]="collection",MutationKind[MutationKind.A=4]="proxy"})(MutationKind||(MutationKind={})),(function(CollectionKind){CollectionKind[CollectionKind.hr=8]="indexed",CollectionKind[CollectionKind.or=4]="keyed",CollectionKind[CollectionKind.de=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));const Ws=new WeakMap;let Ks=class{constructor(t,s,i){this.raw=s,this.key=i,this.A=t,this.subscribe=this.u,this.unsubscribe=this.g}K(value,t){const s=this.raw[this.key];s!==value&&(this.raw[this.key]=value,this.C(value,s,t|LifecycleFlags.Dt|LifecycleFlags.G))}W(){return this.raw[this.key]}};Ks=c([subscriberCollection(MutationKind.v)],Ks);let ProxyObserver=is=class{constructor(t){this.raw=t,this.A=new Proxy(t,this),Ws.set(t,this.A),this.lr={}}static cr(t){if(void 0===t.ur){const s=Ws.get(t);return void 0===s?t:s}return t}static ar(t){const s=t.ur;return void 0===s?t:s}static Ls(t,s){let i;if(void 0===t.ur){const s=Ws.get(t);i=void 0===s?new is(t):s.wt}else i=t.wt;if(1===arguments.length)return i;let e=i.lr[s];if(void 0===e){const n=this.ar(t);e=i.lr[s]=new Ks(i.A,n,s)}return e}static dr(t){return void 0!==t.ur}get(t,s,i){return"$observer"===s?this:"$raw"===s?t:t[s]}set(t,s,value,i){const e=t[s];return e!==value&&(Reflect.set(t,s,value,t),this.gr(value,e,s),this.C(s,value,e,LifecycleFlags.Dt|LifecycleFlags.G)),1}deleteProperty(t,s){const i=t[s];return Reflect.deleteProperty(t,s)?(void 0!==i&&(this.gr(void 0,i,s),this.C(s,void 0,i,LifecycleFlags.Dt|LifecycleFlags.G)),1):0}defineProperty(t,s,i){const e=t[s];return Reflect.defineProperty(t,s,i)?(i.value!==e&&(this.gr(i.value,e,s),this.C(s,i.value,e,LifecycleFlags.Dt|LifecycleFlags.G)),1):0}apply(t,s,i){return Reflect.apply(t,t,i)}subscribe(t,s){if(1===arguments.length)this.u(t);else{let i=this.lr[s];void 0===i&&(i=this.lr[s]=new Ks(this.A,this.raw,s)),i.u(t)}}unsubscribe(t,s){if(1===arguments.length)this.g(t);else{const i=this.lr[s];void 0!==i&&i.g(t)}}gr(t,s,i){const e=this.lr[i];void 0!==e&&e.C(t,s,LifecycleFlags.Dt|LifecycleFlags.G)}};ProxyObserver=is=c([subscriberCollection(MutationKind.A)],ProxyObserver);const Qs=Reflect.defineProperty,Gs={get:void 0,set:void 0,Gs:1,pr:1};let SetterObserver=class{constructor(t,s,i){this.dt=t&LifecycleFlags._s,this.N=s,this.q=i}W(){return this.H}K(t,s){const i=this.H;i!==t&&(this.H=t,s&LifecycleFlags.ht||this.C(t,i,this.dt|s),this.U||(this.N[this.q]=t))}};SetterObserver=c([propertyObserver()],SetterObserver),(function(t){t[t.br=250]="UndefinedScope",t[t.mr=251]="NullScope",t[t.wr=252]="NilOverrideContext",t[t.vr=253]="NilParentScope"})(es||(es={}));class Zs{Ls(t,s,i){let e=this[i];return void 0===e&&(e=this[i]=new SetterObserver(t,s,i)),e}}class BindingContext{constructor(t,value){if(this.yr=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(t,s,value){const i=new BindingContext(s,value);return t&LifecycleFlags.Dt?ProxyObserver.Ls(i).A:i}static get(t,name,s,i){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let e=t.Cr;if(s>0){for(;s>0;){if(null===e.Tr)return;s--,e=e.Tr}return name in e?e:e.Ar}for(;e&&!(name in e)&&!(e.Ar&&name in e.Ar);)e=e.Tr;if(e)return name in e?e:e.Ar;if(i&LifecycleFlags._n&&null!==t.bs){const e=this.get(t.bs,name,s,i&~LifecycleFlags._n|LifecycleFlags.Zn);if(null!==e)return e}return i&LifecycleFlags.Zn?null:t.Ar||t.Cr}Br(t){let s=this.Zs;return void 0===s&&(this.Zs=s=new Zs),s}}class Scope{constructor(t,s){this.Ar=t,this.Cr=s,this.bs=null}static create(t,s,i){return new Scope(s,null==i?OverrideContext.create(t,s,i):i)}static Or(t,s){if(null==s)throw Reporter.error(252);return new Scope(s.Ar,s)}static Rr(t,s,i){if(null==s)throw Reporter.error(253);return new Scope(i,OverrideContext.create(t,i,s.Cr))}}class OverrideContext{constructor(t,s){this.yr=1,this.Ar=t,this.Tr=s}static create(t,s,i){return new OverrideContext(s,void 0===i?null:i)}Br(){let t=this.Zs;return void 0===t&&(this.Zs=t=new Zs),t}}const ISignaler=DI.le("ISignaler").ae(t=>t.singleton(_s));class _s{constructor(){this.Ir=Object.create(null)}kr(name,t){const s=this.Ir[name];if(void 0!==s)for(const i of s.keys())i.B(void 0,void 0,t|LifecycleFlags.G)}Sr(name,t){const s=this.Ir,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}Pr(name,t){const s=this.Ir[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",_(name){return`${this.name}:${name}`},Lr(t){return t.kind===this},Er(t,s){const i=s,e="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=e,i.register=B,i}},ValueConverterResource={name:"value-converter",_(name){return`${this.name}:${name}`},Lr(t){return t.kind===this},Er(t,s){const i=s,e="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=e,i.register=O,i}};(function(t){t[t.jr=202]="NoLocator",t[t.Dr=203]="NoBehaviorFound",t[t.Mr=204]="BehaviorAlreadyApplied",t[t.$r=205]="NoConverterFound",t[t.xr=206]="NoBinding",t[t.Vr=207]="NotAFunction",t[t.Fr=208]="UnknownOperator",t[t.br=250]="UndefinedScope",t[t.mr=251]="NullScope"})(ns||(ns={}));class BindingBehavior{constructor(t,name,s){this.X=38962,this.Ur=t,this.name=name,this.Nr=s,this.qr=BindingBehaviorResource._(this.name),this.Hr=hasBind(t),this.zr=hasUnbind(t)}evaluate(t,s,i){return this.Ur.evaluate(t,s,i)}assign(t,s,i,value){return this.Ur.assign(t,s,i,value)}connect(t,s,i){this.Ur.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const e=i.Wr;if(!e)throw Reporter.error(202,this);this.Hr&&this.Ur.bind(t,s,i);const n=this.qr,r=e.get(n);if(!r)throw Reporter.error(203,this);if(null!=i[n])throw Reporter.error(204,this);i[n]=r,r.bind.apply(r,[t,s,i].concat(R(t,s,e,this.Nr)))}Kr(t,s,i){const e=this.qr;i[e].Kr(t,s,i),i[e]=null,this.zr&&this.Ur.Kr(t,s,i)}accept(t){return t.Qr(this)}}class ValueConverter{constructor(t,name,s){this.X=36913,this.Ur=t,this.name=name,this.Nr=s,this.Gr=ValueConverterResource._(this.name)}evaluate(t,s,i){if(!i)throw Reporter.error(202,this);const e=i.get(this.Gr);if(!e)throw Reporter.error(205,this);if("toView"in e){const n=this.Nr,r=n.length,h=Array(r+1);h[0]=this.Ur.evaluate(t,s,i);for(let e=0;r>e;++e)h[e+1]=n[e].evaluate(t,s,i);return e.Ns.apply(e,h)}return this.Ur.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw Reporter.error(202,this);const e=i.get(this.Gr);if(!e)throw Reporter.error(205,this);return"fromView"in e&&(value=e.dn.apply(e,[value].concat(R(t,s,i,this.Nr)))),this.Ur.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const e=i.Wr;if(!e)throw Reporter.error(202,this);this.Ur.connect(t,s,i);const n=this.Nr;for(let e=0,r=n.length;r>e;++e)n[e].connect(t,s,i);const r=e.get(this.Gr);if(!r)throw Reporter.error(205,this);const h=r.Ir;if(void 0===h)return;const o=e.get(ISignaler);for(let t=0,s=h.length;s>t;++t)o.Sr(h[t],i)}Kr(t,s,i){const e=i.Wr,n=e.get(this.Gr).Ir;if(void 0===n)return;const r=e.get(ISignaler);for(let t=0,s=n.length;s>t;++t)r.Pr(n[t],i)}accept(t){return t.Zr(this)}}class Assign{constructor(t,value){this.X=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t._r(this)}}class Conditional{constructor(t,s,i){this.X=63,this.assign=PLATFORM._i,this.Xr=t,this.Jr=s,this.Yr=i}evaluate(t,s,i){return this.Xr.evaluate(t,s,i)?this.Jr.evaluate(t,s,i):this.Yr.evaluate(t,s,i)}connect(t,s,i){this.Xr.evaluate(t,s,null)?(this.Xr.connect(t,s,i),this.Jr.connect(t,s,i)):(this.Xr.connect(t,s,i),this.Yr.connect(t,s,i))}accept(t){return t.th(this)}}class AccessThis{constructor(t=0){this.X=1793,this.assign=PLATFORM._i,this.connect=PLATFORM._i,this.ri=t}evaluate(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);let e=s.Cr,n=this.ri;for(;n--&&e;)e=e.Tr;return 1>n&&e?e.Ar:void 0}accept(t){return t.sh(this)}}AccessThis.ih=new AccessThis(0),AccessThis.eh=new AccessThis(1);class AccessScope{constructor(name,t=0){this.X=10082,this.name=name,this.ri=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.ri,t)[name]}assign(t,s,i,value){const name=this.name,e=BindingContext.get(s,name,this.ri,t);return e?e[name]=value:void 0}connect(t,s,i){const name=this.name,e=BindingContext.get(s,name,this.ri,t);i.nt(t,e,name)}accept(t){return t.nh(this)}}class AccessMember{constructor(t,name){this.X=9323,this.object=t,this.name=name}evaluate(t,s,i){const e=this.object.evaluate(t,s,i);return null==e?e:e[this.name]}assign(t,s,i,value){let e=this.object.evaluate(t,s,i);return null!==e&&"object"==typeof e||this.object.assign(t,s,i,e={}),e[this.name]=value,value}connect(t,s,i){const e=this.object.evaluate(t,s,null);this.object.connect(t,s,i),e&&i.nt(t,e,this.name)}accept(t){return t.rh(this)}}class AccessKeyed{constructor(t,s){this.X=9324,this.object=t,this.key=s}evaluate(t,s,i){const e=this.object.evaluate(t,s,i);if(null!=e)return e[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const e=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof e&&null!==e){this.key.connect(t,s,i);const n=this.key.evaluate(t,s,null);Array.isArray(e)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(n)||i.nt(t,e,n)}}accept(t){return t.hh(this)}}class CallScope{constructor(name,t,s=0){this.X=1448,this.assign=PLATFORM._i,this.name=name,this.Nr=t,this.ri=s}evaluate(t,s,i){const e=R(t,s,i,this.Nr),n=BindingContext.get(s,this.name,this.ri,t),r=I(t,n,this.name);if(r)return r.apply(n,e)}connect(t,s,i){const e=this.Nr;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i)}accept(t){return t.oh(this)}}class CallMember{constructor(t,name,s){this.X=1161,this.assign=PLATFORM._i,this.object=t,this.name=name,this.Nr=s}evaluate(t,s,i){const e=this.object.evaluate(t,s,i),n=R(t,s,i,this.Nr),r=I(t,e,this.name);if(r)return r.apply(e,n)}connect(t,s,i){const e=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),I(t&~LifecycleFlags.Y,e,this.name)){const e=this.Nr;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i)}}accept(t){return t.lh(this)}}class CallFunction{constructor(t,s){this.X=1162,this.assign=PLATFORM._i,this.uh=t,this.Nr=s}evaluate(t,s,i){const e=this.uh.evaluate(t,s,i);if("function"==typeof e)return e.apply(null,R(t,s,i,this.Nr));if(t&LifecycleFlags.Y||null!=e)throw Reporter.error(207,this)}connect(t,s,i){const e=this.uh.evaluate(t,s,null);if(this.uh.connect(t,s,i),"function"==typeof e){const e=this.Nr;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i)}}accept(t){return t.ah(this)}}class Binary{constructor(t,s,i){this.X=46,this.assign=PLATFORM._i,this.fh=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){const e=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.fh&&!e||"||"===this.fh&&e||this.right.connect(t,s,i)}dh(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}gh(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}ph(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}bh(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}mh(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}wh(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}vh(t,s,i){const e=this.right.evaluate(t,s,i);return"function"==typeof e?this.left.evaluate(t,s,i)instanceof e:0}yh(t,s,i){const e=this.right.evaluate(t,s,i);return null!==e&&"object"==typeof e?this.left.evaluate(t,s,i)in e:0}Ch(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}Th(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}Ah(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}Bh(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Oh(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}Rh(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}Ih(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}kh(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}Sh(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.Ph(this)}}class Unary{constructor(t,s){this.X=39,this.assign=PLATFORM._i,this.fh=t,this.Ur=s,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){this.Ur.connect(t,s,i)}Lh(t,s,i){this.Ur.evaluate(t,s,i)}Eh(t,s,i){return typeof this.Ur.evaluate(t,s,i)}jh(t,s,i){return!this.Ur.evaluate(t,s,i)}Th(t,s,i){return-this.Ur.evaluate(t,s,i)}Ch(t,s,i){return+this.Ur.evaluate(t,s,i)}accept(t){return t.Dh(this)}}class PrimitiveLiteral{constructor(value){this.X=17925,this.assign=PLATFORM._i,this.connect=PLATFORM._i,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.Mh(this)}}PrimitiveLiteral.$h=new PrimitiveLiteral(void 0),PrimitiveLiteral.xh=new PrimitiveLiteral(null),PrimitiveLiteral.Vh=new PrimitiveLiteral(1),PrimitiveLiteral.Fh=new PrimitiveLiteral(0),PrimitiveLiteral.Uh=new PrimitiveLiteral("");class ArrayLiteral{constructor(t){this.X=17955,this.assign=PLATFORM._i,this.elements=t}evaluate(t,s,i){const e=this.elements,n=e.length,r=Array(n);for(let h=0;n>h;++h)r[h]=e[h].evaluate(t,s,i);return r}connect(t,s,i){const e=this.elements;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i)}accept(t){return t.Nh(this)}}ArrayLiteral.Uh=new ArrayLiteral(PLATFORM.Zi);class ObjectLiteral{constructor(t,s){this.X=17956,this.assign=PLATFORM._i,this.keys=t,this.values=s}evaluate(t,s,i){const e={},n=this.keys,r=this.values;for(let h=0,o=n.length;o>h;++h)e[n[h]]=r[h].evaluate(t,s,i);return e}connect(t,s,i){const e=this.values;for(let n=0,r=this.keys.length;r>n;++n)e[n].connect(t,s,i)}accept(t){return t.qh(this)}}ObjectLiteral.Uh=new ObjectLiteral(PLATFORM.Zi,PLATFORM.Zi);class Template{constructor(t,s){this.X=17958,this.assign=PLATFORM._i,this.Hh=t,this.J=void 0===s?PLATFORM.Zi:s}evaluate(t,s,i){const e=this.J,n=this.Hh;let r=n[0];for(let h=0,o=e.length;o>h;++h)r+=e[h].evaluate(t,s,i),r+=n[h+1];return r}connect(t,s,i){const e=this.J;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i),n++}accept(t){return t.zh(this)}}Template.Uh=new Template([""]);class TaggedTemplate{constructor(t,s,i,e){this.X=1197,this.assign=PLATFORM._i,this.Hh=t,this.Hh.raw=s,this.uh=i,this.J=void 0===e?PLATFORM.Zi:e}evaluate(t,s,i){const e=this.J,n=e.length,r=Array(n);for(let h=0,o=n;o>h;++h)r[h]=e[h].evaluate(t,s,i);const h=this.uh.evaluate(t,s,i);if("function"!=typeof h)throw Reporter.error(207,this);return h.apply(null,[this.Hh].concat(r))}connect(t,s,i){const e=this.J;for(let n=0,r=e.length;r>n;++n)e[n].connect(t,s,i);this.uh.connect(t,s,i)}accept(t){return t.Wh(this)}}class ArrayBindingPattern{constructor(t){this.X=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,e){}connect(t,s,i){}accept(t){return t.Kh(this)}}class ObjectBindingPattern{constructor(t,s){this.X=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,e){}connect(t,s,i){}accept(t){return t.Qh(this)}}class BindingIdentifier{constructor(name){this.X=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.Gh(this)}}const Xs={}.toString;class ForOfStatement{constructor(t,s){this.X=55,this.assign=PLATFORM._i,this.Zh=t,this._h=s}evaluate(t,s,i){return this._h.evaluate(t,s,i)}count(t){return Ys[Xs.call(t)](t)}Xh(t,s){Js[Xs.call(t)](t,s)}connect(t,s,i){this.Zh.connect(t,s,i),this._h.connect(t,s,i)}accept(t){return t.Jh(this)}}class Interpolation{constructor(parts,t){this.X=24,this.assign=PLATFORM._i,this.parts=parts,this.J=void 0===t?PLATFORM.Zi:t,this.Yh=this.J.length>1,this.so=this.J[0]}evaluate(t,s,i){if(this.Yh){const e=this.J,parts=this.parts;let n=parts[0];for(let r=0,h=e.length;h>r;++r)n+=e[r].evaluate(t,s,i),n+=parts[r+1];return n}{const parts=this.parts;return parts[0]+this.so.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.io(this)}}const Js={eo(t,s){for(let i=0,e=t.length;e>i;++i)s(t,i,t[i])},no(t,s){const i=Array(t.size);let e=-1;for(const s of t.entries())i[++e]=s;Js["eo"](i,s)},ro(t,s){const i=Array(t.size);let e=-1;for(const s of t.keys())i[++e]=s;Js["eo"](i,s)},ho(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Js["eo"](i,s)},oo(t,s){},lo(t,s){}},Ys={eo:t=>t.length,no:t=>t.size,ro:t=>t.size,ho:t=>t,oo:()=>0,lo:()=>0},IRenderable=DI.le("IRenderable").ue(),IViewFactory=DI.le("IViewFactory").ue(),ti=Object.freeze(Object.create(null)),ILifecycle=DI.le("ILifecycle").ae(t=>t.singleton(si));class si{constructor(){this.co=0,this.uo=0,this.ao=0,this.fo=0,this.do=this,this.po=this,this.bo=this,this.mo=this,this.wo=this,this.vo=this,this.yo=this,this.Co=this,this.To=this,this.Ao=this,this.Bo=this,this.Oo=this,this.Ro=this,this.Io=this,this.ko=this,this.So=this,this.Po=this,this.Lo=this,this.Eo=this,this.jo=this,this.Do=null,this.zi=Promise.resolve(),this.Mo=0,this.$o=0,this.xo=0,this.Vo=0,this.Fo=0,this.Uo=0,this.No=0,this.qo=0,this.Ho=0,this.zo=0,this.at=ti,this.flush=PLATFORM._i,this.Wo=ti,this.connect=PLATFORM._i,this.Ko=ti,this.pt=PLATFORM._i,this.Qo=ti,this.bound=PLATFORM._i,this.Go=ti,this.Zo=PLATFORM._i,this._o=ti,this.Xo=PLATFORM._i,this.Jo=ti,this.Yo=PLATFORM._i,this.tl=ti,this.sl=PLATFORM._i,this.il=ti,this.as=PLATFORM._i,this.el=ti,this.nl=PLATFORM._i,this.rl=null}static register(t){return Registration.singleton(ILifecycle,this).register(t)}hl(t){null===this.rl&&(this.rl=new AggregateLifecycleTask),this.rl.ol(t)}ll(t){null!==this.rl&&(this.rl===t?this.rl=null:this.rl.cl(t))}O(t){return this.do===this&&(this.Do=this.zi.then(()=>{this.ul(LifecycleFlags.Nn)})),null===t.at&&(t.at=ti,this.po.at=t,this.po=t,++this.Mo),this.Do}ul(t){for(t|=LifecycleFlags.qn;this.Mo>0;){let s,i=this.do.at;this.do=this.po=this,this.Mo=0;do{s=i.at,i.at=null,i.flush(t),i=s}while(i!==ti);if(t&LifecycleFlags.lt)break}}fs(){++this.co}ds(t){null===t.Qo&&(t.Qo=ti,this.Co.Qo=t,this.Co=t,++this.Vo)}al(t){null===t.Wo&&(t.Wo=ti,this.mo.Wo=t,this.mo=t,++this.$o),null===t.Ko&&(t.Ko=ti,this.vo.Ko=t,this.vo=t,++this.xo)}fl(t){if(this.$o>0){this.$o=0;let s,i=this.bo.Wo;this.bo=this.mo=this;do{i.connect(t),s=i.Wo,i.Wo=null,i=s}while(i!==ti)}}dl(t){for(t&LifecycleFlags.zn&&this.ul(t|LifecycleFlags.qn);this.xo>0;){this.xo=0;let s,i=this.wo.Ko;this.wo=this.vo=this;do{i.pt(t),s=i.Ko,i.Ko=null,i=s}while(i!==ti)}}ps(t){if(0==--this.co)return null===this.rl||this.rl.done?(this.gl(t),LifecycleTask.done):(this.rl.pl=this,this.rl)}gl(t){for(t&LifecycleFlags.zn&&this.ul(t|LifecycleFlags.qn);this.Vo>0;){this.Vo=0;let s,i=this.yo.Qo;this.yo=this.Co=this;do{i.bound(t),s=i.Qo,i.Qo=null,i=s}while(i!==ti)}}Cs(){++this.fo}As(t){null===t.el&&(t.el=ti,this.jo.el=t,this.jo=t,++this.zo)}Os(t){if(0==--this.fo)return null===this.rl||this.rl.done?(this.bl(t),LifecycleTask.done):(this.rl.pl=this,this.rl)}bl(t){for(;this.zo>0;){this.zo=0;let s,i=this.Eo.el;this.Eo=this.jo=this;do{i.nl(t),s=i.el,i.el=null,i=s}while(i!==ti)}}$t(){++this.uo}zt(t){null===t.Go&&(t.Go=ti,this.Ao.Go=t,this.Ao=t,++this.Fo)}Ft(t){null===t._o&&(t._o=ti,this.Oo._o=t,this.Oo=t,++this.Uo)}Ut(t){if(0==--this.uo)return null===this.rl||this.rl.done?(this.ml(t),LifecycleTask.done):(this.rl.pl=this,this.rl)}ml(t){if(this.ul(t|LifecycleFlags.qn),this.Fo>0){this.Fo=0;let s,i=this.To.Go;this.To=this.Ao=this;do{i.Zo(t),s=i.Go,i.Go=null,i=s}while(i!==ti)}if(this.fl(LifecycleFlags.Y),this.Uo>0){this.Uo=0;let s,i=this.Bo._o;this.Bo=this.Oo=this;do{i.Xo(t),s=i._o,i._o=null,i=s}while(i!==ti)}}Wt(){++this.ao}Jt(t){if(null===t.Jo&&(t.Jo=ti,this.Io.Jo=t,this.Io=t,++this.No),null!==t.Go){let s=this.To,i=s.Go;for(;i!==t;)i=(s=i).Go;s.Go=i.Go,i.Go=null,this.Ao===i&&(this.Ao=this),--this.Fo}}Gt(t){null===t.tl&&(t.tl=ti,this.So.tl=t,this.So=t,++this.qo)}wl(t){null===t.il&&(t.il=ti,this.Lo.il=t,this.Lo=t,++this.Ho)}Zt(t){if(0==--this.ao)return null===this.rl||this.rl.done?(this.vl(t),LifecycleTask.done):(this.rl.pl=this,this.rl)}vl(t){if(this.ul(t|LifecycleFlags.rt|LifecycleFlags.lt),this.No>0){this.No=0;let s,i=this.Ro.Jo;this.Ro=this.Io=this;do{i.Yo(t),s=i.Jo,i.Jo=null,i=s}while(i!==ti)}if(this.qo>0){this.qo=0;let s,i=this.ko.tl;this.ko=this.So=this;do{i.sl(t),s=i.tl,i.tl=null,i=s}while(i!==ti)}if(this.Ho>0){this.Cs(),this.Ho=0;let s,i=this.Po.il;this.Po=this.Lo=this;do{i.as(t),s=i.il,i.il=null,i=s}while(i!==ti);this.Os(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.yl=PLATFORM._i,this.currentView=null,this.vn=0,this.mn=0,this.Cl=null,this.Tl=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}Al(value,t){this.Tl.done?value instanceof Promise?(this.Bl(new ii(this,value)),this.Ol()):this.Rl(value,t):(value instanceof Promise?this.Bl(new ii(this,value)):this.Bl(value),this.Tl.Il()&&this.Tl.cancel())}gs(t,s){this.scope=s,this.mn=1,null!==this.currentView&&this.currentView.ws(t,s)}Vt(t){this.vn=1,null!==this.currentView&&this.currentView.qt(t)}Qt(t){this.vn=0,null!==this.currentView&&this.currentView.ts(t)}Bs(t){this.mn=0,null!==this.currentView&&this.currentView.as(t)}es(t){this.currentView=null}Bl(t){null===this.Cl&&(this.Cl=[]),this.Cl.push(t)}Rl(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let e,n=this.currentView;null===n?e=LifecycleTask.done:($lifecycle.wl(n),$lifecycle.Wt(),n.ts(s),e=$lifecycle.Zt(s)),i.ol(e),null===(n=this.currentView=t)?e=LifecycleTask.done:(this.mn&&($lifecycle.fs(),n.ws(s,this.scope),$lifecycle.ps(s)),this.vn?($lifecycle.$t(),n.qt(s),e=$lifecycle.Ut(s)):e=LifecycleTask.done),i.ol(e),i.done?(this.Tl=LifecycleTask.done,this.yl()):(this.Tl=i,this.Tl.kl().then(()=>{this.yl(),this.Ol()}).catch(t=>{throw t}))}Ol(){if(null!==this.Cl&&this.Cl.length>0){const t=this.Cl.pop();this.Cl.length=0,ii.is(t)?this.Tl=t.start():this.Rl(t,LifecycleFlags.Gn)}else this.Tl=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,Il:()=>0,cancel(){},kl:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.pl=null,this.resolve=null,this.Sl=[],this.Pl=null}ol(t){t.done||(this.done=0,this.Sl.push(t),t.kl().then(()=>{this.Ll()}).catch(t=>{throw t}))}cl(t){if(t.done){const s=this.Sl.indexOf(t);-1!==s&&this.Sl.splice(s,1)}0===this.Sl.length&&null!==this.pl&&(this.pl.ll(this),this.pl=null)}Il(){return this.done?0:this.Sl.every(t=>t.Il())}cancel(){this.Il()&&(this.Sl.forEach(t=>{t.cancel()}),this.done=0)}kl(){return null===this.Pl&&(this.Pl=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.Pl}Ll(){this.done||this.Sl.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.pl&&(this.pl.vl(LifecycleFlags.Gn),this.pl.bl(LifecycleFlags.Gn),this.pl.gl(LifecycleFlags.Gn),this.pl.ml(LifecycleFlags.Gn)),this.pl.ll(this),null!==this.resolve&&this.resolve()}}class ii{constructor(t,s){this.El=t,this.done=0,this.jl=0,this.zi=s}static is(t){return"start"in t}start(){return this.jl?LifecycleTask.done:(this.zi=this.zi.then(t=>(this.Dl(t),t)),this)}Il(){return!this.done}cancel(){this.Il()&&(this.jl=1)}kl(){return this.zi}Dl(value){this.jl||(this.done=1,this.El.Al(value,LifecycleFlags.Gn))}}const ei=[],ni=[];let ri=-1;k(-1);const{oneTime,Ns:hi,dn:oi}=BindingMode,li=hi|oneTime;let Binding=class{constructor(t,s,i,mode,e,n){this.vs=null,this.Is=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.Wo=null,this.Ko=null,this.$scope=null,this.Wr=n,this.mode=mode,this.it=e,this.Ml=t,this.target=s,this.$l=i,this.dt=LifecycleFlags.pn}xl(value,t){this.targetObserver.K(value,(t|=this.dt)|LifecycleFlags.G)}Vl(value,t){this.Ml.assign((t|=this.dt)|LifecycleFlags.Un,this.$scope,this.Wr,value)}B(t,s,i){if(!(2&this.$state))return;const e=this.Ml,$scope=this.$scope,n=this.Wr;if(i|=this.dt,this.mode===BindingMode.dn&&(i&=~LifecycleFlags.G,i|=LifecycleFlags.Un),i&LifecycleFlags.G){const mode=this.mode,s=this.targetObserver.W();return(10082!==e.X||this.tt>1)&&(t=e.evaluate(i,$scope,n)),t!==s&&this.xl(t,i),void(0==(mode&oneTime)&&(this.version++,e.connect(i,$scope,this),this.unobserve(0)))}if(!(i&LifecycleFlags.Un))throw Reporter.error(15,LifecycleFlags[i]);t!==e.evaluate(i,$scope,n)&&this.Vl(t,i)}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t|LifecycleFlags.ht)}this.$state|=1,this.dt=t&LifecycleFlags._s,this.$scope=s;let i=this.Ml;hasBind(i)&&i.bind(t,s,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&oi?this.it.st(t,this.target,this.$l):this.it.Fl(t,this.target,this.$l)),targetObserver.bind&&targetObserver.bind(t),i=this.Ml,mode&li&&this.xl(i.evaluate(t,s,this.Wr),t),mode&hi&&i.connect(t,s,this),mode&oi&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}as(t){if(!(2&this.$state))return;this.$state|=64,this.dt=LifecycleFlags.pn;const s=this.Ml;hasUnbind(s)&&s.Kr(t,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.Kr&&targetObserver.Kr(t),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(t){2&this.$state&&this.Ml.connect((t|=this.dt)|LifecycleFlags.Y,this.$scope,this)}pt(t){2&this.$state&&this.xl(this.Ml.evaluate((t|=this.dt)|LifecycleFlags.Y,this.$scope,this.Wr),t)}};Binding=c([connectable()],Binding);class Call{constructor(t,s,i,e,n){this.vs=null,this.Is=null,this.$state=0,this.Wr=n,this.Ml=t,this.targetObserver=e.st(LifecycleFlags.pn,s,i)}Ul(t){const s=this.$scope.Cr;Object.assign(s,t);const i=this.Ml.evaluate(LifecycleFlags.Y,this.$scope,this.Wr);for(const i in t)delete s[i];return i}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=s;const i=this.Ml;hasBind(i)&&i.bind(t,s,this),this.targetObserver.K(t=>this.Ul(t),t),this.$state|=2,this.$state&=-2}as(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Ml;hasUnbind(s)&&s.Kr(t,this.$scope,this),this.$scope=null,this.targetObserver.K(null,t),this.$state&=-67}nt(t,s,i){}B(t,s,i){}}const IExpressionParser=DI.le("IExpressionParser").ae(t=>t.singleton(ci));class ci{constructor(){this.Nl=Object.create(null),this.ql=Object.create(null),this.Hl=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.Hl[t];return void 0===i&&(i=this.Hl[t]=this.zl(t,s)),i}case 539:{let i=this.ql[t];return void 0===i&&(i=this.ql[t]=this.zl(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.Uh;let i=this.Nl[t];return void 0===i&&(i=this.Nl[t]=this.zl(t,s)),i}}}cache(t){const{ql:s,Nl:i,Hl:e}=this;for(const n in t){const r=t[n];switch(r.X){case 24:e[n]=r;break;case 55:s[n]=r;break;default:i[n]=r}}}zl(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),PLATFORM.Zi):new AccessScope(parts[0]);let e=1;for(;parts.length>e;){const t=parts[e];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),PLATFORM.Zi):new AccessMember(i,parts[e]),e++}return i}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Jn=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.Wl=1280]="IsRef",BindingType[BindingType.Kl=512]="IsIterator",BindingType[BindingType.Ql=256]="IsCustom",BindingType[BindingType.Gl=128]="IsFunction",BindingType[BindingType.Zl=64]="IsEvent",BindingType[BindingType._l=32]="IsProperty",BindingType[BindingType.Xl=16]="IsCommand",BindingType[BindingType.Jl=48]="IsPropertyCommand",BindingType[BindingType.Yl=80]="IsEventCommand",BindingType[BindingType.tc=6]="DelegationStrategyDelta",BindingType[BindingType.sc=15]="Command",BindingType[BindingType.ic=49]="OneTimeCommand",BindingType[BindingType.ec=50]="ToViewCommand",BindingType[BindingType.nc=51]="FromViewCommand",BindingType[BindingType.rc=52]="TwoWayCommand",BindingType[BindingType.hc=53]="BindCommand",BindingType[BindingType.oc=86]="TriggerCommand",BindingType[BindingType.lc=87]="CaptureCommand",BindingType[BindingType.cc=88]="DelegateCommand",BindingType[BindingType.uc=153]="CallCommand",BindingType[BindingType.ac=26]="OptionsCommand",BindingType[BindingType.fc=539]="ForCommand",BindingType[BindingType.dc=284]="CustomCommand"})(BindingType||(BindingType={}));const{Ns:ui,oneTime:ai}=BindingMode;class MultiInterpolationBinding{constructor(t,s,i,e,mode,n){this.vs=null,this.Is=null,this.$state=0,this.$scope=null,this.gc=s,this.Wr=n,this.mode=mode,this.it=t,this.target=i,this.$l=e;const r=s.J,parts=this.parts=Array(r.length);for(let h=0,o=r.length;o>h;++h)parts[h]=new InterpolationBinding(r[h],s,i,e,mode,t,n,0===h)}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,e=parts.length;e>i;++i)parts[i].ws(t,s)}as(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].as(t)}}let InterpolationBinding=class{constructor(t,s,i,e,mode,n,r,h){this.$state=0,this.gc=s,this.pc=h,this.mode=mode,this.Wr=r,this.it=n,this.Ml=t,this.target=i,this.$l=e,this.targetObserver=n.Fl(LifecycleFlags.pn,i,e)}xl(value,t){this.targetObserver.K(value,t|LifecycleFlags.G)}B(t,s,i){if(!(2&this.$state))return;const e=this.targetObserver.W(),n=this.gc.evaluate(i,this.$scope,this.Wr);n!==e&&this.xl(n,i),0==(this.mode&ai)&&(this.version++,this.Ml.connect(i,this.$scope,this),this.unobserve(0))}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t)}this.$state|=2,this.$scope=s;const i=this.Ml;i.bind&&i.bind(t,s,this),this.pc&&this.xl(this.gc.evaluate(t,s,this.Wr),t),this.mode&ui&&i.connect(t,s,this)}as(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.Ml;s.Kr&&s.Kr(t,this.$scope,this),this.$scope=null,this.unobserve(1)}};InterpolationBinding=c([connectable()],InterpolationBinding);let LetBinding=class{constructor(t,s,i,e,toViewModel=0){this.vs=null,this.Is=null,this.$state=0,this.$lifecycle=e.get(ILifecycle),this.$scope=null,this.Wr=e,this.it=i,this.Ml=t,this.target=null,this.$l=s,this.toViewModel=toViewModel}B(t,s,i){if(2&this.$state){if(!(i&LifecycleFlags.G))throw Reporter.error(15,i);{const{target:t,$l:s}=this,e=t[s],n=this.Ml.evaluate(i,this.$scope,this.Wr);n!==e&&(t[s]=n)}}}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=s,this.target=this.toViewModel?s.Ar:s.Cr;const i=this.Ml;i.bind&&i.bind(t,s,this),this.target[this.$l]=this.Ml.evaluate(LifecycleFlags.ht,s,this.Wr),this.Ml.connect(t,s,this),this.$state|=2,this.$state&=-2}as(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Ml;s.Kr&&s.Kr(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}};LetBinding=c([connectable()],LetBinding);class Ref{constructor(t,s,i){this.vs=null,this.Is=null,this.$state=0,this.Wr=i,this.Ml=t,this.target=s}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=s;const i=this.Ml;hasBind(i)&&i.bind(t,s,this),this.Ml.assign(t,this.$scope,this.Wr,this.target),this.$state|=2,this.$state&=-2}as(t){if(!(2&this.$state))return;this.$state|=64,this.Ml.evaluate(t,this.$scope,this.Wr)===this.target&&this.Ml.assign(t,this.$scope,this.Wr,null);const s=this.Ml;hasUnbind(s)&&s.Kr(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,s,i){}B(t,s,i){}}let CollectionLengthObserver=class{constructor(t,s){this.N=t,this.q=s,this.H=t[s]}W(){return this.N[this.q]}ut(t){this.N[this.q]=t}pt(t){this.C(this.N[this.q],this.H,t),this.H=this.N[this.q]}subscribe(t){this.u(t)}unsubscribe(t){this.g(t)}};CollectionLengthObserver=c([targetObserver()],CollectionLengthObserver);const fi=Array.prototype,di=fi.push,gi=fi.unshift,pi=fi.pop,bi=fi.shift,mi=fi.splice,wi=fi.reverse,vi=fi.sort,yi={push:di,unshift:gi,pop:pi,shift:bi,splice:mi,reverse:wi,sort:vi},Ci=["push","unshift","pop","shift","splice","reverse","sort"],Ti={push(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return di.apply(t,arguments);const i=t.length,e=arguments.length;if(0===e)return i;t.length=s.ft.length=i+e;let n=i;for(;t.length>n;)t[n]=arguments[n-i],s.ft[n]=-2,n++;return s.C("push",arguments,s.dt|LifecycleFlags.xn),t.length},unshift(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return gi.apply(t,arguments);const i=arguments.length,e=Array(i);let n=0;for(;i>n;)e[n++]=-2;gi.apply(s.ft,e);const r=gi.apply(t,arguments);return s.C("unshift",arguments,s.dt|LifecycleFlags.xn),r},pop(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return pi.call(t);const i=s.ft,e=pi.call(t);return i[i.length-1]>-1&&pi.call(i.vt,e),pi.call(i),s.C("pop",arguments,s.dt|LifecycleFlags.xn),e},shift(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return bi.call(t);const i=s.ft,e=bi.call(t);return i[0]>-1&&bi.call(i.vt,e),bi.call(i),s.C("shift",arguments,s.dt|LifecycleFlags.xn),e},splice(t,s){let i=this;void 0!==i.ur&&(i=i.ur);const e=i.wt;if(void 0===e)return mi.apply(i,arguments);const n=e.ft;if(s>0){let e=isNaN(t)?0:t;const to=e+s;for(;to>e;)n[e]>-1&&mi.call(n.vt,i[e]),e++}const r=arguments.length;if(r>2){const i=r-2,e=Array(i);let h=0;for(;i>h;)e[h++]=-2;mi.call(n,t,s,...e)}else 2===r&&mi.call(n,t,s);const h=mi.apply(i,arguments);return e.C("splice",arguments,e.dt|LifecycleFlags.xn),h},reverse(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return wi.call(t),this;const i=t.length,e=i/2|0;let n=0;for(;n!==e;){const e=i-n-1,r=t[n],h=s.ft[n],o=s.ft[e];t[n]=t[e],s.ft[n]=o,t[e]=r,s.ft[e]=h,n++}return s.C("reverse",arguments,s.dt|LifecycleFlags.xn),this},sort(t){let s=this;void 0!==s.ur&&(s=s.ur);const i=s.wt;if(void 0===i)return vi.call(s,t),this;const e=s.length;if(2>e)return this;z(s,i.ft,0,e,q);let n=0;for(;e>n&&void 0!==s[n];)n++;return void 0!==t&&"function"==typeof t||(t=N),z(s,i.ft,0,n,t),i.C("sort",arguments,i.dt|LifecycleFlags.xn),this}},Ai={bc:1,Gs:0,pr:1},def=Object.defineProperty;for(const t of Ci)def(Ti[t],"observing",{value:1,bc:0,pr:0,Gs:0});enableArrayObservation();let ArrayObserver=class{constructor(t,s,i){this.R=s,i.wt=this,this.T=i,this.flags=t&LifecycleFlags._s,this.bt()}};ArrayObserver=c([collectionObserver(9)],ArrayObserver);const Bi=Map.prototype,Oi=Bi.set,Ri=Bi.clear,Ii=Bi.delete,ki={set:Oi,clear:Ri,delete:Ii},Si=["set","clear","delete"],Pi={set(t,value){let s=this;void 0!==s.ur&&(s=s.ur);const i=s.wt;if(void 0===i)return Oi.call(s,t,value),this;const e=s.size;if(Oi.call(s,t,value),s.size===e){let e=0;for(const n of s.entries()){if(n[0]===t)return n[1]!==value&&(i.ft[e]=-2),this;e++}return this}return i.ft[e]=-2,i.C("set",arguments,i.dt|LifecycleFlags.xn),this},clear(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return Ri.call(t);if(t.size>0){const i=s.ft;let e=0;for(const s of t.keys())i[e]>-1&&i.vt.push(s),e++;Ri.call(t),i.length=0,s.C("clear",arguments,s.dt|LifecycleFlags.xn)}},delete(value){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return Ii.call(t,value);if(0===t.size)return 0;let i=0;const e=s.ft;for(const s of t.keys()){if(s===value)return e[i]>-1&&e.vt.push(s),e.splice(i,1),Ii.call(t,value);i++}return s.C("delete",arguments,s.dt|LifecycleFlags.xn),0}},Li={bc:1,Gs:0,pr:1},Ei=Object.defineProperty;for(const t of Si)Ei(Pi[t],"observing",{value:1,bc:0,pr:0,Gs:0});enableMapObservation();let MapObserver=class{constructor(t,s,i){this.R=s,i.wt=this,this.T=i,this.flags=t&LifecycleFlags._s,this.bt()}};MapObserver=c([collectionObserver(6)],MapObserver);const ji=Set.prototype,Di=ji.add,Mi=ji.clear,$i=ji.delete,xi={add:Di,clear:Mi,delete:$i},Vi=["add","clear","delete"],Fi={add(value){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return Di.call(t,value),this;const i=t.size;return Di.call(t,value),t.size===i?this:(s.ft[i]=-2,s.C("add",arguments,s.dt|LifecycleFlags.xn),this)},clear(){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return Mi.call(t);if(t.size>0){const i=s.ft;let e=0;for(const s of t.keys())i[e]>-1&&i.vt.push(s),e++;Mi.call(t),i.length=0,s.C("clear",arguments,s.dt|LifecycleFlags.xn)}},delete(value){let t=this;void 0!==t.ur&&(t=t.ur);const s=t.wt;if(void 0===s)return $i.call(t,value);if(0===t.size)return 0;let i=0;const e=s.ft;for(const s of t.keys()){if(s===value)return e[i]>-1&&e.vt.push(s),e.splice(i,1),$i.call(t,value);i++}return s.C("delete",arguments,s.dt|LifecycleFlags.xn),0}},Ui={bc:1,Gs:0,pr:1},Ni=Object.defineProperty;for(const t of Vi)Ni(Fi[t],"observing",{value:1,bc:0,pr:0,Gs:0});enableSetObservation();let SetObserver=class{constructor(t,s,i){this.R=s,i.wt=this,this.T=i,this.flags=t&LifecycleFlags._s,this.bt()}};SetObserver=c([collectionObserver(7)],SetObserver);const qi={mc:0,wc:0};let CustomSetterObserver=class{constructor(t,s,i){this.N=t,this.q=s,this.H=this.oldValue=void 0,this.vc=i,this.U=0}K(t){this.vc.set.call(this.N,t),this.H!==t&&(this.oldValue=this.H,this.H=t,this.C(t,this.oldValue,LifecycleFlags.G))}subscribe(t){this.U||this.yc(),this.u(t)}unsubscribe(t){this.g(t)}yc(){this.U=1,this.H=this.N[this.q],Reflect.defineProperty(this.N,this.q,{set:t=>{this.K(t)}})}};CustomSetterObserver=c([subscriberCollection(MutationKind.v)],CustomSetterObserver);let GetterObserver=class{constructor(t,s,i,e,n,r,h){this.N=i,this.q=e,this.Cc=0,this.H=this.oldValue=void 0,this.Tc=[],this.Ac=[],this.Bc=s,this.Oc=0,this.vc=n,this.A=new Proxy(i,(function t(s,i,e){return{get(n,r,h){if(e.Rc(r))return Reflect.get(n,r,h);switch(Hi.call(n)){case"[object Array]":if(e.Ic(i.kc(s,n)),"length"===r)return Reflect.get(n,r,n);case"[object Map]":if(e.Ic(i.Sc(s,n)),"size"===r)return Reflect.get(n,r,n);case"[object Set]":if(e.Ic(i.Pc(s,n)),"size"===r)return Reflect.get(n,r,n);default:e.Lc(i.st(s,n,r))}return(function(s,i,e,n,r){const value=Reflect.get(i,e,i);return"function"==typeof value?i[e].bind(i):"object"!=typeof value||null===value?value:new Proxy(value,t(s,n,r))})(s,n,r,i,e)}}})(t,r,this)),Reflect.defineProperty(i,e,{get:()=>this.W()})}Lc(t){-1===this.Tc.indexOf(t)&&this.Tc.push(t)}Ic(t){-1===this.Ac.indexOf(t)&&this.Ac.push(t)}W(){return this.H=0===this.Oc||this.Cc?Reflect.apply(this.vc.get,this.A,PLATFORM.Zi):Reflect.apply(this.vc.get,this.N,PLATFORM.Zi),this.H}subscribe(t){this.u(t),1==++this.Oc&&this.Ec(1)}unsubscribe(t){this.g(t),0==--this.Oc&&this.jc()}B(){const t=this.H,s=this.Ec(0);t!==s&&this.C(s,t,LifecycleFlags.G)}F(){const t=this.H,s=this.Ec(0);t!==s&&this.C(s,t,LifecycleFlags.rt|LifecycleFlags.G)}Ec(t){const s=!this.Bc.mc||t;return s&&(this.jc(),this.Cc=1),this.H=this.W(),s&&(this.Tc.forEach(t=>{t.subscribe(this)}),this.Ac.forEach(t=>{t.Bt(this)}),this.Cc=0),this.H}Rc(t){return!this.Cc||"$observers"===t}jc(){this.Tc.forEach(t=>{t.unsubscribe(this)}),this.Tc.length=0,this.Ac.forEach(t=>{t.Ot(this)}),this.Ac.length=0}};GetterObserver=c([subscriberCollection(MutationKind.v)],GetterObserver);const Hi={}.toString,IDirtyChecker=DI.le("IDirtyChecker").ae(t=>t.singleton(zi)),DirtyCheckSettings={Dc:6,disabled:0,warn:1,Mc:0,$c(){this.Dc=6,this.disabled=0,this.warn=1,this.Mc=0}};class zi{constructor(){this.xc=0,this.Vc=[]}Fc(t,s){if(DirtyCheckSettings.Mc)throw Reporter.error(800);return DirtyCheckSettings.warn&&Reporter.write(801),new DirtyCheckProperty(this,t,s)}Uc(t){this.Vc.push(t),1===this.Vc.length&&PLATFORM.Fi.add(this.Nc,this)}removeProperty(t){this.Vc.splice(this.Vc.indexOf(t),1),0===this.Vc.length&&PLATFORM.Fi.remove(this.Nc,this)}Nc(t){if(DirtyCheckSettings.disabled)return;if(++this.xc<DirtyCheckSettings.Dc)return;this.xc=0;const s=this.Vc,i=s.length;let e,n=0;for(;i>n;++n)(e=s[n]).qc()&&e.flush(LifecycleFlags.Hn)}}let DirtyCheckProperty=class{constructor(t,s,i){this.N=s,this.q=i,this.Hc=t}qc(){return this.oldValue!==this.N[this.q]}flush(t){const s=this.N[this.q];this.C(s,this.oldValue,t|LifecycleFlags.G),this.oldValue=s}subscribe(t){this.m()||(this.oldValue=this.N[this.q],this.Hc.Uc(this)),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.Hc.removeProperty(this)}};DirtyCheckProperty=c([propertyObserver()],DirtyCheckProperty);const Wi=PLATFORM._i;class PrimitiveObserver{constructor(t,s){this.zc=1,"length"===s?(this.N=t,this.W=this.Wc):this.W=this.Kc}Wc(){return this.N.length}Kc(){}}PrimitiveObserver.prototype.K=Wi,PrimitiveObserver.prototype.subscribe=Wi,PrimitiveObserver.prototype.unsubscribe=Wi,PrimitiveObserver.prototype.Z=Wi;class PropertyAccessor{constructor(t,s){this.N=t,this.q=s}W(){return this.N[this.q]}K(value){this.N[this.q]=value}}const Ki={}.toString,IObserverLocator=DI.le("IObserverLocator").ue(),ITargetObserverLocator=DI.le("ITargetObserverLocator").ue(),ITargetAccessorLocator=DI.le("ITargetAccessorLocator").ue();class Qi{constructor(t,s,i,e){this.Qc=[],this.Hc=s,this.R=t,this.Gc=i,this.Zc=e}static register(t){return Registration.singleton(IObserverLocator,this).register(t)}st(t,s,i){if(t&LifecycleFlags.Dt&&"object"==typeof s)return ProxyObserver.Ls(s,i);if((function(t){return 1==t.yr})(s))return s.Br(t).Ls(t,s,i);let e,n=s.Zs;return n&&i in n?n[i]:((e=this._c(t,s,i)).zc||(void 0===n&&(n=this.Xc(s)),n[i]=e),e)}Jc(t){this.Qc.push(t)}Fl(t,s,i){return this.Zc.Yc(t,s)?this.Gc.tu(t,s,i)?this.st(t,s,i):this.Zc.Fl(t,this.R,s,i):t&LifecycleFlags.Dt?ProxyObserver.Ls(s,i):new PropertyAccessor(s,i)}kc(t,s){return W(t,this.R,s)}Sc(t,s){return K(t,this.R,s)}Pc(t,s){return Q(t,this.R,s)}Xc(t){return t.Zs||this.su(t)}su(t){const value={};return Reflect.defineProperty(t,"$observers",{Gs:0,pr:0,bc:0,value})||Reporter.write(0,t),value}iu(t,s,i,e){for(let n=0,r=this.Qc.length;r>n;n++){const r=this.Qc[n].st(t,s,i,e);if(r)return r}return null}_c(t,s,i){if(!(s instanceof Object))return new PrimitiveObserver(s,i);let e=0;if(this.Gc.Yc(t,s)){const n=this.Gc.st(t,this.R,this,s,i);if(null!==n)return n;if(null!==n)return n;e=1}switch(Ki.call(s)){case"[object Array]":return"length"===i?this.kc(t,s).At(t):this.Hc.Fc(s,i);case"[object Map]":return"size"===i?this.Sc(t,s).At(t):this.Hc.Fc(s,i);case"[object Set]":return"size"===i?this.Pc(t,s).At(t):this.Hc.Fc(s,i)}const n=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(s,i);if(n&&(n.get||n.set)){if(n.get&&n.get.st)return n.get.st(s);return this.iu(t,s,i,n)||(e?this.Hc.Fc(s,i):(function(t,s,i,e,n,r,h){if(0==h.pr)return i.Fc(n,r);if(h.get){const i=n.constructor.computed&&n.constructor.computed[r]||qi;return h.set?i.wc?new GetterObserver(t,i,n,r,h,s,e):new CustomSetterObserver(n,r,h):new GetterObserver(t,i,n,r,h,s,e)}throw Reporter.error(18,r)})(t,this,this.Hc,this.R,s,i,n))}return new SetterObserver(t,s,i)}}Qi.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const Gi=PLATFORM._i;let SelfObserver=class{constructor(t,s,i,e){this.dt=t&LifecycleFlags._s,ProxyObserver.dr(s)?(s.wt.subscribe(this,i),this.N=s.ur,this.q=i,this.H=s.ur[i],this.Us=e in s.ur?s[e].bind(s):Gi):(this.N=s,this.q=i,this.H=s[i],this.Us=e in s?s[e].bind(s):Gi)}B(t,s,i){this.K(t,i)}W(){return this.H}K(t,s){const i=this.H;if(i!==t&&(this.H=t,!(s&LifecycleFlags.ht))){const e=this.Us(t,i,s);void 0!==e&&(this.H=t=e),this.C(t,i,s)}}};SelfObserver=c([propertyObserver()],SelfObserver);const{oneTime:Zi,Ns:_i,dn:Xi,gn:Ji}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.eu=i.mode,i.mode=this.mode}Kr(t,s,i){i.mode=i.eu,i.eu=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Zi)}}BindingBehaviorResource.Er("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(_i)}}BindingBehaviorResource.Er("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(Xi)}}BindingBehaviorResource.Er("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Ji)}}BindingBehaviorResource.Er("twoWay",TwoWayBindingBehavior);const Yi={},te=BindingMode.dn;class DebounceBindingBehavior{bind(t,s,i,e=200){let n,r,h;i instanceof Binding?(n="handleChange",h=Z,r=i.mode&te?LifecycleFlags.Un:LifecycleFlags.G):(n="callSource",h=G,r=LifecycleFlags.G),i.kt=i[n],i.kt.nu=n,i[n]=h,i.Rt={Pt:r,St:e,It:0,oldValue:Yi}}Kr(t,s,i){i[i.kt.nu]=i.kt,i.kt=null,PLATFORM.global.clearTimeout(i.Rt.It),i.Rt=null}}BindingBehaviorResource.Er("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.ru=t}bind(t,s,i,...e){if(!i.xl)throw Reporter.error(11);if(4===arguments.length){const name=e[0];this.ru.Sr(name,i),i.hu=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.ru.Sr(t[s],i);i.hu=t}}}Kr(t,s,i){const name=i.hu;if(i.hu=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.ru.Pr(t[s],i)}else this.ru.Pr(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.Er("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,s,i,e=200){let n;i.jt=i[n=i instanceof Binding?i.mode===BindingMode.gn?"updateSource":"updateTarget":"callSource"],i.jt.nu=n,i[n]=_,i.Lt={St:e,Et:0,It:-1}}Kr(t,s,i){i[i.jt.nu]=i.jt,i.jt=null,PLATFORM.global.clearTimeout(i.Lt.It),i.Lt=null}}BindingBehaviorResource.Er("throttle",ThrottleBindingBehavior);const se="custom-element",ie="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.ou="ra",TargetedInstructionType.lu="rb",TargetedInstructionType.cu="rc",TargetedInstructionType.uu="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.gc="rf",TargetedInstructionType.fu="rg",TargetedInstructionType.du="rh",TargetedInstructionType.gu="ri",TargetedInstructionType.pu="rj",TargetedInstructionType.bu="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.le("createInterface").ue(),ee=Object.freeze({required:1,compiler:"default"}),ne=Object.freeze({required:0,compiler:"default"});class re{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=ne,this.bindables=PLATFORM.Mt,this.instructions=PLATFORM.Zi,this.dependencies=PLATFORM.Zi,this.surrogates=PLATFORM.Zi,this.containerless=0,this.shadowOptions=null,this.hasSlots=0,this.Dt=0}}const he=["name","template","cache","build","containerless","shadowOptions","hasSlots","useProxies"],oe=["instructions","dependencies","surrogates"],CustomAttributeResource=(Profiler.Se("AttachLifecycle"),Profiler.Se("BindLifecycle"),Profiler.Se("RenderLifecycle"),{name:ie,_:Y,Lr(t){return t.kind===this},Er(t,s){const i=s,e=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Zi:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Ns:defaultBindingMode,xs:void 0===def.xs?0:def.xs,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},t.bindables,def.bindables),Dt:void 0===def.Dt?0:def.Dt}})("string"==typeof t?{name:t}:t,i),n=i.prototype;return i.kind=CustomAttributeResource,i.description=e,i.register=Ct,n.mu=vt,n.ws=dt,n.qt=tt,n.ts=et,n.as=bt,n.rs=ht,n.Is=null,n.vs=null,n.ss=null,n.Ht=null,n.il=null,n.$scope=null,n.$hooks=0,n.$state=0,"flush"in n&&(n.at=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Qo=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.el=null),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n._o=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.tl=null),i}}),INode=DI.le("INode").ue(),IRenderLocation=DI.le("IRenderLocation").ue(),IDOM=DI.le("IDOM").ue(),NodeSequence={empty:{childNodes:PLATFORM.Zi,firstChild:null,lastChild:null,wu:()=>PLATFORM.Zi,insertBefore(t){},vu(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.El=i,this.yu=null,this.Cu=null,this.Tu=t,this.Au=null,this.location=s}gs(t){const s=this.Bu(t);this.El.Al(s,t),this.El.gs(t,this.$scope)}Vt(t){this.El.Vt(t)}Qt(t){this.El.Qt(t)}Bs(t){this.El.Bs(t)}es(t){null!==this.Au&&this.Au.release(t)&&(this.Au=null),null!==this.Cu&&this.Cu.release(t)&&(this.Cu=null),this.El.es(t)}Ou(t,s,i){if(3&this.$state)if(ProxyObserver.dr(this)&&(i|=LifecycleFlags.Dt),i&LifecycleFlags.rt){const t=this.Bu(i);this.El.Al(t,i)}else this.$lifecycle.O(this).catch(t=>{throw t})}flush(t){ProxyObserver.dr(this)&&(t|=LifecycleFlags.Dt);const s=this.Bu(t);this.El.Al(s,t)}Bu(t){return this.value?this.Au=this.Ru(this.Au,this.Tu,t):null!==this.yu?this.Cu=this.Ru(this.Cu,this.yu,t):null}Ru(t,s,i){return null===t&&(t=s.create(i)),t.Iu(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],c([bindable],If.prototype,"value",void 0),CustomAttributeResource.Er({name:"if",isTemplateController:1},If);class Else{constructor(t){this.ku=t}link(t){t.yu=this.ku}}Else.inject=[IViewFactory],CustomAttributeResource.Er({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.ku=i,this.Su=0,this.location=t,this.Pu=null,this.Lu=s,this.Eu=[]}gs(t){this.ju(t);let s=this.Lu.ms;for(;null!==s;){if(ProxyObserver.ar(s.target)===ProxyObserver.ar(this)&&"items"===s.$l){this.Du=s.Ml;break}s=s.vs}this.Mu=this.Du.Zh.evaluate(t,this.$scope,null),this.$u(null,t)}Vt(t){const{Eu:s,location:i}=this;for(let e=0,n=s.length;n>e;++e){const n=s[e];n.Iu(i),n.qt(t)}}Qt(t){const{Eu:s}=this;for(let i=0,e=s.length;e>i;++i){const e=s[i];e.ts(t),e.release(t)}}Bs(t){this.ju(t);const{Eu:s}=this;for(let i=0,e=s.length;e>i;++i)s[i].as(t)}xu(t,s,i){this.ju(i),this.$u(null,i|LifecycleFlags.G)}F(t,s){this.$u(t,s|LifecycleFlags.rt|LifecycleFlags.G)}$u(t,s){ProxyObserver.dr(this)&&(s|=LifecycleFlags.Dt);const{Eu:i,$lifecycle}=this;if(3&this.$state){const{Mu:e,$scope,ku:n,Du:r,Vu:h}=this,o=i.length,l=r.count(h);if(l>o){i.length=l;for(let t=o;l>t;++t)i[t]=n.create(s)}else if(o>l){$lifecycle.Wt();for(let t=l,e=i[t];o>t;e=i[++t])e.release(s),e.ts(s);$lifecycle.Zt(s),$lifecycle.Cs();for(let t=l,e=i[t];o>t;e=i[++t])e.as(s);if($lifecycle.Os(s),i.length=l,0===l)return}else if(0===l)return;$lifecycle.fs(),r.Xh(h,null===t?(t,n,r)=>{const h=i[n];h.ws(s,Scope.Rr(s,$scope,h.$scope&&h.$scope.Ar[e]===r?h.$scope.Ar:BindingContext.create(s,e,r)))}:(n,r,h)=>{const o=i[r];o.ws(s,Scope.Rr(s,$scope,!o.$scope||t[r]!==r&&o.$scope.Ar[e]!==h?BindingContext.create(s,e,h):o.$scope.Ar))}),$lifecycle.ps(s)}if(12&this.$state){const{location:e}=this;if($lifecycle.$t(),null===t)for(let t=0,n=i.length;n>t;++t){const n=i[t];n.Iu(e),n.qt(s)}else for(let n=0,r=i.length;r>n;++n)if(t[n]!==n){const t=i[n];t.Iu(e),t.qt(s)}$lifecycle.Ut(s)}}ju(t){const s=this.Pu;if(3&this.$state){const i=this.Pu=getCollectionObserver(t,this.$lifecycle,this.Vu);s!==i&&s&&s.Ot(this),i&&i.Bt(this)}else s&&s.Ot(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],c([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.Er({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.ku=t,this.currentView=this.ku.create(),this.currentView.Iu(s)}gs(t){this.currentView.ws(t|LifecycleFlags._n,this.$scope)}Vt(t){this.currentView.qt(t)}Qt(t){this.currentView.ts(t)}Bs(t){this.currentView.as(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.Er({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.ku=t,this.currentView=this.ku.create(),this.currentView.Iu(s)}Ou(){3&this.$state&&this.Fu(LifecycleFlags.Qn)}gs(t){this.Fu(t)}Vt(t){this.currentView.qt(t)}Qt(t){this.currentView.ts(t)}Bs(t){this.currentView.as(t)}Fu(t){const s=Scope.Rr(t,this.$scope,this.value);this.currentView.ws(t,s)}}With.inject=[IViewFactory,IRenderLocation],c([bindable],With.prototype,"value",void 0),CustomAttributeResource.Er({name:"with",isTemplateController:1},With);const IProjectorLocator=DI.le("IProjectorLocator").ue(),CustomElementResource={name:se,_:X,Lr(t){return t.kind===this},Uu:J,Er(t,s=null){if(!t)throw Reporter.error(70);const i=null===s?class{}:s,e=buildTemplateDefinition(i,t),n=i.prototype;return i.kind=CustomElementResource,i.description=e,i.register=At,n.mu=yt,n.ws=gt,n.qt=st,n.ts=nt,n.as=mt,n.rs=ot,n.Is=null,n.vs=null,n.ss=null,n.Ht=null,n.il=null,n.$scope=null,n.$hooks=0,n.ms=null,n.Rs=null,n.ys=null,n.ks=null,n.Nt=null,n.Yt=null,n.Zo=ct,n.Yo=ut,n.Go=null,n.Jo=null,n.os=null,"flush"in n&&(n.at=null),"binding"in n&&(n.$hooks|=4),"bound"in n&&(n.$hooks|=8,n.Qo=null),"unbinding"in n&&(n.$hooks|=256),"unbound"in n&&(n.$hooks|=512,n.el=null),"render"in n&&(n.$hooks|=1024),"created"in n&&(n.$hooks|=2),"attaching"in n&&(n.$hooks|=16),"attached"in n&&(n.$hooks|=32,n._o=null),"detaching"in n&&(n.$hooks|=64),"caching"in n&&(n.$hooks|=2048),"detached"in n&&(n.$hooks|=128,n.tl=null),i}},le={mode:"open"},ISanitizer=DI.le("ISanitizer").ae(t=>t.singleton(class{Nu(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.qu=t}Ns(t){return null==t?null:this.qu.Nu(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.Er("sanitize",SanitizeValueConverter);class ce{constructor($lifecycle,cache){this.ms=null,this.Rs=null,this.ys=null,this.ks=null,this.vs=null,this.Is=null,this.Nt=null,this.Yt=null,this.Ht=null,this.ss=null,this.Go=null,this.Jo=null,this.il=null,this.$state=0,this.$scope=null,this.cs=0,this.$lifecycle=$lifecycle,this.cache=cache}Iu(t){this.cs=0,this.location=t}release(t){return this.cs=1,8&this.$state?this.cache.Hu(this):!!this.Yo(t)}zu(t){this.$scope=t,this.ws=Ot,this.as=Rt}}class ue{constructor(name,template,t){this.Wu=0,this.Ku=-1,this.cache=null,this.R=t,this.name=name,this.template=template}Qu(t,s){t&&("*"===t?t=ue.Gu:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.Ku&&s||(this.Ku=t)),this.cache=this.Ku>0?[]:null,this.Wu=this.Ku>0}Hu(t){return null!==this.cache&&this.Ku>this.cache.length}us(t){return this.Hu(t)?(t.rs(LifecycleFlags.pn),this.cache.push(t),1):0}create(t){const cache=this.cache;let s;if(null!==cache&&cache.length>0)return(s=cache.pop()).$state&=-129,s;if(s=new ce(this.R,this),this.template.Ds(s,null,null,t),!s.$nodes)throw Reporter.error(90);return s}}ue.Gu=65535,(t=>{t.ws=pt,t.as=wt,t.qt=it,t.ts=rt,t.rs=lt,t.Zo=at,t.Yo=ft})(ce.prototype);const ITemplateCompiler=DI.le("ITemplateCompiler").ue();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.pn=1]="none",ViewCompileFlags[ViewCompileFlags.Zu=2]="surrogate",ViewCompileFlags[ViewCompileFlags._u=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.le("ITemplateFactory").ue();class CompiledTemplate{constructor(dom,t,s,i){this.dom=dom,this.Xu=t,this.ku=s,this.Ju=i}Ds(t,host,parts,s=LifecycleFlags.pn){const i=t.$nodes=this.ku.Yu();t.$context=this.Ju,this.Xu.Dt&&(s|=LifecycleFlags.Dt),this.Ju.Ds(s,t,i.wu(),this.Xu,host,parts)}}const ae={Ju:null,dom:null,Ds(t){t.$nodes=NodeSequence.empty,t.$context=null}},fe="default",IInstructionRenderer=DI.le("IInstructionRenderer").ue(),IRenderer=DI.le("IRenderer").ue(),IRenderingEngine=DI.le("IRenderingEngine").ae(t=>t.singleton(de));class de{constructor(t,s,i,e){this.ta=new Map,this.sa=t,this.ia=s,this.ea=new Map,this.R=i,this.na=new Map,this.ra=e.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}Ms(dom,t,s,i){if(!t)return null;let e=this.na.get(t);return e||(e=this.ha(dom,t,s,i),this.na.set(t,e)),e}oa(dom,t,s){if(!t)return null;let i=this.ea.get(t);if(!i){const e=buildTemplateDefinition(null,t),template=this.ha(dom,e,s,null);(i=new ue(e.name,template,this.R)).Qu(e.cache,1),this.ea.set(t,i)}return i}Ss(t,s,i){let e=this.ta.get(s);e||(e=me.create(s),this.ta.set(s,e)),e.la(t,i,this.R)}ha(dom,t,s,i){if(null===s&&(s=this.sa),null!==t.template){const e=createRenderContext(dom,s,t.dependencies,i);if(t.build.required){const s=t.build.compiler||fe,compiler=this.ra[s];if(void 0===compiler)throw Reporter.error(20,s);t=compiler.compile(dom,t,new RuntimeCompilationResources(e),ViewCompileFlags.Zu)}return this.ia.create(e,t)}return ae}}de.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class ge{constructor(){this.v=null}Qs(t){this.v=t}resolve(t,s){if(void 0===this.v)throw Reporter.error(50);return this.v}Z(){this.v=null}}class pe{Qs(t,parts){this.ku=t,this.ca=parts||PLATFORM.Mt}resolve(t,s){const i=this.ku;if(null==i)throw Reporter.error(50);if(!i.name||!i.name.length)throw Reporter.error(51);const e=this.ca[i.name];if(e){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.oa(dom,e,s)}return i}Z(){this.ku=null,this.ca=PLATFORM.Mt}}let be=class{constructor(t,customElement){this.Ct=0,this.children=null,this.customElement=customElement,this.R=t,this.U=0}W(){return this.U||(this.U=1,this.customElement.os.ua(()=>{this.aa()}),this.children=It(this.customElement.os.children)),this.children}K(t){}flush(t){this.C(this.children,void 0,t|LifecycleFlags.G),this.Ct=0}subscribe(t){this.u(t)}unsubscribe(t){this.g(t)}aa(){this.children=It(this.customElement.os.children),"$childrenChanged"in this.customElement&&this.customElement.fa(),this.R.O(this).catch(t=>{throw t}),this.Ct=1}};be=c([subscriberCollection(MutationKind.v)],be);class me{constructor(){}static create(t){const s=new me;return s.bindables=t.description.bindables,s}la(t,s,i){s.$lifecycle=i,"$projector"in s?this.da(t,i,s):this.ga(t,s)}da(t,s,i){this.ga(t,i).pa=new be(s,i),Reflect.defineProperty(i,"$children",{Gs:0,get(){return this.Zs.pa.W()}})}ga(t,s){const i={},bindables=this.bindables,e=Object.getOwnPropertyNames(bindables);if(t&LifecycleFlags.Dt)for(let n=0,r=e.length;r>n;++n){const name=e[n];i[name]=new SelfObserver(t,ProxyObserver.Ls(s).A,name,bindables[name].Us)}else{for(let n=0,r=e.length;r>n;++n){const name=e[n];i[name]=new SelfObserver(t,s,name,bindables[name].Us),kt(t,s,name)}Reflect.defineProperty(s,"$observers",{Gs:0,value:i})}return i}}Profiler.Se("Aurelia.start"),Profiler.Se("Aurelia.stop");class Aurelia{constructor(t=DI.re()){this.sa=t,this.ba=[],this.ma=[],this.wa=[],this.va=0,this.ya=null,Registration.v(Aurelia,this).register(t,Aurelia)}register(...t){return this.sa.register(...t),this}app(t){const host=t.host;let dom;if(this.sa.has(IDOM,0))dom=this.sa.get(IDOM);else{const s=this.sa.get(IDOMInitializer);dom=s.initialize(t)}let component,s=LifecycleFlags.zn,i=LifecycleFlags.Xt;t.Dt&&(s|=LifecycleFlags.Dt,i|=LifecycleFlags.Dt);const e=t.component;CustomElementResource.Lr(e)?(this.sa.register(e),component=this.sa.get(CustomElementResource._(e.description.name))):component=e,component=ProxyObserver.ar(component);const n=()=>{if(host.$au=this,!this.ba.includes(component)){this.ya=component,this.ba.push(component);const t=this.sa.get(IRenderingEngine),i=this.sa.get(IProjectorLocator);component.mu(s,dom,i,t,host,this.sa)}component.ws(s|LifecycleFlags.ht,null),component.qt(s|LifecycleFlags.xt)};return this.ma.push(n),this.wa.push(()=>{component.ts(i|LifecycleFlags.Kt),component.as(i|LifecycleFlags.Ts),host.$au=null}),this.va&&n(),this}root(){return ProxyObserver.cr(this.ya)}start(){for(const t of this.ma)t();return this.va=1,this}stop(){this.va=0;for(const t of this.wa)t();return this}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.le("IDOMInitializer").ue();class we{constructor(t){const s=this.Ca={};t.forEach(t=>{s[t.Xs]=t})}static register(t){return Registration.singleton(IRenderer,this).register(t)}Ds(t,dom,s,i,targets,e,host,parts){const n=e.instructions,r=this.Ca;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);for(let e=0,h=targets.length;h>e;++e){const instructions=n[e],h=targets[e];for(let e=0,n=instructions.length;n>e;++e){const n=instructions[e];r[n.type].Ds(t,dom,s,i,h,n,parts)}}if(host){const n=e.surrogates;for(let e=0,h=n.length;h>e;++e){const h=n[e];r[h.type].Ds(t,dom,s,i,host,h,parts)}}}}we.inject=[all(IInstructionRenderer)];let ve=class{Ds(t,dom,s,i,e,n){e[n.to]=n.value}};ve=c([instructionRenderer("re")],ve);let ye=class{constructor(t){this.Ta=t}Ds(t,dom,s,i,e,n){const r=s.Ks(i,e,n,null,null,e,1),component=s.get(X(n.res)),h=s.get(IRenderer).Ca,o=s.get(IProjectorLocator),l=n.instructions;component.mu(t,dom,o,this.Ta,e,s,n);for(let e=0,n=l.length;n>e;++e){const n=l[e];h[n.type].Ds(t,dom,s,i,component,n)}addBindable(i,component),addAttachable(i,component),r.Z()}};ye.inject=[IRenderingEngine],ye=c([instructionRenderer("ra")],ye);let Ce=class{constructor(t){this.Ta=t}Ds(t,dom,s,i,e,n){const r=s.Ks(i,e,n),component=s.get(Y(n.res)),h=s.get(IRenderer).Ca,o=n.instructions;component.mu(t,this.Ta);for(let e=0,n=o.length;n>e;++e){const n=o[e];h[n.type].Ds(t,dom,s,i,component,n)}addBindable(i,component),addAttachable(i,component),r.Z()}};Ce.inject=[IRenderingEngine],Ce=c([instructionRenderer("rb")],Ce);let Te=class{constructor(t){this.Ta=t}Ds(t,dom,s,i,e,n,parts){const r=this.Ta.oa(dom,n.def,s),h=s.Ks(i,e,n,r,parts,dom.Aa(e),0),component=s.get(Y(n.res)),o=s.get(IRenderer).Ca,l=n.instructions;component.mu(t,this.Ta),n.link&&component.link(i.Yt);for(let e=0,n=l.length;n>e;++e){const n=l[e];o[n.type].Ds(t,dom,s,i,component,n)}addBindable(i,component),addAttachable(i,component),h.Z()}};Te.inject=[IRenderingEngine],Te=c([instructionRenderer("rc")],Te);let Ae=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){dom.remove(e);const r=n.instructions,toViewModel=n.toViewModel;for(let t=0,e=r.length;e>t;++t){const e=r[t],n=ensureExpression(this.Ba,e.from,48);addEarlyBindable(i,new LetBinding(n,e.to,this.it,s,toViewModel))}}};Ae.inject=[IExpressionParser,IObserverLocator],Ae=c([instructionRenderer("rd")],Ae);let Be=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,153);addEarlyBindable(i,new Call(r,e,n.to,this.it,s))}};Be.inject=[IExpressionParser,IObserverLocator],Be=c([instructionRenderer("rh")],Be);let Oe=class{constructor(t){this.Ba=t}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,1280);addEarlyBindable(i,new Ref(r,e,s))}};Oe.inject=[IExpressionParser],Oe=c([instructionRenderer("rj")],Oe);let Re=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){let bindable;const r=ensureExpression(this.Ba,n.from,2048);addEarlyBindable(i,bindable=r.Yh?new MultiInterpolationBinding(this.it,r,e,n.to,BindingMode.Ns,s):new InterpolationBinding(r.so,r,e,n.to,BindingMode.Ns,this.it,s,1))}};Re.inject=[IExpressionParser,IObserverLocator],Re=c([instructionRenderer("rf")],Re);let Ie=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,48|n.mode);addEarlyBindable(i,new Binding(r,e,n.to,n.mode,this.it,s))}};Ie.inject=[IExpressionParser,IObserverLocator],Ie=c([instructionRenderer("rg")],Ie);let ke=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,539);addEarlyBindable(i,new Binding(r,e,n.to,BindingMode.Ns,this.it,s))}};ke.inject=[IExpressionParser,IObserverLocator],ke=c([instructionRenderer("rk")],ke);const DefaultComponents=[Qi,si,we],DefaultResources=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],DefaultRenderers=[Ie,ke,Be,Oe,Re,ve,ye,Ce,Te,Ae],Se={register:t=>t.register(...DefaultComponents,...DefaultResources,...DefaultRenderers),re(){return this.register(DI.re())}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Ns,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.dn,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.gn,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}rs=Object.freeze({CallFunction,connects:t=>32==(32&t.X),observes:t=>64==(64&t.X),callsFunction:t=>128==(128&t.X),hasAncestor:t=>256==(256&t.X),isAssignable:t=>8192==(8192&t.X),isLeftHandSide:t=>1024==(1024&t.X),isPrimary:t=>512==(512&t.X),isResource:t=>32768==(32768&t.X),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral:class{constructor(parts){this.X=51,this.assign=PLATFORM._i,this.parts=parts}evaluate(t,s,i){const e=this.parts;let n="";for(let r=0,h=e.length;h>r;++r){const value=e[r].evaluate(t,s,i);null!=value&&(n+=value)}return n}connect(t,s,i){for(let e=0,n=this.parts.length;n>e;++e)this.parts[e].connect(t,s,i)}accept(t){return t.Oa(this)}},ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of Ci)1==fi[t].U&&def(fi,t,Object.assign({},Ai,{value:yi[t]}))},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of Si)1==Bi[t].U&&Ei(Bi,t,Object.assign({},Li,{value:ki[t]}))},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of Vi)1==ji[t].U&&Ni(ji,t,Object.assign({},Ui,{value:xi[t]}))},BindingContext,Scope,OverrideContext,collectionObserver,get CollectionLengthObserver(){return CollectionLengthObserver},computed:t=>(function(s,i){(s.computed||(s.computed={}))[i]=t}),get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,get DirtyCheckProperty(){return DirtyCheckProperty},DirtyCheckSettings,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,PrimitiveObserver,PropertyAccessor,propertyObserver,get ProxyObserver(){return ProxyObserver},get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>s=>BindingBehaviorResource.Er(t,s),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>s=>CustomAttributeResource.Er(t,s),CustomAttributeResource,dynamicOptions:t=>void 0===t?Tt:Tt(t),templateController:t=>s=>CustomAttributeResource.Er("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?Bt:Bt(t),customElement:t=>s=>CustomElementResource.Er(t,s),CustomElementResource,IProjectorLocator,useShadowDOM(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:le;return"function"==typeof t?s(t):s},valueConverter:t=>s=>ValueConverterResource.Er(t,s),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable,Aurelia,IDOMInitializer,IfRegistration:If,ElseRegistration:Else,RepeatRegistration:Repeat,ReplaceableRegistration:Replaceable,WithRegistration:With,SanitizeValueConverterRegistration:SanitizeValueConverter,DebounceBindingBehaviorRegistration:DebounceBindingBehavior,OneTimeBindingBehaviorRegistration:OneTimeBindingBehavior,ToViewBindingBehaviorRegistration:ToViewBindingBehavior,FromViewBindingBehaviorRegistration:FromViewBindingBehavior,SignalBindingBehaviorRegistration:SignalBindingBehavior,ThrottleBindingBehaviorRegistration:ThrottleBindingBehavior,TwoWayBindingBehaviorRegistration:TwoWayBindingBehavior,BasicResources:DefaultResources,ObserverLocatorRegistration:Qi,LifecycleRegistration:si,RendererRegistration:we,BasicConfiguration:Se,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},INode,IRenderLocation,IDOM,NodeSequence,get BindingMode(){return BindingMode},get ExpressionKind(){return ExpressionKind},get Hooks(){return Hooks},get LifecycleFlags(){return LifecycleFlags},get State(){return ts},stringifyLifecycleFlags(t){const s=[];return t&LifecycleFlags.Y&&s.push("mustEvaluate"),t&LifecycleFlags.xn&&s.push("isCollectionMutation"),t&LifecycleFlags.Vn&&s.push("isInstanceMutation"),t&LifecycleFlags.Fn&&s.push("updateTargetObserver"),t&LifecycleFlags.G&&s.push("updateTargetInstance"),t&LifecycleFlags.Un&&s.push("updateSourceExpression"),t&LifecycleFlags.Nn&&s.push("fromAsyncFlush"),t&LifecycleFlags.qn&&s.push("fromSyncFlush"),t&LifecycleFlags.zn&&s.push("fromStartTask"),t&LifecycleFlags.Xt&&s.push("fromStopTask"),t&LifecycleFlags.ht&&s.push("fromBind"),t&LifecycleFlags.Ts&&s.push("fromUnbind"),t&LifecycleFlags.xt&&s.push("fromAttach"),t&LifecycleFlags.Kt&&s.push("fromDetach"),t&LifecycleFlags.ns&&s.push("fromCache"),t&LifecycleFlags.Wn&&s.push("fromDOMEvent"),t&LifecycleFlags.Kn&&s.push("fromObserverSetter"),t&LifecycleFlags.Qn&&s.push("fromBindableHandler"),t&LifecycleFlags.Gn&&s.push("fromLifecycleTask"),t&LifecycleFlags._t&&s.push("parentUnmountQueued"),t&LifecycleFlags.lt&&s.push("doNotUpdateDOM"),t&LifecycleFlags.Zn&&s.push("isTraversingParentScope"),t&LifecycleFlags._n&&s.push("allowParentScopeTraversal"),t&LifecycleFlags.Dt&&s.push("useProxies"),s.join("|")},CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,AggregateLifecycleTask,CompositionCoordinator,ILifecycle,IRenderable,IViewFactory,LifecycleTask,PromiseTask:class{constructor(t,s){this.done=0,this.jl=0,this.Us=s,this.zi=t.then(value=>{if(1!=this.jl)return this.done=1,this.Us(value),value})}Il(){return!this.done}cancel(){this.Il()&&(this.jl=1)}kl(){return this.zi}},get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},get MutationKind(){return MutationKind},instructionRenderer,ensureExpression,addAttachable,addBindable,addEarlyBindable,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",_(name){return`${this.name}:${name}`},Lr(t){return t.kind===this},Er(t,s){const i=s,e="string"==typeof t?{name:t,target:null}:t;return i.kind=BindingCommandResource,i.description=e,i.register=St,i}};class OneTimeBindingCommand{constructor(){this.Ra=49}compile(t){return new OneTimeBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.Ra=50}compile(t){return new ToViewBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.Ra=51}compile(t){return new FromViewBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.Ra=52}compile(t){return new TwoWayBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("two-way",TwoWayBindingCommand);const Pe=["","$1","$2","","$4","","$6"],Le={bind:BindingMode.Ns,Ia:BindingMode.oneTime,ka:BindingMode.Ns,Sa:BindingMode.dn,Pa:BindingMode.gn};class DefaultBindingCommand{constructor(){this.Ra=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[Pe[getMode(t)]](t)}}BindingCommandResource.Er("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.Ra=153}compile(t){return new CallBindingInstruction(t.Ur,getTarget(t,1))}}BindingCommandResource.Er("call",CallBindingCommand);class ForBindingCommand{constructor(){this.Ra=539}compile(t){return new IteratorBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("for",ForBindingCommand),(function(t){t[t.La=0]="Reset",t[t.Ea=511]="Ancestor",t[t.ja=512]="This",t[t.Scope=1024]="Scope",t[t.Da=2048]="Member",t[t.Ma=4096]="Keyed"})(hs||(hs={})),(function(t){t[t.$a=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.xa=64]="LogicalOR",t[t.Va=128]="LogicalAND",t[t.Fa=192]="Equality",t[t.Ua=256]="Relational",t[t.Na=320]="Additive",t[t.qa=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.Ha=449]="LeftHandSide",t[t.za=450]="Primary",t[t.Unary=451]="Unary"})(os||(os={})),(function(t){t[t.Wa=1572864]="EOF",t[t.Ka=1048576]="ExpressionTerminal",t[t.Qa=524288]="AccessScopeTerminal",t[t.Ga=262144]="ClosingToken",t[t.Za=131072]="OpeningToken",t[t._a=65536]="BinaryOp",t[t.Xa=32768]="UnaryOp",t[t.Ha=16384]="LeftHandSide",t[t.Ja=12288]="StringOrNumericLiteral",t[t.Ya=8192]="NumericLiteral",t[t.tf=4096]="StringLiteral",t[t.sf=3072]="IdentifierName",t[t.if=2048]="Keyword",t[t.ef=1024]="Identifier",t[t.nf=512]="Contextual",t[t.rf=448]="Precedence",t[t.pe=63]="Type",t[t.hf=2048]="FalseKeyword",t[t.lf=2049]="TrueKeyword",t[t.cf=2050]="NullKeyword",t[t.uf=2051]="UndefinedKeyword",t[t.af=3076]="ThisScope",t[t.ff=3077]="ParentScope",t[t.df=671750]="OpenParen",t[t.gf=131079]="OpenBrace",t[t.pf=16392]="Dot",t[t.bf=1835017]="CloseBrace",t[t.mf=1835018]="CloseParen",t[t.wf=1572875]="Comma",t[t.vf=671756]="OpenBracket",t[t.yf=1835021]="CloseBracket",t[t.Cf=1572878]="Colon",t[t.Tf=1572879]="Question",t[t.Af=1572880]="Ampersand",t[t.Bf=1572883]="Bar",t[t.Of=1638548]="BarBar",t[t.Rf=1638613]="AmpersandAmpersand",t[t.kf=1638678]="EqualsEquals",t[t.Sf=1638679]="ExclamationEquals",t[t.Pf=1638680]="EqualsEqualsEquals",t[t.Lf=1638681]="ExclamationEqualsEquals",t[t.Ef=1638746]="LessThan",t[t.jf=1638747]="GreaterThan",t[t.Df=1638748]="LessThanEquals",t[t.Mf=1638749]="GreaterThanEquals",t[t.$f=1640798]="InKeyword",t[t.xf=1640799]="InstanceOfKeyword",t[t.Vf=623008]="Plus",t[t.Ff=623009]="Minus",t[t.Uf=34850]="TypeofKeyword",t[t.Nf=34851]="VoidKeyword",t[t.qf=1638884]="Asterisk",t[t.Hf=1638885]="Percent",t[t.zf=1638886]="Slash",t[t.Wf=1048615]="Equals",t[t.Kf=32808]="Exclamation",t[t.Qf=540713]="TemplateTail",t[t.Gf=540714]="TemplateContinuation",t[t.Zf=1051179]="OfKeyword"})(ls||(ls={})),(function(t){t[t._f=0]="Null",t[t.Xf=8]="Backspace",t[t.Jf=9]="Tab",t[t.Yf=10]="LineFeed",t[t.td=11]="VerticalTab",t[t.sd=12]="FormFeed",t[t.ed=13]="CarriageReturn",t[t.nd=32]="Space",t[t.Kf=33]="Exclamation",t[t.rd=34]="DoubleQuote",t[t.hd=36]="Dollar",t[t.Hf=37]="Percent",t[t.Af=38]="Ampersand",t[t.od=39]="SingleQuote",t[t.df=40]="OpenParen",t[t.mf=41]="CloseParen",t[t.qf=42]="Asterisk",t[t.Vf=43]="Plus",t[t.wf=44]="Comma",t[t.Ff=45]="Minus",t[t.pf=46]="Dot",t[t.zf=47]="Slash",t[t.ld=59]="Semicolon",t[t.ud=96]="Backtick",t[t.vf=91]="OpenBracket",t[t.ad=92]="Backslash",t[t.yf=93]="CloseBracket",t[t.fd=94]="Caret",t[t.dd=95]="Underscore",t[t.gf=123]="OpenBrace",t[t.Bf=124]="Bar",t[t.bf=125]="CloseBrace",t[t.Cf=58]="Colon",t[t.Ef=60]="LessThan",t[t.Wf=61]="Equals",t[t.jf=62]="GreaterThan",t[t.Tf=63]="Question",t[t.gd=48]="Zero",t[t.pd=49]="One",t[t.bd=50]="Two",t[t.md=51]="Three",t[t.wd=52]="Four",t[t.vd=53]="Five",t[t.yd=54]="Six",t[t.Cd=55]="Seven",t[t.Td=56]="Eight",t[t.Ad=57]="Nine",t[t.Bd=65]="UpperA",t[t.Od=66]="UpperB",t[t.Rd=67]="UpperC",t[t.Id=68]="UpperD",t[t.kd=69]="UpperE",t[t.Sd=70]="UpperF",t[t.Pd=71]="UpperG",t[t.Ld=72]="UpperH",t[t.Ed=73]="UpperI",t[t.jd=74]="UpperJ",t[t.Dd=75]="UpperK",t[t.Md=76]="UpperL",t[t.$d=77]="UpperM",t[t.xd=78]="UpperN",t[t.Vd=79]="UpperO",t[t.Fd=80]="UpperP",t[t.Ud=81]="UpperQ",t[t.Nd=82]="UpperR",t[t.qd=83]="UpperS",t[t.Hd=84]="UpperT",t[t.zd=85]="UpperU",t[t.Wd=86]="UpperV",t[t.Kd=87]="UpperW",t[t.Qd=88]="UpperX",t[t.Gd=89]="UpperY",t[t.Zd=90]="UpperZ",t[t._d=97]="LowerA",t[t.Xd=98]="LowerB",t[t.Jd=99]="LowerC",t[t.Yd=100]="LowerD",t[t.tg=101]="LowerE",t[t.sg=102]="LowerF",t[t.ig=103]="LowerG",t[t.eg=104]="LowerH",t[t.ng=105]="LowerI",t[t.rg=106]="LowerJ",t[t.hg=107]="LowerK",t[t.og=108]="LowerL",t[t.lg=109]="LowerM",t[t.cg=110]="LowerN",t[t.ug=111]="LowerO",t[t.ag=112]="LowerP",t[t.fg=113]="LowerQ",t[t.dg=114]="LowerR",t[t.gg=115]="LowerS",t[t.pg=116]="LowerT",t[t.bg=117]="LowerU",t[t.mg=118]="LowerV",t[t.wg=119]="LowerW",t[t.vg=120]="LowerX",t[t.yg=121]="LowerY",t[t.Cg=122]="LowerZ"})(cs||(cs={})),Profiler.Se("ExpressionParser");const Ee=PrimitiveLiteral.Fh,je=PrimitiveLiteral.Vh,De=PrimitiveLiteral.xh,Me=PrimitiveLiteral.$h,$e=AccessThis.ih,xe=AccessThis.eh,$state=new class{get hi(){return this.input.slice(this.oi,this.index)}constructor(t){this.index=0,this.oi=0,this.lastIndex=0,this.input=t,this.length=t.length,this.ii=1572864,this.ni="",this.si=t.charCodeAt(0),this.ei=1}}("");(function(t){t[t.Tg=100]="InvalidExpressionStart",t[t.Ag=101]="UnconsumedToken",t[t.Bg=102]="DoubleDot",t[t.Og=103]="InvalidMemberExpression",t[t.Rg=104]="UnexpectedEndOfExpression",t[t.Ig=105]="ExpectedIdentifier",t[t.kg=106]="InvalidForDeclaration",t[t.Sg=107]="InvalidObjectLiteralPropertyDefinition",t[t.Pg=108]="UnterminatedQuote",t[t.Lg=109]="UnterminatedTemplate",t[t.Eg=110]="MissingExpectedToken",t[t.jg=111]="UnexpectedCharacter",t[t.Dg=112]="MissingValueConverter",t[t.Mg=113]="MissingBindingBehavior"})(us||(us={})),(function(t){t[t.$g=150]="NotAssignable",t[t.xg=151]="UnexpectedForOf"})(as||(as={}));const Ve=[Ee,je,De,Me,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],Fe=Object.create(null);Fe.true=2049,Fe.null=2050,Fe.false=2048,Fe.undefined=2051,Fe.ih=3076,Fe.eh=3077,Fe.yh=1640798,Fe.vh=1640799,Fe.Eh=34850,Fe.Lh=34851,Fe.of=1051179;const Ue=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Ne=[48,58],qe=t=>{throw Reporter.error(111,{state:t})};qe.Vg=1,Ut(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const He=new Uint8Array(65535);Ut(He,null,Ue,1),Ut(He,null,Ne,1);const ze=Array(65535);ze.fill(qe,0,65535),Ut(ze,null,[0,33,127,161],t=>(Dt(t),null)),Ut(ze,null,Ue,function(t){for(;He[Dt(t)];);const s=Fe[t.ni=t.hi];return void 0===s?1024:s}),Ut(ze,null,Ne,t=>Mt(t,0)),ze[34]=ze[39]=(t=>(function(t){const s=t.si;Dt(t);let i=0;const e=[];let n=t.index;for(;t.si!==s;)if(92===t.si)e.push(t.input.slice(n,t.index)),Dt(t),i=Pt(t.si),Dt(t),e.push(String.fromCharCode(i)),n=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});Dt(t)}const r=t.input.slice(n,t.index);Dt(t),e.push(r);const h=e.join("");return t.ni=h,4096})(t)),ze[96]=(t=>$t(t)),ze[33]=(t=>61!==Dt(t)?32808:61!==Dt(t)?1638679:(Dt(t),1638681)),ze[61]=(t=>61!==Dt(t)?1048615:61!==Dt(t)?1638678:(Dt(t),1638680)),ze[38]=(t=>38!==Dt(t)?1572880:(Dt(t),1638613)),ze[124]=(t=>124!==Dt(t)?1572883:(Dt(t),1638548)),ze[46]=(t=>Dt(t)>57||48>t.si?16392:Mt(t,1)),ze[60]=(t=>61!==Dt(t)?1638746:(Dt(t),1638748)),ze[62]=(t=>61!==Dt(t)?1638747:(Dt(t),1638749)),ze[37]=Nt(1638885),ze[40]=Nt(671750),ze[41]=Nt(1835018),ze[42]=Nt(1638884),ze[43]=Nt(623008),ze[44]=Nt(1572875),ze[45]=Nt(623009),ze[47]=Nt(1638886),ze[58]=Nt(1572878),ze[63]=Nt(1572879),ze[91]=Nt(671756),ze[93]=Nt(1835021),ze[123]=Nt(131079),ze[125]=Nt(1835017);const IExpressionParserRegistration={register(t){t.ye(IExpressionParser,t=>(t.zl=parseExpression,t))}},We=[IExpressionParserRegistration],AtPrefixedTriggerAttributePatternRegistration=AtPrefixedTriggerAttributePattern,ColonPrefixedBindAttributePatternRegistration=ColonPrefixedBindAttributePattern,RefAttributePatternRegistration=RefAttributePattern,DotSeparatedAttributePatternRegistration=DotSeparatedAttributePattern,DefaultBindingSyntax=[RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration],ShortHandBindingSyntax=[AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration],CallBindingCommandRegistration=CallBindingCommand,DefaultBindingCommandRegistration=DefaultBindingCommand,ForBindingCommandRegistration=ForBindingCommand,FromViewBindingCommandRegistration=FromViewBindingCommand,OneTimeBindingCommandRegistration=OneTimeBindingCommand,ToViewBindingCommandRegistration=ToViewBindingCommand,TwoWayBindingCommandRegistration=TwoWayBindingCommand,DefaultBindingLanguage=[DefaultBindingCommandRegistration,OneTimeBindingCommandRegistration,FromViewBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,CallBindingCommandRegistration,ForBindingCommandRegistration],Ke={register:t=>Se.register(t).register(...We,...DefaultBindingSyntax,...DefaultBindingLanguage),re(){return this.register(DI.re())}};class ResourceModel{constructor(t){this.Fg=t,this.Ug={},this.Ng={},this.qg={}}Hg(name){let t=this.Ug[name];if(void 0===t){const def=this.Fg.find(CustomElementResource,name);t=null===def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.Ns;let s,i,e,mode;for(i in bindables)void 0!==(s=bindables[i]).qs&&(i=s.qs),e=void 0!==s.Vs?s.Vs:PLATFORM.Fs(i),t.bindables[e]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode);return t})(def),this.Ug[name]=t}return t}zg(t){const name=PLATFORM.Ys(t.target);let s=this.Ng[name];if(void 0===s){const def=this.Fg.find(CustomAttributeResource,name);s=null===def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.Ns;let s,i,mode,e=0;for(i in bindables)++e,void 0!==(s=bindables[i]).qs&&(i=s.qs),t.bindables[i]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[i]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.xs||e>1)&&(t.xs=1),t})(def),this.Ng[name]=s}return s}Wg(t){const name=t.command;if(null===name)return null;let s=this.qg[name];if(void 0===s){if(null===(s=this.Fg.create(BindingCommandResource,name)))throw Reporter.error(0);this.qg[name]=s}return s}}class BindableInfo{constructor(t,mode){this.Js=t,this.mode=mode}}class ElementInfo{constructor(name,t){this.name=name,this.containerless=t,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.xs=0}}(function(SymbolFlags){SymbolFlags[SymbolFlags.type=511]="type",SymbolFlags[SymbolFlags.isTemplateController=1]="isTemplateController",SymbolFlags[SymbolFlags.Kg=2]="isReplacePart",SymbolFlags[SymbolFlags.Qg=4]="isCustomAttribute",SymbolFlags[SymbolFlags.Gg=8]="isPlainAttribute",SymbolFlags[SymbolFlags.Zg=16]="isCustomElement",SymbolFlags[SymbolFlags._g=32]="isLetElement",SymbolFlags[SymbolFlags.Xg=64]="isPlainElement",SymbolFlags[SymbolFlags.Jg=128]="isText",SymbolFlags[SymbolFlags.bn=256]="isBinding",SymbolFlags[SymbolFlags.Yg=512]="hasMarker",SymbolFlags[SymbolFlags.tp=1024]="hasTemplate",SymbolFlags[SymbolFlags.hasAttributes=2048]="hasAttributes",SymbolFlags[SymbolFlags.sp=4096]="hasBindings",SymbolFlags[SymbolFlags.hasChildNodes=8192]="hasChildNodes",SymbolFlags[SymbolFlags.ip=16384]="hasParts"})(SymbolFlags||(SymbolFlags={}));class TemplateControllerSymbol{get ep(){return null===this.np&&(this.np=[],this.flags|=4096),this.np}constructor(dom,t,s,i){this.flags=513,this.res=s.name,this.rp=i,this.hp=null,this.ti=t,this.template=null,this.templateController=null,this.marker=qt(dom),this.np=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.hp=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get ep(){return null===this.np&&(this.np=[],this.flags|=4096),this.np}constructor(t,s){this.flags=4,this.res=s.name,this.ti=t,this.np=null}}class PlainAttributeSymbol{constructor(t,s,i){this.flags=8,this.ti=t,this.command=s,this.Ur=i}}class BindingSymbol{constructor(t,bindable,s,i,e){this.flags=256,this.command=t,this.bindable=bindable,this.Ur=s,this.Ci=i,this.target=e}}class CustomElementSymbol{get attributes(){return null===this.op&&(this.op=[],this.flags|=2048),this.op}get ep(){return null===this.np&&(this.np=[],this.flags|=4096),this.np}get childNodes(){return null===this.lp&&(this.lp=[],this.flags|=8192),this.lp}get parts(){return null===this.cp&&(this.cp=[],this.flags|=16384),this.cp}constructor(dom,t,s){this.flags=16,this.res=s.name,this.hp=t,this.bindables=s.bindables,this.up=1,this.templateController=null,s.containerless?(this.Bn=1,this.marker=qt(dom),this.flags|=512):(this.Bn=0,this.marker=null),this.op=null,this.np=null,this.lp=null,this.cp=null}}class LetElementSymbol{get ep(){return null===this.np&&(this.np=[],this.flags|=4096),this.np}constructor(dom,t){this.flags=544,this.hp=t,this.toViewModel=0,this.marker=qt(dom),this.np=null}}class PlainElementSymbol{get attributes(){return null===this.op&&(this.op=[],this.flags|=2048),this.op}get childNodes(){return null===this.lp&&(this.lp=[],this.flags|=8192),this.lp}constructor(t){this.flags=64,this.hp=t,this.up=0,this.templateController=null,this.op=null,this.lp=null}}class TextSymbol{constructor(dom,t,s){this.flags=640,this.hp=t,this.gc=s,this.marker=qt(dom)}}fs=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>s=>BindingCommandResource.Er(t,s),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,IExpressionParserRegistration,DefaultComponents:We,RefAttributePatternRegistration,DotSeparatedAttributePatternRegistration,DefaultBindingSyntax,AtPrefixedTriggerAttributePatternRegistration,ColonPrefixedBindAttributePatternRegistration,ShortHandBindingSyntax,CallBindingCommandRegistration,DefaultBindingCommandRegistration,ForBindingCommandRegistration,FromViewBindingCommandRegistration,OneTimeBindingCommandRegistration,ToViewBindingCommandRegistration,TwoWayBindingCommandRegistration,DefaultBindingLanguage,BasicConfiguration:Ke,parseExpression,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,get SymbolFlags(){return SymbolFlags},TemplateControllerSymbol,TextSymbol});class Listener{constructor(dom,t,s,i,e,preventDefault,n,r){this.dom=dom,this.vs=null,this.Is=null,this.$state=0,this.ap=s,this.Wr=r,this.preventDefault=preventDefault,this.Ml=i,this.target=e,this.fp=t,this.dp=n}Ul(t){const s=this.$scope.Cr;s.gp=t;const i=this.Ml.evaluate(LifecycleFlags.Y,this.$scope,this.Wr);return delete s.gp,1!=i&&this.preventDefault&&t.preventDefault(),i}pi(t){this.Ul(t)}ws(t,s){if(2&this.$state){if(this.$scope===s)return;this.as(t|LifecycleFlags.ht)}this.$state|=1,this.$scope=s;const i=this.Ml;hasBind(i)&&i.bind(t,s,this),this.pp=this.dp.addEventListener(this.dom,this.target,this.fp,this,this.ap),this.$state|=2,this.$state&=-2}as(t){if(!(2&this.$state))return;this.$state|=64;const s=this.Ml;hasUnbind(s)&&s.Kr(t,this.$scope,this),this.$scope=null,this.pp.Z(),this.pp=null,this.$state&=-67}nt(t,s,i){}B(t,s,i){}}let AttributeNSAccessor=class{constructor(t,s,i,e,n){this.ot=1,this.attributeName=e,this.R=t,this.N=s,this.oldValue=this.H=this.W(),this.q=i,this.bp=n}W(){return this.N.getAttributeNS(this.bp,this.attributeName)}ut(t){this.N.setAttributeNS(this.bp,this.attributeName,t)}};AttributeNSAccessor=c([targetObserver("")],AttributeNSAccessor);const Qe=LifecycleFlags.Wn|LifecycleFlags.Un,Ge=LifecycleFlags.rt|LifecycleFlags.G,Ze=(t,s)=>t===s;let CheckedObserver=class{constructor(t,s,i,e,n){this.dt=t&LifecycleFlags._s,this.ot=1,this.pp=e,this.R=s,this.N=i,this.it=n}W(){return this.H}ut(t,s){this.mp||(this.mp=this.N.Zs&&(this.N.Zs.wp||this.N.Zs.value),this.mp&&this.mp.subscribe(this)),this.vp&&(this.vp.Ot(this),this.vp=null),"checkbox"===this.N.type&&Array.isArray(t)&&(this.vp=this.it.kc(this.dt|s,t),this.vp.Bt(this)),this.yp()}F(){this.yp(),this.Vi(Ge)}B(t,s,i){this.yp(),this.Vi(i)}yp(){const value=this.H,t=this.N,s=t.hasOwnProperty("model")?t.wp:t.value,i=t.Cp||Ze;t.checked="radio"===t.type?!!i(value,s):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,s)):0}Vi(t){t&LifecycleFlags.ht||this.H!==this.oldValue&&this.C(this.H,this.oldValue,this.dt|t)}pi(){let value=this.H;const t=this.N,s=t.hasOwnProperty("model")?t.wp:t.value;let i;const e=t.Cp||Ze;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!e(t,s)),void(t.checked&&-1===i?value.push(s):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=s}this.oldValue=this.H,this.H=value,this.Vi(Qe)}subscribe(t){this.m()||this.pp.subscribe(this.N,this),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.pp.Z()}Kr(){this.vp&&(this.vp.Ot(this),this.vp=null),this.mp&&this.mp.unsubscribe(this)}};CheckedObserver=c([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,s){this.ot=1,this.zc=1,this.R=t,this.Tp=null,this.N=s,this.version=0}W(){return this.H}ut(t){const s=this.Tp||{};let i,name,e=this.version;if(t.length){const n=this.N;for(let r=0,h=(i=t.split(/\s+/)).length;h>r;r++)(name=i[r]).length&&(s[name]=e,n.classList.add(name))}if(this.Tp=s,this.version+=1,0!==e)for(name in e-=1,s)s.hasOwnProperty(name)&&s[name]===e&&this.N.classList.remove(name)}};ClassAttributeAccessor=c([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,s,i){this.ot=1,this.R=t,this.N=s,this.oldValue=this.H=this.W(),this.q=i}W(){return this.N.getAttribute(this.q)}ut(t){null===t?this.N.removeAttribute(this.q):this.N.setAttribute(this.q,t)}};DataAttributeAccessor=c([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,s,i){this.ot=1,this.R=t,this.N=s,this.q=i}W(){return this.N[this.q]}ut(value){this.N[this.q]=value}};ElementPropertyAccessor=c([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,s,i){this.dom=dom,this.Ap=i,this.count=0,this.Bp=t,this.listener=s}Op(){this.count++,1===this.count&&this.dom.addEventListener(this.Bp,this.listener,null,this.Ap)}Rp(){this.count--,0===this.count&&this.dom.removeEventListener(this.Bp,this.listener,null,this.Ap)}Z(){this.count>0&&(this.count=0,this.dom.removeEventListener(this.Bp,this.listener,null,this.Ap))}}class DelegateOrCaptureSubscription{constructor(t,s,i,e){this.Ip=t,this.kp=s,this.fp=i,s[i]=e}Z(){this.Ip.Rp(),this.kp[this.fp]=null}}class TriggerSubscription{constructor(dom,t,s,i){this.dom=dom,this.target=t,this.fp=s,this.Us=i,dom.addEventListener(s,i,t)}Z(){this.dom.removeEventListener(this.fp,this.Us,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.Sp=t,this.target=null,this.pp=null}subscribe(t,s){this.target=t,this.pp=s;const i=this.dom.addEventListener,e=this.Sp;for(let n=0,r=e.length;r>n;++n)i(e[n],s,t)}Z(){const t=this.target,s=this.pp,i=this.Sp,e=this.dom.removeEventListener;for(let n=0,r=i.length;r>n;++n)e(i[n],s,t);this.target=this.pp=null}}const IEventManager=DI.le("IEventManager").ae(t=>t.singleton(_e));class _e{constructor(){this.Pp={},this.Lp={},this.Pp={},this.Lp={}}addEventListener(dom,t,s,i,strategy){let e,n,r;if(strategy===DelegationStrategy.rr){(r=(e=this.Pp)[s]||(e[s]=new ListenerTracker(dom,s,Kt,0))).Op();const n=t.bi||(t.bi={});return new DelegateOrCaptureSubscription(r,n,s,i)}if(strategy===DelegationStrategy.nr){(r=(n=this.Lp)[s]||(n[s]=new ListenerTracker(dom,s,Wt,1))).Op();const e=t.gi||(t.gi={});return new DelegateOrCaptureSubscription(r,e,s,i)}return new TriggerSubscription(dom,t,s,i)}Z(){let t;const{Pp:s,Lp:i}=this;for(t in s)s[t].Z();for(t in i)i[t].Z()}}const Xe=LifecycleFlags.Wn|LifecycleFlags.Un,Je={Ep:1,jp:1,Dp:1};let SelectValueObserver=class{constructor(t,s,i,e,n,dom){this.dt=t&LifecycleFlags._s,this.ot=1,this.R=s,this.N=i,this.pp=e,this.it=n,this.dom=dom}W(){return this.H}ut(t,s){const i=Array.isArray(t);if(!i&&null!=t&&this.N.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.vp&&(this.vp.Ot(this),this.vp=null),i&&(this.vp=this.it.kc(this.dt|s,t),this.vp.Bt(this)),this.Mp(),this.Vi(s)}F(t){this.Mp(t)}B(t,s,i){this.K(t,this.dt|i)}Vi(t){if(t&LifecycleFlags.ht)return;const s=this.oldValue,i=this.H;i!==s&&this.C(i,s,this.dt|t)}pi(){this.$p()&&this.Vi(Xe)}Mp(t){const s=this.H,i=Array.isArray(s),e=this.N,n=e.Cp||Qt,r=e.options;let h=r.length;for(;h--;){const t=r[h],e=t.hasOwnProperty("model")?t.wp:t.value;t.selected=i?-1!==s.findIndex(t=>!!n(e,t)):!!n(e,s)}}$p(){const t=this.N,s=t.options,i=s.length,e=this.H;let n=0;if(t.multiple){if(!Array.isArray(e))return 1;let r;const h=t.Cp||Qt,o=[];for(;i>n;)(r=s[n]).selected&&o.push(r.hasOwnProperty("model")?r.wp:r.value),++n;for(n=0;e.length>n;){const t=e[n];-1===o.findIndex(s=>!!h(t,s))?e.splice(n,1):++n}for(n=0;o.length>n;){const t=o[n];-1===e.findIndex(s=>!!h(t,s))&&e.push(t),++n}return 0}let value=null;for(;i>n;){const t=s[n];if(t.selected){value=t.hasOwnProperty("model")?t.wp:t.value;break}++n}return this.oldValue=this.H,this.H=value,1}subscribe(t){this.m()||this.pp.subscribe(this.N,this),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.pp.Z()}bind(){this.xp=this.dom.Vp(this.N,this.Fp.bind(this),Je)}Kr(){this.xp.disconnect(),this.xp=null,this.vp&&(this.vp.Ot(this),this.vp=null)}Fp(){this.Mp(),this.$p()&&this.Vi(Xe)}};SelectValueObserver=c([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,s){this.ot=1,this.oldValue=this.H=s.style.cssText,this.R=t,this.N=s,this.Up=null,this.version=0}W(){return this.N.style.cssText}Np(t,value){let s="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(s="important",value=value.replace("!important","")),this.N.style.setProperty(t,value,s)}ut(t){const s=this.Up||{};let i,e=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],s[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=e,this.Np(i,value))}else if(t.length){const n=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let r;for(;null!==(r=n.exec(t));)(i=r[1])&&(s[i]=e,this.Np(i,r[2]))}if(this.Up=s,this.version+=1,0!==e)for(i in e-=1,s)s.hasOwnProperty(i)&&s[i]===e&&this.N.style.removeProperty(i)}};StyleAttributeAccessor=c([targetObserver()],StyleAttributeAccessor);const Ye={button:"",qp:"on",color:"#000000",Hp:"",zp:"",email:"",Wp:"",hidden:"",Kp:"",Qp:"",number:"",password:"",Gp:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",Zp:""},tn=LifecycleFlags.Wn|LifecycleFlags.Un;let ValueAttributeObserver=class{constructor(t,s,i,e){if(this.ot=1,this.pp=e,this.R=t,this.N=s,this.q=i,"value"===i){const t=s.type;this.defaultValue=Ye[t||"text"],"file"===t&&(this.flush=this._p)}else this.defaultValue="";this.oldValue=this.H=s[i]}W(){return this.N[this.q]}ut(t,s){this.N[this.q]=t,s&LifecycleFlags.ht||this.C(this.H,this.oldValue,s)}pi(){const t=this.oldValue=this.H,s=this.H=this.W();t!==s&&(this.C(s,t,tn),this.oldValue=s)}subscribe(t){this.m()||(this.oldValue=this.W(),this.pp.subscribe(this.N,this)),this.u(t)}unsubscribe(t){this.g(t)&&!this.m()&&this.pp.Z()}_p(){const t=this.H;this.oldValue!==t&&""===t&&(this.ut(t,this.ct),this.oldValue=this.H)}};ValueAttributeObserver=c([targetObserver("")],ValueAttributeObserver);const sn="http://www.w3.org/1999/xlink",en="http://www.w3.org/XML/1998/namespace",nn="http://www.w3.org/2000/xmlns/",rn=((ws=Object.create(null))["Xp"]=["actuate",sn],ws["Jp"]=["arcrole",sn],ws["Yp"]=["href",sn],ws["tb"]=["role",sn],ws["sb"]=["show",sn],ws["ib"]=["title",sn],ws["eb"]=["type",sn],ws["nb"]=["lang",en],ws["rb"]=["space",en],ws.hb=["xmlns",nn],ws["ob"]=["xlink",nn],ws),hn=["change","input"],on=["change"],ln=["change","input","blur","keyup","paste"],cn=["scroll"],un=(function(t){return t.lb=1,t.style=1,t.cb=1,t.checked=1,t.value=1,t.wp=1,t["Xp"]=1,t["Jp"]=1,t["Yp"]=1,t["tb"]=1,t["sb"]=1,t["ib"]=1,t["eb"]=1,t["nb"]=1,t["rb"]=1,t.hb=1,t["ob"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetObserverLocator,this).register(t)}st(t,s,i,e,n){switch(n){case"checked":return new CheckedObserver(t,s,e,new EventSubscriber(this.dom,hn),i);case"value":return"SELECT"===e.tagName?new SelectValueObserver(t,s,e,new EventSubscriber(this.dom,on),i,this.dom):new ValueAttributeObserver(s,e,n,new EventSubscriber(this.dom,hn));case"files":return new ValueAttributeObserver(s,e,n,new EventSubscriber(this.dom,hn));case"textContent":case"innerHTML":return new ValueAttributeObserver(s,e,n,new EventSubscriber(this.dom,ln));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(s,e,n,new EventSubscriber(this.dom,cn));case"class":return new ClassAttributeAccessor(s,e);case"style":case"css":return new StyleAttributeAccessor(s,e);case"model":return new SetterObserver(t,e,n);case"role":return new DataAttributeAccessor(s,e,n);default:if(void 0!==rn[n]){const t=rn[n];return new AttributeNSAccessor(s,e,n,t[0],t[1])}const r=n.slice(0,5);if("aria-"===r||"data-"===r)return new DataAttributeAccessor(s,e,n)}return null}tu(t,s,i){return 1==un[i]}Yc(t,s){return this.dom.wi(s)}}TargetObserverLocator.inject=[IDOM];class TargetAccessorLocator{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITargetAccessorLocator,this).register(t)}Fl(t,s,i,e){switch(e){case"textContent":return new ElementPropertyAccessor(s,i,e);case"class":return new ClassAttributeAccessor(s,i);case"style":case"css":return new StyleAttributeAccessor(s,i);case"src":case"href":case"role":return new DataAttributeAccessor(s,i,e);default:if(void 0!==rn[e]){const t=rn[e];return new AttributeNSAccessor(s,i,e,t[0],t[1])}const t=e.slice(0,5);return"aria-"===t||"data-"===t?new DataAttributeAccessor(s,i,e):new ElementPropertyAccessor(s,i,e)}}Yc(t,s){return this.dom.wi(s)}}TargetAccessorLocator.inject=[IDOM];const ISVGAnalyzer=DI.le("ISVGAnalyzer").ae(t=>t.singleton(class{ub(t,s){return 0}}));class AttrBindingBehavior{bind(t,s,i){i.targetObserver=new DataAttributeAccessor(i.Wr.get(ILifecycle),i.target,i.$l)}Kr(t,s,i){}}BindingBehaviorResource.Er("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,s,i){if(!i.Ul||!i.fp)throw Reporter.error(8);i.mi=i.Ul,i.Ul=Gt}Kr(t,s,i){i.Ul=i.mi,i.mi=null}}BindingBehaviorResource.Er("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.it=t}bind(t,s,i,...e){if(0===e.length)throw Reporter.error(9);if(i.mode!==BindingMode.gn&&i.mode!==BindingMode.dn)throw Reporter.error(10);this.dt=t&LifecycleFlags._s;const n=this.it.st(this.dt|t,i.target,i.$l);if(!n.pp)throw Reporter.error(10);i.targetObserver=n,n.ab=i.targetObserver.pp,n.pp=new EventSubscriber(i.Wr.get(IDOM),e)}Kr(t,s,i){i.targetObserver.pp.Z(),i.targetObserver.pp=i.targetObserver.ab,i.targetObserver.ab=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.Er("updateTrigger",UpdateTriggerBindingBehavior),(function(HTMLTargetedInstructionType){HTMLTargetedInstructionType.fb="ha",HTMLTargetedInstructionType.gb="hb",HTMLTargetedInstructionType.pb="hc",HTMLTargetedInstructionType.setAttribute="hd"})(HTMLTargetedInstructionType||(HTMLTargetedInstructionType={}));class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.pn,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.rr,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.nr,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.bb=t}get Xu(){return this.mb||(this.mb=buildTemplateDefinition(null,null,this.bb,null,"string"==typeof this.bb,null,this.instructions,this.dependencies))}Ms(t,s){return t.Ms(this.dom,this.Xu,null,s)}wb(t,s,i){return this.oa(s,i).create()}oa(t,s){return t.oa(this.dom,this.Xu,s)}vi(t,instructions,dependencies){this.dom.appendChild(t,this.bb),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const an=["subject","composing"];class Compose{constructor(dom,t,s,i,e){this.dom=dom,this.subject=null,this.vb=0,this.El=e,this.yb=null,this.Lu=t,this.Ta=i,this.El.yl=(()=>{this.vb=0}),this.properties=s.instructions.filter(t=>!an.includes(t.to)).reduce((t,s)=>(s.to&&(t[s.to]=s),t),{})}gs(t){this.Cb(this.subject,null,t),this.El.gs(t,this.$scope)}Vt(t){this.El.Vt(t)}Qt(t){this.El.Qt(t)}Bs(t){this.yb=null,this.El.Bs(t)}es(t){this.El.es(t)}Tb(t,s,i){this.Cb(t,s,i)}Cb(t,s,i){this.yb!==t&&(this.yb=t,t=t instanceof Promise?t.then(t=>this.Ab(t,i)):this.Ab(t,i),this.vb=1,this.El.Al(t,i))}Ab(t,s){const i=this.Bb(t,s);return i?(i.Iu(this.os.host),i.zu(this.Lu.$scope),i):null}Bb(t,s){return t?"lockScope"in t?t:"createView"in t?t.wb(s,this.Ta,this.Lu.$context):"create"in t?t.create():"template"in t?this.Ta.oa(this.dom,t,this.Lu.$context).create():createElement(this.dom,t,this.properties,this.os.children).wb(s,this.Ta,this.Lu.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],c([bindable],Compose.prototype,"subject",void 0),c([bindable],Compose.prototype,"composing",void 0),CustomElementResource.Er({name:"au-compose",containerless:1},Compose),(function(NodeType){NodeType[NodeType.Element=1]="Element",NodeType[NodeType.Attr=2]="Attr",NodeType[NodeType.Text=3]="Text",NodeType[NodeType.CDATASection=4]="CDATASection",NodeType[NodeType.EntityReference=5]="EntityReference",NodeType[NodeType.Entity=6]="Entity",NodeType[NodeType.ProcessingInstruction=7]="ProcessingInstruction",NodeType[NodeType.Comment=8]="Comment",NodeType[NodeType.Document=9]="Document",NodeType[NodeType.DocumentType=10]="DocumentType",NodeType[NodeType.DocumentFragment=11]="DocumentFragment",NodeType[NodeType.Notation=12]="Notation"})(NodeType||(NodeType={}));class HTMLDOM{constructor(t,s,i,e,n){this.Ob=t,this.Rb=s,this.Node=i,this.Element=e,this.HTMLElement=n}addEventListener(t,s,i,e){(i||this.Rb).addEventListener(t,s,e)}appendChild(t,s){t.appendChild(s)}cloneNode(t,s){return t.cloneNode(0!=s)}Aa(t){if(this.Ib(t))return t;if(null===t.parentNode)throw Reporter.error(52);const s=this.Rb.createComment("au-end"),i=this.Rb.createComment("au-start");return t.parentNode.replaceChild(s,t),s.parentNode.insertBefore(i,s),s.kb=i,i.$nodes=null,s}createDocumentFragment(t){if(null==t)return this.Rb.createDocumentFragment();if(this.wi(t)){if(void 0!==t.content)return t.content;const s=this.Rb.createDocumentFragment();return s.appendChild(t),s}return this.Sb(t).content}createElement(name){return this.Rb.createElement(name)}Vp(t,s,i){if("undefined"==typeof MutationObserver)return{disconnect(){},observe(){},takeRecords:()=>PLATFORM.Zi};const e=new MutationObserver(s);return e.observe(t,i),e}Sb(t){if(null==t)return this.Rb.createElement("template");const template=this.Rb.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.Rb.createTextNode(t)}insertBefore(t,s){s.parentNode.insertBefore(t,s)}Pb(t){return"AU-M"===t.nodeName}wi(t){return null!=t&&t.nodeType>0}Ib(t){return"au-end"===t.textContent}ci(t){t.className="au"}zs(t,s){t.Ws(INode,s),t.Ws(this.Node,s),t.Ws(this.Element,s),t.Ws(this.HTMLElement,s)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,s,i,e){(i||this.Rb).removeEventListener(t,s,e)}setAttribute(t,name,value){t.setAttribute(name,value)}}class fn{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new pn(t)]}wu(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}vu(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class dn{constructor(dom,t){this.dom=dom,this.Lb=t;const s=t.querySelectorAll(".au");let i=0,e=s.length;const targets=this.targets=Array(e);for(;e>i;){const t=s[i];targets[i]="AU-M"===t.nodeName?this.dom.Aa(t):t,++i}const n=t.childNodes;i=0;const childNodes=this.childNodes=Array(e=n.length);for(;e>i;)childNodes[i]=n[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}wu(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.Lb,t),"au-end"===t.textContent){this.end=t;const s=this.start=t.kb;s.$nodes=null===s.$nodes?this:PLATFORM.Mt}}vu(t){t.appendChild(this.Lb),this.start=this.end=null}remove(){const t=this.Lb;if(null!==this.start&&this.start.$nodes===this){const s=this.end;let i,e=this.start.nextSibling;for(;e!==s;)i=e.nextSibling,t.appendChild(e),e=i;this.start.$nodes=null,this.start=this.end=null}else{let s=this.firstChild;if(s.parentNode!==t){const i=this.lastChild;let e;for(;null!==s&&(e=s.nextSibling,t.appendChild(s),s!==i);)s=e}}}}class gn{constructor(dom,t){this.dom=dom;const s=dom.createDocumentFragment(t),childNodes=s.childNodes;switch(childNodes.length){case 0:return void(this.Yu=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.Eb=0,this.bb=t,void(this.pe=fn)}default:this.Eb=1,this.bb=s,this.pe=dn}}Yu(){return new this.pe(this.dom,this.bb.cloneNode(this.Eb))}}class pn{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.Zi,t.nodeName="AU-M",t.nodeType=1})(pn.prototype);class bn{constructor(dom){this.dom=dom}static register(t){return Registration.singleton(ITemplateFactory,this).register(t)}create(t,s){return new CompiledTemplate(this.dom,s,new gn(this.dom,s.template),t)}}bn.inject=[IDOM];let mn=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){const r=e.nextSibling;let h;dom.Pb(e)&&dom.remove(e);const o=ensureExpression(this.Ba,n.from,2048);addEarlyBindable(i,h=o.Yh?new MultiInterpolationBinding(this.it,o,r,"textContent",BindingMode.Ns,s):new InterpolationBinding(o.so,o,r,"textContent",BindingMode.Ns,this.it,s,1))}};mn.inject=[IExpressionParser,IObserverLocator],mn=c([instructionRenderer("ha")],mn);let wn=class{constructor(t,s){this.Ba=t,this.dp=s}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,80|n.strategy+6);addEarlyBindable(i,new Listener(dom,n.to,n.strategy,r,e,n.preventDefault,this.dp,s))}};wn.inject=[IExpressionParser,IEventManager],wn=c([instructionRenderer("hb")],wn);let vn=class{Ds(t,dom,s,i,e,n){e.setAttribute(n.to,n.value)}};vn=c([instructionRenderer("hd")],vn);let yn=class{constructor(t,s){this.Ba=t,this.it=s}Ds(t,dom,s,i,e,n){const r=ensureExpression(this.Ba,n.from,48|BindingMode.Ns);addEarlyBindable(i,new Binding(r,e.style,n.to,BindingMode.Ns,this.it,s))}};yn.inject=[IExpressionParser,IObserverLocator],yn=c([instructionRenderer("hc")],yn);const Cn={mode:"open"},Tn={Ep:1};class An{constructor(dom,$customElement,host,t){let shadowOptions;this.dom=dom,this.host=host,this.shadowRoot=host.jb(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:Cn),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}ua(t){this.dom.Vp(this.shadowRoot,t,Tn)}Db(){return this.shadowRoot}hs(t){t.vu(this.shadowRoot)}ls(t){t.remove()}}class Bn{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.Zi,this.host=dom.Aa(host),this.host.$customElement=$customElement}get children(){return this.childNodes}ua(t){new MutationObserver(t).observe(this.host,Tn)}Db(){return this.host.Mb()}hs(t){t.insertBefore(this.host)}ls(t){t.remove()}}class On{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}ua(t){}Db(){return this.host.Mb()}hs(t){t.vu(this.host)}ls(t){t.remove()}}const IProjectorLocatorRegistration=class{static register(t){return Registration.singleton(IProjectorLocator,this).register(t)}js(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new An(dom,t,host,def)}return def.containerless?new Bn(dom,t,host):new On(t,host)}},Rn=[IProjectorLocatorRegistration,TargetAccessorLocator,TargetObserverLocator,bn],In=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],kn=[wn,vn,yn,mn],Sn={register:t=>Se.register(t).register(...Rn,...In,...kn),re(){return this.register(DI.re())}};ds=Object.freeze({Listener,get AttributeNSAccessor(){return AttributeNSAccessor},get CheckedObserver(){return CheckedObserver},get ClassAttributeAccessor(){return ClassAttributeAccessor},get DataAttributeAccessor(){return DataAttributeAccessor},get ElementPropertyAccessor(){return ElementPropertyAccessor},ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},get StyleAttributeAccessor(){return StyleAttributeAccessor},ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,IProjectorLocatorRegistration,ITargetAccessorLocatorRegistration:TargetAccessorLocator,ITargetObserverLocatorRegistration:TargetObserverLocator,ITemplateFactoryRegistration:bn,DefaultComponents:Rn,AttrBindingBehaviorRegistration:AttrBindingBehavior,SelfBindingBehaviorRegistration:SelfBindingBehavior,UpdateTriggerBindingBehaviorRegistration:UpdateTriggerBindingBehavior,ComposeRegistration:Compose,DefaultResources:In,ListenerBindingRendererRegistration:wn,SetAttributeRendererRegistration:vn,StylePropertyBindingRendererRegistration:yn,TextBindingRendererRegistration:mn,DefaultRenderers:kn,BasicConfiguration:Sn,createElement,RenderPlan,get HTMLTargetedInstructionType(){return HTMLTargetedInstructionType},isHTMLTargetedInstruction,get NodeType(){return NodeType},HTMLDOM,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hc",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction});class TriggerBindingCommand{constructor(){this.Ra=86}compile(t){return new TriggerBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.Ra=88}compile(t){return new DelegateBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.Ra=87}compile(t){return new CaptureBindingInstruction(t.Ur,getTarget(t,0))}}BindingCommandResource.Er("capture",CaptureBindingCommand),Profiler.Se("TemplateBinder");const Pn={id:1,$b:1,xb:1},Ln={Vb:1,$b:1,xb:1};class TemplateBinder{constructor(dom,t,s,i){this.dom=dom,this.Fg=t,this.Fb=s,this.Ub=i,this.Zu=null,this.manifest=null,this.Nb=null,this.qb=null,this.rp=null}bind(t){const s=this.Zu,i=this.qb,e=this.Nb,n=this.manifest,r=this.Zu=this.manifest=new PlainElementSymbol(t),h=t.attributes;let o=0;for(;h.length>o;){const t=h[o],s=this.Fb.parse(t.name,t.value);if(1==Pn[s.target])throw Error(`Invalid surrogate attribute: ${s.target}`);const i=this.Fg.zg(s);if(null===i)this.Hb(s);else{if(i.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.zb(s,i)}++o}return this.Wb(t),this.Zu=s,this.qb=i,this.Nb=e,this.manifest=n,r}Kb(t,s){switch(s.nodeName){case"LET":return void this.Qb(t,s);case"SLOT":return void(this.Zu.hasSlots=1)}const i=this.qb,e=this.Nb,n=this.manifest;let r;this.rp=s.getAttribute("part");let name=s.getAttribute("as-element");null===name&&(name=s.nodeName.toLowerCase());const h=this.Fg.Hg(name);null===h?this.manifest=new PlainElementSymbol(s):(this.qb=this.Nb,r=this.Nb=this.manifest=new CustomElementSymbol(this.dom,s,h)),this.Wb(s),this.Gb(s,t),void 0!==r&&r.Bn?s.parentNode.replaceChild(r.marker,s):this.manifest.up&&s.classList.add("au"),this.qb=i,this.Nb=e,this.manifest=n}Qb(t,s){const i=new LetElementSymbol(this.dom,s);t.childNodes.push(i);const e=s.attributes;let n=0;for(;e.length>n;){const t=e[n];if("to-view-model"===t.name){s.removeAttribute("to-view-model"),i.toViewModel=1;continue}const r=this.Fb.parse(t.name,t.value),h=this.Fg.Wg(r),o=this.Ub.parse(r.Ci,null===h?2048:h.Ra),to=PLATFORM.Ys(r.target),l=new BindableInfo(to,BindingMode.Ns);i.ep.push(new BindingSymbol(h,l,o,r.Ci,to)),++n}s.parentNode.replaceChild(i.marker,s)}Gb(t,s){const{qb:i,Nb:e,manifest:n}=this;let r=n;const h=this.Zb(t);let o,l;const c=t.attributes;let u=0;for(;c.length>u;){const t=c[u];if(++u,1==Ln[t.name])continue;const s=this.Fb.parse(t.name,t.value),i=this.Fg.zg(s);null===i?this.Hb(s):i.isTemplateController?(l=n.templateController=this._b(s,i),r===n?(l.template=n,r=l):(l.templateController=o,l.template=o.template,o.template=l),o=l):this.zb(s,i)}(function(dom,t,s){const i=s.hp;let e,n=t;for(;n!==s;)n.template===s?(i.parentNode.replaceChild(n.marker,i),"TEMPLATE"===i.nodeName?(n.hp=i,i.remove()):(e=n.hp=dom.Sb()).content.appendChild(i)):(e=n.hp=dom.Sb()).content.appendChild(n.marker),i.removeAttribute(n.ti.yi),n=n.template})(this.dom,r,n),null===h?s.childNodes.push(r):(h.parent=s,h.template=r,(n===e?i:e).parts.push(h),(function(dom,t,s){let i,e;"TEMPLATE"===(i=512&s.flags?s.marker:s.hp).nodeName?t.hp=i:(e=t.hp=dom.Sb()).content.appendChild(i)})(this.dom,h,r))}Wb(t){let s,i;for(s="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==s;)switch(s.nodeType){case 1:i=s.nextSibling,this.Kb(this.manifest,s),s=i;break;case 3:s=this.Xb(s).nextSibling;break;case 4:case 7:case 8:case 10:s=s.nextSibling;break;case 9:case 11:s=s.firstChild}}Xb(t){const s=this.Ub.parse(t.wholeText,2048);if(null!==s){const i=new TextSymbol(this.dom,t,s);this.manifest.childNodes.push(i),(function(t){const s=t.hp,i=s.parentNode;for(;null!==s.nextSibling&&3===s.nextSibling.nodeType;)i.removeChild(s.nextSibling);s.textContent="",i.insertBefore(t.marker,s)})(i)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}_b(t,s){let i;const e=this.Fg.Wg(t);if(null===e&&s.xs)i=new TemplateControllerSymbol(this.dom,t,s,this.rp),this.rp=null,this.Jb(i,s,t.Ci);else{i=new TemplateControllerSymbol(this.dom,t,s,this.rp);const n=this.Ub.parse(t.Ci,null===e?2048:e.Ra);i.ep.push(new BindingSymbol(e,s.bindable,n,t.Ci,t.target)),this.rp=null}return i}zb(t,s){const i=this.Fg.Wg(t);let e;if(null===i&&s.xs)e=new CustomAttributeSymbol(t,s),this.Jb(e,s,t.Ci);else{e=new CustomAttributeSymbol(t,s);const n=this.Ub.parse(t.Ci,null===i?2048:i.Ra);e.ep.push(new BindingSymbol(i,s.bindable,n,t.Ci,t.target))}this.manifest.attributes.push(e),this.manifest.up=1}Jb(t,s,value){const i=(function(t){const s=[],i=new En(t),e=i.length;let name,value;for(;e>i.index;){if(0===(name=_t(i)).length)return s;value=Xt(i),s.push({name,value})}return s})(value);let e;for(let n=0,r=i.length;r>n;++n){const r=this.Fb.parse((e=i[n]).name,e.value),h=this.Fg.Wg(r),o=this.Ub.parse(r.Ci,null===h?2048:h.Ra);let l=s.bindables[r.target];void 0===l&&(l=s.bindables[r.target]=new BindableInfo(r.target,BindingMode.Ns)),t.ep.push(new BindingSymbol(h,l,o,r.Ci,r.target))}}Hb(t){if(0===t.Ci.length)return;const s=this.Fg.Wg(t),i=this.manifest,e=this.Ub.parse(t.Ci,null===s?2048:s.Ra);if(16&i.flags){const n=i.bindables[t.target];void 0!==n?(i.ep.push(new BindingSymbol(s,n,e,t.Ci,t.target)),i.up=1):null===e&&"ref"!==t.target||(i.attributes.push(new PlainAttributeSymbol(t,s,e)),i.up=1)}else null!==e||"ref"===t.target?(i.attributes.push(new PlainAttributeSymbol(t,s,e)),i.up=1):i===this.Zu&&i.attributes.push(new PlainAttributeSymbol(t,s,e))}Zb(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}class En{constructor(t){this.input=t,this.index=0,this.length=t.length}}const jn=String.fromCharCode;(function(t){t[t.rd=34]="DoubleQuote",t[t.od=39]="SingleQuote",t[t.zf=47]="Slash",t[t.ld=59]="Semicolon",t[t.Cf=58]="Colon"})(gs||(gs={}));const ITemplateElementFactory=DI.le("ITemplateElementFactory").ue();Profiler.Se("TemplateElementFactory");class Dn{constructor(dom){this.dom=dom,this.template=dom.Sb()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}Sb(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const s=template.content.firstElementChild;return null===s||"TEMPLATE"!==s.nodeName||null!==s.nextElementSibling?(this.template=this.dom.Sb(),template):(template.content.removeChild(s),s)}if("TEMPLATE"!==t.nodeName){const template=this.dom.Sb();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}Dn.inject=[IDOM];const Mn=Object.freeze({required:0,compiler:"default"});Profiler.Se("TemplateCompiler");class $n{constructor(t,s,i){this.ku=t,this.Fb=s,this.Ub=i,this.Yb=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,s){const i=new TemplateBinder(dom,new ResourceModel(s),this.Fb,this.Ub),template=t.template=this.ku.Sb(t.template),e=i.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.Zi||(t.instructions=[]),1==e.hasSlots&&(t.hasSlots=1),this.Yb=t.instructions;const n=e.attributes,r=n.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.Zi||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.tm(n[t])}return this.sm(e),this.Yb=null,t}sm(t){if(8192&t.flags){const{childNodes}=t;let s;const i=childNodes.length;for(let t=0;i>t;++t)if(128&(s=childNodes[t]).flags)this.Yb.push([new TextBindingInstruction(s.gc)]);else if(32&s.flags){const t=s.ep,instructions=[];let i;const e=t.length;for(let s=0;e>s;++s)instructions[s]=new LetBindingInstruction((i=t[s]).Ur,i.target);this.Yb.push([new LetElementInstruction(instructions,s.toViewModel)])}else this.im(s)}}em(t){const s=this.nm(t,1);s[0]=new HydrateElementInstruction(t.res,this.rm(t),this.hm(t)),this.Yb.push(s)}om(t){const s=this.nm(t,0);s.length>0&&this.Yb.push(s),this.sm(t)}im(t){switch(511&t.flags){case 16:this.em(t);break;case 64:this.om(t);break;case 1:this.lm(t)}}lm(t){const s=this.rm(t),i=this.Yb,e=this.Yb=[];this.im(t.template),this.Yb=i,this.Yb.push([new HydrateTemplateController({name:null===t.rp?t.res:t.rp,template:t.hp,instructions:e,build:Mn},t.res,s,"else"===t.res)])}rm(t){let s;if(4096&t.flags){const{ep:i}=t,e=i.length;s=Array(e);let n=0;for(;e>n;++n)s[n]=this.cm(i[n])}else s=PLATFORM.Zi;return s}cm(t){return null===t.command?null===t.Ur?new SetPropertyInstruction(t.Ci,t.bindable.Js):new InterpolationInstruction(t.Ur,t.bindable.Js):t.command.compile(t)}nm(t,s){let i;if(2048&t.flags){const{attributes:e}=t,n=e.length;i=Array(s+n);for(let t=0;n>t;++t)i[t+s]=this.tm(e[t])}else i=s>0?Array(s):PLATFORM.Zi;return i}um(t){const s=this.rm(t);return new HydrateAttributeInstruction(t.res,s)}am(t){return null===t.command?null===t.Ur?new SetAttributeInstruction(t.ti.Ci,t.ti.target):new InterpolationInstruction(t.Ur,t.ti.target):t.command.compile(t)}tm(t){return"ref"===t.ti.target?new RefBindingInstruction(t.ti.Ci):4&t.flags?this.um(t):this.am(t)}hm(t){let parts;if(16384&t.flags){parts={};const s=t.parts,i=s.length;let e,n,r;for(let t=0;i>t;++t)r=s[t],e=this.Yb,n=this.Yb=[],this.im(r.template),parts[r.name]={name:r.name,template:r.hp,instructions:n,build:Mn},this.Yb=e}else parts=PLATFORM.Mt;return parts}}$n.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const xn=[$n,Dn],Vn=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand];ps=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,ITemplateCompilerRegistration:$n,ITemplateElementFactoryRegistration:Dn,DefaultComponents:xn,TriggerBindingCommandRegistration:TriggerBindingCommand,DelegateBindingCommandRegistration:DelegateBindingCommand,CaptureBindingCommandRegistration:CaptureBindingCommand,DefaultBindingLanguage:Vn,BasicConfiguration:{register:t=>Sn.register(t).register(...We,...DefaultBindingSyntax,...DefaultBindingLanguage,...xn,...Vn),re(){return this.register(DI.re())}},stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory});class Fn{constructor(t){this.sa=t}static register(t){return Registration.singleton(IDOMInitializer,this).register(t)}initialize(t){if(this.sa.has(IDOM,0))return this.sa.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(window,null!==t.host.ownerDocument?t.host.ownerDocument:document,Node,Element,HTMLElement):new HTMLDOM(window,document,Node,Element,HTMLElement),Registration.v(IDOM,dom).register(this.sa),dom}}Fn.inject=[IContainer];const Un=[Fn],Nn={register:t=>Sn.register(t).register(...Un),re(){return this.register(DI.re())}};return bs=Object.freeze({fm:Fn,DefaultComponents:Un,BasicConfiguration:Nn}),Profiler.Se("BasicConfiguration"),ms=Object.freeze({BasicConfiguration:{register:t=>(Nn.register(t).register(...DefaultBindingLanguage,...DefaultBindingSyntax,...We,...Vn,...xn),t),re(){return this.register(DI.re())}}}),t.kernel=Yt,t.runtime=rs,t.runtimeHtml=ds,t.runtimeHtmlBrowser=bs,t.jit=fs,t.jitHtml=ps,t.jitHtmlBrowser=ms,t})({});
