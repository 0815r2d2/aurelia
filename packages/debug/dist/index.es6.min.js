function enableImprovedExpressionDebugging(){astTypeMap.forEach(e=>{adoptDebugMethods(e.type,e.name)})}function adoptDebugMethods(e){e.prototype.toString=function(){return Unparser.t(this)}}function getMessageInfoForCode(e){return codeLookup[e]||createInvalidCodeMessageInfo(e)}function createInvalidCodeMessageInfo(e){return{type:0,message:`Attempted to report with unknown code ${e}.`}}function enableLiveLogging(e){this.s=1,this.i=e&&"write"in e?e:createLiveTraceWriter(e||defaultOptions)}function flagsText(e,t=0){return e.o.length>t?stringifyLifecycleFlags(e.o[t]):"none"}function _ctorName(e){return void 0===e?"undefined":null===e?"null":void 0!==e.constructor?e.constructor.description?`Resource{'${e.constructor.description.name}'}`:e.constructor.name:"string"==typeof e?`'${e}'`:toString.call(e)}function ctorName(e,t=0){return e.o.length>t?_ctorName(e.o[t]):"undefined"}function scopeText(e,t=0){let r;if(e.o.length>t){const $scope=e.o[t];return`Scope{${r=$scope&&$scope.l?_ctorName($scope.l):"undefined"}}`}return"undefined"}function keyText(e,t=0){if(e.o.length>t){const r=e.o[t];return"string"==typeof r?`'${r}'`:r&&Reflect.has(r,"friendlyName")?r.g:_ctorName(r)}return"undefined"}function primitive(e,t=0){if(e.o.length>t){const r=e.o[t];return"string"==typeof r?`'${r}'`:""+r}return"undefined"}function createLiveTraceWriter(e){const t={};return e.p&&Object.assign(t,RenderingArgsProcessor),e.m&&Object.assign(t,BindingArgsProcessor),e.h&&Object.assign(t,ObservationArgsProcessor),e.u&&Object.assign(t,AttachingArgsProcessor),e.v&&Object.assign(t,MountingArgsProcessor),e.T&&Object.assign(t,DIArgsProcessor),e.$&&Object.assign(t,LifecycleArgsProcessor),e.jit&&Object.assign(t,JitArgsProcessor),{write(e){let r;if(void 0!==t[e.L])r=t[e.L](e);else{if(void 0===t[e.A])return;r=t[e.A](e)}Reporter.write(1e4,`${"-".repeat(e.I)}${e.A}.${e.L}(${r})`)}}}function stringifyLifecycleFlags(e){const t=[];return e&LifecycleFlags.O&&t.push("mustEvaluate"),e&LifecycleFlags.C&&t.push("isCollectionMutation"),e&LifecycleFlags.F&&t.push("isInstanceMutation"),e&LifecycleFlags.k&&t.push("updateTargetObserver"),e&LifecycleFlags.P&&t.push("updateTargetInstance"),e&LifecycleFlags.S&&t.push("updateSourceExpression"),e&LifecycleFlags.N&&t.push("fromAsyncFlush"),e&LifecycleFlags.B&&t.push("fromSyncFlush"),e&LifecycleFlags.M&&t.push("fromStartTask"),e&LifecycleFlags.j&&t.push("fromStopTask"),e&LifecycleFlags.U&&t.push("fromBind"),e&LifecycleFlags.D&&t.push("fromUnbind"),e&LifecycleFlags.R&&t.push("fromAttach"),e&LifecycleFlags.V&&t.push("fromDetach"),e&LifecycleFlags.q&&t.push("fromCache"),e&LifecycleFlags.H&&t.push("fromDOMEvent"),e&LifecycleFlags._&&t.push("fromObserverSetter"),e&LifecycleFlags.J&&t.push("fromBindableHandler"),e&LifecycleFlags.K&&t.push("fromLifecycleTask"),e&LifecycleFlags.W&&t.push("parentUnmountQueued"),e&LifecycleFlags.Y&&t.push("doNotUpdateDOM"),e&LifecycleFlags.G&&t.push("isTraversingParentScope"),e&LifecycleFlags.X&&t.push("allowParentScopeTraversal"),e&LifecycleFlags.Z&&t.push("getterSetterStrategy"),e&LifecycleFlags.ee&&t.push("proxyStrategy"),e&LifecycleFlags.te&&t.push("keyedStrategy"),e&LifecycleFlags.re&&t.push("patchStrategy"),0===t.length?"none":t.join("|")}import{Reporter,PLATFORM,Tracer}from"@aurelia/kernel";import{AccessKeyed,AccessMember,AccessScope,AccessThis,ArrayBindingPattern,ArrayLiteral,Assign,Binary,BindingBehavior,BindingIdentifier,CallFunction,CallMember,CallScope,Conditional,ForOfStatement,HtmlLiteral,Interpolation,ObjectBindingPattern,ObjectLiteral,PrimitiveLiteral,TaggedTemplate,Template,Unary,ValueConverter,LifecycleFlags}from"@aurelia/runtime";const astTypeMap=[{type:AccessKeyed,name:"AccessKeyed"},{type:AccessMember,name:"AccessMember"},{type:AccessScope,name:"AccessScope"},{type:AccessThis,name:"AccessThis"},{type:ArrayBindingPattern,name:"ArrayBindingPattern"},{type:ArrayLiteral,name:"ArrayLiteral"},{type:Assign,name:"Assign"},{type:Binary,name:"Binary"},{type:BindingBehavior,name:"BindingBehavior"},{type:BindingIdentifier,name:"BindingIdentifier"},{type:CallFunction,name:"CallFunction"},{type:CallMember,name:"CallMember"},{type:CallScope,name:"CallScope"},{type:Conditional,name:"Conditional"},{type:ForOfStatement,name:"ForOfStatement"},{type:HtmlLiteral,name:"HtmlLiteral"},{type:Interpolation,name:"Interpolation"},{type:ObjectBindingPattern,name:"ObjectBindingPattern"},{type:ObjectLiteral,name:"ObjectLiteral"},{type:PrimitiveLiteral,name:"PrimitiveLiteral"},{type:TaggedTemplate,name:"TaggedTemplate"},{type:Template,name:"Template"},{type:Unary,name:"Unary"},{type:ValueConverter,name:"ValueConverter"}];class Unparser{constructor(){this.text=""}static t(e){const t=new Unparser;return e.accept(t),t.text}se(e){e.object.accept(this),this.text+=`.${e.name}`}ie(e){e.object.accept(this),this.text+="[",e.key.accept(this),this.text+="]"}ne(e){if(0===e.ae)return void(this.text+="$this");this.text+="$parent";let t=e.ae-1;for(;t--;)this.text+=".$parent"}oe(e){let t=e.ae;for(;t--;)this.text+="$parent.";this.text+=e.name}ce(e){const t=e.elements;this.text+="[";for(let e=0,r=t.length;r>e;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+="]"}le(e){const t=e.keys,r=e.values;this.text+="{";for(let e=0,s=t.length;s>e;++e)0!==e&&(this.text+=","),this.text+=`'${t[e]}':`,r[e].accept(this);this.text+="}"}ge(e){if(this.text+="(","string"==typeof e.value){const t=e.value.replace(/'/g,"\\'");this.text+=`'${t}'`}else this.text+=`${e.value}`;this.text+=")"}pe(e){this.text+="(",e.fe.accept(this),this.me(e.he),this.text+=")"}de(e){this.text+="(",e.object.accept(this),this.text+=`.${e.name}`,this.me(e.he),this.text+=")"}ue(e){this.text+="(";let t=e.ae;for(;t--;)this.text+="$parent.";this.text+=e.name,this.me(e.he),this.text+=")"}ye(e){const{ve:t,be:r}=e,s=r.length;this.text+="`",this.text+=t[0];for(let e=0;s>e;e++)r[e].accept(this),this.text+=t[e+1];this.text+="`"}Te(e){const{ve:t,be:r}=e,s=r.length;e.fe.accept(this),this.text+="`",this.text+=t[0];for(let e=0;s>e;e++)r[e].accept(this),this.text+=t[e+1];this.text+="`"}$e(e){this.text+=`(${e.Le}`,97>e.Le.charCodeAt(0)||(this.text+=" "),e.xe.accept(this),this.text+=")"}Ae(e){this.text+="(",e.left.accept(this),105===e.Le.charCodeAt(0)?this.text+=` ${e.Le} `:this.text+=e.Le,e.right.accept(this),this.text+=")"}Ie(e){this.text+="(",e.Oe.accept(this),this.text+="?",e.Ce.accept(this),this.text+=":",e.Fe.accept(this),this.text+=")"}ke(e){this.text+="(",e.target.accept(this),this.text+="=",e.value.accept(this),this.text+=")"}we(e){const t=e.he;e.xe.accept(this),this.text+=`|${e.name}`;for(let e=0,r=t.length;r>e;++e)this.text+=":",t[e].accept(this)}Pe(e){const t=e.he;e.xe.accept(this),this.text+=`&${e.name}`;for(let e=0,r=t.length;r>e;++e)this.text+=":",t[e].accept(this)}Se(e){const t=e.elements;this.text+="[";for(let e=0,r=t.length;r>e;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+="]"}Ne(e){const t=e.keys,r=e.values;this.text+="{";for(let e=0,s=t.length;s>e;++e)0!==e&&(this.text+=","),this.text+=`'${t[e]}':`,r[e].accept(this);this.text+="}"}Be(e){this.text+=e.name}Me(e){throw Error("visitHtmlLiteral")}je(e){e.Ue.accept(this),this.text+=" of ",e.De.accept(this)}Re(e){const{parts,be:t}=e,r=t.length;this.text+="${",this.text+=parts[0];for(let e=0;r>e;e++)t[e].accept(this),this.text+=parts[e+1];this.text+="}"}me(e){this.text+="(";for(let t=0,r=e.length;r>t;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+=")"}}var MessageType;(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.info=2]="info",e[e.debug=3]="debug"})(MessageType||(MessageType={}));const Reporter$1=Object.assign({},Reporter,{write(e,...t){switch(getMessageInfoForCode(e).type){case 3:case 2:case 1:break;case 0:throw this.error(e,...t)}},error(e,...t){const r=getMessageInfoForCode(e),s=Error(r.message);return s.data=t,s}}),codeLookup={0:{type:1,message:"Cannot add observers to object."},1:{type:1,message:"Cannot observe property of object."},2:{type:2,message:"Starting application in debug mode."},3:{type:0,message:"Runtime expression compilation is only available when including JIT support."},4:{type:0,message:"Invalid animation direction."},5:{type:0,message:"key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},6:{type:0,message:"Invalid resolver strategy specified."},7:{type:0,message:"Constructor Parameter with index cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?"},8:{type:0,message:"Self binding behavior only supports events."},9:{type:0,message:"The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">"},10:{type:0,message:"The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements."},11:{type:0,message:"Only property bindings and string interpolation bindings can be signaled. Trigger, delegate and call bindings cannot be signaled."},12:{type:0,message:"Signal name is required."},14:{type:0,message:"Property cannot be assigned."},15:{type:0,message:"Unexpected call context."},16:{type:0,message:"Only one child observer per content view is supported for the life of the content view."},17:{type:0,message:"You can only define one default implementation for an interface."},18:{type:0,message:"You cannot observe a setter only property."},19:{type:0,message:"Value for expression is non-repeatable."},20:{type:0,message:"No template compiler found with the specified name. JIT support or a custom compiler is required."},21:{type:0,message:"You cannot combine the containerless custom element option with Shadow DOM."},22:{type:0,message:"A containerless custom element cannot be the root component of an application."},30:{type:0,message:"There are more targets than there are target instructions."},31:{type:0,message:"There are more target instructions than there are targets."},100:{type:0,message:"Invalid start of expression."},101:{type:0,message:"Unconsumed token."},102:{type:0,message:"Double dot and spread operators are not supported."},103:{type:0,message:"Invalid member expression."},104:{type:0,message:"Unexpected end of expression."},105:{type:0,message:"Expected identifier."},106:{type:0,message:'Invalid BindingIdentifier at left hand side of "of".'},107:{type:0,message:"Invalid or unsupported property definition in object literal."},108:{type:0,message:"Unterminated quote in string literal."},109:{type:0,message:"Unterminated template string."},110:{type:0,message:"Missing expected token."},111:{type:0,message:"Unexpected character."},150:{type:0,message:"Left hand side of expression is not assignable."},151:{type:0,message:'Unexpected keyword "of"'},10000:{type:3,message:"%s"}},marker={A:"marker",L:"noop",o:PLATFORM.Ee,I:-1,Ve:null,next:null};class TraceInfo{constructor(e,t,r){this.A=e,this.L=t,this.I=TraceInfo.stack.length,this.o=r,this.next=marker,this.Ve=TraceInfo.qe,TraceInfo.qe.next=this,TraceInfo.qe=this,TraceInfo.stack.push(this)}static reset(){let e=TraceInfo.head,t=null;for(;null!==e;)t=e.next,e.next=null,e.Ve=null,e.o=null,e=t;TraceInfo.head=marker,TraceInfo.qe=marker,TraceInfo.stack=[]}static He(e,t,r){return new TraceInfo(e,t,r)}static _e(){return TraceInfo.stack.pop()}}TraceInfo.head=marker,TraceInfo.qe=marker,TraceInfo.stack=[];const Tracer$1=Object.assign({},Tracer,{enabled:0,s:0,i:null,He(e,t,r){if(this.enabled){const s=TraceInfo.He(e,t,r);this.s&&this.i.write(s)}},_e(){this.enabled&&TraceInfo._e()},Je(e){let t=0;const r=TraceInfo.stack,s=r.length;for(;s>t;)e.write(r[t]),++t},Ke(e){if(null!==e){let t=TraceInfo.head.next;for(;null!==t&&t!==marker;)e.write(t),t=t.next}TraceInfo.reset()},We:enableLiveLogging,Ye(){this.s=0,this.i=null}}),defaultOptions=Object.freeze({p:1,m:1,h:1,u:1,v:1,T:1,$:1,jit:1}),toString={}.toString,RenderingArgsProcessor={Qe:e=>flagsText(e),ze:e=>`${flagsText(e)},IDOM,IRenderContext,${ctorName(e,3)}`,addBinding:e=>`${ctorName(e)},${ctorName(e,1)}`,addComponent:e=>`${ctorName(e)},${ctorName(e,1)}`},BindingArgsProcessor={Ge:e=>flagsText(e),Xe:e=>flagsText(e),connect:e=>flagsText(e),constructor(e){switch(e.A){case"ArrayObserver":case"MapObserver":case"SetObserver":return flagsText(e);case"SetterObserver":case"SelfObserver":return`${flagsText(e)},${ctorName(e,1)},${primitive(e,2)}`;case"ProxyObserver":return ctorName(e);case"ProxySubscriberCollection":case"DirtyCheckProperty":return`${ctorName(e,1)},${primitive(e,2)}`;case"PrimitiveObserver":case"PropertyAccessor":return`${ctorName(e)},${primitive(e,1)}`;default:return""}},Ze:e=>flagsText(e),et:e=>flagsText(e),tt:e=>`${flagsText(e)},${ctorName(e,1)},${primitive(e,2)}`,BindingContext(e){switch(e.L){case"get":return`${scopeText(e)},${primitive(e,1)},${primitive(e,2)},${flagsText(e,3)}`;case"getObservers":return flagsText(e)}},Scope(e){switch(e.L){case"create":return`${flagsText(e)},${ctorName(e,1)},${ctorName(e,2)}`;case"fromOverride":return`${flagsText(e)},${ctorName(e,1)}`;case"fromParent":return`${flagsText(e)},${scopeText(e,1)},${ctorName(e,2)}`}},OverrideContext(e){switch(e.L){case"create":return`${flagsText(e)},${ctorName(e,1)},${ctorName(e,2)}`;case"getObservers":return""}}},ObservationArgsProcessor={rt:e=>flagsText(e),st(e){switch(e.A){case"Listener":return e.o[0].type;case"Call":const t=[];for(let r=0,s=e.o.length;s>r;++r)t.push(ctorName(e,r));return t.join(",")}},it(e){let t;const value=e.o[0];switch(typeof value){case"undefined":t="undefined";break;case"object":t=null===value?"null":_ctorName(value);break;case"string":t=`'${value}'`;break;case"number":t=""+value;break;default:t=_ctorName(value)}return`${t},${flagsText(e,1)}`},flush:e=>flagsText(e),nt:e=>`${primitive(e)},${primitive(e,1)},${flagsText(e,2)}`,at:e=>scopeText(e)},AttachingArgsProcessor={ot:e=>flagsText(e),ct:e=>flagsText(e),lt:e=>flagsText(e),gt:e=>`Node{'${e.o[0].textContent}'}`,release:e=>flagsText(e)},MountingArgsProcessor={pt:e=>flagsText(e),ft:e=>flagsText(e),ht:e=>ctorName(e),dt:e=>ctorName(e)},DIArgsProcessor={construct:e=>ctorName(e),ut(e){switch(e.L){case"get":case"getAll":return keyText(e);case"register":const t=[];for(let r=0,s=e.o.length;s>r;++r)t.push(keyText(e,r));return t.join(",");case"createChild":return""}}},LifecycleArgsProcessor={yt(e){switch(e.L.slice(0,3)){case"beg":return"";case"enq":return ctorName(e);case"end":case"pro":return flagsText(e)}},CompositionCoordinator(e){switch(e.L){case"enqueue":return"IView";case"swap":return`IView,${flagsText(e,1)}`;case"processNext":return""}},AggregateLifecycleTask(e){switch(e.L){case"addTask":case"removeTask":return ctorName(e);case"complete":return`${primitive(e,2)}`}}},JitArgsProcessor={TemplateBinder:()=>""},DebugConfiguration={register(e){Reporter$1.write(2),Object.assign(Reporter,Reporter$1),enableImprovedExpressionDebugging()}},TraceConfiguration={register(e){Object.assign(Tracer,Tracer$1)}};export{DebugConfiguration,TraceConfiguration};
