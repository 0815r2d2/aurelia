System.register("jitHtml",["@aurelia/jit","@aurelia/runtime-html","@aurelia/kernel","@aurelia/runtime"],function(e){"use strict";var getTarget,BindingCommandResource,PlainElementSymbol,CustomElementSymbol,LetElementSymbol,BindableInfo,BindingSymbol,TextSymbol,TemplateControllerSymbol,CustomAttributeSymbol,PlainAttributeSymbol,ReplacePartSymbol,ResourceModel,IAttributeParser,DefaultComponents,DefaultBindingSyntax,DefaultBindingLanguage,TriggerBindingInstruction,DelegateBindingInstruction,CaptureBindingInstruction,TextBindingInstruction,SetAttributeInstruction,BasicConfiguration,Profiler,PLATFORM,DI,Registration,BindingMode,IDOM,ITemplateCompiler,LetBindingInstruction,LetElementInstruction,HydrateElementInstruction,HydrateTemplateController,SetPropertyInstruction,InterpolationInstruction,HydrateAttributeInstruction,RefBindingInstruction,IExpressionParser;return{t:[function(e){getTarget=e.getTarget,BindingCommandResource=e.BindingCommandResource,PlainElementSymbol=e.PlainElementSymbol,CustomElementSymbol=e.CustomElementSymbol,LetElementSymbol=e.LetElementSymbol,BindableInfo=e.BindableInfo,BindingSymbol=e.BindingSymbol,TextSymbol=e.TextSymbol,TemplateControllerSymbol=e.TemplateControllerSymbol,CustomAttributeSymbol=e.CustomAttributeSymbol,PlainAttributeSymbol=e.PlainAttributeSymbol,ReplacePartSymbol=e.ReplacePartSymbol,ResourceModel=e.ResourceModel,IAttributeParser=e.IAttributeParser,DefaultComponents=e.DefaultComponents,DefaultBindingSyntax=e.DefaultBindingSyntax,DefaultBindingLanguage=e.DefaultBindingLanguage},function(e){TriggerBindingInstruction=e.TriggerBindingInstruction,DelegateBindingInstruction=e.DelegateBindingInstruction,CaptureBindingInstruction=e.CaptureBindingInstruction,TextBindingInstruction=e.TextBindingInstruction,SetAttributeInstruction=e.SetAttributeInstruction,BasicConfiguration=e.BasicConfiguration},function(e){Profiler=e.Profiler,PLATFORM=e.PLATFORM,DI=e.DI,Registration=e.Registration},function(e){BindingMode=e.BindingMode,IDOM=e.IDOM,ITemplateCompiler=e.ITemplateCompiler,LetBindingInstruction=e.LetBindingInstruction,LetElementInstruction=e.LetElementInstruction,HydrateElementInstruction=e.HydrateElementInstruction,HydrateTemplateController=e.HydrateTemplateController,SetPropertyInstruction=e.SetPropertyInstruction,InterpolationInstruction=e.InterpolationInstruction,HydrateAttributeInstruction=e.HydrateAttributeInstruction,RefBindingInstruction=e.RefBindingInstruction,IExpressionParser=e.IExpressionParser}],s(){function t(e){const t=e.index,{length:s,input:h}=e;for(;s>e.index&&58!==h.charCodeAt(++e.index););return h.slice(t,e.index).trim()}function s(e){++e.index;const{length:t,input:s}=e;let h="",l=0;for(;t>e.index;){switch(l=s.charCodeAt(e.index)){case 59:return++e.index,h.trim();case 47:l=s.charCodeAt(++e.index),h+=`\\${c(l)}`;break;case 39:h+="'";break;default:h+=c(l)}++e.index}return h.trim()}function stringifyDOM(e,t){let s=" ".repeat(t);if(s+=`Node: ${e.nodeName}`,3===e.nodeType&&(s+=` "${e.textContent}"`),1===e.nodeType){let t,h=0;const l=e.attributes,n=l.length;for(;n>h;++h)s+=` ${(t=l[h]).name}=${t.value}`}if(s+="\n",1===e.nodeType){let h=0,childNodes=e.childNodes,l=childNodes.length;for(;l>h;++h)s+=stringifyDOM(childNodes[h],t+1);if("TEMPLATE"===e.nodeName)for(h=0,l=(childNodes=e.content.childNodes).length;l>h;++h)s+=stringifyDOM(childNodes[h],t+1)}return s}function stringifyInstructions(e,t){let s=" ".repeat(t);switch(e.type){case"ha":s+="textBinding\n";break;case"rh":s+="callBinding\n";break;case"rk":s+="iteratorBinding\n";break;case"hb":s+="listenerBinding\n";break;case"rg":s+="propertyBinding\n";break;case"rj":s+="refBinding\n";break;case"hc":s+="stylePropertyBinding\n";break;case"re":s+="setProperty\n";break;case"hd":s+="setAttribute\n";break;case"rf":s+="interpolation\n";break;case"rd":s+="hydrateLetElement\n",e.instructions.forEach(e=>{s+=stringifyInstructions(e,t+1)});break;case"rb":s+=`hydrateAttribute: ${e.res}\n`,e.instructions.forEach(e=>{s+=stringifyInstructions(e,t+1)});break;case"ra":s+=`hydrateElement: ${e.res}\n`,e.instructions.forEach(e=>{s+=stringifyInstructions(e,t+1)});break;case"rc":s+=`hydrateTemplateController: ${e.res}\n`,s+=stringifyTemplateDefinition(e.def,t+1),e.instructions.forEach(e=>{s+=stringifyInstructions(e,t+1)})}return s}function stringifyTemplateDefinition(def,e){const t=" ".repeat(e);let s=t;return s+=`TemplateDefinition: ${def.name}\n`,s+=stringifyDOM(def.template,e+1),s+=`${t} Instructions:\n`,def.instructions.forEach(h=>{s+=`${t}  Row:\n`,h.forEach(t=>{s+=stringifyInstructions(t,e+3)})}),s}e({stringifyDOM,stringifyInstructions,stringifyTemplateDefinition});class TriggerBindingCommand{constructor(){this.h=86}compile(e){return new TriggerBindingInstruction(e.l,getTarget(e,0))}}e("TriggerBindingCommand",TriggerBindingCommand),BindingCommandResource.i("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.h=88}compile(e){return new DelegateBindingInstruction(e.l,getTarget(e,0))}}e("DelegateBindingCommand",DelegateBindingCommand),BindingCommandResource.i("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.h=87}compile(e){return new CaptureBindingInstruction(e.l,getTarget(e,0))}}e("CaptureBindingCommand",CaptureBindingCommand),BindingCommandResource.i("capture",CaptureBindingCommand),Profiler.o("TemplateBinder");const h={id:1,u:1,T:1},l={k:1,u:1,T:1};class TemplateBinder{constructor(dom,e,t,s){this.dom=dom,this.C=e,this.m=t,this.$=s,this.B=null,this.manifest=null,this.v=null,this.A=null,this.D=null}bind(e){const t=this.B,s=this.A,l=this.v,n=this.manifest,c=this.B=this.manifest=new PlainElementSymbol(e),i=e.attributes;let r=0;for(;i.length>r;){const e=i[r],t=this.m.parse(e.name,e.value);if(1==h[t.target])throw Error(`Invalid surrogate attribute: ${t.target}`);const s=this.C.L(t);if(null===s)this.F(t);else{if(s.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.M(t,s)}++r}return this.O(e),this.B=t,this.A=s,this.v=l,this.manifest=n,c}H(e,t){switch(t.nodeName){case"LET":return void this.G(e,t);case"SLOT":return void(this.B.hasSlots=1)}const s=this.A,h=this.v,l=this.manifest;let n;this.D=t.getAttribute("part");let name=t.getAttribute("as-element");null===name&&(name=t.nodeName.toLowerCase());const c=this.C.J(name);null===c?this.manifest=new PlainElementSymbol(t):(this.A=this.v,n=this.v=this.manifest=new CustomElementSymbol(this.dom,t,c)),this.O(t),this.K(t,e),void 0!==n&&n.U?t.parentNode.replaceChild(n.marker,t):this.manifest.W&&t.classList.add("au"),this.A=s,this.v=h,this.manifest=l}G(e,t){const s=new LetElementSymbol(this.dom,t);e.childNodes.push(s);const h=t.attributes;let l=0;for(;h.length>l;){const e=h[l];if("to-view-model"===e.name){t.removeAttribute("to-view-model"),s.toViewModel=1;continue}const n=this.m.parse(e.name,e.value),c=this.C.X(n),i=this.$.parse(n.Y,null===c?2048:c.h),to=PLATFORM.Z(n.target),r=new BindableInfo(to,BindingMode._);s.q.push(new BindingSymbol(c,r,i,n.Y,to)),++l}t.parentNode.replaceChild(s.marker,t)}K(e,t){const{A:s,v:h,manifest:n}=this;let c=n;const i=this.p(e);let r,o;const u=e.attributes;let f=0;for(;u.length>f;){const e=u[f];if(++f,1==l[e.name])continue;const t=this.m.parse(e.name,e.value),s=this.C.L(t);null===s?this.F(t):s.isTemplateController?(o=n.templateController=this.g(t,s),c===n?(o.template=n,c=o):(o.templateController=r,o.template=r.template,r.template=o),r=o):this.M(t,s)}(function(dom,e,t){const s=t.V;let h,l=e;for(;l!==t;)l.template===t?(s.parentNode.replaceChild(l.marker,s),"TEMPLATE"===s.nodeName?(l.V=s,s.remove()):(h=l.V=dom.R()).content.appendChild(s)):(h=l.V=dom.R()).content.appendChild(l.marker),s.removeAttribute(l.N.P),l=l.template})(this.dom,c,n),null===i?t.childNodes.push(c):(i.parent=t,i.template=c,(n===h?s:h).parts.push(i),(function(dom,e,t){let s,h;"TEMPLATE"===(s=512&t.flags?t.marker:t.V).nodeName?e.V=s:(h=e.V=dom.R()).content.appendChild(s)})(this.dom,i,c))}O(e){let t,s;for(t="TEMPLATE"===e.nodeName?e.content.firstChild:e.firstChild;null!==t;)switch(t.nodeType){case 1:s=t.nextSibling,this.H(this.manifest,t),t=s;break;case 3:t=this.j(t).nextSibling;break;case 4:case 7:case 8:case 10:t=t.nextSibling;break;case 9:case 11:t=t.firstChild}}j(e){const t=this.$.parse(e.wholeText,2048);if(null!==t){const s=new TextSymbol(this.dom,e,t);this.manifest.childNodes.push(s),(function(e){const t=e.V,s=t.parentNode;for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)s.removeChild(t.nextSibling);t.textContent="",s.insertBefore(e.marker,t)})(s)}for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e}g(e,t){let s;const h=this.C.X(e);if(null===h&&t.I)s=new TemplateControllerSymbol(this.dom,e,t,this.D),this.D=null,this.S(s,t,e.Y);else{s=new TemplateControllerSymbol(this.dom,e,t,this.D);const l=this.$.parse(e.Y,null===h?2048:h.h);s.q.push(new BindingSymbol(h,t.bindable,l,e.Y,e.target)),this.D=null}return s}M(e,t){const s=this.C.X(e);let h;if(null===s&&t.I)h=new CustomAttributeSymbol(e,t),this.S(h,t,e.Y);else{h=new CustomAttributeSymbol(e,t);const l=this.$.parse(e.Y,null===s?2048:s.h);h.q.push(new BindingSymbol(s,t.bindable,l,e.Y,e.target))}this.manifest.attributes.push(h),this.manifest.W=1}S(e,h,value){const l=(function(e){const h=[],l=new n(e),c=l.length;let name,value;for(;c>l.index;){if(0===(name=t(l)).length)return h;value=s(l),h.push({name,value})}return h})(value);let c;for(let t=0,s=l.length;s>t;++t){const s=this.m.parse((c=l[t]).name,c.value),n=this.C.X(s),i=this.$.parse(s.Y,null===n?2048:n.h);let bindable=h.bindables[s.target];void 0===bindable&&(bindable=h.bindables[s.target]=new BindableInfo(s.target,BindingMode._)),e.q.push(new BindingSymbol(n,bindable,i,s.Y,s.target))}}F(e){if(0===e.Y.length)return;const t=this.C.X(e),s=this.manifest,h=this.$.parse(e.Y,null===t?2048:t.h);if(16&s.flags){const bindable=s.bindables[e.target];void 0!==bindable?(s.q.push(new BindingSymbol(t,bindable,h,e.Y,e.target)),s.W=1):null===h&&"ref"!==e.target||(s.attributes.push(new PlainAttributeSymbol(e,t,h)),s.W=1)}else null!==h||"ref"===e.target?(s.attributes.push(new PlainAttributeSymbol(e,t,h)),s.W=1):s===this.B&&s.attributes.push(new PlainAttributeSymbol(e,t,h))}p(e){const name=e.getAttribute("replace-part");return null===name?null:(e.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}e("TemplateBinder",TemplateBinder);class n{constructor(e){this.input=e,this.index=0,this.length=e.length}}const c=String.fromCharCode;var i;(function(e){e[e.ee=34]="DoubleQuote",e[e.te=39]="SingleQuote",e[e.se=47]="Slash",e[e.he=59]="Semicolon",e[e.le=58]="Colon"})(i||(i={}));const ITemplateElementFactory=e("ITemplateElementFactory",DI.ce("ITemplateElementFactory").ne());Profiler.o("TemplateElementFactory");class r{constructor(dom){this.dom=dom,this.template=dom.R()}static register(e){return Registration.singleton(ITemplateElementFactory,this).register(e)}R(e){if("string"==typeof e){const template=this.template;template.innerHTML=e;const t=template.content.firstElementChild;return null===t||"TEMPLATE"!==t.nodeName||null!==t.nextElementSibling?(this.template=this.dom.R(),template):(template.content.removeChild(t),t)}if("TEMPLATE"!==e.nodeName){const template=this.dom.R();return template.content.appendChild(e),template}return null!==e.parentNode&&e.parentNode.removeChild(e),e}}r.inject=[IDOM];const o=Object.freeze({required:0,compiler:"default"});Profiler.o("TemplateCompiler");class u{constructor(e,t,s){this.ie=e,this.m=t,this.$=s,this.re=null}get name(){return"default"}static register(e){return Registration.singleton(ITemplateCompiler,this).register(e)}compile(dom,e,t){const s=new TemplateBinder(dom,new ResourceModel(t),this.m,this.$),template=e.template=this.ie.R(e.template),h=s.bind(template);void 0!==e.instructions&&e.instructions!==PLATFORM.oe||(e.instructions=[]),1==h.hasSlots&&(e.hasSlots=1),this.re=e.instructions;const l=h.attributes,n=l.length;if(n>0){let surrogates;void 0!==e.surrogates&&e.surrogates!==PLATFORM.oe||(e.surrogates=Array(n)),surrogates=e.surrogates;for(let e=0;n>e;++e)surrogates[e]=this.ue(l[e])}return this.fe(h),this.re=null,e}fe(e){if(8192&e.flags){const{childNodes}=e;let t;const s=childNodes.length;for(let e=0;s>e;++e)if(128&(t=childNodes[e]).flags)this.re.push([new TextBindingInstruction(t.we)]);else if(32&t.flags){const e=t.q,instructions=[];let s;const h=e.length;for(let t=0;h>t;++t)instructions[t]=new LetBindingInstruction((s=e[t]).l,s.target);this.re.push([new LetElementInstruction(instructions,t.toViewModel)])}else this.Te(t)}}ke(e){const t=this.Ee(e,1);t[0]=new HydrateElementInstruction(e.res,this.Ce(e),this.me(e)),this.re.push(t)}$e(e){const t=this.Ee(e,0);t.length>0&&this.re.push(t),this.fe(e)}Te(e){switch(511&e.flags){case 16:this.ke(e);break;case 64:this.$e(e);break;case 1:this.Be(e)}}Be(e){const t=this.Ce(e),s=this.re,h=this.re=[];this.Te(e.template),this.re=s,this.re.push([new HydrateTemplateController({name:null===e.D?e.res:e.D,template:e.V,instructions:h,build:o},e.res,t,"else"===e.res)])}Ce(e){let t;if(4096&e.flags){const{q:s}=e,h=s.length;t=Array(h);let l=0;for(;h>l;++l)t[l]=this.ve(s[l])}else t=PLATFORM.oe;return t}ve(e){return null===e.command?null===e.l?new SetPropertyInstruction(e.Y,e.bindable.Ae):new InterpolationInstruction(e.l,e.bindable.Ae):e.command.compile(e)}Ee(e,t){let s;if(2048&e.flags){const{attributes:h}=e,l=h.length;s=Array(t+l);for(let e=0;l>e;++e)s[e+t]=this.ue(h[e])}else s=t>0?Array(t):PLATFORM.oe;return s}De(e){const t=this.Ce(e);return new HydrateAttributeInstruction(e.res,t)}Le(e){return null===e.command?null===e.l?new SetAttributeInstruction(e.N.Y,e.N.target):new InterpolationInstruction(e.l,e.N.target):e.command.compile(e)}ue(e){return"ref"===e.N.target?new RefBindingInstruction(e.N.Y):4&e.flags?this.De(e):this.Le(e)}me(e){let parts;if(16384&e.flags){parts={};const t=e.parts,s=t.length;let h,l,n;for(let e=0;s>e;++e)n=t[e],h=this.re,l=this.re=[],this.Te(n.template),parts[n.name]={name:n.name,template:n.V,instructions:l,build:o},this.re=h}else parts=PLATFORM.Fe;return parts}}u.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const ITemplateCompilerRegistration=e("ITemplateCompilerRegistration",u),ITemplateElementFactoryRegistration=e("ITemplateElementFactoryRegistration",r),f=e("DefaultComponents",[ITemplateCompilerRegistration,ITemplateElementFactoryRegistration]),TriggerBindingCommandRegistration=e("TriggerBindingCommandRegistration",TriggerBindingCommand),DelegateBindingCommandRegistration=e("DelegateBindingCommandRegistration",DelegateBindingCommand),CaptureBindingCommandRegistration=e("CaptureBindingCommandRegistration",CaptureBindingCommand),w=e("DefaultBindingLanguage",[TriggerBindingCommandRegistration,DelegateBindingCommandRegistration,CaptureBindingCommandRegistration]);e("BasicConfiguration",{register:e=>BasicConfiguration.register(e).register(...DefaultComponents,...DefaultBindingSyntax,...DefaultBindingLanguage,...f,...w),Me(){return this.register(DI.Me())}})}}});
