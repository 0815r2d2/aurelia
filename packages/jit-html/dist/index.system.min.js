System.register("jitHtml",["@aurelia/jit","@aurelia/runtime-html","@aurelia/kernel","@aurelia/runtime"],function(t){"use strict";var getTarget,BindingCommandResource,PlainElementSymbol,CustomElementSymbol,LetElementSymbol,BindableInfo,BindingSymbol,TextSymbol,TemplateControllerSymbol,CustomAttributeSymbol,PlainAttributeSymbol,ReplacePartSymbol,ResourceModel,IAttributeParser,DefaultComponents,DefaultBindingSyntax,DefaultBindingLanguage,TriggerBindingInstruction,DelegateBindingInstruction,CaptureBindingInstruction,TextBindingInstruction,SetAttributeInstruction,BasicConfiguration,Profiler,PLATFORM,DI,Registration,BindingMode,IDOM,ITemplateCompiler,LetBindingInstruction,LetElementInstruction,HydrateElementInstruction,HydrateTemplateController,SetPropertyInstruction,InterpolationInstruction,HydrateAttributeInstruction,RefBindingInstruction,IExpressionParser;return{t:[function(t){getTarget=t.getTarget,BindingCommandResource=t.BindingCommandResource,PlainElementSymbol=t.PlainElementSymbol,CustomElementSymbol=t.CustomElementSymbol,LetElementSymbol=t.LetElementSymbol,BindableInfo=t.BindableInfo,BindingSymbol=t.BindingSymbol,TextSymbol=t.TextSymbol,TemplateControllerSymbol=t.TemplateControllerSymbol,CustomAttributeSymbol=t.CustomAttributeSymbol,PlainAttributeSymbol=t.PlainAttributeSymbol,ReplacePartSymbol=t.ReplacePartSymbol,ResourceModel=t.ResourceModel,IAttributeParser=t.IAttributeParser,DefaultComponents=t.DefaultComponents,DefaultBindingSyntax=t.DefaultBindingSyntax,DefaultBindingLanguage=t.DefaultBindingLanguage},function(t){TriggerBindingInstruction=t.TriggerBindingInstruction,DelegateBindingInstruction=t.DelegateBindingInstruction,CaptureBindingInstruction=t.CaptureBindingInstruction,TextBindingInstruction=t.TextBindingInstruction,SetAttributeInstruction=t.SetAttributeInstruction,BasicConfiguration=t.BasicConfiguration},function(t){Profiler=t.Profiler,PLATFORM=t.PLATFORM,DI=t.DI,Registration=t.Registration},function(t){BindingMode=t.BindingMode,IDOM=t.IDOM,ITemplateCompiler=t.ITemplateCompiler,LetBindingInstruction=t.LetBindingInstruction,LetElementInstruction=t.LetElementInstruction,HydrateElementInstruction=t.HydrateElementInstruction,HydrateTemplateController=t.HydrateTemplateController,SetPropertyInstruction=t.SetPropertyInstruction,InterpolationInstruction=t.InterpolationInstruction,HydrateAttributeInstruction=t.HydrateAttributeInstruction,RefBindingInstruction=t.RefBindingInstruction,IExpressionParser=t.IExpressionParser}],i(){function e(t){const e=t.index,{length:n,input:i}=t;for(;n>t.index&&58!==i.charCodeAt(++t.index););return i.slice(e,t.index).trim()}function n(t){++t.index;const{length:e,input:n}=t;let i="",s=0;for(;e>t.index;){switch(s=n.charCodeAt(t.index)){case 59:return++t.index,i.trim();case 47:s=n.charCodeAt(++t.index),i+=`\\${l(s)}`;break;case 39:i+="'";break;default:i+=l(s)}++t.index}return i.trim()}function stringifyDOM(t,e){let n=" ".repeat(e);if(n+=`Node: ${t.nodeName}`,3===t.nodeType&&(n+=` "${t.textContent}"`),1===t.nodeType){let e,i=0;const s=t.attributes,r=s.length;for(;r>i;++i)n+=` ${(e=s[i]).name}=${e.value}`}if(n+="\n",1===t.nodeType){let i=0,childNodes=t.childNodes,s=childNodes.length;for(;s>i;++i)n+=stringifyDOM(childNodes[i],e+1);if("TEMPLATE"===t.nodeName)for(i=0,s=(childNodes=t.content.childNodes).length;s>i;++i)n+=stringifyDOM(childNodes[i],e+1)}return n}function stringifyInstructions(t,e){let n=" ".repeat(e);switch(t.type){case"ha":n+="textBinding\n";break;case"rh":n+="callBinding\n";break;case"rk":n+="iteratorBinding\n";break;case"hb":n+="listenerBinding\n";break;case"rg":n+="propertyBinding\n";break;case"rj":n+="refBinding\n";break;case"hc":n+="stylePropertyBinding\n";break;case"re":n+="setProperty\n";break;case"hd":n+="setAttribute\n";break;case"rf":n+="interpolation\n";break;case"rd":n+="hydrateLetElement\n",t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rb":n+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"ra":n+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)});break;case"rc":n+=`hydrateTemplateController: ${t.res}\n`,n+=stringifyTemplateDefinition(t.def,e+1),t.instructions.forEach(t=>{n+=stringifyInstructions(t,e+1)})}return n}function stringifyTemplateDefinition(def,t){const e=" ".repeat(t);let n=e;return n+=`TemplateDefinition: ${def.name}\n`,n+=stringifyDOM(def.template,t+1),n+=`${e} Instructions:\n`,def.instructions.forEach(i=>{n+=`${e}  Row:\n`,i.forEach(e=>{n+=stringifyInstructions(e,t+3)})}),n}t({stringifyDOM,stringifyInstructions,stringifyTemplateDefinition});class TriggerBindingCommand{constructor(){this.s=86}compile(t){return new TriggerBindingInstruction(t.l,getTarget(t,0))}}t("TriggerBindingCommand",TriggerBindingCommand),BindingCommandResource.o("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.s=88}compile(t){return new DelegateBindingInstruction(t.l,getTarget(t,0))}}t("DelegateBindingCommand",DelegateBindingCommand),BindingCommandResource.o("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.s=87}compile(t){return new CaptureBindingInstruction(t.l,getTarget(t,0))}}t("CaptureBindingCommand",CaptureBindingCommand),BindingCommandResource.o("capture",CaptureBindingCommand),Profiler.h("TemplateBinder");const i={id:1,u:1,m:1},s={p:1,u:1,m:1};class TemplateBinder{constructor(dom,t,e,n){this.dom=dom,this.g=t,this.T=e,this.C=n,this.k=null,this.manifest=null,this.A=null,this.B=null,this.v=null}bind(t){const e=this.k,n=this.B,s=this.A,r=this.manifest,l=this.k=this.manifest=new PlainElementSymbol(t),o=t.attributes;let a=0;for(;o.length>a;){const t=o[a],e=this.T.parse(t.name,t.value);if(1==i[e.target])throw Error(`Invalid surrogate attribute: ${e.target}`);const n=this.g.P(e);if(null===n)this.$(e);else{if(n.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.L(e,n)}++a}return this.M(t),this.k=e,this.B=n,this.A=s,this.manifest=r,l}R(t,e){switch(e.nodeName){case"LET":return void this.D(t,e);case"SLOT":return void(this.k.hasSlots=1)}const n=this.B,i=this.A,s=this.manifest;let r;this.v=e.getAttribute("part");let name=e.getAttribute("as-element");null===name&&(name=e.nodeName.toLowerCase());const l=this.g.I(name);null===l?this.manifest=new PlainElementSymbol(e):(this.B=this.A,r=this.A=this.manifest=new CustomElementSymbol(this.dom,e,l)),this.M(e),this.S(e,t),void 0!==r&&r.N?e.parentNode.replaceChild(r.marker,e):this.manifest.j&&e.classList.add("au"),this.B=n,this.A=i,this.manifest=s}D(t,e){const n=new LetElementSymbol(this.dom,e);t.childNodes.push(n);const i=e.attributes;let s=0;for(;i.length>s;){const t=i[s];if("to-view-model"===t.name){e.removeAttribute("to-view-model"),n.toViewModel=1;continue}const r=this.T.parse(t.name,t.value),l=this.g.F(r),o=this.C.parse(r.O,null===l?2048:l.s),to=PLATFORM.q(r.target),a=new BindableInfo(to,BindingMode.H);n.G.push(new BindingSymbol(l,a,o,r.O,to)),++s}e.parentNode.replaceChild(n.marker,e)}S(t,e){const{B:n,A:i,manifest:r}=this;let l=r;const o=this.J(t);let a,c;const h=t.attributes;let u=0;for(;h.length>u;){const t=h[u];if(++u,1==s[t.name])continue;const e=this.T.parse(t.name,t.value),n=this.g.P(e);null===n?this.$(e):n.isTemplateController?(c=r.templateController=this.K(e,n),l===r?(c.template=r,l=c):(c.templateController=a,c.template=a.template,a.template=c),a=c):this.L(e,n)}(function(dom,t,e){const n=e.U;let i,s=t;for(;s!==e;)s.template===e?(n.parentNode.replaceChild(s.marker,n),"TEMPLATE"===n.nodeName?(s.U=n,n.remove()):(i=s.U=dom.V()).content.appendChild(n)):(i=s.U=dom.V()).content.appendChild(s.marker),n.removeAttribute(s.X.W),s=s.template})(this.dom,l,r),null===o?e.childNodes.push(l):(o.parent=e,o.template=l,(r===i?n:i).parts.push(o),(function(dom,t,e){let n,i;"TEMPLATE"===(n=512&e.flags?e.marker:e.U).nodeName?t.U=n:(i=t.U=dom.V()).content.appendChild(n)})(this.dom,o,l))}M(t){let e,n;for(e="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==e;)switch(e.nodeType){case 1:n=e.nextSibling,this.R(this.manifest,e),e=n;break;case 3:e=this.Y(e).nextSibling;break;case 4:case 7:case 8:case 10:e=e.nextSibling;break;case 9:case 11:e=e.firstChild}}Y(t){const e=this.C.parse(t.wholeText,2048);if(null!==e){const n=new TextSymbol(this.dom,t,e);this.manifest.childNodes.push(n),(function(t){const e=t.U,n=e.parentNode;for(;null!==e.nextSibling&&3===e.nextSibling.nodeType;)n.removeChild(e.nextSibling);e.textContent="",n.insertBefore(t.marker,e)})(n)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}K(t,e){let n;const i=this.g.F(t);if(null===i&&e.Z)n=new TemplateControllerSymbol(this.dom,t,e,this.v),this.v=null,this._(n,e,t.O);else{n=new TemplateControllerSymbol(this.dom,t,e,this.v);const s=this.C.parse(t.O,null===i?2048:i.s);n.G.push(new BindingSymbol(i,e.bindable,s,t.O,t.target)),this.v=null}return n}L(t,e){const n=this.g.F(t);let i;if(null===n&&e.Z)i=new CustomAttributeSymbol(t,e),this._(i,e,t.O);else{i=new CustomAttributeSymbol(t,e);const s=this.C.parse(t.O,null===n?2048:n.s);i.G.push(new BindingSymbol(n,e.bindable,s,t.O,t.target))}this.manifest.attributes.push(i),this.manifest.j=1}_(t,i,value){const s=(function(t){const i=[],s=new r(t),l=s.length;let name,value;for(;l>s.index;){if(0===(name=e(s)).length)return i;value=n(s),i.push({name,value})}return i})(value);let l;for(let e=0,n=s.length;n>e;++e){const n=this.T.parse((l=s[e]).name,l.value),r=this.g.F(n),o=this.C.parse(n.O,null===r?2048:r.s);let bindable=i.bindables[n.target];void 0===bindable&&(bindable=i.bindables[n.target]=new BindableInfo(n.target,BindingMode.H)),t.G.push(new BindingSymbol(r,bindable,o,n.O,n.target))}}$(t){if(0===t.O.length)return;const e=this.g.F(t),n=this.manifest,i=this.C.parse(t.O,null===e?2048:e.s);if(16&n.flags){const bindable=n.bindables[t.target];void 0!==bindable?(n.G.push(new BindingSymbol(e,bindable,i,t.O,t.target)),n.j=1):null===i&&"ref"!==t.target||(n.attributes.push(new PlainAttributeSymbol(t,e,i)),n.j=1)}else null!==i||"ref"===t.target?(n.attributes.push(new PlainAttributeSymbol(t,e,i)),n.j=1):n===this.k&&n.attributes.push(new PlainAttributeSymbol(t,e,i))}J(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}t("TemplateBinder",TemplateBinder);class r{constructor(t){this.input=t,this.index=0,this.length=t.length}}const l=String.fromCharCode;var o;(function(t){t[t.tt=34]="DoubleQuote",t[t.et=39]="SingleQuote",t[t.nt=47]="Slash",t[t.it=59]="Semicolon",t[t.st=58]="Colon"})(o||(o={}));const ITemplateElementFactory=t("ITemplateElementFactory",DI.lt("ITemplateElementFactory").rt());Profiler.h("TemplateElementFactory");class a{constructor(dom){this.dom=dom,this.template=dom.V()}static register(t){return Registration.singleton(ITemplateElementFactory,this).register(t)}V(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const e=template.content.firstElementChild;return null===e||"TEMPLATE"!==e.nodeName||null!==e.nextElementSibling?(this.template=this.dom.V(),template):(template.content.removeChild(e),e)}if("TEMPLATE"!==t.nodeName){const template=this.dom.V();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}a.inject=[IDOM];const c=Object.freeze({required:0,compiler:"default"});Profiler.h("TemplateCompiler");class h{constructor(t,e,n){this.ot=t,this.T=e,this.C=n,this.at=null}get name(){return"default"}static register(t){return Registration.singleton(ITemplateCompiler,this).register(t)}compile(dom,t,e){const n=new TemplateBinder(dom,new ResourceModel(e),this.T,this.C),template=t.template=this.ot.V(t.template),i=n.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.ct||(t.instructions=[]),1==i.hasSlots&&(t.hasSlots=1),this.at=t.instructions;const s=i.attributes,r=s.length;if(r>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.ct||(t.surrogates=Array(r)),surrogates=t.surrogates;for(let t=0;r>t;++t)surrogates[t]=this.ht(s[t])}return this.ut(i),this.at=null,t}ut(t){if(8192&t.flags){const{childNodes}=t;let e;const n=childNodes.length;for(let t=0;n>t;++t)if(128&(e=childNodes[t]).flags)this.at.push([new TextBindingInstruction(e.ft)]);else if(32&e.flags){const t=e.G,instructions=[];let n;const i=t.length;for(let e=0;i>e;++e)instructions[e]=new LetBindingInstruction((n=t[e]).l,n.target);this.at.push([new LetElementInstruction(instructions,e.toViewModel)])}else this.dt(e)}}pt(t){const e=this.gt(t,1);e[0]=new HydrateElementInstruction(t.res,this.bt(t),this.wt(t)),this.at.push(e)}Tt(t){const e=this.gt(t,0);e.length>0&&this.at.push(e),this.ut(t)}dt(t){switch(511&t.flags){case 16:this.pt(t);break;case 64:this.Tt(t);break;case 1:this.Et(t)}}Et(t){const e=this.bt(t),n=this.at,i=this.at=[];this.dt(t.template),this.at=n,this.at.push([new HydrateTemplateController({name:null===t.v?t.res:t.v,template:t.U,instructions:i,build:c},t.res,e,"else"===t.res)])}bt(t){let e;if(4096&t.flags){const{G:n}=t,i=n.length;e=Array(i);let s=0;for(;i>s;++s)e[s]=this.Ct(n[s])}else e=PLATFORM.ct;return e}Ct(t){return null===t.command?null===t.l?new SetPropertyInstruction(t.O,t.bindable.kt):new InterpolationInstruction(t.l,t.bindable.kt):t.command.compile(t)}gt(t,e){let n;if(2048&t.flags){const{attributes:i}=t,s=i.length;n=Array(e+s);for(let t=0;s>t;++t)n[t+e]=this.ht(i[t])}else n=e>0?Array(e):PLATFORM.ct;return n}yt(t){const e=this.bt(t);return new HydrateAttributeInstruction(t.res,e)}At(t){return null===t.command?null===t.l?new SetAttributeInstruction(t.X.O,t.X.target):new InterpolationInstruction(t.l,t.X.target):t.command.compile(t)}ht(t){return"ref"===t.X.target?new RefBindingInstruction(t.X.O):4&t.flags?this.yt(t):this.At(t)}wt(t){let parts;if(16384&t.flags){parts={};const e=t.parts,n=e.length;let i,s,r;for(let t=0;n>t;++t)r=e[t],i=this.at,s=this.at=[],this.dt(r.template),parts[r.name]={name:r.name,template:r.U,instructions:s,build:c},this.at=i}else parts=PLATFORM.Bt;return parts}}h.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const ITemplateCompilerRegistration=t("ITemplateCompilerRegistration",h),ITemplateElementFactoryRegistration=t("ITemplateElementFactoryRegistration",a),u=t("DefaultComponents",[ITemplateCompilerRegistration,ITemplateElementFactoryRegistration]),TriggerBindingCommandRegistration=t("TriggerBindingCommandRegistration",TriggerBindingCommand),DelegateBindingCommandRegistration=t("DelegateBindingCommandRegistration",DelegateBindingCommand),CaptureBindingCommandRegistration=t("CaptureBindingCommandRegistration",CaptureBindingCommand),f=t("DefaultBindingLanguage",[TriggerBindingCommandRegistration,DelegateBindingCommandRegistration,CaptureBindingCommandRegistration]);t("BasicConfiguration",{register:t=>BasicConfiguration.register(t).register(...DefaultComponents,...DefaultBindingSyntax,...DefaultBindingLanguage,...u,...f),vt(){return this.register(DI.vt())}})}}});
