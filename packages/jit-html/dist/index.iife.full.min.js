var au=(function(t){"use strict";function s(t){return function(s){const Key=function Key(t,s,i){DI.inject(Key)(t,s,i)};return Key.resolve=function(i,n){return t(s,i,n)},Key}}function i(t){return DI.transient(t)}function n(t){return DI.singleton(t)}function h(t){return"function"==typeof t.register}function e(t){if(null==t||t===Object)throw Reporter.error(5)}function r(t,s,i){if(t instanceof fs&&4===t.strategy){const n=t.state;let h=n.length;const e=Array(h);for(;h--;)e[h]=n[h].resolve(s,i);return e}return[t.resolve(s,i)]}function o(t,s,i,n){let h,e=i.length,r=Array(e);for(;e--;){if(null==(h=i[e]))throw Reporter.error(7,`Index ${e}.`);r[e]=t.get(h)}return void 0!==n&&(r=r.concat(n)),Reflect.construct(s,r)}function attributePattern(...t){return function(s){const i=s.prototype;return(function(t,s){for(const def of s)def.pattern in t?"function"!=typeof t[def.pattern]&&Reporter.write(402,def):Reporter.write(401,def)})(i,t),i.t=t,s.register=function(t){return Registration.singleton(IAttributePattern,s).register(t,IAttributePattern)},s}}function c(t,s,i,n){var h,e,r=arguments.length,o=3>r?s:null===n?n=Object.getOwnPropertyDescriptor(s,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.s)o=Reflect.s(t,s,i,n);else for(e=t.length-1;e>=0;e--)(h=t[e])&&(o=(3>r?h(o):r>3?h(s,i,o):h(s,i))||o);return r>3&&o&&Object.defineProperty(s,i,o),o}function subscriberCollection(t){return function(s){const i=s.prototype;i.i=0,i.h=null,i.o=null,i.l=null,i.u=null,i.m=l,i.g=u,i.p=w,i.v=d,i.A=t===MutationKind.C?f:a}}function l(t){if(this.p(t))return 0;const s=this.i;return 1&s?2&s?4&s?8&s?(this.u.push(t),1):(this.u=[t],this.i|=8,1):(this.l=t,this.i|=4,1):(this.o=t,this.i|=2,1):(this.h=t,this.i|=1,1)}function u(t){const s=this.i;if(1&s&&this.h===t)return this.h=null,this.i&=-2,1;if(2&s&&this.o===t)return this.o=null,this.i&=-3,1;if(4&s&&this.l===t)return this.l=null,this.i&=-5,1;if(8&s){const s=this.u;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.i&=-9),1}return 0}function f(t,s,i){const n=this.h,h=this.o,e=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==n&&n.T(t,s,i),null!==h&&h.T(t,s,i),null!==e&&e.T(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.T(t,s,i)}}function a(t,s,i){const n=this.h,h=this.o,e=this.l;let r=this.u;null!==r&&(r=r.slice()),null!==n&&n.T(t,s,i),null!==h&&h.T(t,s,i),null!==e&&e.T(t,s,i);const o=r&&r.length;if(void 0!==o&&o>0)for(let n=0;o>n;++n){const h=r[n];null!==h&&h.T(t,s,i)}this.B.O(this).catch(t=>{throw t})}function d(){return 0!==this.i}function w(t){const s=this.i;if(1&s&&this.h===t)return 1;if(2&s&&this.o===t)return 1;if(4&s&&this.l===t)return 1;if(8&s){const s=this.u;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function batchedSubscriberCollection(){return function(t){const s=t.prototype;s.I=0,s.k=null,s.R=null,s.S=null,s.j=null,s.P=b,s.M=m,s.V=v,s.F=p,s.D=g}}function b(t){if(this.V(t))return 0;const s=this.I;return 1&s?2&s?4&s?8&s?(this.j.push(t),1):(this.j=[t],this.I|=8,1):(this.S=t,this.I|=4,1):(this.R=t,this.I|=2,1):(this.k=t,this.I|=1,1)}function m(t){const s=this.I;if(1&s&&this.k===t)return this.k=null,this.I&=-2,1;if(2&s&&this.R===t)return this.R=null,this.I&=-3,1;if(4&s&&this.S===t)return this.S=null,this.I&=-5,1;if(8&s){const s=this.j;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return s.splice(i,1),1===n&&(this.I&=-9),1}return 0}function g(t){const s=this.k,i=this.R,n=this.S;let h=this.j;null!==h&&(h=h.slice()),null!==s&&s.L(t),null!==i&&i.L(t),null!==n&&n.L(t);const e=h&&h.length;if(void 0!==e&&e>0)for(let s=0;e>s;++s){const i=h[s];null!==i&&i.L(t)}}function p(){return 0!==this.I}function v(t){const s=this.I;if(1&s&&this.k===t)return 1;if(2&s&&this.R===t)return 1;if(4&s&&this.S===t)return 1;if(8&s){const s=this.j;for(let i=0,n=s.length;n>i;++i)if(s[i]===t)return 1}return 0}function A(t){if(0==this.$){this.$=1;const{U:t,H:s}=this;this.N=t[s],Bs.get=(()=>this.W()),Bs.set=(value=>{this.q(value,LifecycleFlags.K)}),Os(t,s,Bs)||Reporter.write(1,s,t)}this.m(t)}function C(){delete this.U[this.H],this.U=null,this.H=null,this.N=null}function propertyObserver(){return function(t){subscriberCollection(MutationKind.C)(t);const s=t.prototype;s.$=0,s.U=null,s.H=null,s.N=Symbol(),s.subscribe=s.subscribe||A,s.unsubscribe=s.unsubscribe||s.g,s.G=s.G||C}}function T(t){const s=BindingBehaviorResource.J(this.description.name);t.register(Registration.singleton(s,this))}function y(t){const s=this.kind.J(this.description.name);t.register(Registration.singleton(s,this))}function hasBind(t){return 2048==(2048&t._)}function hasUnbind(t){return 4096==(4096&t._)}function isLiteral(t){return 16384==(16384&t._)}function arePureLiterals(t){if(void 0===t||0===t.length)return 1;for(let s=0;t.length>s;++s)if(!isPureLiteral(t[s]))return 0;return 1}function isPureLiteral(t){if(isLiteral(t))switch(t._){case 17955:return arePureLiterals(t.elements);case 17956:return arePureLiterals(t.values);case 17958:return arePureLiterals(t.X);case 17925:return 1}return 0}function O(t,s,i,n){const h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}function B(t,s,name){const i=null==s?null:s[name];if("function"==typeof i)return i;if(!(t&LifecycleFlags.Z)&&null==i)return null;throw Reporter.error(207,s,name,i)}function I(t){if(t===Ds){const s=Vs.length=Fs.length=(Ds+=5)+1;for(let i=t+1;s>i;++i)Vs[i]=`_observer${i}`,Fs[i]=`_observerVersion${i}`}}function k(t){const s=void 0===this.Y?0:this.Y;let i=s;for(;i--&&this[Vs[i]]!==t;);if(-1===i){for(i=0;this[Vs[i]];)i++;this[Vs[i]]=t,t.subscribe(this),i===s&&(this.Y=i+1)}void 0===this.version&&(this.version=0),this[Fs[i]]=this.version,I(i)}function R(t,s){const i=this.st.tt(t,s);this.it(i)}function S(t){const s=this.Y;let i,n;if(1==t)for(let t=0;s>t;++t)null!=(n=this[i=Vs[t]])&&(this[i]=null,n.unsubscribe(this));else{const t=this.version;for(let h=0;s>h;++h)this[Fs[h]]!==t&&null!=(n=this[i=Vs[h]])&&(this[i]=null,n.unsubscribe(this))}}function j(t){const s=t.prototype;return s.hasOwnProperty("observeProperty")||(s.nt=R),s.hasOwnProperty("unobserve")||(s.unobserve=S),s.hasOwnProperty("addObserver")||(s.it=k),t}function connectable(t){return void 0===t?j:j(t)}function P(t,s){if(this.N!==(t=null==t?this.defaultValue:t)){if(this.N=t,!(s&(LifecycleFlags.ht|LifecycleFlags.et))||this.rt&&s&LifecycleFlags.ot)return this.ct=s,this.B.O(this);this.lt(t,s)}return Promise.resolve()}function E(t){if(this.rt&&t&LifecycleFlags.ot)return void this.B.O(this).catch(t=>{throw t});const s=this.N;this.oldValue!==s&&(this.lt(s,this.ct|t|LifecycleFlags.K),this.oldValue=this.N)}function M(){this.N=null,this.oldValue=null,this.defaultValue=null,this.U=null,this.H=""}function targetObserver(t=null){return function(s){subscriberCollection(MutationKind.C)(s);const i=s.prototype;i.ut=null,i.N=t,i.oldValue=t,i.defaultValue=t,i.U=null,i.H="",i.q=i.q||P,i.flush=i.flush||E,i.G=i.G||M}}function V(){this.D(this.ft),this.at&&this.at.dt(LifecycleFlags.ht|LifecycleFlags.K),this.wt()}function F(){this.gt.bt=void 0,this.gt=null,this.ft=null}function D(){const t=this.gt.length,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.pt=[]}function L(){const t=this.gt.size,s=this.ft=Array(t);let i=0;for(;t>i;)s[i]=i++;s.pt=[]}function $(){return void 0===this.at?this.at=new CollectionLengthObserver(this,this.vt):this.at}function collectionObserver(t){return function(s){subscriberCollection(MutationKind.gt)(s),batchedSubscriberCollection()(s);const i=s.prototype;i.ut=null,i.gt=null,i.ft=null,i.At=0,i.vt=8&t?"length":"size",i.Ct=t,i.wt=8&t?D:L,i.flush=V,i.G=F,i.Tt=$,i.subscribe=i.subscribe||i.m,i.unsubscribe=i.unsubscribe||i.g,i.yt=i.yt||i.P,i.Ot=i.Ot||i.M}}function U(t,s){return t===s?0:(s=null===s?"null":""+s)>(t=null===t?"null":""+t)?-1:1}function H(t,s){return void 0===t?void 0===s?0:1:void 0===s?-1:0}function z(t,s,from,to,i){let n,h,e,r,o,c,l;for(c=from+1;to>c;c++){for(n=t[c],h=s[c],l=c-1;l>=from&&(r=s[l],(o=i(e=t[l],n))>0);l--)t[l+1]=e,s[l+1]=r;t[l+1]=n,s[l+1]=h}}function N(t,s,from,to,i){let n,h,e,r,o,c,l,u,f,a,d,w,b,m,g,p,v,A,C,T=0,y=0;for(;;){if(10>=to-from)return void z(t,s,from,to,i);r=s[from],o=s[to-1],e=t[T=from+(to-from>>1)],c=s[T],(l=i(n=t[from],h=t[to-1]))>0&&(a=n,d=r,n=h,r=o,h=a,o=d),0>(u=i(n,e))?(f=i(h,e))>0&&(a=h,d=o,h=e,o=c,e=a,c=d):(a=n,d=r,n=e,r=c,e=h,c=o,h=a,o=d),t[from]=n,s[from]=r,t[to-1]=e,s[to-1]=c,w=h,b=o,g=to-1,t[T]=t[m=from+1],s[T]=s[m],t[m]=w,s[m]=b;t:for(y=m+1;g>y;y++)if(v=s[y],0>(A=i(p=t[y],w)))t[y]=t[m],s[y]=s[m],t[m]=p,s[m]=v,m++;else if(A>0){do{if(--g==y)break t;A=i(C=t[g],w)}while(A>0);t[y]=t[g],s[y]=s[g],t[g]=p,s[g]=v,0>A&&(p=t[y],v=s[y],t[y]=t[m],s[y]=s[m],t[m]=p,s[m]=v,m++)}m-from>to-g?(N(t,s,g,to,i),to=m):(N(t,s,from,m,i),from=g)}}function enableArrayObservation(){for(const t of Ys)1!=Ws[t].$&&def(Ws,t,Object.assign({},ti,{value:xs[t]}))}function W(t,s){return s.bt||new ArrayObserver(t,s)}function enableMapObservation(){for(const t of ri)1!=si[t].$&&li(si,t,Object.assign({},ci,{value:oi[t]}))}function q(t,s){return s.bt||new MapObserver(t,s)}function enableSetObservation(){for(const t of bi)1!=ui[t].$&&pi(ui,t,Object.assign({},gi,{value:mi[t]}))}function Q(t,s){return s.bt||new SetObserver(t,s)}function getCollectionObserver(t,s){switch(Bi.call(s)){case"[object Array]":return W(t,s);case"[object Map]":return q(t,s);case"[object Set]":return Q(t,s)}return null}function K(t,s,i){const n=this.Bt;PLATFORM.global.clearTimeout(n.It),n.It=PLATFORM.global.setTimeout(()=>{this.kt(t,s,i)},n.Rt)}function G(t,s,i){const n=this.Bt;if(PLATFORM.global.clearTimeout(n.It),!(i&n.St))return n.oldValue=Ei,void this.kt(t,s,i);n.oldValue===Ei&&(n.oldValue=s);const h=PLATFORM.global.setTimeout(()=>{const s=n.oldValue;n.oldValue=Ei,this.kt(t,s,i)},n.Rt);n.It=h}function J(t){const s=this.jt,i=+new Date-s.Pt;if(i>=s.Rt)return PLATFORM.global.clearTimeout(s.It),s.It=-1,s.Pt=+new Date,void this.Et(t);if(s.newValue=t,-1===s.It){const t=PLATFORM.global.setTimeout(()=>{s.It=-1,s.Pt=+new Date,this.Et(s.newValue)},s.Rt-i);s.It=t}}function _(name){return`${Vi}:${name}`}function X(t){return void 0===t.$customElement?null:t.$customElement}function Z(name){return`${Fi}:${name}`}function buildTemplateDefinition(t,s,template,cache,build,bindables,instructions,dependencies,surrogates,containerless,shadowOptions,hasSlots){const def=new $i,i=arguments.length;switch(i){case 12:null!==hasSlots&&(def.hasSlots=hasSlots);case 11:null!==shadowOptions&&(def.shadowOptions=shadowOptions);case 10:null!==containerless&&(def.containerless=containerless);case 9:null!==surrogates&&(def.surrogates=PLATFORM.toArray(surrogates));case 8:null!==dependencies&&(def.dependencies=PLATFORM.toArray(dependencies));case 7:null!==instructions&&(def.instructions=PLATFORM.toArray(instructions));case 6:null!==bindables&&(def.bindables=Object.assign({},bindables));case 5:null!==build&&(def.build=1==build?Di:0==build?Li:Object.assign({},build));case 4:null!==cache&&(def.cache=cache);case 3:null!==template&&(def.template=template);case 2:null!==t&&(t.bindables&&(def.bindables=Object.assign({},t.bindables)),t.containerless&&(def.containerless=t.containerless),t.shadowOptions&&(def.shadowOptions=t.shadowOptions)),"string"==typeof s?s.length>0&&(def.name=s):null!==s&&(Ui.forEach(t=>{s[t]&&(def[t]=s[t])}),Hi.forEach(t=>{s[t]&&(def[t]=PLATFORM.toArray(s[t]))}),s.bindables&&(def.bindables===PLATFORM.Mt?def.bindables=Object.assign({},s.bindables):Object.assign(def.bindables,s.bindables)))}return 2!==i||null===t||"string"!=typeof s&&"build"in s||(def.build=Di),def}function Y(t){if(8&this.$state)return;const s=this.$lifecycle;s.Vt(),this.$state|=4,t|=LifecycleFlags.Ft;const i=this.$hooks;16&i&&this.Dt(t),this.$state|=8,this.$state&=-5,32&i&&s.Lt(this),s.$t(t)}function x(t){if(8&this.$state)return;const s=this.$lifecycle;s.Vt(),this.$state|=4,t|=LifecycleFlags.Ft;const i=this.$hooks;16&i&&this.Dt(t);let n=this.Ut;for(;null!==n;)n.Ht(t),n=n.zt;s.Nt(this),this.$state|=8,this.$state&=-5,32&i&&s.Lt(this),s.$t(t)}function tt(t){if(8&this.$state)return;this.$state|=4,t|=LifecycleFlags.Ft;let s=this.Ut;for(;null!==s;)s.Ht(t),s=s.zt;this.$lifecycle.Nt(this),this.$state|=8,this.$state&=-5}function st(t){if(8&this.$state){const s=this.$lifecycle;s.Wt(),this.$state|=32,t|=LifecycleFlags.qt;const i=this.$hooks;64&i&&this.Qt(t),this.$state&=-41,128&i&&s.Kt(this),s.Gt(t)}}function it(t){if(8&this.$state){const s=this.$lifecycle;s.Wt(),this.$state|=32,(t|=LifecycleFlags.qt)&LifecycleFlags.Jt^LifecycleFlags.Jt|t&LifecycleFlags._t&&(s.Xt(this),t|=LifecycleFlags.Jt);const i=this.$hooks;64&i&&this.Qt(t);let n=this.Zt;for(;null!==n;)n.Yt(t),n=n.xt;this.$state&=-41,128&i&&s.Kt(this),s.Gt(t)}}function nt(t){if(8&this.$state){this.$state|=32,(t|=LifecycleFlags.qt)&LifecycleFlags.Jt^LifecycleFlags.Jt|t&LifecycleFlags._t&&(this.$lifecycle.Xt(this),t|=LifecycleFlags.Jt);let s=this.Zt;for(;null!==s;)s.Yt(t),s=s.xt;this.$state&=-41}}function ht(t){2048&this.$hooks&&this.ts(t|=LifecycleFlags.ss)}function et(t){t|=LifecycleFlags.ss,2048&this.$hooks&&this.ts(t);let s=this.Zt;for(;null!==s;)s.ns(t),s=s.xt}function rt(t){t|=LifecycleFlags.ss;let s=this.Zt;for(;null!==s;)s.ns(t),s=s.xt}function ot(){16&this.$state||(this.$state|=16,this.es.hs(this.$nodes))}function ct(){16&this.$state&&(this.$state&=-17,this.es.rs(this.$nodes))}function lt(){16&this.$state||(this.$state|=16,this.$nodes.insertBefore(this.location))}function ut(){return 16&this.$state?(this.$state&=-17,this.$nodes.remove(),this.os&&(this.os=0,this.cache.cs(this))?(this.$state|=128,1):0):0}function ft(t,s){if(t|=LifecycleFlags.et,2&this.$state){if(this.$scope===s)return;this.ls(t)}const i=this.$lifecycle;i.us(),this.$state|=1;const n=this.$hooks;8&n&&i.fs(this),this.$scope=s,4&n&&this.as(t),this.$state|=2,this.$state&=-2,i.ds(t)}function at(t,s){if(2&this.$state)return;const i=this.$scope;i.ws=s;const n=this.$lifecycle;n.us(),this.$state|=1;const h=this.$hooks;t|=LifecycleFlags.et,8&h&&n.fs(this),4&h&&this.as(t);let e=this.bs;for(;null!==e;)e.ms(t,i),e=e.gs;this.$state|=2,this.$state&=-2,n.ds(t)}function dt(t,s){if(t|=LifecycleFlags.et,2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=1,this.$scope=s;let i=this.bs;for(;null!==i;)i.ms(t,s),i=i.gs;this.$state|=2,this.$state&=-2}function wt(t){if(2&this.$state){const s=this.$lifecycle;s.ps(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.vs,512&i&&s.As(this),256&i&&this.Cs(t),this.$state&=-67,s.Ts(t)}}function bt(t){if(2&this.$state){const s=this.$lifecycle;s.ps(),this.$state|=64;const i=this.$hooks;t|=LifecycleFlags.vs,512&i&&s.As(this),256&i&&this.Cs(t);let n=this.ys;for(;null!==n;)n.ls(t),n=n.Os;this.$scope.ws=null,this.$state&=-67,s.Ts(t)}}function mt(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.vs;let s=this.ys;for(;null!==s;)s.ls(t),s=s.Os;this.$state&=-67,this.$scope=null}}function gt(t){t.Bs(this.constructor,this),2&this.$hooks&&this.Is()}function pt(dom,t,s,host,i,n=PLATFORM.Mt){const h=this.constructor,e=h.description;if(this.$scope=Scope.create(this,null),this.ks=host,this.es=t.Rs(dom,this,host,e),s.Bs(h,this),1024&this.$hooks){const t=this.Ss(host,n.parts,i);t&&"getElementTemplate"in t&&t.js(s,h,i).Ss(this,host,n.parts)}else s.js(dom,e,i,h).Ss(this,host,n.parts);2&this.$hooks&&this.Is()}function vt(t){const s=this.description,i=this.kind.J(s.name),aliases=s.aliases;t.register(Registration.transient(i,this));for(let s=0,n=aliases.length;n>s;++s){const n=this.kind.J(aliases[s]);t.register(Registration.Ps(i,n))}}function At(t){return t.Es=1,t}function bindable(t,s){let i;const n=function(t,s){const n=t.constructor;let bindables=n.bindables;void 0===bindables&&(bindables=n.bindables={}),i.Ms||(i.Ms=PLATFORM.Vs(s)),i.Fs||(i.Fs=`${s}Changed`),void 0===i.mode&&(i.mode=BindingMode.Ds),arguments.length>1&&(i.Ls=s),bindables[i.Ls]=i};return arguments.length>1?(i={},void n(t,s)):"string"==typeof t?(i={},n):(i=t||{},n)}function Ct(t){const s=this.kind.J(this.description.name);t.register(Registration.transient(s,this))}function Tt(t){return t.containerless=1,t}function yt(t){if(2&this.$state)return;t|=LifecycleFlags.et;const s=this.$scope;let i=this.bs;for(;null!==i;)i.ms(t,s),i=i.gs;this.$state|=2}function Ot(t){if(2&this.$state){this.$state|=64,t|=LifecycleFlags.vs;let s=this.ys;for(;null!==s;)s.ls(t),s=s.Os;this.$state&=-67}}function createRenderContext(dom,t,dependencies,s){const i=t.$s(),n=new Gi,h=new Gi,e=new Gi,r=new Ji,o=new Gi,c=i.get(IRenderer);return dom.Us(i,h),i.Hs(IViewFactory,r),i.Hs(IRenderable,n),i.Hs(ITargetedInstruction,e),i.Hs(IRenderLocation,o),dependencies&&i.register(...dependencies),s&&s.register(i),i.Ss=function(t,targets,s,host,parts){c.Ss(dom,this,t,targets,s,host,parts)},i.zs=function(t,s,c,l,parts,u){return n.Ns(t),h.Ns(s),e.Ns(c),l&&r.Ns(l,parts),u&&o.Ns(u),i},i.G=function(){r.G(),n.G(),e.G(),h.G(),o.G()},i}function Bt(t){const s=[];for(let i=0,n=t.length;n>i;++i){const component=X(t[i]);null!==component&&s.push(component)}return s}function It(t,name){Reflect.defineProperty(t,name,{Ws:1,get(){return this.qs[name].W()},set(value){this.qs[name].q(value,LifecycleFlags.K)}})}function instructionRenderer(t){return function(s){const i=function(...i){const n=new s(...i);return n.Qs=t,n};i.register=function(t){return Registration.singleton(IInstructionRenderer,i).register(t,IInstructionRenderer)};const n=Object.getOwnPropertyDescriptors(s);return Object.keys(n).filter(t=>"prototype"!==t).forEach(t=>{Reflect.defineProperty(i,t,n[t])}),i}}function ensureExpression(t,s,i){return"string"==typeof s?t.parse(s,i):s}function addBindable(t,bindable){bindable.Os=t.ys,bindable.gs=null,null===t.ys?t.bs=bindable:t.ys.gs=bindable,t.ys=bindable}function addAttachable(t,s){s.xt=t.Zt,s.zt=null,null===t.Zt?t.Ut=s:t.Zt.zt=s,t.Zt=s}function kt(t){const s=BindingCommandResource.J(this.description.name);t.register(Registration.singleton(s,this))}function getTarget(t,s){return 256&t.flags?t.bindable.Ks:s?PLATFORM.Gs(t.Js.target):t.Js.target}function getMode(t){return 256&t.flags?t.bindable.mode:fn[t.Js.command]}function Rt(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}function parseExpression(t,s){return $state.input=t,$state.length=t.length,$state.index=0,$state._s=t.charCodeAt(0),St($state,0,61,void 0===s?53:s)}function St(t,s,i,n){if(0===t.index){if(2048&n)return(function(t){const parts=[],s=[],i=t.length;let n="";for(;i>t.index;){switch(t._s){case 36:if(123===t.input.charCodeAt(t.index+1)){parts.push(n),n="",t.index+=2,t._s=t.input.charCodeAt(t.index),Pt(t);const i=St(t,0,61,2048);s.push(i);continue}n+="$";break;case 92:n+=String.fromCharCode(Rt(Et(t)));break;default:n+=String.fromCharCode(t._s)}Et(t)}return s.length?(parts.push(n),new Interpolation(parts,s)):null})(t);if(Pt(t),1048576&t.Xs)throw Reporter.error(100,{state:t})}t.Zs=448>i;let h=void 0;if(32768&t.Xs){const i=pn[63&t.Xs];Pt(t),h=new Unary(i,St(t,s,449,n)),t.Zs=0}else{t:switch(t.Xs){case 3077:t.Zs=0;do{if(Pt(t),s++,!Dt(t,16392)){if(524288&t.Xs){const t=511&s;h=0===t?mn:1===t?gn:new AccessThis(t),s=512;break t}throw Reporter.error(103,{state:t})}if(16392===t.Xs)throw Reporter.error(102,{state:t});if(1572864===t.Xs)throw Reporter.error(105,{state:t})}while(3077===t.Xs);case 1024:512&n?h=new BindingIdentifier(t.Ys):(h=new AccessScope(t.Ys,511&s),s=1024),t.Zs=1,Pt(t);break;case 3076:t.Zs=0,Pt(t),h=mn,s=512;break;case 671750:Pt(t),h=St(t,0,62,n),Lt(t,1835018),s=0;break;case 671756:h=(function(t,s,i){Pt(t);const n=[];for(;1835021!==t.Xs;)if(Dt(t,1572875)){if(n.push(bn),1835021===t.Xs){n.push(bn);break}}else{if(n.push(St(t,s,62,-513&i)),!Dt(t,1572875))break;if(1835021===t.Xs){n.push(bn);break}}return Lt(t,1835021),512&i?new ArrayBindingPattern(n):(t.Zs=0,new ArrayLiteral(n))})(t,s,n),s=0;break;case 131079:h=(function(t,s){const i=[],n=[];for(Pt(t);1835017!==t.Xs;){if(i.push(t.Ys),12288&t.Xs)Pt(t),Lt(t,1572878),n.push(St(t,0,62,-513&s));else{if(!(3072&t.Xs))throw Reporter.error(107,{state:t});{const{_s:i,Xs:h,index:e}=t;Pt(t),Dt(t,1572878)?n.push(St(t,0,62,-513&s)):(t._s=i,t.Xs=h,t.index=e,n.push(St(t,0,450,-513&s)))}}1835017!==t.Xs&&Lt(t,1572875)}return Lt(t,1835017),512&s?new ObjectBindingPattern(i,n):(t.Zs=0,new ObjectLiteral(i,n))})(t,n),s=0;break;case 540713:h=new Template([t.Ys]),t.Zs=0,Pt(t),s=0;break;case 540714:h=jt(t,s,n,h,0),s=0;break;case 4096:case 8192:h=new PrimitiveLiteral(t.Ys),t.Zs=0,Pt(t),s=0;break;case 2050:case 2051:case 2049:case 2048:h=pn[63&t.Xs],t.Zs=0,Pt(t),s=0;break;default:throw Reporter.error(t.length>t.index?101:104,{state:t})}if(512&n)return(function(t,s){if(0==(65536&s._))throw Reporter.error(106,{state:t});if(1051179!==t.Xs)throw Reporter.error(106,{state:t});Pt(t);const i=s,n=St(t,0,61,0);return new ForOfStatement(i,n)})(t,h);if(i>449)return h;let name=t.Ys;for(;(16384&t.Xs)>0;)switch(t.Xs){case 16392:if(t.Zs=1,Pt(t),0==(3072&t.Xs))throw Reporter.error(105,{state:t});if(name=t.Ys,Pt(t),s=(1536&s)<<1|2048&s|(4096&s)>>1,671750===t.Xs){0===s&&(s=2048);continue}h=1024&s?new AccessScope(name,h.xs):new AccessMember(h,name);continue;case 671756:t.Zs=1,Pt(t),s=4096,h=new AccessKeyed(h,St(t,0,62,n)),Lt(t,1835021);break;case 671750:t.Zs=0,Pt(t);const i=[];for(;1835018!==t.Xs&&(i.push(St(t,0,62,n)),Dt(t,1572875)););Lt(t,1835018),h=1024&s?new CallScope(name,i,h.xs):2048&s?new CallMember(h,name,i):new CallFunction(h,i),s=0;break;case 540713:t.Zs=0;const e=[t.Ys];h=new TaggedTemplate(e,e,h),Pt(t);break;case 540714:h=jt(t,s,n,h,1)}}if(i>448)return h;for(;(65536&t.Xs)>0;){const e=t.Xs;if(i>=(448&e))break;Pt(t),h=new Binary(pn[63&e],h,St(t,s,448&e,n)),t.Zs=0}if(i>63)return h;if(Dt(t,1572879)){const i=St(t,s,62,n);Lt(t,1572878),h=new Conditional(h,i,St(t,s,62,n)),t.Zs=0}if(i>62)return h;if(Dt(t,1048615)){if(!t.Zs)throw Reporter.error(150,{state:t});h=new Assign(h,St(t,s,62,n))}if(i>61)return h;for(;Dt(t,1572883);){if(1572864===t.Xs)throw Reporter.error(112);const name=t.Ys;Pt(t);const i=[];for(;Dt(t,1572878);)i.push(St(t,s,62,n));h=new ValueConverter(h,name,i)}for(;Dt(t,1572880);){if(1572864===t.Xs)throw Reporter.error(113);const name=t.Ys;Pt(t);const i=[];for(;Dt(t,1572878);)i.push(St(t,s,62,n));h=new BindingBehavior(h,name,i)}if(1572864!==t.Xs){if(2048&n)return h;if("of"===t.ti)throw Reporter.error(151,{state:t});throw Reporter.error(101,{state:t})}return h}function jt(t,s,i,n,h){const e=[t.Ys];Lt(t,540714);const r=[St(t,s,62,i)];for(;540713!==(t.Xs=Ft(t));)e.push(t.Ys),Lt(t,540714),r.push(St(t,s,62,i));return e.push(t.Ys),t.Zs=0,h?(Pt(t),new TaggedTemplate(e,e,n,r)):(Pt(t),new Template(e,r))}function Pt(t){for(;t.length>t.index;)if(t.si=t.index,null!==(t.Xs=On[t._s](t)))return;t.Xs=1572864}function Et(t){return t._s=t.input.charCodeAt(++t.index)}function Mt(t,s){let i=t._s;if(0==s){do{i=Et(t)}while(57>=i&&i>=48);if(46!==i)return t.Ys=parseInt(t.ti,10),8192;if(i=Et(t),t.index>=t.length)return t.Ys=parseInt(t.ti.slice(0,-1),10),8192}if(i>57||48>i)t._s=t.input.charCodeAt(--t.index);else do{i=Et(t)}while(57>=i&&i>=48);return t.Ys=parseFloat(t.ti),8192}function Vt(t){let s=1,i="";for(;96!==Et(t);)if(36===t._s){if(t.length>t.index+1&&123===t.input.charCodeAt(t.index+1)){t.index++,s=0;break}i+="$"}else if(92===t._s)i+=String.fromCharCode(Rt(Et(t)));else{if(t.index>=t.length)throw Reporter.error(109,{state:t});i+=String.fromCharCode(t._s)}return Et(t),t.Ys=i,s?540713:540714}function Ft(t){if(t.index>=t.length)throw Reporter.error(109,{state:t});return t.index--,Vt(t)}function Dt(t,s){return t.Xs===s?(Pt(t),1):0}function Lt(t,s){if(t.Xs!==s)throw Reporter.error(110,{state:t,ii:s});Pt(t)}function $t(t,s,i,value){const n=i.length;for(let h=0;n>h;h+=2){const n=i[h];let e=i[h+1];if(e=e>0?e:n+1,t&&t.fill(value,n,e),s)for(let t=n;e>t;t++)s.add(t)}}function Ut(t){return s=>(Et(s),t)}function Ht(dom){const t=dom.createElement("au-m");return dom.ni(t),t}function zt(t){return t.hi&&t.hi()[0]||t.ei&&t.ei()[0]||t.path&&t.path[0]||t.target}function Nt(){this.ri(),this.oi=1}function Wt(t){t.oi=0;let s=zt(t);const i=[];for(;s;){if(s.ci){const n=s.ci[t.type];n&&(t.stopPropagation!==Nt&&(t.ri=t.stopPropagation,t.stopPropagation=Nt),i.push(n))}s=s.parentNode}for(let s=i.length-1;s>=0&&!t.oi;s--){const n=i[s];"handleEvent"in n?n.li(t):n(t)}}function qt(t){t.oi=0;let s=zt(t);for(;s&&!t.oi;){if(s.ui){const i=s.ui[t.type];i&&(t.stopPropagation!==Nt&&(t.ri=t.stopPropagation,t.stopPropagation=Nt),"handleEvent"in i?i.li(t):i(t))}s=s.parentNode}}function Qt(t,s){return t===s}function Kt(t){const s=zt(t);if(this.target===s)return this.fi(t)}function isHTMLTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length}function createElement(dom,t,s,i){return"string"==typeof t?(function(dom,s,i,n){const instructions=[],h=[],dependencies=[],e=dom.createElement(t);let r=0;return i&&Object.keys(i).forEach(to=>{const value=i[to];isHTMLTargetedInstruction(value)?(r=1,instructions.push(value)):dom.setAttribute(e,to,value)}),r&&(dom.ni(e),h.push(instructions)),n&&Gt(dom,e,n,h,dependencies),new RenderPlan(dom,e,h,dependencies)})(dom,0,s,i):(function(dom,t,s,i){const n=t.description.name,instructions=[],h=[instructions],dependencies=[],e=[],bindables=t.description.bindables,r=dom.createElement(n);return dom.ni(r),dependencies.includes(t)||dependencies.push(t),instructions.push(new HydrateElementInstruction(n,e)),s&&Object.keys(s).forEach(to=>{const value=s[to];if(isHTMLTargetedInstruction(value))e.push(value);else{e.push(bindables[to]?{type:"re",to,value}:new SetAttributeInstruction(value,to))}}),i&&Gt(dom,r,i,h,dependencies),new RenderPlan(dom,r,h,dependencies)})(dom,t,s,i)}function Gt(dom,t,s,i,dependencies){for(let n=0,h=s.length;h>n;++n){const h=s[n];switch(typeof h){case"string":dom.appendChild(t,dom.createTextNode(h));break;case"object":dom.ai(h)?dom.appendChild(t,h):"mergeInto"in h&&h.di(t,i,dependencies)}}}function Jt(t){const s=t.index,{length:i,input:n}=t;for(;i>t.index&&58!==n.charCodeAt(++t.index););return n.slice(s,t.index).trim()}function _t(t){++t.index;const{length:s,input:i}=t;let n="",h=0;for(;s>t.index;){switch(h=i.charCodeAt(t.index)){case 59:return++t.index,n.trim();case 47:h=i.charCodeAt(++t.index),n+=`\\${fh(h)}`;break;case 39:n+="'";break;default:n+=fh(h)}++t.index}return n.trim()}function stringifyDOM(t,s){let i=" ".repeat(s);if(i+=`Node: ${t.nodeName}`,3===t.nodeType&&(i+=` "${t.textContent}"`),1===t.nodeType){let s,n=0;const h=t.attributes,e=h.length;for(;e>n;++n)i+=` ${(s=h[n]).name}=${s.value}`}if(i+="\n",1===t.nodeType){let n=0,childNodes=t.childNodes,h=childNodes.length;for(;h>n;++n)i+=stringifyDOM(childNodes[n],s+1);if("TEMPLATE"===t.nodeName)for(n=0,h=(childNodes=t.content.childNodes).length;h>n;++n)i+=stringifyDOM(childNodes[n],s+1)}return i}function stringifyInstructions(t,s){let i=" ".repeat(s);switch(t.type){case"ha":i+="textBinding\n";break;case"rh":i+="callBinding\n";break;case"rk":i+="iteratorBinding\n";break;case"hb":i+="listenerBinding\n";break;case"rg":i+="propertyBinding\n";break;case"rj":i+="refBinding\n";break;case"hc":i+="stylePropertyBinding\n";break;case"re":i+="setProperty\n";break;case"hd":i+="setAttribute\n";break;case"rf":i+="interpolation\n";break;case"rd":i+="hydrateLetElement\n",t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rb":i+=`hydrateAttribute: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"ra":i+=`hydrateElement: ${t.res}\n`,t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)});break;case"rc":i+=`hydrateTemplateController: ${t.res}\n`,i+=stringifyTemplateDefinition(t.def,s+1),t.instructions.forEach(t=>{i+=stringifyInstructions(t,s+1)})}return i}function stringifyTemplateDefinition(def,t){const s=" ".repeat(t);let i=s;return i+=`TemplateDefinition: ${def.name}\n`,i+=stringifyDOM(def.template,t+1),i+=`${s} Instructions:\n`,def.instructions.forEach(n=>{i+=`${s}  Row:\n`,n.forEach(s=>{i+=stringifyInstructions(s,t+3)})}),i}var Xt,LifecycleFlags,Zt,DelegationStrategy,MutationKind,CollectionKind,Yt,ExpressionKind,xt,BindingMode,ts,Hooks,BindingType,TargetedInstructionType,ViewCompileFlags,ss,is,ns,hs,es;class AttrSyntax{constructor(t,s,i,n){this.wi=t,this.bi=s,this.target=i,this.command=n}}const rs=(function(){if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return Function("","return this")()}catch(t){return{}}})(),os=(function(){let t,s,i,n,h,e;if(null!=rs.performance&&rs.performance.now){const t=rs.performance;return function(){return t.now()}}if(null!=rs.process&&rs.process.mi){const i=function(){return(t()-h)/1e6};return s=rs.process.mi,n=(t=function(){let t;return 1e9*(t=s())[0]+t[1]})(),e=1e9*rs.process.gi(),h=n-e,i}if(Date.now){const t=function(){return Date.now()-i};return i=Date.now(),t}{const t=function(){return(new Date).getTime()-i};return i=(new Date).getTime(),t}})(),cs=(function(){const t=["moz","webkit"],s="AnimationFrame";let i=rs[`request${s}`],n=rs[`cancel${s}`]||rs[`cancelRequest${s}`];for(let h=0;!i&&2>h;++h)i=rs[`${t[h]}Request${s}`],n=rs[`${t[h]}Cancel${s}`]||rs[`${t[h]}CancelRequest${s}`];if(!i||!n){let t=0,s=0;const h=[],e=1e3/60;i=function(i){let n,r;return 0===h.length&&(n=os(),t=(r=Math.max(0,e-(n-t)))+n,setTimeout(function(){const s=h.slice(0);h.length=0;for(let i=0;s.length>i;++i)if(!s[i].pi)try{s[i].Fs(t)}catch(t){setTimeout(function(){throw t},0)}},Math.round(r))),h.push({vi:++s,Fs:i,pi:0}),s},n=function(t){for(let s=0;h.length>s;++s)h[s].vi===t&&(h[s].pi=1)}}const h=function(t){return i.call(rs,t)};return h.cancel=function(){n.apply(rs,arguments)},rs.requestAnimationFrame=i,rs.cancelAnimationFrame=n,h})(),ls={},us={},PLATFORM={global:rs,Ai:Object.freeze([]),Mt:Object.freeze({}),Ci(){},now:os,Gs(t){let value=ls[t];if(void 0!==value)return value;value="";let s,i=1,n=0;for(let h=0,e=t.length;e>h;++h)"-"===(s=t.charAt(h))||"."===s||"_"===s?n=1:(value+=i?s.toLowerCase():n?s.toUpperCase():s,n=0),i=0;return ls[t]=value},Vs(t){let value=us[t];if(void 0!==value)return value;value="";let s,i,n=1;for(let h=0,e=t.length;e>h;++h)i=(s=t.charAt(h)).toLowerCase(),value+=n?i:s!==i?`-${i}`:i,n=0;return us[t]=value},toArray(t){const s=t.length,i=Array(s);for(let n=0;s>n;++n)i[n]=t[n];return i},requestAnimationFrame:t=>cs(t),clearInterval:t=>rs.clearInterval(t),clearTimeout:t=>rs.clearTimeout(t),setInterval:(t,s,...i)=>rs.setInterval(t,s,...i),setTimeout:(t,s,...i)=>rs.setTimeout(t,s,...i)},Reporter={write(t,...s){},error:t=>Error(`Code ${t}`)},Tracer={enabled:0,Ti:0,yi:null,Oi(name,t){},Bi(){},Ii(t){},ki(t){},Ri(t){},Si(){}};"getOwnMetadata"in Reflect||(Reflect.ji=function(t,s){return s[t]},Reflect.Pi=function(t,s){return function(i){i[t]=s}});const DI={Ei:()=>new ws,Mi:t=>Reflect.ji("design:paramtypes",t)||PLATFORM.Ai,Vi(t){let dependencies;if(void 0===t.inject)dependencies=DI.Mi(t);else{dependencies=[];let s=t;for(;"function"==typeof s;)s.hasOwnProperty("inject")&&dependencies.push(...s.inject),s=Object.getPrototypeOf(s)}return dependencies},Fi(t){const Key=function(s,i,n){if(void 0===s)throw Reporter.error(16,Key);return Key.Di=t||"Interface",(s.inject||(s.inject=[]))[n]=Key,s};return Key.Li=function(){return Key},Key.$i=function(t){return Key.$i=function(){throw Reporter.error(17,Key)},Key.register=function(s,i){const n=i||Key;return t({C:value=>s.Hs(n,new fs(n,0,value)),singleton:value=>s.Hs(n,new fs(n,1,value)),transient:value=>s.Hs(n,new fs(n,2,value)),Fs:value=>s.Hs(n,new fs(n,3,value)),Ui:t=>s.Hs(n,new fs(n,5,t))})},Key},Key},inject:(...dependencies)=>(function(t,s,i){if("number"==typeof i){if(!t.hasOwnProperty("inject")){const s=DI.Mi(t);t.inject=s.slice()}1===dependencies.length&&(t.inject[i]=dependencies[0])}else if(s){const i=t.constructor;(i.inject||(i.inject={}))[s]=dependencies[0]}else if(i)i.value.inject=dependencies;else if(0===dependencies.length){const s=DI.Mi(t);t.inject=s.slice()}else t.inject=dependencies}),transient:t=>(t.register=function(s){return Registration.transient(t,t).register(s,t)},t),singleton:t=>(t.register=function(s){return Registration.singleton(t,t).register(s,t)},t)},IContainer=DI.Fi("IContainer").Li(),IServiceLocator=IContainer,inject=DI.inject,all=s((t,s,i)=>i.getAll(t)),lazy=s((t,s,i)=>{let n=null;return()=>(null===n&&(n=i.get(t)),n)}),optional=s((t,s,i)=>i.has(t,1)?i.get(t):null);class fs{constructor(t,strategy,s){this.key=t,this.strategy=strategy,this.state=s}register(t,s){return t.Hs(s||this.key,this)}resolve(t,s){switch(this.strategy){case 0:return this.state;case 1:{this.strategy=0;const s=t.Hi(this.state);return this.state=s.construct(t)}case 2:return t.Hi(this.state).construct(s);case 3:return this.state(t,s,this);case 4:return this.state[0].resolve(t,s);case 5:return t.get(this.state);default:throw Reporter.error(6,this.strategy)}}Hi(t){switch(this.strategy){case 1:case 2:return t.Hi(this.state);default:return null}}}class as{constructor(t,s,dependencies){this.zi=t,this.Ni=s,this.dependencies=dependencies,this.Wi=null}static create(t){const dependencies=DI.Vi(t);return new as(t,bs[dependencies.length]||ms,dependencies)}construct(t,s){const i=this.Wi;let n=void 0!==s?this.Ni.qi(t,this.zi,this.dependencies,s):this.Ni.Qi(t,this.zi,this.dependencies);if(null===i)return n;for(let t=0,s=i.length;s>t;++t)n=i[t](n);return n}Ki(t){return null===this.Wi&&(this.Wi=[]),this.Wi.push(t),1}}const ds={resolve:(t,s)=>s};class ws{constructor(t={}){this.parent=null,this.Gi=new Map,this.Ji=t,this._i=t._i||(t._i=new Map),this.Xi=t.Xi||(t.Xi=Object.create(null)),this.Gi.set(IContainer,ds)}register(...t){for(let s=0,i=t.length;i>s;++s){const i=t[s];if(h(i))i.register(this);else{const t=Object.keys(i);for(let s=0,n=t.length;n>s;++s){const value=i[t[s]];h(value)?value.register(this):this.register(value)}}}}Hs(t,s){e(t);const i=this.Gi,n=i.get(t);return void 0===n?(i.set(t,s),"string"==typeof t&&(this.Xi[t]=s)):n instanceof fs&&4===n.strategy?n.state.push(s):i.set(t,new fs(t,4,[n,s])),s}Ki(t,s){const i=this.Zi(t);if(null===i)return 0;if(i.Hi){const t=i.Hi(this);return null===t?0:t.Ki(s)}return 0}Zi(t,s=1){if(e(t),t.resolve)return t;let i=this;for(;null!==i;){const n=i.Gi.get(t);if(void 0!==n)return n;if(null===i.parent)return s?this.Yi(t,i):null;i=i.parent}return null}has(t,s=0){return this.Gi.has(t)?1:s&&null!==this.parent?this.parent.has(t,1):0}get(t){if(e(t),t.resolve)return t.resolve(this,this);let s=this;for(;null!==s;){let i=s.Gi.get(t);if(void 0!==i)return i.resolve(s,this);if(null===s.parent)return(i=this.Yi(t,s)).resolve(s,this);s=s.parent}}getAll(t){e(t);let s=this;for(;null!==s;){const i=s.Gi.get(t);if(void 0!==i)return r(i,s,this);if(null===this.parent)return PLATFORM.Ai;s=s.parent}return PLATFORM.Ai}Hi(t){let s=this._i.get(t);return void 0===s&&(s=as.create(t),this._i.set(t,s)),s}$s(){const t=this.Ji,s={_i:t._i,Xi:Object.assign({},t.Xi)},i=new ws(s);return i.parent=this,i}Yi(t,s){if(t.register){const i=t.register(s,t);if(!i||!i.resolve)throw Reporter.error(40);return i}const i=new fs(t,1,t);return s.Gi.set(t,i),i}}const Registration={C:(t,value)=>new fs(t,0,value),singleton:(t,value)=>new fs(t,1,value),transient:(t,value)=>new fs(t,2,value),Fs:(t,s)=>new fs(t,3,s),Ps:(t,s)=>new fs(s,5,t),xi:(t,...s)=>({register(i){const n=i.Zi(t);if(null!==n){let t=null;if(n.Hi){const h=n.Hi(i);null!==h&&(t=h.construct(i,s))}else t=n.resolve(i,i);null!==t&&t.register(i)}}})},bs=[{Qi:(t,s)=>new s,qi:o},{Qi:(t,s,i)=>new s(t.get(i[0])),qi:o},{Qi:(t,s,i)=>new s(t.get(i[0]),t.get(i[1])),qi:o},{Qi:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2])),qi:o},{Qi:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3])),qi:o},{Qi:(t,s,i)=>new s(t.get(i[0]),t.get(i[1]),t.get(i[2]),t.get(i[3]),t.get(i[4])),qi:o}],ms={Qi:o,qi:o};class RuntimeCompilationResources{constructor(t){this.context=t}find(t,name){const s=t.J(name),i=this.context.Xi;let n=i[s];if(void 0===n&&(n=i[s]=this.context.Zi(s,0)),null!==n&&n.Hi){const t=n.Hi(this.context);if(null!==t){const s=t.zi.description;return void 0===s?null:s}}return null}create(t,name){const s=t.J(name),i=this.context.Xi;let n=i[s];if(void 0===n&&(n=i[s]=this.context.Zi(s,0)),null!==n){const t=n.resolve(this.context,this.context);return void 0===t?null:t}return null}}Xt=Object.freeze({all,DI,IContainer,inject,IServiceLocator,lazy,optional,Registration,singleton:t=>void 0===t?n:n(t),transient:t=>void 0===t?i:i(t),PLATFORM,Reporter,Tracer,RuntimeCompilationResources});class gs{constructor(t,s,i,n){if(this.tn=t,this.repeat=s,this.sn=i,this.in=n,n)switch(t.length){case 0:this.has=this.nn;break;case 1:this.has=this.hn;break;default:this.has=this.en}else switch(t.length){case 0:this.has=this.rn;break;case 1:this.has=this.on;break;default:this.has=this.cn}}ln(t){return this.tn===t.tn&&this.repeat===t.repeat&&this.sn===t.sn&&this.in===t.in}cn(t){return-1!==this.tn.indexOf(t)}on(t){return this.tn===t}rn(t){return 0}en(t){return-1===this.tn.indexOf(t)}hn(t){return this.tn!==t}nn(t){return 1}}class Interpretation{get pattern(){const value=this.un;return""===value?null:value}set pattern(value){null===value?(this.un="",this.parts=PLATFORM.Ai):(this.un=value,this.parts=this.fn[value])}constructor(){this.un="",this.parts=PLATFORM.Ai,this.an={},this.fn={}}append(t,s){const{an:i}=this;void 0===i[t]?i[t]=s:i[t]+=s}next(t){const{an:s}=this;if(void 0!==s[t]){const{fn:i}=this;void 0===i[t]?i[t]=[s[t]]:i[t].push(s[t]),s[t]=void 0}}}class State{get pattern(){return this.dn?this.wn[0]:null}constructor(t,...s){this.bn=t,this.mn=[],this.types=null,this.wn=s,this.dn=0}gn(t){const s=this.mn,i=s.length;let n=null;for(let h=0;i>h;++h)if(t.ln((n=s[h]).bn))return n;return null}append(t,s){const{wn:i}=this;-1===i.indexOf(s)&&i.push(s);let n=this.gn(t);return null===n&&(n=new State(t,s),this.mn.push(n),t.repeat&&n.mn.push(n)),n}pn(t,s){const i=[],n=this.mn,h=n.length;let e=0,r=null,o=0,c=0;for(;h>o;++o)if((r=n[o]).bn.has(t))if(i.push(r),e=r.wn.length,r.bn.sn)for(;e>c;++c)s.next(r.wn[c]);else for(;e>c;++c)s.append(r.wn[c],t);return i}}class ps{constructor(t){this.text=t;const s=this.vn=t.length,i=this.An=[];for(let n=0;s>n;++n)i.push(new gs(t[n],0,0,0))}Cn(t){const{vn:s,An:i}=this;for(let n=0;s>n;++n)t(i[n])}}class vs{constructor(t){this.text="PART",this.Tn=new gs(t,1,0,1)}Cn(t){t(this.Tn)}}class As{constructor(t){this.text=t,this.Tn=new gs(t,0,1,0)}Cn(t){t(this.Tn)}}class Cs{constructor(){this.yn=0,this.On=0,this.symbols=0}}const ISyntaxInterpreter=DI.Fi("ISyntaxInterpreter").$i(t=>t.singleton(Ts));class Ts{constructor(){this.Bn=new State(null),this.In=[this.Bn]}add(t){let s=0;if(Array.isArray(t)){const i=t.length;for(;i>s;++s)this.add(t[s]);return}let i=this.Bn;const def=t,n=def.pattern,h=new Cs,e=this.parse(def,h),r=e.length,o=t=>{i=i.append(t,n)};for(s=0;r>s;++s)e[s].Cn(o);i.types=h,i.dn=1}xi(name){const t=new Interpretation;let s=this.In;const i=name.length;for(let n=0;i>n&&0!==(s=this.kn(s,name.charAt(n),t)).length;++n);if(s.sort((t,s)=>{if(!t.dn)return s.dn?1:0;if(!s.dn)return-1;const i=t.types,n=s.types;return i.yn!==n.yn?n.yn-i.yn:i.On!==n.On?n.On-i.On:i.symbols!==n.symbols?n.symbols-i.symbols:0}),s.length>0){const i=s[0];i.bn.sn||t.next(i.pattern),t.pattern=i.pattern}return t}kn(t,s,i){const n=[];let h=null;const e=t.length;for(let r=0;e>r;++r)n.push(...(h=t[r]).pn(s,i));return n}parse(def,t){const s=[],i=def.pattern,n=i.length;let h=0,e=0,r="";for(;n>h;)r=i.charAt(h),-1===def.symbols.indexOf(r)?h===e&&"P"===r&&"PART"===i.slice(h,h+4)?(e=h+=4,s.push(new vs(def.symbols)),++t.On):++h:h!==e?(s.push(new ps(i.slice(e,h))),++t.yn,e=h):(s.push(new As(i.slice(e,h+1))),++t.symbols,e=++h);return e!==h&&(s.push(new ps(i.slice(e,h))),++t.yn),s}}const IAttributePattern=DI.Fi("IAttributePattern").Li();class DotSeparatedAttributePattern{Rn(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[1])}Sn(t,s,parts){return new AttrSyntax(t,s,parts[0],parts[2])}}attributePattern({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})(DotSeparatedAttributePattern);class RefAttributePattern{jn(t,s,parts){return new AttrSyntax(t,s,"ref",null)}Pn(t,s,parts){return new AttrSyntax(t,s,"ref",parts[1])}}attributePattern({pattern:"ref",symbols:""},{pattern:"ref.PART",symbols:"."})(RefAttributePattern);class ColonPrefixedBindAttributePattern{En(t,s,parts){return new AttrSyntax(t,s,parts[0],"bind")}}attributePattern({pattern:":PART",symbols:":"})(ColonPrefixedBindAttributePattern);class AtPrefixedTriggerAttributePattern{Mn(t,s,parts){return new AttrSyntax(t,s,parts[0],"trigger")}}attributePattern({pattern:"@PART",symbols:"@"})(AtPrefixedTriggerAttributePattern);const IAttributeParser=DI.Fi("IAttributeParser").$i(t=>t.singleton(ys));class ys{constructor(t,s){this.Vn=t,this.cache={};const i=this.wn={};s.forEach(s=>{const n=s.t;t.add(n),n.forEach(def=>{i[def.pattern]=s})})}parse(name,value){let t=this.cache[name];void 0===t&&(t=this.cache[name]=this.Vn.xi(name));const s=t.pattern;return null===s?new AttrSyntax(name,value,name,null):this.wn[s][s](name,value,t.parts)}}ys.inject=[ISyntaxInterpreter,all(IAttributePattern)],(function(LifecycleFlags){LifecycleFlags[LifecycleFlags.Fn=0]="none",LifecycleFlags[LifecycleFlags.Z=262144]="mustEvaluate",LifecycleFlags[LifecycleFlags.Dn=3]="mutation",LifecycleFlags[LifecycleFlags.Ln=1]="isCollectionMutation",LifecycleFlags[LifecycleFlags.$n=2]="isInstanceMutation",LifecycleFlags[LifecycleFlags.update=28]="update",LifecycleFlags[LifecycleFlags.Un=4]="updateTargetObserver",LifecycleFlags[LifecycleFlags.K=8]="updateTargetInstance",LifecycleFlags[LifecycleFlags.Hn=16]="updateSourceExpression",LifecycleFlags[LifecycleFlags.from=262112]="from",LifecycleFlags[LifecycleFlags.ht=96]="fromFlush",LifecycleFlags[LifecycleFlags.zn=32]="fromAsyncFlush",LifecycleFlags[LifecycleFlags.Nn=64]="fromSyncFlush",LifecycleFlags[LifecycleFlags.Wn=128]="fromStartTask",LifecycleFlags[LifecycleFlags._t=256]="fromStopTask",LifecycleFlags[LifecycleFlags.et=512]="fromBind",LifecycleFlags[LifecycleFlags.vs=1024]="fromUnbind",LifecycleFlags[LifecycleFlags.Ft=2048]="fromAttach",LifecycleFlags[LifecycleFlags.qt=4096]="fromDetach",LifecycleFlags[LifecycleFlags.ss=8192]="fromCache",LifecycleFlags[LifecycleFlags.qn=16384]="fromDOMEvent",LifecycleFlags[LifecycleFlags.Qn=32768]="fromObserverSetter",LifecycleFlags[LifecycleFlags.Kn=65536]="fromBindableHandler",LifecycleFlags[LifecycleFlags.Gn=131072]="fromLifecycleTask",LifecycleFlags[LifecycleFlags.Jt=524288]="parentUnmountQueued",LifecycleFlags[LifecycleFlags.ot=1048576]="doNotUpdateDOM",LifecycleFlags[LifecycleFlags.Jn=2097152]="isTraversingParentScope",LifecycleFlags[LifecycleFlags._n=4194304]="persistentBindingFlags",LifecycleFlags[LifecycleFlags.Xn=4194304]="allowParentScopeTraversal"})(LifecycleFlags||(LifecycleFlags={})),(function(t){t[t.Zn=0]="None",t[t.Yn=1]="Subscriber0",t[t.xn=2]="Subscriber1",t[t.th=4]="Subscriber2",t[t.sh=8]="SubscribersRest",t[t.ih=15]="Any"})(Zt||(Zt={})),(function(DelegationStrategy){DelegationStrategy[DelegationStrategy.Fn=0]="none",DelegationStrategy[DelegationStrategy.nh=1]="capturing",DelegationStrategy[DelegationStrategy.hh=2]="bubbling"})(DelegationStrategy||(DelegationStrategy={})),(function(MutationKind){MutationKind[MutationKind.C=1]="instance",MutationKind[MutationKind.gt=2]="collection"})(MutationKind||(MutationKind={})),(function(CollectionKind){CollectionKind[CollectionKind.eh=8]="indexed",CollectionKind[CollectionKind.rh=4]="keyed",CollectionKind[CollectionKind.oh=9]="array",CollectionKind[CollectionKind.map=6]="map",CollectionKind[CollectionKind.set=7]="set"})(CollectionKind||(CollectionKind={}));const Os=Reflect.defineProperty,Bs={get:void 0,set:void 0,Ws:1,lh:1};let SetterObserver=class{constructor(t,s){this.U=t,this.H=s}W(){return this.N}q(t,s){const i=this.N;i!==t&&(this.N=t,s&LifecycleFlags.et||this.A(t,i,s),this.$||(this.U[this.H]=t))}};SetterObserver=c([propertyObserver()],SetterObserver),(function(t){t[t.uh=250]="UndefinedScope",t[t.fh=251]="NullScope",t[t.ah=252]="NilOverrideContext",t[t.dh=253]="NilParentScope"})(Yt||(Yt={}));class Is{wh(t,s){let i=this[s];return void 0===i&&(i=this[s]=new SetterObserver(t,s)),i}}class BindingContext{constructor(t,value){if(this.bh=1,void 0!==t)if(void 0!==value)this[t]=value;else for(const s in t)t.hasOwnProperty(s)&&(this[s]=t[s])}static create(t,value){return new BindingContext(t,value)}static get(t,name,s,i){if(void 0===t)throw Reporter.error(250);if(null===t)throw Reporter.error(251);let n=t.mh;if(s>0){for(;s>0;){if(null===n.gh)return;s--,n=n.gh}return name in n?n:n.ph}for(;n&&!(name in n)&&!(n.ph&&name in n.ph);)n=n.gh;if(n)return name in n?n:n.ph;if(i&LifecycleFlags.Xn&&null!==t.ws){const n=this.get(t.ws,name,s,i&~LifecycleFlags.Xn|LifecycleFlags.Jn);if(null!==n)return n}return i&LifecycleFlags.Jn?null:t.ph||t.mh}vh(){let t=this.qs;return void 0===t&&(this.qs=t=new Is),t}}class Scope{constructor(t,s){this.ph=t,this.mh=s,this.ws=null}static create(t,s){return new Scope(t,null==s?OverrideContext.create(t,s):s)}static Ah(t){if(null==t)throw Reporter.error(252);return new Scope(t.ph,t)}static Ch(t,s){if(null==t)throw Reporter.error(253);return new Scope(s,OverrideContext.create(s,t.mh))}}class OverrideContext{constructor(t,s){this.bh=1,this.ph=t,this.gh=s}static create(t,s){return new OverrideContext(t,void 0===s?null:s)}vh(){let t=this.qs;return void 0===t&&(this.qs=t=new Is),t}}const ISignaler=DI.Fi("ISignaler").$i(t=>t.singleton(ks));class ks{constructor(){this.Th=Object.create(null)}yh(name,t){const s=this.Th[name];if(void 0!==s)for(const i of s.keys())i.T(void 0,void 0,t|LifecycleFlags.K)}Oh(name,t){const s=this.Th,i=s[name];void 0===i?s[name]=new Set([t]):i.add(t)}Bh(name,t){const s=this.Th[name];s&&s.delete(t)}}const BindingBehaviorResource={name:"binding-behavior",J(name){return`${this.name}:${name}`},Ih(t){return t.kind===this},kh(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=BindingBehaviorResource,i.description=n,i.register=T,i}},ValueConverterResource={name:"value-converter",J(name){return`${this.name}:${name}`},Ih(t){return t.kind===this},kh(t,s){const i=s,n="string"==typeof t?{name:t}:t;return i.kind=ValueConverterResource,i.description=n,i.register=y,i}};(function(ExpressionKind){ExpressionKind[ExpressionKind.Connects=32]="Connects",ExpressionKind[ExpressionKind.Observes=64]="Observes",ExpressionKind[ExpressionKind.CallsFunction=128]="CallsFunction",ExpressionKind[ExpressionKind.HasAncestor=256]="HasAncestor",ExpressionKind[ExpressionKind.IsPrimary=512]="IsPrimary",ExpressionKind[ExpressionKind.IsLeftHandSide=1024]="IsLeftHandSide",ExpressionKind[ExpressionKind.HasBind=2048]="HasBind",ExpressionKind[ExpressionKind.HasUnbind=4096]="HasUnbind",ExpressionKind[ExpressionKind.IsAssignable=8192]="IsAssignable",ExpressionKind[ExpressionKind.IsLiteral=16384]="IsLiteral",ExpressionKind[ExpressionKind.IsResource=32768]="IsResource",ExpressionKind[ExpressionKind.Rh=65536]="IsForDeclaration",ExpressionKind[ExpressionKind.zi=31]="Type",ExpressionKind[ExpressionKind.AccessThis=1793]="AccessThis",ExpressionKind[ExpressionKind.AccessScope=10082]="AccessScope",ExpressionKind[ExpressionKind.ArrayLiteral=17955]="ArrayLiteral",ExpressionKind[ExpressionKind.ObjectLiteral=17956]="ObjectLiteral",ExpressionKind[ExpressionKind.PrimitiveLiteral=17925]="PrimitiveLiteral",ExpressionKind[ExpressionKind.Template=17958]="Template",ExpressionKind[ExpressionKind.Unary=39]="Unary",ExpressionKind[ExpressionKind.CallScope=1448]="CallScope",ExpressionKind[ExpressionKind.CallMember=1161]="CallMember",ExpressionKind[ExpressionKind.CallFunction=1162]="CallFunction",ExpressionKind[ExpressionKind.AccessMember=9323]="AccessMember",ExpressionKind[ExpressionKind.AccessKeyed=9324]="AccessKeyed",ExpressionKind[ExpressionKind.TaggedTemplate=1197]="TaggedTemplate",ExpressionKind[ExpressionKind.Binary=46]="Binary",ExpressionKind[ExpressionKind.Conditional=63]="Conditional",ExpressionKind[ExpressionKind.Assign=8208]="Assign",ExpressionKind[ExpressionKind.ValueConverter=36913]="ValueConverter",ExpressionKind[ExpressionKind.BindingBehavior=38962]="BindingBehavior",ExpressionKind[ExpressionKind.HtmlLiteral=51]="HtmlLiteral",ExpressionKind[ExpressionKind.ArrayBindingPattern=65556]="ArrayBindingPattern",ExpressionKind[ExpressionKind.ObjectBindingPattern=65557]="ObjectBindingPattern",ExpressionKind[ExpressionKind.BindingIdentifier=65558]="BindingIdentifier",ExpressionKind[ExpressionKind.ForOfStatement=55]="ForOfStatement",ExpressionKind[ExpressionKind.Interpolation=24]="Interpolation"})(ExpressionKind||(ExpressionKind={})),(function(t){t[t.Sh=202]="NoLocator",t[t.jh=203]="NoBehaviorFound",t[t.Ph=204]="BehaviorAlreadyApplied",t[t.Eh=205]="NoConverterFound",t[t.Mh=206]="NoBinding",t[t.Vh=207]="NotAFunction",t[t.Fh=208]="UnknownOperator",t[t.uh=250]="UndefinedScope",t[t.fh=251]="NullScope"})(xt||(xt={}));class BindingBehavior{constructor(t,name,s){this._=38962,this.Dh=t,this.name=name,this.Lh=s,this.$h=BindingBehaviorResource.J(this.name),this.Uh=hasBind(t),this.Hh=hasUnbind(t)}evaluate(t,s,i){return this.Dh.evaluate(t,s,i)}assign(t,s,i,value){return this.Dh.assign(t,s,i,value)}connect(t,s,i){this.Dh.connect(t,s,i)}bind(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const n=i.zh;if(!n)throw Reporter.error(202,this);this.Uh&&this.Dh.bind(t,s,i);const h=this.$h,e=n.get(h);if(!e)throw Reporter.error(203,this);if(null!=i[h])throw Reporter.error(204,this);i[h]=e,e.bind.apply(e,[t,s,i].concat(O(t,s,n,this.Lh)))}Nh(t,s,i){const n=this.$h;i[n].Nh(t,s,i),i[n]=null,this.Hh&&this.Dh.Nh(t,s,i)}accept(t){return t.Wh(this)}}class ValueConverter{constructor(t,name,s){this._=36913,this.Dh=t,this.name=name,this.Lh=s,this.qh=ValueConverterResource.J(this.name)}evaluate(t,s,i){if(!i)throw Reporter.error(202,this);const n=i.get(this.qh);if(!n)throw Reporter.error(205,this);if("toView"in n){const h=this.Lh,e=h.length,r=Array(e+1);r[0]=this.Dh.evaluate(t,s,i);for(let n=0;e>n;++n)r[n+1]=h[n].evaluate(t,s,i);return n.Ds.apply(n,r)}return this.Dh.evaluate(t,s,i)}assign(t,s,i,value){if(!i)throw Reporter.error(202,this);const n=i.get(this.qh);if(!n)throw Reporter.error(205,this);return"fromView"in n&&(value=n.Qh.apply(n,[value].concat(O(t,s,i,this.Lh)))),this.Dh.assign(t,s,i,value)}connect(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);if(!i)throw Reporter.error(206,this);const n=i.zh;if(!n)throw Reporter.error(202,this);this.Dh.connect(t,s,i);const h=this.Lh;for(let n=0,e=h.length;e>n;++n)h[n].connect(t,s,i);const e=n.get(this.qh);if(!e)throw Reporter.error(205,this);const r=e.Th;if(void 0===r)return;const o=n.get(ISignaler);for(let t=0,s=r.length;s>t;++t)o.Oh(r[t],i)}Nh(t,s,i){const n=i.zh,h=n.get(this.qh).Th;if(void 0===h)return;const e=n.get(ISignaler);for(let t=0,s=h.length;s>t;++t)e.Bh(h[t],i)}accept(t){return t.Kh(this)}}class Assign{constructor(t,value){this._=8208,this.target=t,this.value=value}evaluate(t,s,i){return this.target.assign(t,s,i,this.value.evaluate(t,s,i))}connect(t,s,i){}assign(t,s,i,value){return this.value.assign(t,s,i,value),this.target.assign(t,s,i,value)}accept(t){return t.Gh(this)}}class Conditional{constructor(t,s,i){this._=63,this.assign=PLATFORM.Ci,this.Jh=t,this._h=s,this.Xh=i}evaluate(t,s,i){return this.Jh.evaluate(t,s,i)?this._h.evaluate(t,s,i):this.Xh.evaluate(t,s,i)}connect(t,s,i){this.Jh.evaluate(t,s,null)?(this.Jh.connect(t,s,i),this._h.connect(t,s,i)):(this.Jh.connect(t,s,i),this.Xh.connect(t,s,i))}accept(t){return t.Zh(this)}}class AccessThis{constructor(t=0){this._=1793,this.assign=PLATFORM.Ci,this.connect=PLATFORM.Ci,this.xs=t}evaluate(t,s,i){if(void 0===s)throw Reporter.error(250,this);if(null===s)throw Reporter.error(251,this);let n=s.mh,h=this.xs;for(;h--&&n;)n=n.gh;return 1>h&&n?n.ph:void 0}accept(t){return t.Yh(this)}}AccessThis.xh=new AccessThis(0),AccessThis.te=new AccessThis(1);class AccessScope{constructor(name,t=0){this._=10082,this.name=name,this.xs=t}evaluate(t,s,i){const name=this.name;return BindingContext.get(s,name,this.xs,t)[name]}assign(t,s,i,value){const name=this.name,n=BindingContext.get(s,name,this.xs,t);return n?n[name]=value:void 0}connect(t,s,i){const name=this.name,n=BindingContext.get(s,name,this.xs,t);i.nt(n,name)}accept(t){return t.se(this)}}class AccessMember{constructor(t,name){this._=9323,this.object=t,this.name=name}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);return null==n?n:n[this.name]}assign(t,s,i,value){let n=this.object.evaluate(t,s,i);return null!==n&&"object"==typeof n||this.object.assign(t,s,i,n={}),n[this.name]=value,value}connect(t,s,i){const n=this.object.evaluate(t,s,null);this.object.connect(t,s,i),n&&i.nt(n,this.name)}accept(t){return t.ie(this)}}class AccessKeyed{constructor(t,s){this._=9324,this.object=t,this.key=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i);if(null!=n)return n[this.key.evaluate(t,s,i)]}assign(t,s,i,value){return this.object.evaluate(t,s,i)[this.key.evaluate(t,s,i)]=value}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),"object"==typeof n&&null!==n){this.key.connect(t,s,i);const h=this.key.evaluate(t,s,null);Array.isArray(n)&&(function(value){const t=typeof value;if("number"===t)return 1;if("string"!==t)return 0;const s=value.length;if(0===s)return 0;for(let t=0;s>t;++t){const s=value.charCodeAt(t);if(48>s||s>57)return 0}return 1})(h)||i.nt(n,h)}}accept(t){return t.ne(this)}}class CallScope{constructor(name,t,s=0){this._=1448,this.assign=PLATFORM.Ci,this.name=name,this.Lh=t,this.xs=s}evaluate(t,s,i){const n=O(t,s,i,this.Lh),h=BindingContext.get(s,this.name,this.xs,t),e=B(t,h,this.name);if(e)return e.apply(h,n)}connect(t,s,i){const n=this.Lh;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.he(this)}}class CallMember{constructor(t,name,s){this._=1161,this.assign=PLATFORM.Ci,this.object=t,this.name=name,this.Lh=s}evaluate(t,s,i){const n=this.object.evaluate(t,s,i),h=O(t,s,i,this.Lh),e=B(t,n,this.name);if(e)return e.apply(n,h)}connect(t,s,i){const n=this.object.evaluate(t,s,null);if(this.object.connect(t,s,i),B(t&~LifecycleFlags.Z,n,this.name)){const n=this.Lh;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.ee(this)}}class CallFunction{constructor(t,s){this._=1162,this.assign=PLATFORM.Ci,this.re=t,this.Lh=s}evaluate(t,s,i){const n=this.re.evaluate(t,s,i);if("function"==typeof n)return n.apply(null,O(t,s,i,this.Lh));if(t&LifecycleFlags.Z||null!=n)throw Reporter.error(207,this)}connect(t,s,i){const n=this.re.evaluate(t,s,null);if(this.re.connect(t,s,i),"function"==typeof n){const n=this.Lh;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}}accept(t){return t.oe(this)}}class Binary{constructor(t,s,i){this._=46,this.assign=PLATFORM.Ci,this.ce=t,this.left=s,this.right=i,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){const n=this.left.evaluate(t,s,null);this.left.connect(t,s,i),"&&"===this.ce&&!n||"||"===this.ce&&n||this.right.connect(t,s,i)}le(t,s,i){return this.left.evaluate(t,s,i)&&this.right.evaluate(t,s,i)}ue(t,s,i){return this.left.evaluate(t,s,i)||this.right.evaluate(t,s,i)}fe(t,s,i){return this.left.evaluate(t,s,i)==this.right.evaluate(t,s,i)}ae(t,s,i){return this.left.evaluate(t,s,i)===this.right.evaluate(t,s,i)}de(t,s,i){return this.left.evaluate(t,s,i)!=this.right.evaluate(t,s,i)}we(t,s,i){return this.left.evaluate(t,s,i)!==this.right.evaluate(t,s,i)}be(t,s,i){const n=this.right.evaluate(t,s,i);return"function"==typeof n?this.left.evaluate(t,s,i)instanceof n:0}me(t,s,i){const n=this.right.evaluate(t,s,i);return null!==n&&"object"==typeof n?this.left.evaluate(t,s,i)in n:0}ge(t,s,i){return this.left.evaluate(t,s,i)+this.right.evaluate(t,s,i)}pe(t,s,i){return this.left.evaluate(t,s,i)-this.right.evaluate(t,s,i)}ve(t,s,i){return this.left.evaluate(t,s,i)*this.right.evaluate(t,s,i)}Ae(t,s,i){return this.left.evaluate(t,s,i)/this.right.evaluate(t,s,i)}Ce(t,s,i){return this.left.evaluate(t,s,i)%this.right.evaluate(t,s,i)}Te(t,s,i){return this.left.evaluate(t,s,i)<this.right.evaluate(t,s,i)}ye(t,s,i){return this.left.evaluate(t,s,i)>this.right.evaluate(t,s,i)}Oe(t,s,i){return this.left.evaluate(t,s,i)<=this.right.evaluate(t,s,i)}Be(t,s,i){return this.left.evaluate(t,s,i)>=this.right.evaluate(t,s,i)}accept(t){return t.Ie(this)}}class Unary{constructor(t,s){this._=39,this.assign=PLATFORM.Ci,this.ce=t,this.Dh=s,this.evaluate=this[t]}evaluate(t,s,i){throw Reporter.error(208,this)}connect(t,s,i){this.Dh.connect(t,s,i)}ke(t,s,i){this.Dh.evaluate(t,s,i)}Re(t,s,i){return typeof this.Dh.evaluate(t,s,i)}Se(t,s,i){return!this.Dh.evaluate(t,s,i)}pe(t,s,i){return-this.Dh.evaluate(t,s,i)}ge(t,s,i){return+this.Dh.evaluate(t,s,i)}accept(t){return t.je(this)}}class PrimitiveLiteral{constructor(value){this._=17925,this.assign=PLATFORM.Ci,this.connect=PLATFORM.Ci,this.value=value}evaluate(t,s,i){return this.value}accept(t){return t.Pe(this)}}PrimitiveLiteral.Ee=new PrimitiveLiteral(void 0),PrimitiveLiteral.Me=new PrimitiveLiteral(null),PrimitiveLiteral.Ve=new PrimitiveLiteral(1),PrimitiveLiteral.Fe=new PrimitiveLiteral(0),PrimitiveLiteral.De=new PrimitiveLiteral("");class HtmlLiteral{constructor(parts){this._=51,this.assign=PLATFORM.Ci,this.parts=parts}evaluate(t,s,i){const n=this.parts;let h="";for(let e=0,r=n.length;r>e;++e){const value=n[e].evaluate(t,s,i);null!=value&&(h+=value)}return h}connect(t,s,i){for(let n=0,h=this.parts.length;h>n;++n)this.parts[n].connect(t,s,i)}accept(t){return t.Le(this)}}class ArrayLiteral{constructor(t){this._=17955,this.assign=PLATFORM.Ci,this.elements=t}evaluate(t,s,i){const n=this.elements,h=n.length,e=Array(h);for(let r=0;h>r;++r)e[r]=n[r].evaluate(t,s,i);return e}connect(t,s,i){const n=this.elements;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.$e(this)}}ArrayLiteral.De=new ArrayLiteral(PLATFORM.Ai);class ObjectLiteral{constructor(t,s){this._=17956,this.assign=PLATFORM.Ci,this.keys=t,this.values=s}evaluate(t,s,i){const n={},h=this.keys,e=this.values;for(let r=0,o=h.length;o>r;++r)n[h[r]]=e[r].evaluate(t,s,i);return n}connect(t,s,i){const n=this.values;for(let h=0,e=this.keys.length;e>h;++h)n[h].connect(t,s,i)}accept(t){return t.Ue(this)}}ObjectLiteral.De=new ObjectLiteral(PLATFORM.Ai,PLATFORM.Ai);class Template{constructor(t,s){this._=17958,this.assign=PLATFORM.Ci,this.He=t,this.X=void 0===s?PLATFORM.Ai:s}evaluate(t,s,i){const n=this.X,h=this.He;let e=h[0];for(let r=0,o=n.length;o>r;++r)e+=n[r].evaluate(t,s,i),e+=h[r+1];return e}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i),h++}accept(t){return t.ze(this)}}Template.De=new Template([""]);class TaggedTemplate{constructor(t,s,i,n){this._=1197,this.assign=PLATFORM.Ci,this.He=t,this.He.raw=s,this.re=i,this.X=void 0===n?PLATFORM.Ai:n}evaluate(t,s,i){const n=this.X,h=n.length,e=Array(h);for(let r=0,o=h;o>r;++r)e[r]=n[r].evaluate(t,s,i);const r=this.re.evaluate(t,s,i);if("function"!=typeof r)throw Reporter.error(207,this);return r.apply(null,[this.He].concat(e))}connect(t,s,i){const n=this.X;for(let h=0,e=n.length;e>h;++h)n[h].connect(t,s,i);this.re.connect(t,s,i)}accept(t){return t.Ne(this)}}class ArrayBindingPattern{constructor(t){this._=65556,this.elements=t}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.We(this)}}class ObjectBindingPattern{constructor(t,s){this._=65557,this.keys=t,this.values=s}evaluate(t,s,i){}assign(t,s,i,n){}connect(t,s,i){}accept(t){return t.qe(this)}}class BindingIdentifier{constructor(name){this._=65558,this.name=name}evaluate(t,s,i){return this.name}connect(t,s,i){}accept(t){return t.Qe(this)}}const Rs={}.toString;class ForOfStatement{constructor(t,s){this._=55,this.assign=PLATFORM.Ci,this.Ke=t,this.Ge=s}evaluate(t,s,i){return this.Ge.evaluate(t,s,i)}count(t){return js[Rs.call(t)](t)}Je(t,s){Ss[Rs.call(t)](t,s)}connect(t,s,i){this.Ke.connect(t,s,i),this.Ge.connect(t,s,i)}accept(t){return t._e(this)}}class Interpolation{constructor(parts,t){this._=24,this.assign=PLATFORM.Ci,this.parts=parts,this.X=void 0===t?PLATFORM.Ai:t,this.Xe=this.X.length>1,this.Ze=this.X[0]}evaluate(t,s,i){if(this.Xe){const n=this.X,parts=this.parts;let h=parts[0];for(let e=0,r=n.length;r>e;++e)h+=n[e].evaluate(t,s,i),h+=parts[e+1];return h}{const parts=this.parts;return parts[0]+this.Ze.evaluate(t,s,i)+parts[1]}}connect(t,s,i){}accept(t){return t.Ye(this)}}BindingBehavior.prototype._=38962,ValueConverter.prototype._=36913,Assign.prototype._=8208,Conditional.prototype._=63,AccessThis.prototype._=1793,AccessScope.prototype._=10082,AccessMember.prototype._=9323,AccessKeyed.prototype._=9324,CallScope.prototype._=1448,CallMember.prototype._=1161,CallFunction.prototype._=1162,Binary.prototype._=46,Unary.prototype._=39,PrimitiveLiteral.prototype._=17925,HtmlLiteral.prototype._=51,ArrayLiteral.prototype._=17955,ObjectLiteral.prototype._=17956,Template.prototype._=17958,TaggedTemplate.prototype._=1197,ArrayBindingPattern.prototype._=65556,ObjectBindingPattern.prototype._=65557,BindingIdentifier.prototype._=65558,ForOfStatement.prototype._=55,Interpolation.prototype._=24;const Ss={xe(t,s){for(let i=0,n=t.length;n>i;++i)s(t,i,t[i])},tr(t,s){const i=Array(t.size);let n=-1;for(const s of t.entries())i[++n]=s;Ss["xe"](i,s)},sr(t,s){const i=Array(t.size);let n=-1;for(const s of t.keys())i[++n]=s;Ss["xe"](i,s)},ir(t,s){const i=Array(t);for(let s=0;t>s;++s)i[s]=s;Ss["xe"](i,s)},nr(t,s){},hr(t,s){}},js={xe:t=>t.length,tr:t=>t.size,sr:t=>t.size,ir:t=>t,nr:()=>0,hr:()=>0};(function(BindingMode){BindingMode[BindingMode.oneTime=1]="oneTime",BindingMode[BindingMode.Ds=2]="toView",BindingMode[BindingMode.Qh=4]="fromView",BindingMode[BindingMode.er=6]="twoWay",BindingMode[BindingMode.default=8]="default"})(BindingMode||(BindingMode={})),(function(State){State[State.Fn=0]="none",State[State.rr=1]="isBinding",State[State.or=2]="isBound",State[State.cr=4]="isAttaching",State[State.lr=8]="isAttached",State[State.ur=16]="isMounted",State[State.ar=32]="isDetaching",State[State.dr=64]="isUnbinding",State[State.wr=128]="isCached",State[State.br=256]="isContainerless"})(ts||(ts={})),(function(Hooks){Hooks[Hooks.Fn=1]="none",Hooks[Hooks.mr=2]="hasCreated",Hooks[Hooks.gr=4]="hasBinding",Hooks[Hooks.pr=8]="hasBound",Hooks[Hooks.vr=16]="hasAttaching",Hooks[Hooks.Ar=32]="hasAttached",Hooks[Hooks.Cr=64]="hasDetaching",Hooks[Hooks.Tr=128]="hasDetached",Hooks[Hooks.yr=256]="hasUnbinding",Hooks[Hooks.Or=512]="hasUnbound",Hooks[Hooks.Br=1024]="hasRender",Hooks[Hooks.Ir=2048]="hasCaching"})(Hooks||(Hooks={}));const IRenderable=DI.Fi("IRenderable").Li(),IViewFactory=DI.Fi("IViewFactory").Li(),Ps=Object.freeze(Object.create(null)),ILifecycle=DI.Fi("ILifecycle").$i(t=>t.singleton(Es));class Es{constructor(){this.kr=0,this.Rr=0,this.Sr=0,this.jr=0,this.Pr=this,this.Er=this,this.Mr=this,this.Vr=this,this.Fr=this,this.Dr=this,this.Lr=this,this.$r=this,this.Ur=this,this.Hr=this,this.zr=this,this.Nr=this,this.Wr=this,this.qr=this,this.Qr=this,this.Kr=this,this.Gr=this,this.Jr=this,this._r=this,this.Xr=this,this.Zr=null,this.Yr=Promise.resolve(),this.xr=0,this.so=0,this.io=0,this.no=0,this.ho=0,this.eo=0,this.ro=0,this.oo=0,this.co=0,this.lo=0,this.ut=Ps,this.flush=PLATFORM.Ci,this.uo=Ps,this.connect=PLATFORM.Ci,this.fo=Ps,this.dt=PLATFORM.Ci,this.ao=Ps,this.bound=PLATFORM.Ci,this.do=Ps,this.wo=PLATFORM.Ci,this.bo=Ps,this.mo=PLATFORM.Ci,this.po=Ps,this.vo=PLATFORM.Ci,this.Ao=Ps,this.Co=PLATFORM.Ci,this.To=Ps,this.ls=PLATFORM.Ci,this.yo=Ps,this.Oo=PLATFORM.Ci,this.Bo=null}Io(t){null===this.Bo&&(this.Bo=new AggregateLifecycleTask),this.Bo.ko(t)}Ro(t){null!==this.Bo&&(this.Bo===t?this.Bo=null:this.Bo.So(t))}O(t){return this.Pr===this&&(this.Zr=this.Yr.then(()=>{this.jo(LifecycleFlags.zn)})),null===t.ut&&(t.ut=Ps,this.Er.ut=t,this.Er=t,++this.xr),this.Zr}jo(t){for(t|=LifecycleFlags.Nn;this.xr>0;){let s,i=this.Pr.ut;this.Pr=this.Er=this,this.xr=0;do{s=i.ut,i.ut=null,i.flush(t),i=s}while(i!==Ps);if(t&LifecycleFlags.ot)break}}us(){++this.kr}fs(t){null===t.ao&&(t.ao=Ps,this.$r.ao=t,this.$r=t,++this.no)}Po(t){null===t.uo&&(t.uo=Ps,this.Vr.uo=t,this.Vr=t,++this.so),null===t.fo&&(t.fo=Ps,this.Dr.fo=t,this.Dr=t,++this.io)}Eo(t){if(this.so>0){this.so=0;let s,i=this.Mr.uo;this.Mr=this.Vr=this;do{i.connect(t),s=i.uo,i.uo=null,i=s}while(i!==Ps)}}Mo(t){for(t&LifecycleFlags.Wn&&this.jo(t|LifecycleFlags.Nn);this.io>0;){this.io=0;let s,i=this.Fr.fo;this.Fr=this.Dr=this;do{i.dt(t),s=i.fo,i.fo=null,i=s}while(i!==Ps)}}ds(t){if(0==--this.kr)return null===this.Bo||this.Bo.done?(this.Vo(t),LifecycleTask.done):(this.Bo.Fo=this,this.Bo)}Vo(t){for(t&LifecycleFlags.Wn&&this.jo(t|LifecycleFlags.Nn);this.no>0;){this.no=0;let s,i=this.Lr.ao;this.Lr=this.$r=this;do{i.bound(t),s=i.ao,i.ao=null,i=s}while(i!==Ps)}}ps(){++this.jr}As(t){null===t.yo&&(t.yo=Ps,this.Xr.yo=t,this.Xr=t,++this.lo)}Ts(t){if(0==--this.jr)return null===this.Bo||this.Bo.done?(this.Do(t),LifecycleTask.done):(this.Bo.Fo=this,this.Bo)}Do(t){for(;this.lo>0;){this.lo=0;let s,i=this._r.yo;this._r=this.Xr=this;do{i.Oo(t),s=i.yo,i.yo=null,i=s}while(i!==Ps)}}Vt(){++this.Rr}Nt(t){null===t.do&&(t.do=Ps,this.Hr.do=t,this.Hr=t,++this.ho)}Lt(t){null===t.bo&&(t.bo=Ps,this.Nr.bo=t,this.Nr=t,++this.eo)}$t(t){if(0==--this.Rr)return null===this.Bo||this.Bo.done?(this.Lo(t),LifecycleTask.done):(this.Bo.Fo=this,this.Bo)}Lo(t){if(this.jo(t|LifecycleFlags.Nn),this.ho>0){this.ho=0;let s,i=this.Ur.do;this.Ur=this.Hr=this;do{i.wo(t),s=i.do,i.do=null,i=s}while(i!==Ps)}if(this.Eo(LifecycleFlags.Z),this.eo>0){this.eo=0;let s,i=this.zr.bo;this.zr=this.Nr=this;do{i.mo(t),s=i.bo,i.bo=null,i=s}while(i!==Ps)}}Wt(){++this.Sr}Xt(t){if(null===t.po&&(t.po=Ps,this.qr.po=t,this.qr=t,++this.ro),null!==t.do){let s=this.Ur,i=s.do;for(;i!==t;)i=(s=i).do;s.do=i.do,i.do=null,this.Hr===i&&(this.Hr=this),--this.ho}}Kt(t){null===t.Ao&&(t.Ao=Ps,this.Kr.Ao=t,this.Kr=t,++this.oo)}$o(t){null===t.To&&(t.To=Ps,this.Jr.To=t,this.Jr=t,++this.co)}Gt(t){if(0==--this.Sr)return null===this.Bo||this.Bo.done?(this.Uo(t),LifecycleTask.done):(this.Bo.Fo=this,this.Bo)}Uo(t){if(this.jo(t|LifecycleFlags.ht|LifecycleFlags.ot),this.ro>0){this.ro=0;let s,i=this.Wr.po;this.Wr=this.qr=this;do{i.vo(t),s=i.po,i.po=null,i=s}while(i!==Ps)}if(this.oo>0){this.oo=0;let s,i=this.Qr.Ao;this.Qr=this.Kr=this;do{i.Co(t),s=i.Ao,i.Ao=null,i=s}while(i!==Ps)}if(this.co>0){this.ps(),this.co=0;let s,i=this.Gr.To;this.Gr=this.Jr=this;do{i.ls(t),s=i.To,i.To=null,i=s}while(i!==Ps);this.Ts(t)}}}class CompositionCoordinator{constructor($lifecycle){this.$lifecycle=$lifecycle,this.Ho=PLATFORM.Ci,this.currentView=null,this.lr=0,this.or=0,this.zo=null,this.No=LifecycleTask.done}static register(t){return Registration.transient(this,this).register(t,this)}Wo(value,t){this.No.done?value instanceof Promise?(this.qo(new Ms(this,value)),this.Qo()):this.Ko(value,t):(value instanceof Promise?this.qo(new Ms(this,value)):this.qo(value),this.No.Go()&&this.No.cancel())}as(t,s){this.scope=s,this.or=1,null!==this.currentView&&this.currentView.ms(t,s)}Dt(t){this.lr=1,null!==this.currentView&&this.currentView.Ht(t)}Qt(t){this.lr=0,null!==this.currentView&&this.currentView.Yt(t)}Cs(t){this.or=0,null!==this.currentView&&this.currentView.ls(t)}ts(t){this.currentView=null}qo(t){null===this.zo&&(this.zo=[]),this.zo.push(t)}Ko(t,s){if(this.currentView===t)return;const $lifecycle=this.$lifecycle,i=new AggregateLifecycleTask;let n,h=this.currentView;null===h?n=LifecycleTask.done:($lifecycle.$o(h),$lifecycle.Wt(),h.Yt(s),n=$lifecycle.Gt(s)),i.ko(n),null===(h=this.currentView=t)?n=LifecycleTask.done:(this.or&&($lifecycle.us(),h.ms(s,this.scope),$lifecycle.ds(s)),this.lr?($lifecycle.Vt(),h.Ht(s),n=$lifecycle.$t(s)):n=LifecycleTask.done),i.ko(n),i.done?(this.No=LifecycleTask.done,this.Ho()):(this.No=i,this.No.Jo().then(()=>{this.Ho(),this.Qo()}).catch(t=>{throw t}))}Qo(){if(null!==this.zo&&this.zo.length>0){const t=this.zo.pop();this.zo.length=0,Ms.is(t)?this.No=t.start():this.Ko(t,LifecycleFlags.Gn)}else this.No=LifecycleTask.done}}CompositionCoordinator.inject=[ILifecycle];const LifecycleTask={done:{done:1,Go:()=>0,cancel(){},Jo:()=>Promise.resolve()}};class AggregateLifecycleTask{constructor(){this.done=1,this.Fo=null,this.resolve=null,this._o=[],this.Xo=null}ko(t){t.done||(this.done=0,this._o.push(t),t.Jo().then(()=>{this.Zo()}).catch(t=>{throw t}))}So(t){if(t.done){const s=this._o.indexOf(t);-1!==s&&this._o.splice(s,1)}0===this._o.length&&null!==this.Fo&&(this.Fo.Ro(this),this.Fo=null)}Go(){return this.done?0:this._o.every(t=>t.Go())}cancel(){this.Go()&&(this._o.forEach(t=>{t.cancel()}),this.done=0)}Jo(){return null===this.Xo&&(this.Xo=this.done?Promise.resolve():new Promise(t=>this.resolve=t)),this.Xo}Zo(){this.done||this._o.every(t=>t.done)&&this.complete(1)}complete(t){this.done=1,t&&null!==this.Fo&&(this.Fo.Uo(LifecycleFlags.Gn),this.Fo.Do(LifecycleFlags.Gn),this.Fo.Vo(LifecycleFlags.Gn),this.Fo.Lo(LifecycleFlags.Gn)),this.Fo.Ro(this),null!==this.resolve&&this.resolve()}}class Ms{constructor(t,s){this.Yo=t,this.done=0,this.xo=0,this.Yr=s}static is(t){return"start"in t}start(){return this.xo?LifecycleTask.done:(this.Yr=this.Yr.then(t=>(this.tc(t),t)),this)}Go(){return!this.done}cancel(){this.Go()&&(this.xo=1)}Jo(){return this.Yr}tc(value){this.xo||(this.done=1,this.Yo.Wo(value,LifecycleFlags.Gn))}}const Vs=[],Fs=[];let Ds=-1;I(-1);const{oneTime,Ds:Ls,Qh:$s}=BindingMode,Us=Ls|oneTime;let Binding=class{constructor(t,s,i,mode,n,h){this.gs=null,this.Os=null,this.$state=0,this.$lifecycle=h.get(ILifecycle),this.uo=null,this.fo=null,this.$scope=null,this.zh=h,this.mode=mode,this.st=n,this.sc=t,this.target=s,this.ic=i}nc(value,t){this.targetObserver.q(value,(t|=this.hc)|LifecycleFlags.K)}ec(value,t){this.sc.assign((t|=this.hc)|LifecycleFlags.Hn,this.$scope,this.zh,value)}T(t,s,i){if(!(2&this.$state))return;const n=this.sc,$scope=this.$scope,h=this.zh;if(i|=this.hc,this.mode===BindingMode.Qh&&(i&=~LifecycleFlags.K,i|=LifecycleFlags.Hn),i&LifecycleFlags.K){const mode=this.mode,s=this.targetObserver.W();return(10082!==n._||this.Y>1)&&(t=n.evaluate(i,$scope,h)),t!==s&&this.nc(t,i),void(0==(mode&oneTime)&&(this.version++,n.connect(i,$scope,this),this.unobserve(0)))}if(!(i&LifecycleFlags.Hn))throw Reporter.error(15,LifecycleFlags[i]);t!==n.evaluate(i,$scope,h)&&this.ec(t,i)}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.et)}this.$state|=1,this.hc=t&LifecycleFlags._n,this.$scope=s;let i=this.sc;hasBind(i)&&i.bind(t,s,this);const mode=this.mode;let targetObserver=this.targetObserver;targetObserver||(targetObserver=this.targetObserver=mode&$s?this.st.tt(this.target,this.ic):this.st.rc(this.target,this.ic)),targetObserver.bind&&targetObserver.bind(t),i=this.sc,mode&Us&&this.nc(i.evaluate(t,s,this.zh),t),mode&Ls&&this.$lifecycle.Po(this),mode&$s&&targetObserver.subscribe(this),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64,this.hc=LifecycleFlags.Fn;const s=this.sc;hasUnbind(s)&&s.Nh(t,this.$scope,this),this.$scope=null;const targetObserver=this.targetObserver;targetObserver.Nh&&targetObserver.Nh(t),targetObserver.unsubscribe&&targetObserver.unsubscribe(this),this.unobserve(1),this.$state&=-67}connect(t){2&this.$state&&this.sc.connect((t|=this.hc)|LifecycleFlags.Z,this.$scope,this)}dt(t){2&this.$state&&this.nc(this.sc.evaluate((t|=this.hc)|LifecycleFlags.Z,this.$scope,this.zh),t)}};Binding=c([connectable()],Binding);class Call{constructor(t,s,i,n,h){this.gs=null,this.Os=null,this.$state=0,this.zh=h,this.sc=t,this.targetObserver=n.tt(s,i)}oc(t){const s=this.$scope.mh;Object.assign(s,t);const i=this.sc.evaluate(LifecycleFlags.Z,this.$scope,this.zh);for(const i in t)delete s[i];return i}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.et)}this.$state|=1,this.$scope=s;const i=this.sc;hasBind(i)&&i.bind(t,s,this),this.targetObserver.q(t=>this.oc(t),t),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.sc;hasUnbind(s)&&s.Nh(t,this.$scope,this),this.$scope=null,this.targetObserver.q(null,t),this.$state&=-67}nt(t,s){}T(t,s,i){}}const IExpressionParser=DI.Fi("IExpressionParser").$i(t=>t.singleton(Hs));class Hs{constructor(){this.cc=Object.create(null),this.lc=Object.create(null),this.uc=Object.create(null)}parse(t,s){switch(s){case 2048:{let i=this.uc[t];return void 0===i&&(i=this.uc[t]=this.fc(t,s)),i}case 539:{let i=this.lc[t];return void 0===i&&(i=this.lc[t]=this.fc(t,s)),i}default:{if(0===t.length&&55&s)return PrimitiveLiteral.De;let i=this.cc[t];return void 0===i&&(i=this.cc[t]=this.fc(t,s)),i}}}cache(t){const{lc:s,cc:i,uc:n}=this;for(const h in t){const e=t[h];switch(e._){case 24:n[h]=e;break;case 55:s[h]=e;break;default:i[h]=e}}}fc(t,s){try{const parts=t.split("."),s=parts[0];let i;i=s.endsWith("()")?new CallScope(s.replace("()",""),PLATFORM.Ai):new AccessScope(parts[0]);let n=1;for(;parts.length>n;){const t=parts[n];i=t.endsWith("()")?new CallMember(i,t.replace("()",""),PLATFORM.Ai):new AccessMember(i,parts[n]),n++}return i}catch(t){throw Reporter.error(3,t)}}}(function(BindingType){BindingType[BindingType.Zn=0]="None",BindingType[BindingType.Interpolation=2048]="Interpolation",BindingType[BindingType.ac=1280]="IsRef",BindingType[BindingType.dc=512]="IsIterator",BindingType[BindingType.wc=256]="IsCustom",BindingType[BindingType.bc=128]="IsFunction",BindingType[BindingType.mc=64]="IsEvent",BindingType[BindingType.gc=32]="IsProperty",BindingType[BindingType.pc=16]="IsCommand",BindingType[BindingType.vc=48]="IsPropertyCommand",BindingType[BindingType.Ac=80]="IsEventCommand",BindingType[BindingType.Cc=6]="DelegationStrategyDelta",BindingType[BindingType.Tc=15]="Command",BindingType[BindingType.yc=49]="OneTimeCommand",BindingType[BindingType.Oc=50]="ToViewCommand",BindingType[BindingType.Bc=51]="FromViewCommand",BindingType[BindingType.Ic=52]="TwoWayCommand",BindingType[BindingType.kc=53]="BindCommand",BindingType[BindingType.Rc=86]="TriggerCommand",BindingType[BindingType.Sc=87]="CaptureCommand",BindingType[BindingType.jc=88]="DelegateCommand",BindingType[BindingType.Pc=153]="CallCommand",BindingType[BindingType.Ec=26]="OptionsCommand",BindingType[BindingType.Mc=539]="ForCommand",BindingType[BindingType.Vc=284]="CustomCommand"})(BindingType||(BindingType={}));const{Ds:zs,oneTime:Ns}=BindingMode;class MultiInterpolationBinding{constructor(t,s,i,n,mode,h){this.gs=null,this.Os=null,this.$state=0,this.$scope=null,this.Fc=s,this.zh=h,this.mode=mode,this.st=t,this.target=i,this.ic=n;const e=s.X,parts=this.parts=Array(e.length);for(let r=0,o=e.length;o>r;++r)parts[r]=new InterpolationBinding(e[r],s,i,n,mode,t,h,0===r)}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=2,this.$scope=s;const parts=this.parts;for(let i=0,n=parts.length;n>i;++i)parts[i].ms(t,s)}ls(t){if(!(2&this.$state))return;this.$state&=-3,this.$scope=null;const parts=this.parts;for(let s=0,i=parts.length;i>s;++s)parts[s].ls(t)}}let InterpolationBinding=class{constructor(t,s,i,n,mode,h,e,r){this.$state=0,this.Fc=s,this.Dc=r,this.mode=mode,this.zh=e,this.st=h,this.sc=t,this.target=i,this.ic=n,this.targetObserver=h.rc(i,n)}nc(value,t){this.targetObserver.q(value,t|LifecycleFlags.K)}T(t,s,i){if(!(2&this.$state))return;const n=this.targetObserver.W(),h=this.Fc.evaluate(i,this.$scope,this.zh);h!==n&&this.nc(h,i),0==(this.mode&Ns)&&(this.version++,this.sc.connect(i,this.$scope,this),this.unobserve(0))}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t)}this.$state|=2,this.$scope=s;const i=this.sc;i.bind&&i.bind(t,s,this),this.Dc&&this.nc(this.Fc.evaluate(t,s,this.zh),t),this.mode&zs&&i.connect(t,s,this)}ls(t){if(!(2&this.$state))return;this.$state&=-3;const s=this.sc;s.Nh&&s.Nh(t,this.$scope,this),this.$scope=null,this.unobserve(1)}};InterpolationBinding=c([connectable()],InterpolationBinding);let LetBinding=class{constructor(t,s,i,n,toViewModel=0){this.gs=null,this.Os=null,this.$state=0,this.$lifecycle=n.get(ILifecycle),this.$scope=null,this.zh=n,this.st=i,this.sc=t,this.target=null,this.ic=s,this.toViewModel=toViewModel}T(t,s,i){if(2&this.$state){if(!(i&LifecycleFlags.K))throw Reporter.error(15,i);{const{target:t,ic:s}=this,n=t[s],h=this.sc.evaluate(i,this.$scope,this.zh);h!==n&&(t[s]=h)}}}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.et)}this.$state|=1,this.$scope=s,this.target=this.toViewModel?s.ph:s.mh;const i=this.sc;i.bind&&i.bind(t,s,this),this.target[this.ic]=this.sc.evaluate(LifecycleFlags.et,s,this.zh),this.sc.connect(t,s,this),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.sc;s.Nh&&s.Nh(t,this.$scope,this),this.$scope=null,this.unobserve(1),this.$state&=-67}};LetBinding=c([connectable()],LetBinding);class Ref{constructor(t,s,i){this.gs=null,this.Os=null,this.$state=0,this.zh=i,this.sc=t,this.target=s}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.et)}this.$state|=1,this.$scope=s;const i=this.sc;hasBind(i)&&i.bind(t,s,this),this.sc.assign(t,this.$scope,this.zh,this.target),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64,this.sc.evaluate(t,this.$scope,this.zh)===this.target&&this.sc.assign(t,this.$scope,this.zh,null);const s=this.sc;hasUnbind(s)&&s.Nh(t,this.$scope,this),this.$scope=null,this.$state&=-67}nt(t,s){}T(t,s,i){}}let CollectionLengthObserver=class{constructor(t,s){this.U=t,this.H=s,this.N=t[s]}W(){return this.U[this.H]}lt(t){this.U[this.H]=t}dt(t){this.A(this.U[this.H],this.N,t),this.N=this.U[this.H]}subscribe(t){this.m(t)}unsubscribe(t){this.g(t)}};CollectionLengthObserver=c([targetObserver()],CollectionLengthObserver);const Ws=Array.prototype,qs=Ws.push,Qs=Ws.unshift,Ks=Ws.pop,Gs=Ws.shift,Js=Ws.splice,_s=Ws.reverse,Xs=Ws.sort,Zs={push:qs,unshift:Qs,pop:Ks,shift:Gs,splice:Js,reverse:_s,sort:Xs},Ys=["push","unshift","pop","shift","splice","reverse","sort"],xs={push(){const t=this.bt;if(void 0===t)return qs.apply(this,arguments);const s=this.length,i=arguments.length;if(0===i)return s;this.length=t.ft.length=s+i;let n=s;for(;this.length>n;)this[n]=arguments[n-s],t.ft[n]=-2,n++;return t.A("push",arguments,LifecycleFlags.Ln),this.length},unshift(){const t=this.bt;if(void 0===t)return Qs.apply(this,arguments);const s=arguments.length,i=Array(s);let n=0;for(;s>n;)i[n++]=-2;Qs.apply(t.ft,i);const h=Qs.apply(this,arguments);return t.A("unshift",arguments,LifecycleFlags.Ln),h},pop(){const t=this.bt;if(void 0===t)return Ks.call(this);const s=t.ft,i=Ks.call(this);return s[s.length-1]>-1&&Ks.call(s.pt,i),Ks.call(s),t.A("pop",arguments,LifecycleFlags.Ln),i},shift(){const t=this.bt;if(void 0===t)return Gs.call(this);const s=t.ft,i=Gs.call(this);return s[0]>-1&&Gs.call(s.pt,i),Gs.call(s),t.A("shift",arguments,LifecycleFlags.Ln),i},splice(t,s){const i=this.bt;if(void 0===i)return Js.apply(this,arguments);const n=i.ft;if(s>0){let i=isNaN(t)?0:t;const to=i+s;for(;to>i;)n[i]>-1&&Js.call(n.pt,this[i]),i++}const h=arguments.length;if(h>2){const i=h-2,e=Array(i);let r=0;for(;i>r;)e[r++]=-2;Js.call(n,t,s,...e)}else 2===h&&Js.call(n,t,s);const e=Js.apply(this,arguments);return i.A("splice",arguments,LifecycleFlags.Ln),e},reverse(){const t=this.bt;if(void 0===t)return _s.call(this);const s=this.length,i=s/2|0;let n=0;for(;n!==i;){const i=s-n-1,h=this[n],e=t.ft[n],r=t.ft[i];this[n]=this[i],t.ft[n]=r,this[i]=h,t.ft[i]=e,n++}return t.A("reverse",arguments,LifecycleFlags.Ln),this},sort(t){const s=this.bt;if(void 0===s)return Xs.call(this,t);const i=this.length;if(2>i)return this;N(this,s.ft,0,i,H);let n=0;for(;i>n&&void 0!==this[n];)n++;return void 0!==t&&"function"==typeof t||(t=U),N(this,s.ft,0,n,t),s.A("sort",arguments,LifecycleFlags.Ln),this}},ti={Lc:1,Ws:0,lh:1},def=Object.defineProperty;for(const t of Ys)def(xs[t],"observing",{value:1,Lc:0,lh:0,Ws:0});enableArrayObservation();let ArrayObserver=class{constructor(t,s){this.B=t,s.bt=this,this.gt=s,this.wt()}};ArrayObserver=c([collectionObserver(9)],ArrayObserver);const si=Map.prototype,ii=si.set,ni=si.clear,hi=si.delete,ei={set:ii,clear:ni,delete:hi},ri=["set","clear","delete"],oi={set(t,value){const s=this.bt;if(void 0===s)return ii.call(this,t,value);const i=this.size;if(ii.call(this,t,value),this.size===i){let i=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==value&&(s.ft[i]=-2),this;i++}return this}return s.ft[i]=-2,s.A("set",arguments,LifecycleFlags.Ln),this},clear(){const t=this.bt;if(void 0===t)return ni.call(this);if(this.size>0){const s=t.ft;let i=0;for(const t of this.keys())s[i]>-1&&s.pt.push(t),i++;ni.call(this),s.length=0,t.A("clear",arguments,LifecycleFlags.Ln)}},delete(value){const t=this.bt;if(void 0===t)return hi.call(this,value);if(0===this.size)return 0;let s=0;const i=t.ft;for(const t of this.keys()){if(t===value)return i[s]>-1&&i.pt.push(t),i.splice(s,1),hi.call(this,value);s++}return t.A("delete",arguments,LifecycleFlags.Ln),0}},ci={Lc:1,Ws:0,lh:1},li=Object.defineProperty;for(const t of ri)li(oi[t],"observing",{value:1,Lc:0,lh:0,Ws:0});enableMapObservation();let MapObserver=class{constructor(t,s){this.B=t,s.bt=this,this.gt=s,this.wt()}};MapObserver=c([collectionObserver(6)],MapObserver);const ui=Set.prototype,fi=ui.add,ai=ui.clear,di=ui.delete,wi={add:fi,clear:ai,delete:di},bi=["add","clear","delete"],mi={add(value){const t=this.bt;if(void 0===t)return fi.call(this,value);const s=this.size;return fi.call(this,value),this.size===s?this:(t.ft[s]=-2,t.A("add",arguments,LifecycleFlags.Ln),this)},clear(){const t=this.bt;if(void 0===t)return ai.call(this);if(this.size>0){const s=t.ft;let i=0;for(const t of this.keys())s[i]>-1&&s.pt.push(t),i++;ai.call(this),s.length=0,t.A("clear",arguments,LifecycleFlags.Ln)}},delete(value){const t=this.bt;if(void 0===t)return di.call(this,value);if(0===this.size)return 0;let s=0;const i=t.ft;for(const t of this.keys()){if(t===value)return i[s]>-1&&i.pt.push(t),i.splice(s,1),di.call(this,value);s++}return t.A("delete",arguments,LifecycleFlags.Ln),0}},gi={Lc:1,Ws:0,lh:1},pi=Object.defineProperty;for(const t of bi)pi(mi[t],"observing",{value:1,Lc:0,lh:0,Ws:0});enableSetObservation();let SetObserver=class{constructor(t,s){this.B=t,s.bt=this,this.gt=s,this.wt()}};SetObserver=c([collectionObserver(7)],SetObserver);const vi="undefined"==typeof Proxy,Ai={$c:0,Uc:0};let CustomSetterObserver=class{constructor(t,s,i,n){this.ut=null,this.U=t,this.$=0,this.H=s,this.Hc=i,this.B=n}W(){return this.U[this.H]}q(t){this.U[this.H]=t}flush(t){this.A(this.N,this.oldValue,t|LifecycleFlags.K)}subscribe(t){this.$||this.zc(),this.m(t)}unsubscribe(t){this.g(t)}zc(){const t=this.Hc.set,s=this;this.$=1,this.N=this.U[this.H],Reflect.defineProperty(this.U,this.H,{set(i){t.call(s.U,i);const n=s.N;n!==i&&(s.oldValue=n,s.B.O(s).catch(t=>{throw t}),s.N=i)}})}};(CustomSetterObserver=c([subscriberCollection(MutationKind.C)],CustomSetterObserver)).prototype.G=PLATFORM.Ci;let GetterObserver=class{constructor(t,s,i,n,h,e){this.U=s,this.H=i,this.controller=new Ci(t,s,i,n,this,h,e)}W(){return this.controller.value}q(t){}flush(t){const s=this.controller.value,i=this.controller.Nc();s!==i&&this.A(i,s,t|LifecycleFlags.K)}subscribe(t){this.m(t),this.controller.Wc()}unsubscribe(t){this.g(t),this.controller.qc()}};(GetterObserver=c([subscriberCollection(MutationKind.C)],GetterObserver)).prototype.G=PLATFORM.Ci;class Ci{constructor(t,s,i,n,h,e,r){this.Qc=0,this.dependencies=[],this.C=s,this.B=r,this.Kc=t,this.Fo=h,this.propertyName=i,this.Gc=0;const o=new Proxy(s,(function t(s,i){return{get(n,h){const value=n[h];if("$observers"===h||"function"==typeof value||!i.Qc)return value;if(n instanceof Array)i.Jc(s._c(n)),"length"===h&&i.Jc(s._c(n).Tt());else if(n instanceof Map)i.Jc(s.Xc(n)),"size"===h&&i.Jc(s.Xc(n).Tt());else if(n instanceof Set){if(i.Jc(s.Zc(n)),"size"===h)return s.Zc(n).Tt()}else i.Jc(s.tt(n,h));return(function(s,i,value){return value instanceof Object?new Proxy(value,t(s,i)):value})(s,i,value)}}})(e,this)),c=n.get,l=this;Reflect.defineProperty(s,i,{get:()=>((1>l.Gc||l.Qc)&&(l.value=c.apply(o)),l.value)})}Jc(t){this.dependencies.includes(t)||this.dependencies.push(t)}Wc(){this.Gc++,this.Gc>1||this.Nc(1)}Nc(t=0){const s=!this.Kc.$c||t;return s&&(this.Yc(),this.Qc=1),this.value=this.C[this.propertyName],s&&(this.Qc=0,this.dependencies.forEach(t=>{t.subscribe(this)})),this.value}qc(){this.Gc--,0===this.Gc&&this.Yc()}T(){this.B.O(this.Fo).catch(t=>{throw t})}Yc(){this.dependencies.forEach(t=>{t.unsubscribe(this)}),this.dependencies.length=0}}const IDirtyChecker=DI.Fi("IDirtyChecker").$i(t=>t.singleton(Ti));class Ti{constructor(){this.xc=120,this.tl=[]}sl(t,s){return new yi(this,t,s)}il(t){const s=this.tl;s.push(t),1===s.length&&this.nl()}removeProperty(t){const s=this.tl;s.splice(s.indexOf(t),1)}nl(){PLATFORM.global.setTimeout(()=>{this.hl()},this.xc)}hl(){const t=this.tl;let s=t.length;for(;s--;){const i=t[s];i.el()&&i.flush(LifecycleFlags.ht)}t.length&&this.nl()}}let yi=class{constructor(t,s,i){this.U=s,this.H=i,this.rl=t}el(){return this.oldValue!==this.U[this.H]}W(){return this.U[this.H]}q(t){this.U[this.H]=t}flush(t){const s=this.oldValue,i=this.W();this.A(i,s,t|LifecycleFlags.K),this.oldValue=i}subscribe(t){this.v()||(this.oldValue=this.W(),this.rl.il(this)),this.m(t)}unsubscribe(t){this.g(t)&&!this.v()&&this.rl.removeProperty(this)}};yi=c([propertyObserver()],yi);const Oi=PLATFORM.Ci;class PrimitiveObserver{constructor(t,s){this.ol=1,"length"===s?(this.U=t,this.W=this.cl):this.W=this.ll}cl(){return this.U.length}ll(){}}PrimitiveObserver.prototype.q=Oi,PrimitiveObserver.prototype.subscribe=Oi,PrimitiveObserver.prototype.unsubscribe=Oi,PrimitiveObserver.prototype.G=Oi;class PropertyAccessor{constructor(t,s){this.U=t,this.H=s}W(){return this.U[this.H]}q(value){this.U[this.H]=value}}const Bi={}.toString,IObserverLocator=DI.Fi("IObserverLocator").Li(),ITargetObserverLocator=DI.Fi("ITargetObserverLocator").Li(),ITargetAccessorLocator=DI.Fi("ITargetAccessorLocator").Li();class Ii{constructor(t,s,i,n){this.ul=[],this.rl=s,this.B=t,this.fl=i,this.al=n}tt(t,s){if((function(t){return 1==t.bh})(t))return t.vh().wh(t,s);let i,n=t.qs;return n&&s in n?n[s]:((i=this.dl(t,s)).ol||(void 0===n&&(n=this.wl(t)),n[s]=i),i)}bl(t){this.ul.push(t)}rc(t,s){return this.al.ml(t)?this.fl.gl(t,s)?this.tt(t,s):this.al.rc(this.B,t,s):new PropertyAccessor(t,s)}_c(t){return W(this.B,t)}Xc(t){return q(this.B,t)}Zc(t){return Q(this.B,t)}wl(t){return t.qs||this.pl(t)}pl(t){const value={};return Reflect.defineProperty(t,"$observers",{Ws:0,lh:0,Lc:0,value})||Reporter.write(0,t),value}vl(t,s,i){for(let n=0,h=this.ul.length;h>n;n++){const h=this.ul[n].tt(t,s,i);if(h)return h}return null}dl(t,s){if(!(t instanceof Object))return new PrimitiveObserver(t,s);let i=0;if(this.fl.ml(t)){const n=this.fl.tt(this.B,this,t,s);if(null!==n)return n;if(null!==n)return n;i=1}switch(Bi.call(t)){case"[object Array]":return"length"===s?this._c(t).Tt():this.rl.sl(t,s);case"[object Map]":return"size"===s?this.Xc(t).Tt():this.rl.sl(t,s);case"[object Set]":return"size"===s?this.Zc(t).Tt():this.rl.sl(t,s)}const n=(function(t,name){let s=Object.getOwnPropertyDescriptor(t,name),i=Object.getPrototypeOf(t);for(;void 0===s&&null!==i;)s=Object.getOwnPropertyDescriptor(i,name),i=Object.getPrototypeOf(i);return s})(t,s);if(n&&(n.get||n.set)){if(n.get&&n.get.tt)return n.get.tt(t);return this.vl(t,s,n)||(i?this.rl.sl(t,s):(function(t,s,i,n,h,e){if(0==e.lh)return s.sl(n,h);if(e.get){const r=n.constructor.computed&&n.constructor.computed[h]||Ai;return e.set?r.Uc?vi?s.sl(n,h):new GetterObserver(r,n,h,e,t,i):new CustomSetterObserver(n,h,e,i):vi?s.sl(n,h):new GetterObserver(r,n,h,e,t,i)}throw Reporter.error(18,h)})(this,this.rl,this.B,t,s,n))}return new SetterObserver(t,s)}}Ii.inject=[ILifecycle,IDirtyChecker,ITargetObserverLocator,ITargetAccessorLocator];const ki=PLATFORM.Ci;let SelfObserver=class{constructor(t,s,i){this.U=t,this.H=s,this.N=t[s],this.Fs=i in t?t[i].bind(t):ki}W(){return this.N}q(t,s){const i=this.N;if(i!==t&&(this.N=t,!(s&LifecycleFlags.et))){const n=this.Fs(t,i);void 0!==n&&(this.N=t=n),this.A(t,i,s)}}};SelfObserver=c([propertyObserver()],SelfObserver);const{oneTime:Ri,Ds:Si,Qh:ji,er:Pi}=BindingMode;class BindingModeBehavior{constructor(mode){this.mode=mode}bind(t,s,i){i.Al=i.mode,i.mode=this.mode}Nh(t,s,i){i.mode=i.Al,i.Al=null}}class OneTimeBindingBehavior extends BindingModeBehavior{constructor(){super(Ri)}}BindingBehaviorResource.kh("oneTime",OneTimeBindingBehavior);class ToViewBindingBehavior extends BindingModeBehavior{constructor(){super(Si)}}BindingBehaviorResource.kh("toView",ToViewBindingBehavior);class FromViewBindingBehavior extends BindingModeBehavior{constructor(){super(ji)}}BindingBehaviorResource.kh("fromView",FromViewBindingBehavior);class TwoWayBindingBehavior extends BindingModeBehavior{constructor(){super(Pi)}}BindingBehaviorResource.kh("twoWay",TwoWayBindingBehavior);const Ei={},Mi=BindingMode.Qh;class DebounceBindingBehavior{bind(t,s,i,n=200){let h,e,r;i instanceof Binding?(h="handleChange",r=G,e=i.mode&Mi?LifecycleFlags.Hn:LifecycleFlags.K):(h="callSource",r=K,e=LifecycleFlags.K),i.kt=i[h],i.kt.Cl=h,i[h]=r,i.Bt={St:e,Rt:n,It:0,oldValue:Ei}}Nh(t,s,i){i[i.kt.Cl]=i.kt,i.kt=null,PLATFORM.global.clearTimeout(i.Bt.It),i.Bt=null}}BindingBehaviorResource.kh("debounce",DebounceBindingBehavior);class SignalBindingBehavior{constructor(t){this.Tl=t}bind(t,s,i,...n){if(!i.nc)throw Reporter.error(11);if(4===arguments.length){const name=n[0];this.Tl.Oh(name,i),i.yl=name}else{if(4>=arguments.length)throw Reporter.error(12);{const t=[].slice.call(arguments,3);let s=t.length;for(;s--;)this.Tl.Oh(t[s],i);i.yl=t}}}Nh(t,s,i){const name=i.yl;if(i.yl=null,Array.isArray(name)){const t=name;let s=t.length;for(;s--;)this.Tl.Bh(t[s],i)}else this.Tl.Bh(name,i)}}SignalBindingBehavior.inject=[ISignaler],BindingBehaviorResource.kh("signal",SignalBindingBehavior);class ThrottleBindingBehavior{bind(t,s,i,n=200){let h;i.Et=i[h=i instanceof Binding?i.mode===BindingMode.er?"updateSource":"updateTarget":"callSource"],i.Et.Cl=h,i[h]=J,i.jt={Rt:n,Pt:0,It:-1}}Nh(t,s,i){i[i.Et.Cl]=i.Et,i.Et=null,PLATFORM.global.clearTimeout(i.jt.It),i.jt=null}}BindingBehaviorResource.kh("throttle",ThrottleBindingBehavior);const Vi="custom-element",Fi="custom-attribute";(function(TargetedInstructionType){TargetedInstructionType.Ol="ra",TargetedInstructionType.Bl="rb",TargetedInstructionType.Il="rc",TargetedInstructionType.kl="rd",TargetedInstructionType.setProperty="re",TargetedInstructionType.Fc="rf",TargetedInstructionType.Rl="rg",TargetedInstructionType.Sl="rh",TargetedInstructionType.jl="ri",TargetedInstructionType.Pl="rj",TargetedInstructionType.El="rk"})(TargetedInstructionType||(TargetedInstructionType={}));const ITargetedInstruction=DI.Fi("createInterface").Li(),Di=Object.freeze({required:1,compiler:"default"}),Li=Object.freeze({required:0,compiler:"default"});class $i{constructor(){this.name="unnamed",this.template=null,this.cache=0,this.build=Li,this.bindables=PLATFORM.Mt,this.instructions=PLATFORM.Ai,this.dependencies=PLATFORM.Ai,this.surrogates=PLATFORM.Ai,this.containerless=0,this.shadowOptions=null,this.hasSlots=0}}const Ui=["name","template","cache","build","containerless","shadowOptions","hasSlots"],Hi=["instructions","dependencies","surrogates"],CustomAttributeResource={name:Fi,J:Z,Ih(t){return t.kind===this},kh(t,s){const i=s,n=(function(def,t){const aliases=def.aliases,defaultBindingMode=def.defaultBindingMode;return{name:def.name,aliases:null==aliases?PLATFORM.Ai:aliases,defaultBindingMode:null==defaultBindingMode?BindingMode.Ds:defaultBindingMode,Es:void 0===def.Es?0:def.Es,isTemplateController:void 0===def.isTemplateController?0:def.isTemplateController,bindables:Object.assign({},t.bindables,def.bindables)}})("string"==typeof t?{name:t}:t,i),h=i.prototype;return i.kind=CustomAttributeResource,i.description=n,i.register=vt,h.Ml=gt,h.ms=ft,h.Ht=Y,h.Yt=st,h.ls=wt,h.ns=ht,h.Os=null,h.gs=null,h.xt=null,h.zt=null,h.To=null,h.$scope=null,h.$hooks=0,h.$state=0,"flush"in h&&(h.ut=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.ao=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.yo=null),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.bo=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Ao=null),i}},INode=DI.Fi("INode").Li(),IRenderLocation=DI.Fi("IRenderLocation").Li(),IDOM=DI.Fi("IDOM").Li(),NodeSequence={empty:{childNodes:PLATFORM.Ai,firstChild:null,lastChild:null,Vl:()=>PLATFORM.Ai,insertBefore(t){},Fl(t){},remove(){}}};class If{constructor(t,s,i){this.value=0,this.Yo=i,this.Dl=null,this.Ll=null,this.$l=t,this.Ul=null,this.location=s}as(t){const s=this.Hl(t);this.Yo.Wo(s,t),this.Yo.as(t,this.$scope)}Dt(t){this.Yo.Dt(t)}Qt(t){this.Yo.Qt(t)}Cs(t){this.Yo.Cs(t)}ts(t){null!==this.Ul&&this.Ul.release(t)&&(this.Ul=null),null!==this.Ll&&this.Ll.release(t)&&(this.Ll=null),this.Yo.ts(t)}zl(t,s,i){if(i&LifecycleFlags.ht){const t=this.Hl(i);this.Yo.Wo(t,i)}else this.$lifecycle.O(this).catch(t=>{throw t})}flush(t){const s=this.Hl(t);this.Yo.Wo(s,t)}Hl(t){return this.value?this.Ul=this.Nl(this.Ul,this.$l,t):null!==this.Dl?this.Ll=this.Nl(this.Ll,this.Dl,t):null}Nl(t,s,i){return null===t&&(t=s.create()),t.Wl(this.location),t}}If.inject=[IViewFactory,IRenderLocation,CompositionCoordinator],c([bindable],If.prototype,"value",void 0),CustomAttributeResource.kh({name:"if",isTemplateController:1},If);class Else{constructor(t){this.ql=t}link(t){t.Dl=this.ql}}Else.inject=[IViewFactory],CustomAttributeResource.kh({name:"else",isTemplateController:1},Else);class Repeat{constructor(t,s,i){this.ql=i,this.Ql=0,this.location=t,this.Kl=null,this.Gl=s,this.Jl=[]}as(t){this._l()}bound(t){let s=this.Gl.bs;for(;null!==s;){if(s.target===this&&"items"===s.ic){this.Xl=s.sc;break}s=s.gs}this.Zl=this.Xl.Ke.evaluate(t,this.$scope,null),this.Yl(null,t)}Dt(t){const{Jl:s,location:i}=this;for(let n=0,h=s.length;h>n;++n){const h=s[n];h.Wl(i),h.Ht(t)}}Qt(t){const{Jl:s}=this;for(let i=0,n=s.length;n>i;++i){const n=s[i];n.Yt(t),n.release(t)}}Oo(t){this._l();const{Jl:s}=this;for(let i=0,n=s.length;n>i;++i)s[i].ls(t)}xl(t,s,i){this._l(),this.Yl(null,i|LifecycleFlags.K)}L(t){this.Yl(t,LifecycleFlags.ht|LifecycleFlags.K)}Yl(t,s){const{Jl:i,$lifecycle}=this;if(2&this.$state){const{Zl:n,$scope,ql:h,Xl:e,tu:r}=this,o=i.length,c=e.count(r);if(c>o){i.length=c;for(let t=o;c>t;++t)i[t]=h.create()}else if(o>c){$lifecycle.Wt();for(let t=c,n=i[t];o>t;n=i[++t])n.release(s),n.Yt(s);$lifecycle.Gt(s),$lifecycle.ps();for(let t=c,n=i[t];o>t;n=i[++t])n.ls(s);if($lifecycle.Ts(s),i.length=c,0===c)return}else if(0===c)return;$lifecycle.us(),e.Je(r,null===t?(t,h,e)=>{const r=i[h];r.ms(s,Scope.Ch($scope,r.$scope&&r.$scope.ph[n]===e?r.$scope.ph:BindingContext.create(n,e)))}:(h,e,r)=>{const o=i[e];o.ms(s,Scope.Ch($scope,!o.$scope||t[e]!==e&&o.$scope.ph[n]!==r?BindingContext.create(n,r):o.$scope.ph))}),$lifecycle.ds(s)}if(8&this.$state){const{location:n}=this;if($lifecycle.Vt(),null===t)for(let t=0,h=i.length;h>t;++t){const h=i[t];h.Wl(n),h.Ht(s)}else for(let h=0,e=i.length;e>h;++h)if(t[h]!==h){const t=i[h];t.Wl(n),t.Ht(s)}$lifecycle.$t(s)}}_l(){const t=this.Kl;if(3&this.$state){const s=this.Kl=getCollectionObserver(this.$lifecycle,this.tu);t!==s&&t&&t.Ot(this),s&&s.yt(this)}else t&&t.Ot(this)}}Repeat.inject=[IRenderLocation,IRenderable,IViewFactory],c([bindable],Repeat.prototype,"items",void 0),CustomAttributeResource.kh({name:"repeat",isTemplateController:1},Repeat);class Replaceable{constructor(t,s){this.ql=t,this.currentView=this.ql.create(),this.currentView.Wl(s)}as(t){this.currentView.ms(t|LifecycleFlags.Xn,this.$scope)}Dt(t){this.currentView.Ht(t)}Qt(t){this.currentView.Yt(t)}Cs(t){this.currentView.ls(t)}}Replaceable.inject=[IViewFactory,IRenderLocation],CustomAttributeResource.kh({name:"replaceable",isTemplateController:1},Replaceable);class With{constructor(t,s){this.value=null,this.ql=t,this.currentView=this.ql.create(),this.currentView.Wl(s)}zl(){2&this.$state&&this.su(LifecycleFlags.Kn)}as(t){this.su(t)}Dt(t){this.currentView.Ht(t)}Qt(t){this.currentView.Yt(t)}Cs(t){this.currentView.ls(t)}su(t){const s=Scope.Ch(this.$scope,this.value);this.currentView.ms(t,s)}}With.inject=[IViewFactory,IRenderLocation],c([bindable],With.prototype,"value",void 0),CustomAttributeResource.kh({name:"with",isTemplateController:1},With);const IProjectorLocator=DI.Fi("IProjectorLocator").Li(),CustomElementResource={name:Vi,J:_,Ih(t){return t.kind===this},iu:X,kh(t,s=null){if(!t)throw Reporter.error(70);const i=null===s?class{}:s,n=buildTemplateDefinition(i,t),h=i.prototype;return i.kind=CustomElementResource,i.description=n,i.register=Ct,h.Ml=pt,h.ms=at,h.Ht=x,h.Yt=it,h.ls=bt,h.ns=et,h.Os=null,h.gs=null,h.xt=null,h.zt=null,h.To=null,h.$scope=null,h.$hooks=0,h.bs=null,h.ys=null,h.Ut=null,h.Zt=null,h.wo=ot,h.vo=ct,h.do=null,h.po=null,h.es=null,"flush"in h&&(h.ut=null),"binding"in h&&(h.$hooks|=4),"bound"in h&&(h.$hooks|=8,h.ao=null),"unbinding"in h&&(h.$hooks|=256),"unbound"in h&&(h.$hooks|=512,h.yo=null),"render"in h&&(h.$hooks|=1024),"created"in h&&(h.$hooks|=2),"attaching"in h&&(h.$hooks|=16),"attached"in h&&(h.$hooks|=32,h.bo=null),"detaching"in h&&(h.$hooks|=64),"caching"in h&&(h.$hooks|=2048),"detached"in h&&(h.$hooks|=128,h.Ao=null),i}},zi={mode:"open"},ISanitizer=DI.Fi("ISanitizer").$i(t=>t.singleton(class{nu(t){return t.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"")}}));class SanitizeValueConverter{constructor(t){this.hu=t}Ds(t){return null==t?null:this.hu.nu(t)}}SanitizeValueConverter.inject=[ISanitizer],ValueConverterResource.kh("sanitize",SanitizeValueConverter);class Ni{constructor($lifecycle,cache){this.bs=null,this.ys=null,this.gs=null,this.Os=null,this.Ut=null,this.Zt=null,this.zt=null,this.xt=null,this.do=null,this.po=null,this.To=null,this.$state=0,this.$scope=null,this.os=0,this.$lifecycle=$lifecycle,this.cache=cache}Wl(t){this.os=0,this.location=t}release(t){return this.os=1,8&this.$state?this.cache.eu(this):!!this.vo(t)}ru(t){this.$scope=t,this.ms=yt,this.ls=Ot}}class Wi{constructor(name,template,t){this.ou=0,this.cu=-1,this.cache=null,this.B=t,this.name=name,this.template=template}lu(t,s){t&&("*"===t?t=Wi.uu:"string"==typeof t&&(t=parseInt(t,10)),-1!==this.cu&&s||(this.cu=t)),this.cache=this.cu>0?[]:null,this.ou=this.cu>0}eu(t){return null!==this.cache&&this.cu>this.cache.length}cs(t){return this.eu(t)?(t.ns(LifecycleFlags.Fn),this.cache.push(t),1):0}create(){const cache=this.cache;let t;if(null!==cache&&cache.length>0)return(t=cache.pop()).$state&=-129,t;if(t=new Ni(this.B,this),this.template.Ss(t),!t.$nodes)throw Reporter.error(90);return t}}Wi.uu=65535,(t=>{t.ms=dt,t.ls=mt,t.Ht=tt,t.Yt=nt,t.ns=rt,t.wo=lt,t.vo=ut})(Ni.prototype);const ITemplateCompiler=DI.Fi("ITemplateCompiler").Li();(function(ViewCompileFlags){ViewCompileFlags[ViewCompileFlags.Fn=1]="none",ViewCompileFlags[ViewCompileFlags.fu=2]="surrogate",ViewCompileFlags[ViewCompileFlags.du=4]="shadowDOM"})(ViewCompileFlags||(ViewCompileFlags={}));const ITemplateFactory=DI.Fi("ITemplateFactory").Li();class CompiledTemplate{constructor(dom,t,s,i){this.dom=dom,this.wu=t,this.ql=s,this.bu=i}Ss(t,host,parts){const s=t.$nodes=this.ql.mu();t.$context=this.bu,this.bu.Ss(t,s.Vl(),this.wu,host,parts)}}const qi={bu:null,dom:null,Ss(t){t.$nodes=NodeSequence.empty,t.$context=null}},Qi="default",IInstructionRenderer=DI.Fi("IInstructionRenderer").Li(),IRenderer=DI.Fi("IRenderer").Li(),IRenderingEngine=DI.Fi("IRenderingEngine").$i(t=>t.singleton(Ki));class Ki{constructor(t,s,i,n){this.gu=new Map,this.pu=t,this.vu=s,this.Au=new Map,this.B=i,this.Cu=new Map,this.Tu=n.reduce((t,s)=>(t[s.name]=s,t),Object.create(null))}js(dom,t,s,i){if(!t)return null;let n=this.Cu.get(t);return n||(n=this.yu(dom,t,s,i),this.Cu.set(t,n)),n}Ou(dom,t,s){if(!t)return null;let i=this.Au.get(t);if(!i){const n=buildTemplateDefinition(null,t),template=this.yu(dom,n,s,null);(i=new Wi(n.name,template,this.B)).lu(n.cache,1),this.Au.set(t,i)}return i}Bs(t,s){let i=this.gu.get(t);i||(i=Xi.create(t),this.gu.set(t,i)),i.Bu(s,this.B)}yu(dom,t,s,i){if(null===s&&(s=this.pu),null!==t.template){const n=createRenderContext(dom,s,t.dependencies,i);if(t.build.required){const s=t.build.compiler||Qi,compiler=this.Tu[s];if(void 0===compiler)throw Reporter.error(20,s);t=compiler.compile(dom,t,new RuntimeCompilationResources(n),ViewCompileFlags.fu)}return this.vu.create(n,t)}return qi}}Ki.inject=[IContainer,ITemplateFactory,ILifecycle,all(ITemplateCompiler)];class Gi{constructor(){this.C=null}Ns(t){this.C=t}resolve(t,s){if(void 0===this.C)throw Reporter.error(50);return this.C}G(){this.C=null}}class Ji{Ns(t,parts){this.ql=t,this.Iu=parts||PLATFORM.Mt}resolve(t,s){const i=this.ql;if(null==i)throw Reporter.error(50);if(!i.name||!i.name.length)throw Reporter.error(51);const n=this.Iu[i.name];if(n){const i=t.get(IRenderingEngine),dom=t.get(IDOM);return i.Ou(dom,n,s)}return i}G(){this.ql=null,this.Iu=PLATFORM.Mt}}let _i=class{constructor(t,customElement){this.At=0,this.children=null,this.customElement=customElement,this.B=t,this.$=0}W(){return this.$||(this.$=1,this.customElement.es.ku(()=>{this.Ru()}),this.children=Bt(this.customElement.es.children)),this.children}q(t){}flush(t){this.A(this.children,void 0,t|LifecycleFlags.K),this.At=0}subscribe(t){this.m(t)}unsubscribe(t){this.g(t)}Ru(){this.children=Bt(this.customElement.es.children),"$childrenChanged"in this.customElement&&this.customElement.Su(),this.B.O(this).catch(t=>{throw t}),this.At=1}};_i=c([subscriberCollection(MutationKind.C)],_i);class Xi{constructor(){}static create(t){const s=new Xi;return s.bindables=t.description.bindables,s}Bu(t,s){t.$lifecycle=s,"$projector"in t?this.ju(s,t):this.Pu(t)}ju(t,s){this.Pu(s).Eu=new _i(t,s),Reflect.defineProperty(s,"$children",{Ws:0,get(){return this.qs.Eu.W()}})}Pu(t){const s={},bindables=this.bindables,i=Object.getOwnPropertyNames(bindables);for(let n=0,h=i.length;h>n;++n){const name=i[n];s[name]=new SelfObserver(t,name,bindables[name].Fs),It(t,name)}return Reflect.defineProperty(t,"$observers",{Ws:0,value:s}),s}}class Aurelia{constructor(t=DI.Ei()){this.pu=t,this.Mu=[],this.Vu=[],this.Fu=[],this.Du=0,this.Lu=null,Registration.C(Aurelia,this).register(t,Aurelia)}register(...t){return this.pu.register(...t),this}app(t){const host=t.host;let component;const s=t.component;CustomElementResource.Ih(s)?(this.pu.register(s),component=this.pu.get(CustomElementResource.J(s.description.name))):component=s;const dom=this.pu.get(IDOMInitializer).initialize(t),i=()=>{if(host.$au=this,!this.Mu.includes(component)){this.Lu=component,this.Mu.push(component);const t=this.pu.get(IRenderingEngine),s=this.pu.get(IProjectorLocator);component.Ml(dom,s,t,host,this.pu)}component.ms(LifecycleFlags.Wn|LifecycleFlags.et,null),component.Ht(LifecycleFlags.Wn|LifecycleFlags.Ft)};return this.Vu.push(i),this.Fu.push(()=>{component.Yt(LifecycleFlags._t|LifecycleFlags.qt),component.ls(LifecycleFlags._t|LifecycleFlags.vs),host.$au=null}),this.Du&&i(),this}root(){return this.Lu}start(){for(const t of this.Vu)t();return this.Du=1,this}stop(){this.Du=0;for(const t of this.Fu)t();return this}}PLATFORM.global.Aurelia=Aurelia;const IDOMInitializer=DI.Fi("IDOMInitializer").Li();class Zi{constructor(t){const s=this.$u={};t.forEach(t=>{s[t.Qs]=t})}Ss(dom,t,s,targets,i,host,parts){const n=i.instructions,h=this.$u;if(targets.length!==n.length)throw Reporter.error(targets.length>n.length?30:31);for(let i=0,e=targets.length;e>i;++i){const instructions=n[i],e=targets[i];for(let i=0,n=instructions.length;n>i;++i){const n=instructions[i];h[n.type].Ss(dom,t,s,e,n,parts)}}if(host){const n=i.surrogates;for(let i=0,e=n.length;e>i;++i){const e=n[i];h[e.type].Ss(dom,t,s,host,e,parts)}}}}Zi.inject=[all(IInstructionRenderer)];let Yi=class{Ss(dom,t,s,i,n){i[n.to]=n.value}};Yi=c([instructionRenderer("re")],Yi);let xi=class{constructor(t){this.Uu=t}Ss(dom,t,s,i,n){const h=t.zs(s,i,n,null,null,i,1),component=t.get(_(n.res)),e=t.get(IRenderer).$u,r=t.get(IProjectorLocator),o=n.instructions;component.Ml(dom,r,this.Uu,i,t,n);for(let i=0,n=o.length;n>i;++i){const n=o[i];e[n.type].Ss(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),h.G()}};xi.inject=[IRenderingEngine],xi=c([instructionRenderer("ra")],xi);let tn=class{constructor(t){this.Uu=t}Ss(dom,t,s,i,n){const h=t.zs(s,i,n),component=t.get(Z(n.res)),e=t.get(IRenderer).$u,r=n.instructions;component.Ml(this.Uu);for(let i=0,n=r.length;n>i;++i){const n=r[i];e[n.type].Ss(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),h.G()}};tn.inject=[IRenderingEngine],tn=c([instructionRenderer("rb")],tn);let sn=class{constructor(t){this.Uu=t}Ss(dom,t,s,i,n,parts){const h=this.Uu.Ou(dom,n.def,t),e=t.zs(s,i,n,h,parts,dom.Hu(i),0),component=t.get(Z(n.res)),r=t.get(IRenderer).$u,o=n.instructions;component.Ml(this.Uu),n.link&&component.link(s.Zt);for(let i=0,n=o.length;n>i;++i){const n=o[i];r[n.type].Ss(dom,t,s,component,n)}addBindable(s,component),addAttachable(s,component),e.G()}};sn.inject=[IRenderingEngine],sn=c([instructionRenderer("rc")],sn);let nn=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){dom.remove(i);const h=n.instructions,toViewModel=n.toViewModel;for(let i=0,n=h.length;n>i;++i){const n=h[i],e=ensureExpression(this.zu,n.from,48);addBindable(s,new LetBinding(e,n.to,this.st,t,toViewModel))}}};nn.inject=[IExpressionParser,IObserverLocator],nn=c([instructionRenderer("rd")],nn);let hn=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,153);addBindable(s,new Call(h,i,n.to,this.st,t))}};hn.inject=[IExpressionParser,IObserverLocator],hn=c([instructionRenderer("rh")],hn);let en=class{constructor(t){this.zu=t}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,1280);addBindable(s,new Ref(h,i,t))}};en.inject=[IExpressionParser],en=c([instructionRenderer("rj")],en);let rn=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){let bindable;const h=ensureExpression(this.zu,n.from,2048);addBindable(s,bindable=h.Xe?new MultiInterpolationBinding(this.st,h,i,n.to,BindingMode.Ds,t):new InterpolationBinding(h.Ze,h,i,n.to,BindingMode.Ds,this.st,t,1))}};rn.inject=[IExpressionParser,IObserverLocator],rn=c([instructionRenderer("rf")],rn);let on=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,48|n.mode);addBindable(s,new Binding(h,i,n.to,n.mode,this.st,t))}};on.inject=[IExpressionParser,IObserverLocator],on=c([instructionRenderer("rg")],on);let cn=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,539);addBindable(s,new Binding(h,i,n.to,BindingMode.Ds,this.st,t))}};cn.inject=[IExpressionParser,IObserverLocator],cn=c([instructionRenderer("rk")],cn);const BasicRenderer={register(t){t.register(Yi,xi,tn,sn,nn,hn,en,rn,on,cn)}},ln=[If,Else,Repeat,Replaceable,With,SanitizeValueConverter,DebounceBindingBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,TwoWayBindingBehavior],RuntimeConfiguration={register(t){t.register(BasicRenderer,Registration.singleton(IObserverLocator,Ii),Registration.singleton(ILifecycle,Es),Registration.singleton(IRenderer,Zi),...ln)},Ei(){const t=DI.Ei();return t.register(RuntimeConfiguration),t}};class InterpolationInstruction{constructor(from,to){this.type="rf",this.from=from,this.to=to}}class OneTimeBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.oneTime,this.oneTime=1,this.to=to}}class ToViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Ds,this.oneTime=0,this.to=to}}class FromViewBindingInstruction{constructor(from,to){this.type="rg",this.from=from,this.mode=BindingMode.Qh,this.oneTime=0,this.to=to}}class TwoWayBindingInstruction{constructor(from,to){this.type="rg",this.type="rg",this.from=from,this.mode=BindingMode.er,this.oneTime=0,this.to=to}}class IteratorBindingInstruction{constructor(from,to){this.type="rk",this.from=from,this.to=to}}class CallBindingInstruction{constructor(from,to){this.type="rh",this.from=from,this.to=to}}class RefBindingInstruction{constructor(from){this.type="rj",this.from=from}}class SetPropertyInstruction{constructor(value,to){this.type="re",this.to=to,this.value=value}}class HydrateElementInstruction{constructor(res,instructions,parts){this.type="ra",this.instructions=instructions,this.parts=parts,this.res=res}}class HydrateAttributeInstruction{constructor(res,instructions){this.type="rb",this.instructions=instructions,this.res=res}}class HydrateTemplateController{constructor(def,res,instructions,link){this.type="rc",this.def=def,this.instructions=instructions,this.link=link,this.res=res}}class LetElementInstruction{constructor(instructions,toViewModel){this.type="rd",this.instructions=instructions,this.toViewModel=toViewModel}}class LetBindingInstruction{constructor(from,to){this.type="ri",this.from=from,this.to=to}}ss=Object.freeze({CallFunction,get ExpressionKind(){return ExpressionKind},connects:t=>32==(32&t._),observes:t=>64==(64&t._),callsFunction:t=>128==(128&t._),hasAncestor:t=>256==(256&t._),isAssignable:t=>8192==(8192&t._),isLeftHandSide:t=>1024==(1024&t._),isPrimary:t=>512==(512&t._),isResource:t=>32768==(32768&t._),hasBind,hasUnbind,isLiteral,arePureLiterals,isPureLiteral,BindingBehavior,ValueConverter,Assign,Conditional,AccessThis,AccessScope,AccessMember,AccessKeyed,CallScope,CallMember,Binary,Unary,PrimitiveLiteral,HtmlLiteral,ArrayLiteral,ObjectLiteral,Template,TaggedTemplate,ArrayBindingPattern,ObjectBindingPattern,BindingIdentifier,ForOfStatement,Interpolation,get BindingMode(){return BindingMode},get Binding(){return Binding},Call,connectable,IExpressionParser,get BindingType(){return BindingType},MultiInterpolationBinding,get InterpolationBinding(){return InterpolationBinding},get LetBinding(){return LetBinding},Ref,get ArrayObserver(){return ArrayObserver},enableArrayObservation,disableArrayObservation(){for(const t of Ys)1==Ws[t].$&&def(Ws,t,Object.assign({},ti,{value:Zs[t]}))},get MapObserver(){return MapObserver},enableMapObservation,disableMapObservation(){for(const t of ri)1==si[t].$&&li(si,t,Object.assign({},ci,{value:ei[t]}))},get SetObserver(){return SetObserver},enableSetObservation,disableSetObservation(){for(const t of bi)1==ui[t].$&&pi(ui,t,Object.assign({},gi,{value:wi[t]}))},BindingContext,Scope,OverrideContext,collectionObserver,get CollectionLengthObserver(){return CollectionLengthObserver},computed:t=>(function(s,i){(s.computed||(s.computed={}))[i]=t}),get CustomSetterObserver(){return CustomSetterObserver},get GetterObserver(){return GetterObserver},IDirtyChecker,IObserverLocator,ITargetObserverLocator,ITargetAccessorLocator,getCollectionObserver,PrimitiveObserver,PropertyAccessor,propertyObserver,get SelfObserver(){return SelfObserver},get SetterObserver(){return SetterObserver},ISignaler,subscriberCollection,batchedSubscriberCollection,targetObserver,bindingBehavior:t=>s=>BindingBehaviorResource.kh(t,s),BindingBehaviorResource,BindingModeBehavior,OneTimeBindingBehavior,ToViewBindingBehavior,FromViewBindingBehavior,TwoWayBindingBehavior,DebounceBindingBehavior,SignalBindingBehavior,ThrottleBindingBehavior,customAttribute:t=>s=>CustomAttributeResource.kh(t,s),CustomAttributeResource,dynamicOptions:t=>void 0===t?At:At(t),templateController:t=>s=>CustomAttributeResource.kh("string"==typeof t?{isTemplateController:1,name:t}:Object.assign({isTemplateController:1},t),s),If,Else,Repeat,Replaceable,With,containerless:t=>void 0===t?Tt:Tt(t),customElement:t=>s=>CustomElementResource.kh(t,s),CustomElementResource,IProjectorLocator,useShadowDOM(t){function s(t){return t.shadowOptions=i,t}const i="function"!=typeof t&&t?t:zi;return"function"==typeof t?s(t):s},valueConverter:t=>s=>ValueConverterResource.kh(t,s),ValueConverterResource,ISanitizer,SanitizeValueConverter,bindable,Aurelia,IDOMInitializer,RuntimeConfiguration,buildTemplateDefinition,isTargetedInstruction(value){const type=value.type;return"string"==typeof type&&2===type.length},ITargetedInstruction,get TargetedInstructionType(){return TargetedInstructionType},INode,IRenderLocation,IDOM,NodeSequence,CallBindingInstruction,FromViewBindingInstruction,HydrateAttributeInstruction,HydrateElementInstruction,HydrateTemplateController,InterpolationInstruction,IteratorBindingInstruction,LetBindingInstruction,LetElementInstruction,OneTimeBindingInstruction,RefBindingInstruction,SetPropertyInstruction,ToViewBindingInstruction,TwoWayBindingInstruction,AggregateLifecycleTask,CompositionCoordinator,get Hooks(){return Hooks},ILifecycle,IRenderable,IViewFactory,LifecycleTask,PromiseTask:class{constructor(t,s){this.done=0,this.xo=0,this.Fs=s,this.Yr=t.then(value=>{if(1!=this.xo)return this.done=1,this.Fs(value),value})}Go(){return!this.done}cancel(){this.Go()&&(this.xo=1)}Jo(){return this.Yr}},get State(){return ts},get CollectionKind(){return CollectionKind},get DelegationStrategy(){return DelegationStrategy},get LifecycleFlags(){return LifecycleFlags},get MutationKind(){return MutationKind},stringifyLifecycleFlags(t){const s=[];return t&LifecycleFlags.Z&&s.push("mustEvaluate"),t&LifecycleFlags.Ln&&s.push("isCollectionMutation"),t&LifecycleFlags.$n&&s.push("isInstanceMutation"),t&LifecycleFlags.Un&&s.push("updateTargetObserver"),t&LifecycleFlags.K&&s.push("updateTargetInstance"),t&LifecycleFlags.Hn&&s.push("updateSourceExpression"),t&LifecycleFlags.zn&&s.push("fromAsyncFlush"),t&LifecycleFlags.Nn&&s.push("fromSyncFlush"),t&LifecycleFlags.Wn&&s.push("fromStartTask"),t&LifecycleFlags._t&&s.push("fromStopTask"),t&LifecycleFlags.et&&s.push("fromBind"),t&LifecycleFlags.vs&&s.push("fromUnbind"),t&LifecycleFlags.Ft&&s.push("fromAttach"),t&LifecycleFlags.qt&&s.push("fromDetach"),t&LifecycleFlags.ss&&s.push("fromCache"),t&LifecycleFlags.qn&&s.push("fromDOMEvent"),t&LifecycleFlags.Qn&&s.push("fromObserverSetter"),t&LifecycleFlags.Kn&&s.push("fromBindableHandler"),t&LifecycleFlags.Gn&&s.push("fromLifecycleTask"),t&LifecycleFlags.Jt&&s.push("parentUnmountQueued"),t&LifecycleFlags.ot&&s.push("doNotUpdateDOM"),t&LifecycleFlags.Jn&&s.push("isTraversingParentScope"),t&LifecycleFlags.Xn&&s.push("allowParentScopeTraversal"),s.join("|")},instructionRenderer,ensureExpression,addAttachable,addBindable,BasicRenderer,CompiledTemplate,createRenderContext,IInstructionRenderer,IRenderer,IRenderingEngine,ITemplateCompiler,ITemplateFactory,get ViewCompileFlags(){return ViewCompileFlags}});const BindingCommandResource={name:"binding-command",J(name){return`${this.name}:${name}`},Ih(t){return t.kind===this},kh(t,s){const i=s,n="string"==typeof t?{name:t,target:null}:t;return i.kind=BindingCommandResource,i.description=n,i.register=kt,i}};class OneTimeBindingCommand{constructor(){this.Nu=49}compile(t){return new OneTimeBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("one-time",OneTimeBindingCommand);class ToViewBindingCommand{constructor(){this.Nu=50}compile(t){return new ToViewBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("to-view",ToViewBindingCommand);class FromViewBindingCommand{constructor(){this.Nu=51}compile(t){return new FromViewBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("from-view",FromViewBindingCommand);class TwoWayBindingCommand{constructor(){this.Nu=52}compile(t){return new TwoWayBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("two-way",TwoWayBindingCommand);const un=["","$1","$2","","$4","","$6"],fn={bind:BindingMode.Ds,Wu:BindingMode.oneTime,qu:BindingMode.Ds,Qu:BindingMode.Qh,Ku:BindingMode.er};class DefaultBindingCommand{constructor(){this.Nu=53,this.$1=OneTimeBindingCommand.prototype.compile,this.$2=ToViewBindingCommand.prototype.compile,this.$4=FromViewBindingCommand.prototype.compile,this.$6=TwoWayBindingCommand.prototype.compile}compile(t){return this[un[getMode(t)]](t)}}BindingCommandResource.kh("bind",DefaultBindingCommand);class CallBindingCommand{constructor(){this.Nu=153}compile(t){return new CallBindingInstruction(t.Dh,getTarget(t,1))}}BindingCommandResource.kh("call",CallBindingCommand);class ForBindingCommand{constructor(){this.Nu=539}compile(t){return new IteratorBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("for",ForBindingCommand);const ParserRegistration={register(t){t.Ki(IExpressionParser,t=>(t.fc=parseExpression,t))}},an=PrimitiveLiteral.Fe,dn=PrimitiveLiteral.Ve,wn=PrimitiveLiteral.Me,bn=PrimitiveLiteral.Ee,mn=AccessThis.xh,gn=AccessThis.te,$state=new class{get ti(){return this.input.slice(this.si,this.index)}constructor(t){this.index=0,this.si=0,this.lastIndex=0,this.input=t,this.length=t.length,this.Xs=1572864,this.Ys="",this._s=t.charCodeAt(0),this.Zs=1}}(""),pn=[an,dn,wn,bn,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540713,540714,"of"],vn=Object.create(null);vn.true=2049,vn.null=2050,vn.false=2048,vn.undefined=2051,vn.xh=3076,vn.te=3077,vn.me=1640798,vn.be=1640799,vn.Re=34850,vn.ke=34851,vn.of=1051179;const An=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],Cn=[48,58],Tn=t=>{throw Reporter.error(111,{state:t})};Tn.Gu=1,$t(null,new Set,[36,0,48,58,65,91,95,0,97,123],1);const yn=new Uint8Array(65535);$t(yn,null,An,1),$t(yn,null,Cn,1);const On=Array(65535);On.fill(Tn,0,65535),$t(On,null,[0,33,127,161],t=>(Et(t),null)),$t(On,null,An,function(t){for(;yn[Et(t)];);const s=vn[t.Ys=t.ti];return void 0===s?1024:s}),$t(On,null,Cn,t=>Mt(t,0)),On[34]=On[39]=(t=>(function(t){const s=t._s;Et(t);let i=0;const n=[];let h=t.index;for(;t._s!==s;)if(92===t._s)n.push(t.input.slice(h,t.index)),Et(t),i=Rt(t._s),Et(t),n.push(String.fromCharCode(i)),h=t.index;else{if(t.index>=t.length)throw Reporter.error(108,{state:t});Et(t)}const e=t.input.slice(h,t.index);Et(t),n.push(e);const r=n.join("");return t.Ys=r,4096})(t)),On[96]=(t=>Vt(t)),On[33]=(t=>61!==Et(t)?32808:61!==Et(t)?1638679:(Et(t),1638681)),On[61]=(t=>61!==Et(t)?1048615:61!==Et(t)?1638678:(Et(t),1638680)),On[38]=(t=>38!==Et(t)?1572880:(Et(t),1638613)),On[124]=(t=>124!==Et(t)?1572883:(Et(t),1638548)),On[46]=(t=>Et(t)>57||48>t._s?16392:Mt(t,1)),On[60]=(t=>61!==Et(t)?1638746:(Et(t),1638748)),On[62]=(t=>61!==Et(t)?1638747:(Et(t),1638749)),On[37]=Ut(1638885),On[40]=Ut(671750),On[41]=Ut(1835018),On[42]=Ut(1638884),On[43]=Ut(623008),On[44]=Ut(1572875),On[45]=Ut(623009),On[47]=Ut(1638886),On[58]=Ut(1572878),On[63]=Ut(1572879),On[91]=Ut(671756),On[93]=Ut(1835021),On[123]=Ut(131079),On[125]=Ut(1835017);const Bn=[DotSeparatedAttributePattern,RefAttributePattern],In=[CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand],JitConfiguration={register(t){t.register(ParserRegistration,...Bn,...In)},Ei(){const t=DI.Ei();return t.register(JitConfiguration),t}};class ResourceModel{constructor(t){this.Ju=t,this._u={},this.Xu={},this.Zu={}}Yu(name){let t=this._u[name];if(void 0===t){const def=this.Ju.find(CustomElementResource,name);t=null===def?null:(function(def){const t=new ElementInfo(def.name,def.containerless),bindables=def.bindables,defaultBindingMode=BindingMode.Ds;let s,i,n,mode;for(i in bindables)void 0!==(s=bindables[i]).Ls&&(i=s.Ls),n=void 0!==s.Ms?s.Ms:PLATFORM.Vs(i),t.bindables[n]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode);return t})(def),this._u[name]=t}return t}xu(t){const name=PLATFORM.Gs(t.target);let s=this.Xu[name];if(void 0===s){const def=this.Ju.find(CustomAttributeResource,name);s=null===def?null:(function(def){const t=new AttrInfo(def.name,def.isTemplateController),bindables=def.bindables,defaultBindingMode=void 0!==def.defaultBindingMode&&def.defaultBindingMode!==BindingMode.default?def.defaultBindingMode:BindingMode.Ds;let s,i,mode,n=0;for(i in bindables)++n,void 0!==(s=bindables[i]).Ls&&(i=s.Ls),t.bindables[i]=new BindableInfo(i,mode=void 0!==s.mode&&s.mode!==BindingMode.default?s.mode:defaultBindingMode),null===t.bindable&&(t.bindable=t.bindables[i]);return null===t.bindable&&(t.bindable=new BindableInfo("value",defaultBindingMode)),(def.Es||n>1)&&(t.Es=1),t})(def),this.Xu[name]=s}return s}tf(t){const name=t.command;if(null===name)return null;let s=this.Zu[name];if(void 0===s){if(null===(s=this.Ju.create(BindingCommandResource,name)))throw Reporter.error(0);this.Zu[name]=s}return s}}class BindableInfo{constructor(t,mode){this.Ks=t,this.mode=mode}}class ElementInfo{constructor(name,t){this.name=name,this.containerless=t,this.bindables={}}}class AttrInfo{constructor(name,isTemplateController){this.name=name,this.bindables={},this.bindable=null,this.isTemplateController=isTemplateController,this.Es=0}}class TemplateControllerSymbol{get sf(){return null===this.if&&(this.if=[],this.flags|=4096),this.if}constructor(dom,t,s,i){this.flags=513,this.res=s.name,this.nf=i,this.hf=null,this.Js=t,this.template=null,this.templateController=null,this.marker=Ht(dom),this.if=null}}class ReplacePartSymbol{constructor(name){this.flags=2,this.name=name,this.hf=null,this.parent=null,this.template=null}}class CustomAttributeSymbol{get sf(){return null===this.if&&(this.if=[],this.flags|=4096),this.if}constructor(t,s){this.flags=4,this.res=s.name,this.Js=t,this.if=null}}class PlainAttributeSymbol{constructor(t,s,i){this.flags=8,this.Js=t,this.command=s,this.Dh=i}}class BindingSymbol{constructor(t,bindable,s,i,n){this.flags=256,this.command=t,this.bindable=bindable,this.Dh=s,this.bi=i,this.target=n}}class CustomElementSymbol{get attributes(){return null===this.ef&&(this.ef=[],this.flags|=2048),this.ef}get sf(){return null===this.if&&(this.if=[],this.flags|=4096),this.if}get childNodes(){return null===this.rf&&(this.rf=[],this.flags|=8192),this.rf}get parts(){return null===this.cf&&(this.cf=[],this.flags|=16384),this.cf}constructor(dom,t,s){this.flags=16,this.res=s.name,this.hf=t,this.bindables=s.bindables,this.lf=1,this.templateController=null,s.containerless?(this.br=1,this.marker=Ht(dom),this.flags|=512):(this.br=0,this.marker=null),this.ef=null,this.if=null,this.rf=null,this.cf=null}}class LetElementSymbol{get sf(){return null===this.if&&(this.if=[],this.flags|=4096),this.if}constructor(dom,t){this.flags=544,this.hf=t,this.toViewModel=0,this.marker=Ht(dom),this.if=null}}class PlainElementSymbol{get attributes(){return null===this.ef&&(this.ef=[],this.flags|=2048),this.ef}get childNodes(){return null===this.rf&&(this.rf=[],this.flags|=8192),this.rf}constructor(t){this.flags=64,this.hf=t,this.lf=0,this.templateController=null,this.ef=null,this.rf=null}}class TextSymbol{constructor(dom,t,s){this.flags=640,this.hf=t,this.Fc=s,this.marker=Ht(dom)}}is=Object.freeze({AttrSyntax,IAttributeParser,AtPrefixedTriggerAttributePattern,attributePattern,ColonPrefixedBindAttributePattern,DotSeparatedAttributePattern,IAttributePattern,Interpretation,ISyntaxInterpreter,RefAttributePattern,bindingCommand:t=>s=>BindingCommandResource.kh(t,s),BindingCommandResource,CallBindingCommand,DefaultBindingCommand,ForBindingCommand,FromViewBindingCommand,getMode,getTarget,OneTimeBindingCommand,ToViewBindingCommand,TwoWayBindingCommand,JitConfiguration,ParserRegistration,parseExpression,ResourceModel,BindableInfo,ElementInfo,AttrInfo,BindingSymbol,CustomAttributeSymbol,CustomElementSymbol,LetElementSymbol,PlainAttributeSymbol,PlainElementSymbol,ReplacePartSymbol,TemplateControllerSymbol,TextSymbol});class Listener{constructor(dom,t,s,i,n,preventDefault,h,e){this.dom=dom,this.gs=null,this.Os=null,this.$state=0,this.uf=s,this.zh=e,this.preventDefault=preventDefault,this.sc=i,this.target=n,this.ff=t,this.af=h}oc(t){const s=this.$scope.mh;s.df=t;const i=this.sc.evaluate(LifecycleFlags.Z,this.$scope,this.zh);return delete s.df,1!=i&&this.preventDefault&&t.preventDefault(),i}li(t){this.oc(t)}ms(t,s){if(2&this.$state){if(this.$scope===s)return;this.ls(t|LifecycleFlags.et)}this.$state|=1,this.$scope=s;const i=this.sc;hasBind(i)&&i.bind(t,s,this),this.wf=this.af.addEventListener(this.dom,this.target,this.ff,this,this.uf),this.$state|=2,this.$state&=-2}ls(t){if(!(2&this.$state))return;this.$state|=64;const s=this.sc;hasUnbind(s)&&s.Nh(t,this.$scope,this),this.$scope=null,this.wf.G(),this.wf=null,this.$state&=-67}nt(t,s){}T(t,s,i){}}let AttributeNSAccessor=class{constructor(t,s,i,n,h){this.rt=1,this.attributeName=n,this.B=t,this.U=s,this.oldValue=this.N=this.W(),this.H=i,this.bf=h}W(){return this.U.getAttributeNS(this.bf,this.attributeName)}lt(t){this.U.setAttributeNS(this.bf,this.attributeName,t)}};AttributeNSAccessor=c([targetObserver("")],AttributeNSAccessor);const kn=LifecycleFlags.qn|LifecycleFlags.Hn,Rn=LifecycleFlags.ht|LifecycleFlags.K,Sn=(t,s)=>t===s;let CheckedObserver=class{constructor(t,s,i,n){this.rt=1,this.wf=i,this.B=t,this.U=s,this.st=n}W(){return this.N}lt(t,s){this.mf||(this.mf=this.U.qs&&(this.U.qs.gf||this.U.qs.value),this.mf&&this.mf.subscribe(this)),this.pf&&(this.pf.Ot(this),this.pf=null),"checkbox"===this.U.type&&Array.isArray(t)&&(this.pf=this.st._c(t),this.pf.yt(this)),this.vf()}L(){this.vf(),this.Af(Rn)}T(t,s,i){this.vf(),this.Af(i)}vf(){const value=this.N,t=this.U,s=t.hasOwnProperty("model")?t.gf:t.value,i=t.Cf||Sn;t.checked="radio"===t.type?!!i(value,s):1==value?1:Array.isArray(value)?-1!==value.findIndex(t=>!!i(t,s)):0}Af(t){t&LifecycleFlags.et||this.N!==this.oldValue&&this.A(this.N,this.oldValue,t)}li(){let value=this.N;const t=this.U,s=t.hasOwnProperty("model")?t.gf:t.value;let i;const n=t.Cf||Sn;if("checkbox"===t.type){if(Array.isArray(value))return i=value.findIndex(t=>!!n(t,s)),void(t.checked&&-1===i?value.push(s):t.checked||-1===i||value.splice(i,1));value=t.checked}else{if(!t.checked)return;value=s}this.oldValue=this.N,this.N=value,this.Af(kn)}subscribe(t){this.v()||this.wf.subscribe(this.U,this),this.m(t)}unsubscribe(t){this.g(t)&&!this.v()&&this.wf.G()}Nh(){this.pf&&(this.pf.Ot(this),this.pf=null),this.mf&&this.mf.unsubscribe(this)}};CheckedObserver=c([targetObserver()],CheckedObserver);let ClassAttributeAccessor=class{constructor(t,s){this.rt=1,this.ol=1,this.B=t,this.Tf=null,this.U=s,this.version=0}W(){return this.N}lt(t){const s=this.Tf||{};let i,name,n=this.version;if(t.length){const h=this.U;for(let e=0,r=(i=t.split(/\s+/)).length;r>e;e++)(name=i[e]).length&&(s[name]=n,h.classList.add(name))}if(this.Tf=s,this.version+=1,0!==n)for(name in n-=1,s)s.hasOwnProperty(name)&&s[name]===n&&this.U.classList.remove(name)}};ClassAttributeAccessor=c([targetObserver("")],ClassAttributeAccessor);let DataAttributeAccessor=class{constructor(t,s,i){this.rt=1,this.B=t,this.U=s,this.oldValue=this.N=this.W(),this.H=i}W(){return this.U.getAttribute(this.H)}lt(t){null===t?this.U.removeAttribute(this.H):this.U.setAttribute(this.H,t)}};DataAttributeAccessor=c([targetObserver()],DataAttributeAccessor);let ElementPropertyAccessor=class{constructor(t,s,i){this.rt=1,this.B=t,this.U=s,this.H=i}W(){return this.U[this.H]}lt(value){this.U[this.H]=value}};ElementPropertyAccessor=c([targetObserver("")],ElementPropertyAccessor);class ListenerTracker{constructor(dom,t,s,i){this.dom=dom,this.yf=i,this.count=0,this.Of=t,this.listener=s}Bf(){this.count++,1===this.count&&this.dom.addEventListener(this.Of,this.listener,null,this.yf)}kf(){this.count--,0===this.count&&this.dom.removeEventListener(this.Of,this.listener,null,this.yf)}}class DelegateOrCaptureSubscription{constructor(t,s,i,n){this.Rf=t,this.Sf=s,this.ff=i,s[i]=n}G(){this.Rf.kf(),this.Sf[this.ff]=null}}class TriggerSubscription{constructor(dom,t,s,i){this.dom=dom,this.target=t,this.ff=s,this.Fs=i,dom.addEventListener(s,i,t)}G(){this.dom.removeEventListener(this.ff,this.Fs,this.target)}}class EventSubscriber{constructor(dom,t){this.dom=dom,this.jf=t,this.target=null,this.wf=null}subscribe(t,s){this.target=t,this.wf=s;const i=this.dom.addEventListener,n=this.jf;for(let h=0,e=n.length;e>h;++h)i(n[h],s,t)}G(){const t=this.target,s=this.wf,i=this.jf,n=this.dom.removeEventListener;for(let h=0,e=i.length;e>h;++h)n(i[h],s,t);this.target=this.wf=null}}const IEventManager=DI.Fi("IEventManager").$i(t=>t.singleton(jn));class jn{constructor(){this.Pf={},this.Ef={},this.Mf={}}addEventListener(dom,t,s,i,strategy){let n,h,e;if(strategy===DelegationStrategy.hh){(e=(n=this.Ef)[s]||(n[s]=new ListenerTracker(dom,s,qt,0))).Bf();const h=t.ui||(t.ui={});return new DelegateOrCaptureSubscription(e,h,s,i)}if(strategy===DelegationStrategy.nh){(e=(h=this.Mf)[s]||(h[s]=new ListenerTracker(dom,s,Wt,1))).Bf();const n=t.ci||(t.ci={});return new DelegateOrCaptureSubscription(e,n,s,i)}return new TriggerSubscription(dom,t,s,i)}}const Pn=LifecycleFlags.qn|LifecycleFlags.Hn,En={Vf:1,Ff:1,Df:1};let SelectValueObserver=class{constructor(t,s,i,n){this.rt=1,this.B=t,this.U=s,this.wf=i,this.st=n}W(){return this.N}lt(t,s){const i=Array.isArray(t);if(!i&&null!=t&&this.U.multiple)throw Error("Only null or Array instances can be bound to a multi-select.");this.pf&&(this.pf.Ot(this),this.pf=null),i&&(this.pf=this.st._c(t),this.pf.yt(this)),this.Lf(),this.Af(s)}L(t){this.Lf(t)}T(t,s,i){this.q(t,i)}Af(t){if(t&LifecycleFlags.et)return;const s=this.oldValue,i=this.N;i!==s&&this.A(i,s,t)}li(){this.$f()&&this.Af(Pn)}Lf(t){const s=this.N,i=Array.isArray(s),n=this.U,h=n.Cf||Qt,e=n.options;let r=e.length;for(;r--;){const t=e[r],n=t.hasOwnProperty("model")?t.gf:t.value;t.selected=i?-1!==s.findIndex(t=>!!h(n,t)):!!h(n,s)}}$f(){const t=this.U,s=t.options,i=s.length,n=this.N;let h=0;if(t.multiple){if(!Array.isArray(n))return 1;let e;const r=t.Cf||Qt,o=[];for(;i>h;)(e=s[h]).selected&&o.push(e.hasOwnProperty("model")?e.gf:e.value),++h;for(h=0;n.length>h;){const t=n[h];-1===o.findIndex(s=>!!r(t,s))?n.splice(h,1):++h}for(h=0;o.length>h;){const t=o[h];-1===n.findIndex(s=>!!r(t,s))&&n.push(t),++h}return 0}let value=null;for(;i>h;){const t=s[h];if(t.selected){value=t.hasOwnProperty("model")?t.gf:t.value;break}++h}return this.oldValue=this.N,this.N=value,1}subscribe(t){this.v()||this.wf.subscribe(this.U,this),this.m(t)}unsubscribe(t){this.g(t)&&!this.v()&&this.wf.G()}bind(){this.Uf=new MutationObserver(this.Hf.bind(this)),this.Uf.observe(this.U,En)}Nh(){this.Uf.disconnect(),this.Uf=null,this.pf&&(this.pf.Ot(this),this.pf=null)}Hf(){this.Lf(),this.$f()&&this.Af(Pn)}};SelectValueObserver=c([targetObserver()],SelectValueObserver);let StyleAttributeAccessor=class{constructor(t,s){this.rt=1,this.oldValue=this.N=s.style.cssText,this.B=t,this.U=s,this.zf=null,this.version=0}W(){return this.U.style.cssText}Nf(t,value){let s="";null!=value&&"function"==typeof value.indexOf&&-1!==value.indexOf("!important")&&(s="important",value=value.replace("!important","")),this.U.style.setProperty(t,value,s)}lt(t){const s=this.zf||{};let i,n=this.version;if(null!==t)if(t instanceof Object){let value;for(i in t)t.hasOwnProperty(i)&&(value=t[i],s[i=i.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)]=n,this.Nf(i,value))}else if(t.length){const h=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:[^"](?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g;let e;for(;null!==(e=h.exec(t));)(i=e[1])&&(s[i]=n,this.Nf(i,e[2]))}if(this.zf=s,this.version+=1,0!==n)for(i in n-=1,s)s.hasOwnProperty(i)&&s[i]===n&&this.U.style.removeProperty(i)}};StyleAttributeAccessor=c([targetObserver()],StyleAttributeAccessor);const Mn={button:"",Wf:"on",color:"#000000",qf:"",Qf:"",email:"",Kf:"",hidden:"",Gf:"",Jf:"",number:"",password:"",_f:"on",range:"50",reset:"",search:"",submit:"",tel:"",text:"",time:"",url:"",Xf:""},Vn=LifecycleFlags.qn|LifecycleFlags.Hn;let ValueAttributeObserver=class{constructor(t,s,i,n){if(this.rt=1,this.wf=n,this.B=t,this.U=s,this.H=i,"value"===i){const t=s.type;this.defaultValue=Mn[t||"text"],"file"===t&&(this.flush=this.Zf)}else this.defaultValue="";this.oldValue=this.N=s[i]}W(){return this.U[this.H]}lt(t,s){this.U[this.H]=t,s&LifecycleFlags.et||this.A(this.N,this.oldValue,s)}li(){const t=this.oldValue=this.N,s=this.N=this.W();t!==s&&(this.A(s,t,Vn),this.oldValue=s)}subscribe(t){this.v()||(this.oldValue=this.W(),this.wf.subscribe(this.U,this)),this.m(t)}unsubscribe(t){this.g(t)&&!this.v()&&this.wf.G()}Zf(){const t=this.N;this.oldValue!==t&&""===t&&(this.lt(t,this.ct),this.oldValue=this.N)}};ValueAttributeObserver=c([targetObserver("")],ValueAttributeObserver);const Fn="http://www.w3.org/1999/xlink",Dn="http://www.w3.org/XML/1998/namespace",Ln="http://www.w3.org/2000/xmlns/",$n=((es=Object.create(null))["Yf"]=["actuate",Fn],es["xf"]=["arcrole",Fn],es["ta"]=["href",Fn],es["sa"]=["role",Fn],es["ia"]=["show",Fn],es["na"]=["title",Fn],es["ha"]=["type",Fn],es["ea"]=["lang",Dn],es["ra"]=["space",Dn],es.oa=["xmlns",Ln],es["ca"]=["xlink",Ln],es),Un=["change","input"],Hn=["change"],zn=["change","input","blur","keyup","paste"],Nn=["scroll"],Wn=(function(t){return t.la=1,t.style=1,t.ua=1,t.checked=1,t.value=1,t.gf=1,t["Yf"]=1,t["xf"]=1,t["ta"]=1,t["sa"]=1,t["ia"]=1,t["na"]=1,t["ha"]=1,t["ea"]=1,t["ra"]=1,t.oa=1,t["ca"]=1,t})(Object.create(null));class TargetObserverLocator{constructor(dom){this.dom=dom}tt(t,s,i,n){switch(n){case"checked":return new CheckedObserver(t,i,new EventSubscriber(this.dom,Un),s);case"value":return"SELECT"===i.tagName?new SelectValueObserver(t,i,new EventSubscriber(this.dom,Hn),s):new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,Un));case"files":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,Un));case"textContent":case"innerHTML":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,zn));case"scrollTop":case"scrollLeft":return new ValueAttributeObserver(t,i,n,new EventSubscriber(this.dom,Nn));case"class":return new ClassAttributeAccessor(t,i);case"style":case"css":return new StyleAttributeAccessor(t,i);case"model":return new SetterObserver(i,n);case"role":return new DataAttributeAccessor(t,i,n);default:if(void 0!==$n[n]){const s=$n[n];return new AttributeNSAccessor(t,i,n,s[0],s[1])}const h=n.slice(0,5);if("aria-"===h||"data-"===h)return new DataAttributeAccessor(t,i,n)}return null}gl(t,s){return 1==Wn[s]}ml(t){return this.dom.ai(t)}}TargetObserverLocator.inject=[IDOM];class TargetAccessorLocator{constructor(dom){this.dom=dom}rc(t,s,i){switch(i){case"textContent":return new ElementPropertyAccessor(t,s,i);case"class":return new ClassAttributeAccessor(t,s);case"style":case"css":return new StyleAttributeAccessor(t,s);case"src":case"href":case"role":return new DataAttributeAccessor(t,s,i);default:if(void 0!==$n[i]){const n=$n[i];return new AttributeNSAccessor(t,s,i,n[0],n[1])}const n=i.slice(0,5);return"aria-"===n||"data-"===n?new DataAttributeAccessor(t,s,i):new ElementPropertyAccessor(t,s,i)}}ml(t){return this.dom.ai(t)}}TargetAccessorLocator.inject=[IDOM];const ISVGAnalyzer=DI.Fi("ISVGAnalyzer").$i(t=>t.singleton(class{fa(t,s){return 0}}));class AttrBindingBehavior{bind(t,s,i){i.targetObserver=new DataAttributeAccessor(i.zh.get(ILifecycle),i.target,i.ic)}Nh(t,s,i){}}BindingBehaviorResource.kh("attr",AttrBindingBehavior);class SelfBindingBehavior{bind(t,s,i){if(!i.oc||!i.ff)throw Reporter.error(8);i.fi=i.oc,i.oc=Kt}Nh(t,s,i){i.oc=i.fi,i.fi=null}}BindingBehaviorResource.kh("self",SelfBindingBehavior);class UpdateTriggerBindingBehavior{constructor(t){this.st=t}bind(t,s,i,...n){if(0===n.length)throw Reporter.error(9);if(i.mode!==BindingMode.er&&i.mode!==BindingMode.Qh)throw Reporter.error(10);const h=this.st.tt(i.target,i.ic);if(!h.wf)throw Reporter.error(10);i.targetObserver=h,h.aa=i.targetObserver.wf,h.wf=new EventSubscriber(i.zh.get(IDOM),n)}Nh(t,s,i){i.targetObserver.wf.G(),i.targetObserver.wf=i.targetObserver.aa,i.targetObserver.aa=null}}UpdateTriggerBindingBehavior.inject=[IObserverLocator],BindingBehaviorResource.kh("updateTrigger",UpdateTriggerBindingBehavior);class TextBindingInstruction{constructor(from){this.type="ha",this.from=from}}class TriggerBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=1,this.strategy=DelegationStrategy.Fn,this.to=to}}class DelegateBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.hh,this.to=to}}class CaptureBindingInstruction{constructor(from,to){this.type="hb",this.from=from,this.preventDefault=0,this.strategy=DelegationStrategy.nh,this.to=to}}class SetAttributeInstruction{constructor(value,to){this.type="hd",this.to=to,this.value=value}}class RenderPlan{constructor(dom,t,instructions,dependencies){this.dom=dom,this.dependencies=dependencies,this.instructions=instructions,this.da=t}get wu(){return this.wa||(this.wa=buildTemplateDefinition(null,null,this.da,null,"string"==typeof this.da,null,this.instructions,this.dependencies))}js(t,s){return t.js(this.dom,this.wu,null,s)}ba(t,s){return this.Ou(t,s).create()}Ou(t,s){return t.Ou(this.dom,this.wu,s)}di(t,instructions,dependencies){this.dom.appendChild(t,this.da),instructions.push(...this.instructions),dependencies.push(...this.dependencies)}}const qn=["subject","composing"];class Compose{constructor(dom,t,s,i,n){this.dom=dom,this.subject=null,this.ma=0,this.Yo=n,this.ga=null,this.Gl=t,this.Uu=i,this.Yo.Ho=(()=>{this.ma=0}),this.properties=s.instructions.filter(t=>!qn.includes(t.to)).reduce((t,s)=>(s.to&&(t[s.to]=s),t),{})}as(t){this.pa(this.subject,null,t),this.Yo.as(t,this.$scope)}Dt(t){this.Yo.Dt(t)}Qt(t){this.Yo.Qt(t)}Cs(t){this.ga=null,this.Yo.Cs(t)}ts(t){this.Yo.ts(t)}va(t,s,i){this.pa(t,s,i)}pa(t,s,i){this.ga!==t&&(this.ga=t,t=t instanceof Promise?t.then(t=>this.Aa(t,i)):this.Aa(t,i),this.ma=1,this.Yo.Wo(t,i))}Aa(t,s){const i=this.Ca(t);return i?(i.Wl(this.es.host),i.ru(this.Gl.$scope),i):null}Ca(t){return t?"lockScope"in t?t:"createView"in t?t.ba(this.Uu,this.Gl.$context):"create"in t?t.create():"template"in t?this.Uu.Ou(this.dom,t,this.Gl.$context).create():createElement(this.dom,t,this.properties,this.es.children).ba(this.Uu,this.Gl.$context):null}}Compose.inject=[IDOM,IRenderable,ITargetedInstruction,IRenderingEngine,CompositionCoordinator],c([bindable],Compose.prototype,"subject",void 0),c([bindable],Compose.prototype,"composing",void 0),CustomElementResource.kh({name:"au-compose",containerless:1},Compose);class HTMLDOM{constructor(t){this.Ta=t}addEventListener(t,s,i,n){(i||this.Ta).addEventListener(t,s,n)}appendChild(t,s){t.appendChild(s)}cloneNode(t,s){return t.cloneNode(0!=s)}Hu(t){if(this.ya(t))return t;if(null===t.parentNode)throw Reporter.error(52);const s=this.Ta.createComment("au-end"),i=this.Ta.createComment("au-start");return t.parentNode.replaceChild(s,t),s.parentNode.insertBefore(i,s),s.Oa=i,i.$nodes=null,s}createDocumentFragment(t){if(null==t)return this.Ta.createDocumentFragment();if(this.ai(t)){if(void 0!==t.content)return t.content;const s=this.Ta.createDocumentFragment();return s.appendChild(t),s}return this.Ba(t).content}createElement(name){return this.Ta.createElement(name)}Ba(t){if(null==t)return this.Ta.createElement("template");const template=this.Ta.createElement("template");return template.innerHTML=""+t,template}createTextNode(t){return this.Ta.createTextNode(t)}insertBefore(t,s){s.parentNode.insertBefore(t,s)}Ia(t){return"AU-M"===t.nodeName}ai(t){return t.nodeType>0}ya(t){return"au-end"===t.textContent}ni(t){t.className="au"}Us(t,s){t.Hs(INode,s),t.Hs(Node,s),t.Hs(Element,s),t.Hs(HTMLElement,s),t.Hs(SVGElement,s)}remove(t){t.remove?t.remove():t.parentNode.removeChild(t)}removeEventListener(t,s,i,n){(i||this.Ta).removeEventListener(t,s,n)}setAttribute(t,name,value){t.setAttribute(name,value)}}class Qn{constructor(dom,t){this.dom=dom,this.firstChild=t,this.lastChild=t,this.childNodes=[t],this.targets=[new Jn(t)]}Vl(){return this.targets}insertBefore(t){t.parentNode.insertBefore(this.firstChild,t)}Fl(t){t.appendChild(this.firstChild)}remove(){this.firstChild.remove()}}class Kn{constructor(dom,t){this.dom=dom,this.ka=t;const s=t.querySelectorAll(".au");let i=0,n=s.length;const targets=this.targets=Array(n);for(;n>i;){const t=s[i];targets[i]="AU-M"===t.nodeName?this.dom.Hu(t):t,++i}const h=t.childNodes;i=0;const childNodes=this.childNodes=Array(n=h.length);for(;n>i;)childNodes[i]=h[i],++i;this.firstChild=t.firstChild,this.lastChild=t.lastChild,this.start=this.end=null}Vl(){return this.targets}insertBefore(t){if(t.parentNode.insertBefore(this.ka,t),"au-end"===t.textContent){this.end=t;const s=this.start=t.Oa;s.$nodes=null===s.$nodes?this:PLATFORM.Mt}}Fl(t){t.appendChild(this.ka),this.start=this.end=null}remove(){const t=this.ka;if(null!==this.start&&this.start.$nodes===this){const s=this.end;let i,n=this.start.nextSibling;for(;n!==s;)i=n.nextSibling,t.appendChild(n),n=i;this.start.$nodes=null,this.start=this.end=null}else{let s=this.firstChild;if(s.parentNode!==t){const i=this.lastChild;let n;for(;null!==s&&(n=s.nextSibling,t.appendChild(s),s!==i);)s=n}}}}class Gn{constructor(dom,t){this.dom=dom;const s=dom.createDocumentFragment(t),childNodes=s.childNodes;switch(childNodes.length){case 0:return void(this.mu=(()=>NodeSequence.empty));case 2:const t=childNodes[0];if("AU-M"===t.nodeName||"#comment"===t.nodeName){const t=childNodes[1];if(3===t.nodeType&&0===t.textContent.length)return this.Ra=0,this.da=t,void(this.zi=Qn)}default:this.Ra=1,this.da=s,this.zi=Kn}}mu(){return new this.zi(this.dom,this.da.cloneNode(this.Ra))}}class Jn{get parentNode(){return this.nextSibling.parentNode}constructor(t){this.nextSibling=t,this.textContent=""}remove(){}}(t=>{t.previousSibling=null,t.childNodes=PLATFORM.Ai,t.nodeName="AU-M",t.nodeType=1})(Jn.prototype);class _n{constructor(t){this.pu=t}initialize(t){if(this.pu.has(IDOM,0))return this.pu.get(IDOM);let dom;return dom=void 0!==t?void 0!==t.dom?t.dom:new HTMLDOM(null!==t.host.ownerDocument?t.host.ownerDocument:document):new HTMLDOM(document),Registration.C(IDOM,dom).register(this.pu,IDOM),dom}}_n.inject=[IContainer];class Xn{constructor(dom){this.dom=dom}create(t,s){return new CompiledTemplate(this.dom,s,new Gn(this.dom,s.template),t)}}Xn.inject=[IDOM];let Zn=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){const h=i.nextSibling;let e;dom.Ia(i)&&dom.remove(i);const r=ensureExpression(this.zu,n.from,2048);addBindable(s,e=r.Xe?new MultiInterpolationBinding(this.st,r,h,"textContent",BindingMode.Ds,t):new InterpolationBinding(r.Ze,r,h,"textContent",BindingMode.Ds,this.st,t,1))}};Zn.inject=[IExpressionParser,IObserverLocator],Zn=c([instructionRenderer("ha")],Zn);let Yn=class{constructor(t,s){this.zu=t,this.af=s}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,80|n.strategy+6);addBindable(s,new Listener(dom,n.to,n.strategy,h,i,n.preventDefault,this.af,t))}};Yn.inject=[IExpressionParser,IEventManager],Yn=c([instructionRenderer("hb")],Yn);let xn=class{Ss(dom,t,s,i,n){i.setAttribute(n.to,n.value)}};xn=c([instructionRenderer("hd")],xn);let th=class{constructor(t,s){this.zu=t,this.st=s}Ss(dom,t,s,i,n){const h=ensureExpression(this.zu,n.from,48|BindingMode.Ds);addBindable(s,new Binding(h,i.style,n.to,BindingMode.Ds,this.st,t))}};th.inject=[IExpressionParser,IObserverLocator],th=c([instructionRenderer("hc")],th);const HTMLRenderer={register(t){t.register(Zn,Yn,xn,th)}},sh={mode:"open"};class ih{Rs(dom,t,host,def){if(def.shadowOptions||def.hasSlots){if(def.containerless)throw Reporter.error(21);return new hh(t,host,def)}return def.containerless?new eh(dom,t,host):new rh(t,host)}}const nh={Vf:1};class hh{constructor($customElement,host,t){let shadowOptions;this.host=host,this.shadowRoot=host.Sa(shadowOptions=null!=t.shadowOptions&&"object"==typeof t.shadowOptions&&"mode"in t.shadowOptions?t.shadowOptions:sh),this.host.$customElement=$customElement,this.shadowRoot.$customElement=$customElement}get children(){return this.shadowRoot.childNodes}ku(t){new MutationObserver(t).observe(this.shadowRoot,nh)}ja(){return this.shadowRoot}hs(t){t.Fl(this.shadowRoot)}rs(t){t.remove()}}class eh{constructor(dom,$customElement,host){this.childNodes=host.childNodes.length?PLATFORM.toArray(host.childNodes):PLATFORM.Ai,this.host=dom.Hu(host),this.host.$customElement=$customElement}get children(){return this.childNodes}ku(t){new MutationObserver(t).observe(this.host,nh)}ja(){return this.host.Pa()}hs(t){t.insertBefore(this.host)}rs(t){t.remove()}}class rh{constructor($customElement,host){this.host=host,this.host.$customElement=$customElement}get children(){return this.host.childNodes}ku(t){}ja(){return this.host.Pa()}hs(t){t.Fl(this.host)}rs(t){t.remove()}}const oh=[AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose],HTMLRuntimeConfiguration={register(t){t.register(...oh,RuntimeConfiguration,HTMLRenderer,Registration.singleton(IDOMInitializer,_n),Registration.singleton(IProjectorLocator,ih),Registration.singleton(ITargetAccessorLocator,TargetAccessorLocator),Registration.singleton(ITargetObserverLocator,TargetObserverLocator),Registration.singleton(ITemplateFactory,Xn))},Ei(){const t=DI.Ei();return t.register(HTMLRuntimeConfiguration),t}};ns=Object.freeze({Listener,get AttributeNSAccessor(){return AttributeNSAccessor},get CheckedObserver(){return CheckedObserver},get ClassAttributeAccessor(){return ClassAttributeAccessor},get DataAttributeAccessor(){return DataAttributeAccessor},get ElementPropertyAccessor(){return ElementPropertyAccessor},ListenerTracker,DelegateOrCaptureSubscription,TriggerSubscription,IEventManager,EventSubscriber,TargetAccessorLocator,TargetObserverLocator,get SelectValueObserver(){return SelectValueObserver},get StyleAttributeAccessor(){return StyleAttributeAccessor},ISVGAnalyzer,get ValueAttributeObserver(){return ValueAttributeObserver},AttrBindingBehavior,SelfBindingBehavior,UpdateTriggerBindingBehavior,Compose,HTMLRuntimeConfiguration,createElement,RenderPlan,isHTMLTargetedInstruction,HTMLDOM,HTMLRenderer,CaptureBindingInstruction,DelegateBindingInstruction,SetAttributeInstruction,StylePropertyBindingInstruction:class{constructor(from,to){this.type="hc",this.from=from,this.to=to}},TextBindingInstruction,TriggerBindingInstruction});class TriggerBindingCommand{constructor(){this.Nu=86}compile(t){return new TriggerBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("trigger",TriggerBindingCommand);class DelegateBindingCommand{constructor(){this.Nu=88}compile(t){return new DelegateBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("delegate",DelegateBindingCommand);class CaptureBindingCommand{constructor(){this.Nu=87}compile(t){return new CaptureBindingInstruction(t.Dh,getTarget(t,0))}}BindingCommandResource.kh("capture",CaptureBindingCommand);const ch={id:1,Ea:1,Ma:1},lh={Va:1,Ea:1,Ma:1};class TemplateBinder{constructor(dom,t,s,i){this.dom=dom,this.Ju=t,this.Fa=s,this.Da=i,this.fu=null,this.manifest=null,this.La=null,this.$a=null,this.nf=null}bind(t){const s=this.fu,i=this.$a,n=this.La,h=this.manifest,e=this.fu=this.manifest=new PlainElementSymbol(t),r=t.attributes;let o=0;for(;r.length>o;){const t=r[o],s=this.Fa.parse(t.name,t.value);if(1==ch[s.target])throw Error(`Invalid surrogate attribute: ${s.target}`);const i=this.Ju.xu(s);if(null===i)this.Ua(s);else{if(i.isTemplateController)throw Error("Cannot have template controller on surrogate element.");this.Ha(s,i)}++o}return this.za(t),this.fu=s,this.$a=i,this.La=n,this.manifest=h,e}Na(t,s){switch(s.nodeName){case"LET":return void this.Wa(t,s);case"SLOT":return void(this.fu.hasSlots=1)}const i=this.$a,n=this.La,h=this.manifest;let e;this.nf=s.getAttribute("part");let name=s.getAttribute("as-element");null===name&&(name=s.nodeName.toLowerCase());const r=this.Ju.Yu(name);null===r?this.manifest=new PlainElementSymbol(s):(this.$a=this.La,e=this.La=this.manifest=new CustomElementSymbol(this.dom,s,r)),this.za(s),this.qa(s,t),void 0!==e&&e.br?s.parentNode.replaceChild(e.marker,s):this.manifest.lf&&s.classList.add("au"),this.$a=i,this.La=n,this.manifest=h}Wa(t,s){const i=new LetElementSymbol(this.dom,s);t.childNodes.push(i);const n=s.attributes;let h=0;for(;n.length>h;){const t=n[h];if("to-view-model"===t.name){s.removeAttribute("to-view-model"),i.toViewModel=1;continue}const e=this.Fa.parse(t.name,t.value),r=this.Ju.tf(e),o=this.Da.parse(e.bi,null===r?2048:r.Nu),to=PLATFORM.Gs(e.target),c=new BindableInfo(to,BindingMode.Ds);i.sf.push(new BindingSymbol(r,c,o,e.bi,to)),++h}s.parentNode.replaceChild(i.marker,s)}qa(t,s){const{$a:i,La:n,manifest:h}=this;let e=h;const r=this.Qa(t);let o,c;const l=t.attributes;let u=0;for(;l.length>u;){const t=l[u];if(++u,1==lh[t.name])continue;const s=this.Fa.parse(t.name,t.value),i=this.Ju.xu(s);null===i?this.Ua(s):i.isTemplateController?(c=h.templateController=this.Ka(s,i),e===h?(c.template=h,e=c):(c.templateController=o,c.template=o.template,o.template=c),o=c):this.Ha(s,i)}(function(dom,t,s){const i=s.hf;let n,h=t;for(;h!==s;)h.template===s?(i.parentNode.replaceChild(h.marker,i),"TEMPLATE"===i.nodeName?(h.hf=i,i.remove()):(n=h.hf=dom.Ba()).content.appendChild(i)):(n=h.hf=dom.Ba()).content.appendChild(h.marker),i.removeAttribute(h.Js.wi),h=h.template})(this.dom,e,h),null===r?s.childNodes.push(e):(r.parent=s,r.template=e,(h===n?i:n).parts.push(r),(function(dom,t,s){let i,n;"TEMPLATE"===(i=512&s.flags?s.marker:s.hf).nodeName?t.hf=i:(n=t.hf=dom.Ba()).content.appendChild(i)})(this.dom,r,e))}za(t){let s,i;for(s="TEMPLATE"===t.nodeName?t.content.firstChild:t.firstChild;null!==s;)switch(s.nodeType){case 1:i=s.nextSibling,this.Na(this.manifest,s),s=i;break;case 3:s=this.Ga(s).nextSibling;break;case 4:case 7:case 8:case 10:s=s.nextSibling;break;case 9:case 11:s=s.firstChild}}Ga(t){const s=this.Da.parse(t.wholeText,2048);if(null!==s){const i=new TextSymbol(this.dom,t,s);this.manifest.childNodes.push(i),(function(t){const s=t.hf,i=s.parentNode;for(;null!==s.nextSibling&&3===s.nextSibling.nodeType;)i.removeChild(s.nextSibling);s.textContent="",i.insertBefore(t.marker,s)})(i)}for(;null!==t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t}Ka(t,s){let i;const n=this.Ju.tf(t);if(null===n&&s.Es)i=new TemplateControllerSymbol(this.dom,t,s,this.nf),this.nf=null,this.Ja(i,s,t.bi);else{i=new TemplateControllerSymbol(this.dom,t,s,this.nf);const h=this.Da.parse(t.bi,null===n?2048:n.Nu);i.sf.push(new BindingSymbol(n,s.bindable,h,t.bi,t.target)),this.nf=null}return i}Ha(t,s){const i=this.Ju.tf(t);let n;if(null===i&&s.Es)n=new CustomAttributeSymbol(t,s),this.Ja(n,s,t.bi);else{n=new CustomAttributeSymbol(t,s);const h=this.Da.parse(t.bi,null===i?2048:i.Nu);n.sf.push(new BindingSymbol(i,s.bindable,h,t.bi,t.target))}this.manifest.attributes.push(n),this.manifest.lf=1}Ja(t,s,value){const i=(function(t){const s=[],i=new uh(t),n=i.length;let name,value;for(;n>i.index;){if(0===(name=Jt(i)).length)return s;value=_t(i),s.push({name,value})}return s})(value);let n;for(let h=0,e=i.length;e>h;++h){const e=this.Fa.parse((n=i[h]).name,n.value),r=this.Ju.tf(e),o=this.Da.parse(e.bi,null===r?2048:r.Nu);let c=s.bindables[e.target];void 0===c&&(c=s.bindables[e.target]=new BindableInfo(e.target,BindingMode.Ds)),t.sf.push(new BindingSymbol(r,c,o,e.bi,e.target))}}Ua(t){if(0===t.bi.length)return;const s=this.Ju.tf(t),i=this.manifest,n=this.Da.parse(t.bi,null===s?2048:s.Nu);if(16&i.flags){const h=i.bindables[t.target];void 0!==h?(i.sf.push(new BindingSymbol(s,h,n,t.bi,t.target)),i.lf=1):null===n&&"ref"!==t.target||(i.attributes.push(new PlainAttributeSymbol(t,s,n)),i.lf=1)}else null!==n||"ref"===t.target?(i.attributes.push(new PlainAttributeSymbol(t,s,n)),i.lf=1):i===this.fu&&i.attributes.push(new PlainAttributeSymbol(t,s,n))}Qa(t){const name=t.getAttribute("replace-part");return null===name?null:(t.removeAttribute("replace-part"),new ReplacePartSymbol(name))}}class uh{constructor(t){this.input=t,this.index=0,this.length=t.length}}const fh=String.fromCharCode,ITemplateElementFactory=DI.Fi("ITemplateElementFactory").Li();class ah{constructor(dom){this.dom=dom,this.template=dom.Ba()}Ba(t){if("string"==typeof t){const template=this.template;template.innerHTML=t;const s=template.content.firstElementChild;return null===s||"TEMPLATE"!==s.nodeName||null!==s.nextElementSibling?(this.template=this.dom.Ba(),template):(template.content.removeChild(s),s)}if("TEMPLATE"!==t.nodeName){const template=this.dom.Ba();return template.content.appendChild(t),template}return null!==t.parentNode&&t.parentNode.removeChild(t),t}}ah.inject=[IDOM];const dh=Object.freeze({required:0,compiler:"default"});class wh{constructor(t,s,i){this.ql=t,this.Fa=s,this.Da=i,this._a=null}get name(){return"default"}compile(dom,t,s){const i=new TemplateBinder(dom,new ResourceModel(s),this.Fa,this.Da),template=t.template=this.ql.Ba(t.template),n=i.bind(template);void 0!==t.instructions&&t.instructions!==PLATFORM.Ai||(t.instructions=[]),1==n.hasSlots&&(t.hasSlots=1),this._a=t.instructions;const h=n.attributes,e=h.length;if(e>0){let surrogates;void 0!==t.surrogates&&t.surrogates!==PLATFORM.Ai||(t.surrogates=Array(e)),surrogates=t.surrogates;for(let t=0;e>t;++t)surrogates[t]=this.Xa(h[t])}return this.Za(n),this._a=null,t}Za(t){if(8192&t.flags){const{childNodes}=t;let s;const i=childNodes.length;for(let t=0;i>t;++t)if(128&(s=childNodes[t]).flags)this._a.push([new TextBindingInstruction(s.Fc)]);else if(32&s.flags){const t=s.sf,instructions=[];let i;const n=t.length;for(let s=0;n>s;++s)instructions[s]=new LetBindingInstruction((i=t[s]).Dh,i.target);this._a.push([new LetElementInstruction(instructions,s.toViewModel)])}else this.Ya(s)}}xa(t){const s=this.td(t,1);s[0]=new HydrateElementInstruction(t.res,this.sd(t),this.nd(t)),this._a.push(s)}hd(t){const s=this.td(t,0);s.length>0&&this._a.push(s),this.Za(t)}Ya(t){switch(511&t.flags){case 16:this.xa(t);break;case 64:this.hd(t);break;case 1:this.ed(t)}}ed(t){const s=this.sd(t),i=this._a,n=this._a=[];this.Ya(t.template),this._a=i,this._a.push([new HydrateTemplateController({name:null===t.nf?t.res:t.nf,template:t.hf,instructions:n,build:dh},t.res,s,"else"===t.res)])}sd(t){let s;if(4096&t.flags){const{sf:i}=t,n=i.length;s=Array(n);let h=0;for(;n>h;++h)s[h]=this.rd(i[h])}else s=PLATFORM.Ai;return s}rd(t){return null===t.command?null===t.Dh?new SetPropertyInstruction(t.bi,t.bindable.Ks):new InterpolationInstruction(t.Dh,t.bindable.Ks):t.command.compile(t)}td(t,s){let i;if(2048&t.flags){const{attributes:n}=t,h=n.length;i=Array(s+h);for(let t=0;h>t;++t)i[t+s]=this.Xa(n[t])}else i=s>0?Array(s):PLATFORM.Ai;return i}od(t){const s=this.sd(t);return new HydrateAttributeInstruction(t.res,s)}ld(t){return null===t.command?null===t.Dh?new SetAttributeInstruction(t.Js.bi,t.Js.target):new InterpolationInstruction(t.Dh,t.Js.target):t.command.compile(t)}Xa(t){return"ref"===t.Js.target?new RefBindingInstruction(t.Js.bi):4&t.flags?this.od(t):this.ld(t)}nd(t){let parts;if(16384&t.flags){parts={};const s=t.parts,i=s.length;let n,h,e;for(let t=0;i>t;++t)e=s[t],n=this._a,h=this._a=[],this.Ya(e.template),parts[e.name]={name:e.name,template:e.hf,instructions:h,build:dh},this._a=n}else parts=PLATFORM.Mt;return parts}}wh.inject=[ITemplateElementFactory,IAttributeParser,IExpressionParser];const HTMLBindingLanguage=[TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand],HTMLTemplateCompiler=[Registration.singleton(ITemplateCompiler,wh),Registration.singleton(ITemplateElementFactory,ah)],HTMLJitConfiguration={register(t){t.register(HTMLRuntimeConfiguration,...HTMLTemplateCompiler,JitConfiguration,...HTMLBindingLanguage)},Ei(){const t=DI.Ei();return t.register(HTMLJitConfiguration),t}};return hs=Object.freeze({TriggerBindingCommand,DelegateBindingCommand,CaptureBindingCommand,HTMLBindingLanguage,HTMLTemplateCompiler,HTMLJitConfiguration,stringifyDOM,stringifyInstructions,stringifyTemplateDefinition,TemplateBinder,ITemplateElementFactory}),t.kernel=Xt,t.runtime=ss,t.runtimeHtml=ns,t.jit=is,t.jitHtml=hs,t})({});
